(()=>{var no=Object.create;var it=Object.defineProperty;var oo=Object.getOwnPropertyDescriptor;var ao=Object.getOwnPropertyNames;var ro=Object.getPrototypeOf,lo=Object.prototype.hasOwnProperty;var mo=(e,t,i)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var F=(e,t)=>()=>(e&&(t=e(e=0)),t);var f=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),X=(e,t)=>{for(var i in t)it(e,i,{get:t[i],enumerable:!0})},se=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ao(t))!lo.call(e,n)&&n!==i&&it(e,n,{get:()=>t[n],enumerable:!(s=oo(t,n))||s.enumerable});return e};var mt=(e,t,i)=>(i=e!=null?no(ro(e)):{},se(t||!e||!e.__esModule?it(i,"default",{value:e,enumerable:!0}):i,e)),Y=e=>se(it({},"__esModule",{value:!0}),e);var Z=(e,t,i)=>(mo(e,typeof t!="symbol"?t+"":t,i),i);var ne=f(()=>{PP={}});var k={};X(k,{ARRAY_TYPE:()=>A,EPSILON:()=>x,RANDOM:()=>H,equals:()=>ho,setMatrixArrayType:()=>uo,toRadian:()=>yo});function uo(e){A=e}function yo(e){return e*co}function ho(e,t){return Math.abs(e-t)<=x*Math.max(1,Math.abs(e),Math.abs(t))}var x,A,H,co,z=F(()=>{x=1e-6,A=typeof Float32Array<"u"?Float32Array:Array,H=Math.random;co=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})});var j={};X(j,{add:()=>wo,adjoint:()=>So,clone:()=>_o,copy:()=>Po,create:()=>xt,determinant:()=>vo,equals:()=>Ho,exactEquals:()=>ko,frob:()=>Wo,fromMat2d:()=>Vo,fromMat4:()=>po,fromQuat:()=>Do,fromRotation:()=>Ao,fromScaling:()=>Mo,fromTranslation:()=>Io,fromValues:()=>fo,identity:()=>To,invert:()=>Co,mul:()=>No,multiply:()=>oe,multiplyScalar:()=>Fo,multiplyScalarAndAdd:()=>jo,normalFromMat4:()=>Ro,projection:()=>Eo,rotate:()=>Bo,scale:()=>Lo,set:()=>go,str:()=>Oo,sub:()=>Uo,subtract:()=>ae,translate:()=>xo,transpose:()=>bo});function xt(){var e=new A(9);return A!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function po(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function _o(e){var t=new A(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Po(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function fo(e,t,i,s,n,o,a,l,u){var y=new A(9);return y[0]=e,y[1]=t,y[2]=i,y[3]=s,y[4]=n,y[5]=o,y[6]=a,y[7]=l,y[8]=u,y}function go(e,t,i,s,n,o,a,l,u,y){return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e[4]=o,e[5]=a,e[6]=l,e[7]=u,e[8]=y,e}function To(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function bo(e,t){if(e===t){var i=t[1],s=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=s,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Co(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],y=t[7],r=t[8],m=r*a-l*y,c=-r*o+l*u,h=y*o-a*u,_=i*m+s*c+n*h;return _?(_=1/_,e[0]=m*_,e[1]=(-r*s+n*y)*_,e[2]=(l*s-n*a)*_,e[3]=c*_,e[4]=(r*i-n*u)*_,e[5]=(-l*i+n*o)*_,e[6]=h*_,e[7]=(-y*i+s*u)*_,e[8]=(a*i-s*o)*_,e):null}function So(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],y=t[7],r=t[8];return e[0]=a*r-l*y,e[1]=n*y-s*r,e[2]=s*l-n*a,e[3]=l*u-o*r,e[4]=i*r-n*u,e[5]=n*o-i*l,e[6]=o*y-a*u,e[7]=s*u-i*y,e[8]=i*a-s*o,e}function vo(e){var t=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],y=e[8];return t*(y*o-a*u)+i*(-y*n+a*l)+s*(u*n-o*l)}function oe(e,t,i){var s=t[0],n=t[1],o=t[2],a=t[3],l=t[4],u=t[5],y=t[6],r=t[7],m=t[8],c=i[0],h=i[1],_=i[2],d=i[3],p=i[4],P=i[5],T=i[6],g=i[7],b=i[8];return e[0]=c*s+h*a+_*y,e[1]=c*n+h*l+_*r,e[2]=c*o+h*u+_*m,e[3]=d*s+p*a+P*y,e[4]=d*n+p*l+P*r,e[5]=d*o+p*u+P*m,e[6]=T*s+g*a+b*y,e[7]=T*n+g*l+b*r,e[8]=T*o+g*u+b*m,e}function xo(e,t,i){var s=t[0],n=t[1],o=t[2],a=t[3],l=t[4],u=t[5],y=t[6],r=t[7],m=t[8],c=i[0],h=i[1];return e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=u,e[6]=c*s+h*a+y,e[7]=c*n+h*l+r,e[8]=c*o+h*u+m,e}function Bo(e,t,i){var s=t[0],n=t[1],o=t[2],a=t[3],l=t[4],u=t[5],y=t[6],r=t[7],m=t[8],c=Math.sin(i),h=Math.cos(i);return e[0]=h*s+c*a,e[1]=h*n+c*l,e[2]=h*o+c*u,e[3]=h*a-c*s,e[4]=h*l-c*n,e[5]=h*u-c*o,e[6]=y,e[7]=r,e[8]=m,e}function Lo(e,t,i){var s=i[0],n=i[1];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Io(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Ao(e,t){var i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=-i,e[4]=s,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Mo(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Vo(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Do(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=i+i,l=s+s,u=n+n,y=i*a,r=s*a,m=s*l,c=n*a,h=n*l,_=n*u,d=o*a,p=o*l,P=o*u;return e[0]=1-m-_,e[3]=r-P,e[6]=c+p,e[1]=r+P,e[4]=1-y-_,e[7]=h-d,e[2]=c-p,e[5]=h+d,e[8]=1-y-m,e}function Ro(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],y=t[7],r=t[8],m=t[9],c=t[10],h=t[11],_=t[12],d=t[13],p=t[14],P=t[15],T=i*l-s*a,g=i*u-n*a,b=i*y-o*a,S=s*u-n*l,v=s*y-o*l,R=n*y-o*u,B=r*d-m*_,E=r*p-c*_,V=r*P-h*_,W=m*p-c*d,O=m*P-h*d,D=c*P-h*p,L=T*D-g*O+b*W+S*V-v*E+R*B;return L?(L=1/L,e[0]=(l*D-u*O+y*W)*L,e[1]=(u*V-a*D-y*E)*L,e[2]=(a*O-l*V+y*B)*L,e[3]=(n*O-s*D-o*W)*L,e[4]=(i*D-n*V+o*E)*L,e[5]=(s*V-i*O-o*B)*L,e[6]=(d*R-p*v+P*S)*L,e[7]=(p*b-_*R-P*g)*L,e[8]=(_*v-d*b+P*T)*L,e):null}function Eo(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Oo(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Wo(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function wo(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function ae(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function Fo(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function jo(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e}function ko(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Ho(e,t){var i=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],y=e[7],r=e[8],m=t[0],c=t[1],h=t[2],_=t[3],d=t[4],p=t[5],P=t[6],T=t[7],g=t[8];return Math.abs(i-m)<=x*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-c)<=x*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(n-h)<=x*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-_)<=x*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-d)<=x*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(l-p)<=x*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(u-P)<=x*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(y-T)<=x*Math.max(1,Math.abs(y),Math.abs(T))&&Math.abs(r-g)<=x*Math.max(1,Math.abs(r),Math.abs(g))}var No,Uo,Bt=F(()=>{z();No=oe,Uo=ae});var I={};X(I,{add:()=>xa,adjoint:()=>Yo,clone:()=>Go,copy:()=>zo,create:()=>qo,determinant:()=>Zo,equals:()=>Aa,exactEquals:()=>Ia,frob:()=>va,fromQuat:()=>pa,fromQuat2:()=>ca,fromRotation:()=>ra,fromRotationTranslation:()=>me,fromRotationTranslationScale:()=>ya,fromRotationTranslationScaleOrigin:()=>ha,fromScaling:()=>aa,fromTranslation:()=>oa,fromValues:()=>Qo,fromXRotation:()=>la,fromYRotation:()=>ma,fromZRotation:()=>ua,frustum:()=>_a,getRotation:()=>It,getScaling:()=>ue,getTranslation:()=>Lt,identity:()=>re,invert:()=>Jo,lookAt:()=>ba,mul:()=>Ma,multiply:()=>le,multiplyScalar:()=>Ba,multiplyScalarAndAdd:()=>La,ortho:()=>ga,orthoNO:()=>ye,orthoZO:()=>Ta,perspective:()=>da,perspectiveFromFieldOfView:()=>fa,perspectiveNO:()=>ce,perspectiveZO:()=>Pa,rotate:()=>ea,rotateX:()=>ia,rotateY:()=>sa,rotateZ:()=>na,scale:()=>ta,set:()=>Xo,str:()=>Sa,sub:()=>Va,subtract:()=>he,targetTo:()=>Ca,translate:()=>$o,transpose:()=>Ko});function qo(){var e=new A(16);return A!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Go(e){var t=new A(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function zo(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qo(e,t,i,s,n,o,a,l,u,y,r,m,c,h,_,d){var p=new A(16);return p[0]=e,p[1]=t,p[2]=i,p[3]=s,p[4]=n,p[5]=o,p[6]=a,p[7]=l,p[8]=u,p[9]=y,p[10]=r,p[11]=m,p[12]=c,p[13]=h,p[14]=_,p[15]=d,p}function Xo(e,t,i,s,n,o,a,l,u,y,r,m,c,h,_,d,p){return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e[4]=o,e[5]=a,e[6]=l,e[7]=u,e[8]=y,e[9]=r,e[10]=m,e[11]=c,e[12]=h,e[13]=_,e[14]=d,e[15]=p,e}function re(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ko(e,t){if(e===t){var i=t[1],s=t[2],n=t[3],o=t[6],a=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=o,e[11]=t[14],e[12]=n,e[13]=a,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Jo(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],y=t[7],r=t[8],m=t[9],c=t[10],h=t[11],_=t[12],d=t[13],p=t[14],P=t[15],T=i*l-s*a,g=i*u-n*a,b=i*y-o*a,S=s*u-n*l,v=s*y-o*l,R=n*y-o*u,B=r*d-m*_,E=r*p-c*_,V=r*P-h*_,W=m*p-c*d,O=m*P-h*d,D=c*P-h*p,L=T*D-g*O+b*W+S*V-v*E+R*B;return L?(L=1/L,e[0]=(l*D-u*O+y*W)*L,e[1]=(n*O-s*D-o*W)*L,e[2]=(d*R-p*v+P*S)*L,e[3]=(c*v-m*R-h*S)*L,e[4]=(u*V-a*D-y*E)*L,e[5]=(i*D-n*V+o*E)*L,e[6]=(p*b-_*R-P*g)*L,e[7]=(r*R-c*b+h*g)*L,e[8]=(a*O-l*V+y*B)*L,e[9]=(s*V-i*O-o*B)*L,e[10]=(_*v-d*b+P*T)*L,e[11]=(m*b-r*v-h*T)*L,e[12]=(l*E-a*W-u*B)*L,e[13]=(i*W-s*E+n*B)*L,e[14]=(d*g-_*S-p*T)*L,e[15]=(r*S-m*g+c*T)*L,e):null}function Yo(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],y=t[7],r=t[8],m=t[9],c=t[10],h=t[11],_=t[12],d=t[13],p=t[14],P=t[15];return e[0]=l*(c*P-h*p)-m*(u*P-y*p)+d*(u*h-y*c),e[1]=-(s*(c*P-h*p)-m*(n*P-o*p)+d*(n*h-o*c)),e[2]=s*(u*P-y*p)-l*(n*P-o*p)+d*(n*y-o*u),e[3]=-(s*(u*h-y*c)-l*(n*h-o*c)+m*(n*y-o*u)),e[4]=-(a*(c*P-h*p)-r*(u*P-y*p)+_*(u*h-y*c)),e[5]=i*(c*P-h*p)-r*(n*P-o*p)+_*(n*h-o*c),e[6]=-(i*(u*P-y*p)-a*(n*P-o*p)+_*(n*y-o*u)),e[7]=i*(u*h-y*c)-a*(n*h-o*c)+r*(n*y-o*u),e[8]=a*(m*P-h*d)-r*(l*P-y*d)+_*(l*h-y*m),e[9]=-(i*(m*P-h*d)-r*(s*P-o*d)+_*(s*h-o*m)),e[10]=i*(l*P-y*d)-a*(s*P-o*d)+_*(s*y-o*l),e[11]=-(i*(l*h-y*m)-a*(s*h-o*m)+r*(s*y-o*l)),e[12]=-(a*(m*p-c*d)-r*(l*p-u*d)+_*(l*c-u*m)),e[13]=i*(m*p-c*d)-r*(s*p-n*d)+_*(s*c-n*m),e[14]=-(i*(l*p-u*d)-a*(s*p-n*d)+_*(s*u-n*l)),e[15]=i*(l*c-u*m)-a*(s*c-n*m)+r*(s*u-n*l),e}function Zo(e){var t=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],y=e[8],r=e[9],m=e[10],c=e[11],h=e[12],_=e[13],d=e[14],p=e[15],P=t*a-i*o,T=t*l-s*o,g=t*u-n*o,b=i*l-s*a,S=i*u-n*a,v=s*u-n*l,R=y*_-r*h,B=y*d-m*h,E=y*p-c*h,V=r*d-m*_,W=r*p-c*_,O=m*p-c*d;return P*O-T*W+g*V+b*E-S*B+v*R}function le(e,t,i){var s=t[0],n=t[1],o=t[2],a=t[3],l=t[4],u=t[5],y=t[6],r=t[7],m=t[8],c=t[9],h=t[10],_=t[11],d=t[12],p=t[13],P=t[14],T=t[15],g=i[0],b=i[1],S=i[2],v=i[3];return e[0]=g*s+b*l+S*m+v*d,e[1]=g*n+b*u+S*c+v*p,e[2]=g*o+b*y+S*h+v*P,e[3]=g*a+b*r+S*_+v*T,g=i[4],b=i[5],S=i[6],v=i[7],e[4]=g*s+b*l+S*m+v*d,e[5]=g*n+b*u+S*c+v*p,e[6]=g*o+b*y+S*h+v*P,e[7]=g*a+b*r+S*_+v*T,g=i[8],b=i[9],S=i[10],v=i[11],e[8]=g*s+b*l+S*m+v*d,e[9]=g*n+b*u+S*c+v*p,e[10]=g*o+b*y+S*h+v*P,e[11]=g*a+b*r+S*_+v*T,g=i[12],b=i[13],S=i[14],v=i[15],e[12]=g*s+b*l+S*m+v*d,e[13]=g*n+b*u+S*c+v*p,e[14]=g*o+b*y+S*h+v*P,e[15]=g*a+b*r+S*_+v*T,e}function $o(e,t,i){var s=i[0],n=i[1],o=i[2],a,l,u,y,r,m,c,h,_,d,p,P;return t===e?(e[12]=t[0]*s+t[4]*n+t[8]*o+t[12],e[13]=t[1]*s+t[5]*n+t[9]*o+t[13],e[14]=t[2]*s+t[6]*n+t[10]*o+t[14],e[15]=t[3]*s+t[7]*n+t[11]*o+t[15]):(a=t[0],l=t[1],u=t[2],y=t[3],r=t[4],m=t[5],c=t[6],h=t[7],_=t[8],d=t[9],p=t[10],P=t[11],e[0]=a,e[1]=l,e[2]=u,e[3]=y,e[4]=r,e[5]=m,e[6]=c,e[7]=h,e[8]=_,e[9]=d,e[10]=p,e[11]=P,e[12]=a*s+r*n+_*o+t[12],e[13]=l*s+m*n+d*o+t[13],e[14]=u*s+c*n+p*o+t[14],e[15]=y*s+h*n+P*o+t[15]),e}function ta(e,t,i){var s=i[0],n=i[1],o=i[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ea(e,t,i,s){var n=s[0],o=s[1],a=s[2],l=Math.hypot(n,o,a),u,y,r,m,c,h,_,d,p,P,T,g,b,S,v,R,B,E,V,W,O,D,L,U;return l<x?null:(l=1/l,n*=l,o*=l,a*=l,u=Math.sin(i),y=Math.cos(i),r=1-y,m=t[0],c=t[1],h=t[2],_=t[3],d=t[4],p=t[5],P=t[6],T=t[7],g=t[8],b=t[9],S=t[10],v=t[11],R=n*n*r+y,B=o*n*r+a*u,E=a*n*r-o*u,V=n*o*r-a*u,W=o*o*r+y,O=a*o*r+n*u,D=n*a*r+o*u,L=o*a*r-n*u,U=a*a*r+y,e[0]=m*R+d*B+g*E,e[1]=c*R+p*B+b*E,e[2]=h*R+P*B+S*E,e[3]=_*R+T*B+v*E,e[4]=m*V+d*W+g*O,e[5]=c*V+p*W+b*O,e[6]=h*V+P*W+S*O,e[7]=_*V+T*W+v*O,e[8]=m*D+d*L+g*U,e[9]=c*D+p*L+b*U,e[10]=h*D+P*L+S*U,e[11]=_*D+T*L+v*U,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ia(e,t,i){var s=Math.sin(i),n=Math.cos(i),o=t[4],a=t[5],l=t[6],u=t[7],y=t[8],r=t[9],m=t[10],c=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+y*s,e[5]=a*n+r*s,e[6]=l*n+m*s,e[7]=u*n+c*s,e[8]=y*n-o*s,e[9]=r*n-a*s,e[10]=m*n-l*s,e[11]=c*n-u*s,e}function sa(e,t,i){var s=Math.sin(i),n=Math.cos(i),o=t[0],a=t[1],l=t[2],u=t[3],y=t[8],r=t[9],m=t[10],c=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-y*s,e[1]=a*n-r*s,e[2]=l*n-m*s,e[3]=u*n-c*s,e[8]=o*s+y*n,e[9]=a*s+r*n,e[10]=l*s+m*n,e[11]=u*s+c*n,e}function na(e,t,i){var s=Math.sin(i),n=Math.cos(i),o=t[0],a=t[1],l=t[2],u=t[3],y=t[4],r=t[5],m=t[6],c=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+y*s,e[1]=a*n+r*s,e[2]=l*n+m*s,e[3]=u*n+c*s,e[4]=y*n-o*s,e[5]=r*n-a*s,e[6]=m*n-l*s,e[7]=c*n-u*s,e}function oa(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function aa(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ra(e,t,i){var s=i[0],n=i[1],o=i[2],a=Math.hypot(s,n,o),l,u,y;return a<x?null:(a=1/a,s*=a,n*=a,o*=a,l=Math.sin(t),u=Math.cos(t),y=1-u,e[0]=s*s*y+u,e[1]=n*s*y+o*l,e[2]=o*s*y-n*l,e[3]=0,e[4]=s*n*y-o*l,e[5]=n*n*y+u,e[6]=o*n*y+s*l,e[7]=0,e[8]=s*o*y+n*l,e[9]=n*o*y-s*l,e[10]=o*o*y+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function la(e,t){var i=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ma(e,t){var i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ua(e,t){var i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function me(e,t,i){var s=t[0],n=t[1],o=t[2],a=t[3],l=s+s,u=n+n,y=o+o,r=s*l,m=s*u,c=s*y,h=n*u,_=n*y,d=o*y,p=a*l,P=a*u,T=a*y;return e[0]=1-(h+d),e[1]=m+T,e[2]=c-P,e[3]=0,e[4]=m-T,e[5]=1-(r+d),e[6]=_+p,e[7]=0,e[8]=c+P,e[9]=_-p,e[10]=1-(r+h),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function ca(e,t){var i=new A(3),s=-t[0],n=-t[1],o=-t[2],a=t[3],l=t[4],u=t[5],y=t[6],r=t[7],m=s*s+n*n+o*o+a*a;return m>0?(i[0]=(l*a+r*s+u*o-y*n)*2/m,i[1]=(u*a+r*n+y*s-l*o)*2/m,i[2]=(y*a+r*o+l*n-u*s)*2/m):(i[0]=(l*a+r*s+u*o-y*n)*2,i[1]=(u*a+r*n+y*s-l*o)*2,i[2]=(y*a+r*o+l*n-u*s)*2),me(e,t,i),e}function Lt(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function ue(e,t){var i=t[0],s=t[1],n=t[2],o=t[4],a=t[5],l=t[6],u=t[8],y=t[9],r=t[10];return e[0]=Math.hypot(i,s,n),e[1]=Math.hypot(o,a,l),e[2]=Math.hypot(u,y,r),e}function It(e,t){var i=new A(3);ue(i,t);var s=1/i[0],n=1/i[1],o=1/i[2],a=t[0]*s,l=t[1]*n,u=t[2]*o,y=t[4]*s,r=t[5]*n,m=t[6]*o,c=t[8]*s,h=t[9]*n,_=t[10]*o,d=a+r+_,p=0;return d>0?(p=Math.sqrt(d+1)*2,e[3]=.25*p,e[0]=(m-h)/p,e[1]=(c-u)/p,e[2]=(l-y)/p):a>r&&a>_?(p=Math.sqrt(1+a-r-_)*2,e[3]=(m-h)/p,e[0]=.25*p,e[1]=(l+y)/p,e[2]=(c+u)/p):r>_?(p=Math.sqrt(1+r-a-_)*2,e[3]=(c-u)/p,e[0]=(l+y)/p,e[1]=.25*p,e[2]=(m+h)/p):(p=Math.sqrt(1+_-a-r)*2,e[3]=(l-y)/p,e[0]=(c+u)/p,e[1]=(m+h)/p,e[2]=.25*p),e}function ya(e,t,i,s){var n=t[0],o=t[1],a=t[2],l=t[3],u=n+n,y=o+o,r=a+a,m=n*u,c=n*y,h=n*r,_=o*y,d=o*r,p=a*r,P=l*u,T=l*y,g=l*r,b=s[0],S=s[1],v=s[2];return e[0]=(1-(_+p))*b,e[1]=(c+g)*b,e[2]=(h-T)*b,e[3]=0,e[4]=(c-g)*S,e[5]=(1-(m+p))*S,e[6]=(d+P)*S,e[7]=0,e[8]=(h+T)*v,e[9]=(d-P)*v,e[10]=(1-(m+_))*v,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function ha(e,t,i,s,n){var o=t[0],a=t[1],l=t[2],u=t[3],y=o+o,r=a+a,m=l+l,c=o*y,h=o*r,_=o*m,d=a*r,p=a*m,P=l*m,T=u*y,g=u*r,b=u*m,S=s[0],v=s[1],R=s[2],B=n[0],E=n[1],V=n[2],W=(1-(d+P))*S,O=(h+b)*S,D=(_-g)*S,L=(h-b)*v,U=(1-(c+P))*v,tt=(p+T)*v,et=(_+g)*R,ee=(p-T)*R,ie=(1-(c+d))*R;return e[0]=W,e[1]=O,e[2]=D,e[3]=0,e[4]=L,e[5]=U,e[6]=tt,e[7]=0,e[8]=et,e[9]=ee,e[10]=ie,e[11]=0,e[12]=i[0]+B-(W*B+L*E+et*V),e[13]=i[1]+E-(O*B+U*E+ee*V),e[14]=i[2]+V-(D*B+tt*E+ie*V),e[15]=1,e}function pa(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=i+i,l=s+s,u=n+n,y=i*a,r=s*a,m=s*l,c=n*a,h=n*l,_=n*u,d=o*a,p=o*l,P=o*u;return e[0]=1-m-_,e[1]=r+P,e[2]=c-p,e[3]=0,e[4]=r-P,e[5]=1-y-_,e[6]=h+d,e[7]=0,e[8]=c+p,e[9]=h-d,e[10]=1-y-m,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _a(e,t,i,s,n,o,a){var l=1/(i-t),u=1/(n-s),y=1/(o-a);return e[0]=o*2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*u,e[6]=0,e[7]=0,e[8]=(i+t)*l,e[9]=(n+s)*u,e[10]=(a+o)*y,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*y,e[15]=0,e}function ce(e,t,i,s,n){var o=1/Math.tan(t/2),a;return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(a=1/(s-n),e[10]=(n+s)*a,e[14]=2*n*s*a):(e[10]=-1,e[14]=-2*s),e}function Pa(e,t,i,s,n){var o=1/Math.tan(t/2),a;return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(a=1/(s-n),e[10]=n*a,e[14]=n*s*a):(e[10]=-1,e[14]=-s),e}function fa(e,t,i,s){var n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+l),y=2/(n+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=y,e[6]=0,e[7]=0,e[8]=-((a-l)*u*.5),e[9]=(n-o)*y*.5,e[10]=s/(i-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i/(i-s),e[15]=0,e}function ye(e,t,i,s,n,o,a){var l=1/(t-i),u=1/(s-n),y=1/(o-a);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*y,e[11]=0,e[12]=(t+i)*l,e[13]=(n+s)*u,e[14]=(a+o)*y,e[15]=1,e}function Ta(e,t,i,s,n,o,a){var l=1/(t-i),u=1/(s-n),y=1/(o-a);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=y,e[11]=0,e[12]=(t+i)*l,e[13]=(n+s)*u,e[14]=o*y,e[15]=1,e}function ba(e,t,i,s){var n,o,a,l,u,y,r,m,c,h,_=t[0],d=t[1],p=t[2],P=s[0],T=s[1],g=s[2],b=i[0],S=i[1],v=i[2];return Math.abs(_-b)<x&&Math.abs(d-S)<x&&Math.abs(p-v)<x?re(e):(r=_-b,m=d-S,c=p-v,h=1/Math.hypot(r,m,c),r*=h,m*=h,c*=h,n=T*c-g*m,o=g*r-P*c,a=P*m-T*r,h=Math.hypot(n,o,a),h?(h=1/h,n*=h,o*=h,a*=h):(n=0,o=0,a=0),l=m*a-c*o,u=c*n-r*a,y=r*o-m*n,h=Math.hypot(l,u,y),h?(h=1/h,l*=h,u*=h,y*=h):(l=0,u=0,y=0),e[0]=n,e[1]=l,e[2]=r,e[3]=0,e[4]=o,e[5]=u,e[6]=m,e[7]=0,e[8]=a,e[9]=y,e[10]=c,e[11]=0,e[12]=-(n*_+o*d+a*p),e[13]=-(l*_+u*d+y*p),e[14]=-(r*_+m*d+c*p),e[15]=1,e)}function Ca(e,t,i,s){var n=t[0],o=t[1],a=t[2],l=s[0],u=s[1],y=s[2],r=n-i[0],m=o-i[1],c=a-i[2],h=r*r+m*m+c*c;h>0&&(h=1/Math.sqrt(h),r*=h,m*=h,c*=h);var _=u*c-y*m,d=y*r-l*c,p=l*m-u*r;return h=_*_+d*d+p*p,h>0&&(h=1/Math.sqrt(h),_*=h,d*=h,p*=h),e[0]=_,e[1]=d,e[2]=p,e[3]=0,e[4]=m*p-c*d,e[5]=c*_-r*p,e[6]=r*d-m*_,e[7]=0,e[8]=r,e[9]=m,e[10]=c,e[11]=0,e[12]=n,e[13]=o,e[14]=a,e[15]=1,e}function Sa(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function va(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function xa(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function he(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function Ba(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function La(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e[9]=t[9]+i[9]*s,e[10]=t[10]+i[10]*s,e[11]=t[11]+i[11]*s,e[12]=t[12]+i[12]*s,e[13]=t[13]+i[13]*s,e[14]=t[14]+i[14]*s,e[15]=t[15]+i[15]*s,e}function Ia(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Aa(e,t){var i=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],y=e[7],r=e[8],m=e[9],c=e[10],h=e[11],_=e[12],d=e[13],p=e[14],P=e[15],T=t[0],g=t[1],b=t[2],S=t[3],v=t[4],R=t[5],B=t[6],E=t[7],V=t[8],W=t[9],O=t[10],D=t[11],L=t[12],U=t[13],tt=t[14],et=t[15];return Math.abs(i-T)<=x*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-g)<=x*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(n-b)<=x*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-S)<=x*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(a-v)<=x*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(l-R)<=x*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(u-B)<=x*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(y-E)<=x*Math.max(1,Math.abs(y),Math.abs(E))&&Math.abs(r-V)<=x*Math.max(1,Math.abs(r),Math.abs(V))&&Math.abs(m-W)<=x*Math.max(1,Math.abs(m),Math.abs(W))&&Math.abs(c-O)<=x*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(h-D)<=x*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(_-L)<=x*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(d-U)<=x*Math.max(1,Math.abs(d),Math.abs(U))&&Math.abs(p-tt)<=x*Math.max(1,Math.abs(p),Math.abs(tt))&&Math.abs(P-et)<=x*Math.max(1,Math.abs(P),Math.abs(et))}var da,ga,Ma,Va,At=F(()=>{z();da=ce;ga=ye;Ma=le,Va=he});var C={};X(C,{add:()=>Oa,angle:()=>er,bezier:()=>Qa,ceil:()=>Wa,clone:()=>Da,copy:()=>Ra,create:()=>ut,cross:()=>st,dist:()=>mr,distance:()=>fe,div:()=>lr,divide:()=>Pe,dot:()=>yt,equals:()=>or,exactEquals:()=>nr,floor:()=>wa,forEach:()=>yr,fromValues:()=>ct,hermite:()=>za,inverse:()=>qa,len:()=>Vt,length:()=>pe,lerp:()=>Ga,max:()=>ja,min:()=>Fa,mul:()=>rr,multiply:()=>de,negate:()=>Ua,normalize:()=>Mt,random:()=>Xa,rotateX:()=>Za,rotateY:()=>$a,rotateZ:()=>tr,round:()=>ka,scale:()=>Ha,scaleAndAdd:()=>Na,set:()=>Ea,sqrDist:()=>ur,sqrLen:()=>cr,squaredDistance:()=>ge,squaredLength:()=>Te,str:()=>sr,sub:()=>ar,subtract:()=>_e,transformMat3:()=>Ja,transformMat4:()=>Ka,transformQuat:()=>Ya,zero:()=>ir});function ut(){var e=new A(3);return A!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Da(e){var t=new A(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function pe(e){var t=e[0],i=e[1],s=e[2];return Math.hypot(t,i,s)}function ct(e,t,i){var s=new A(3);return s[0]=e,s[1]=t,s[2]=i,s}function Ra(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ea(e,t,i,s){return e[0]=t,e[1]=i,e[2]=s,e}function Oa(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function _e(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function de(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function Pe(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function Wa(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function wa(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Fa(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function ja(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function ka(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Ha(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Na(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e}function fe(e,t){var i=t[0]-e[0],s=t[1]-e[1],n=t[2]-e[2];return Math.hypot(i,s,n)}function ge(e,t){var i=t[0]-e[0],s=t[1]-e[1],n=t[2]-e[2];return i*i+s*s+n*n}function Te(e){var t=e[0],i=e[1],s=e[2];return t*t+i*i+s*s}function Ua(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function qa(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Mt(e,t){var i=t[0],s=t[1],n=t[2],o=i*i+s*s+n*n;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function yt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function st(e,t,i){var s=t[0],n=t[1],o=t[2],a=i[0],l=i[1],u=i[2];return e[0]=n*u-o*l,e[1]=o*a-s*u,e[2]=s*l-n*a,e}function Ga(e,t,i,s){var n=t[0],o=t[1],a=t[2];return e[0]=n+s*(i[0]-n),e[1]=o+s*(i[1]-o),e[2]=a+s*(i[2]-a),e}function za(e,t,i,s,n,o){var a=o*o,l=a*(2*o-3)+1,u=a*(o-2)+o,y=a*(o-1),r=a*(3-2*o);return e[0]=t[0]*l+i[0]*u+s[0]*y+n[0]*r,e[1]=t[1]*l+i[1]*u+s[1]*y+n[1]*r,e[2]=t[2]*l+i[2]*u+s[2]*y+n[2]*r,e}function Qa(e,t,i,s,n,o){var a=1-o,l=a*a,u=o*o,y=l*a,r=3*o*l,m=3*u*a,c=u*o;return e[0]=t[0]*y+i[0]*r+s[0]*m+n[0]*c,e[1]=t[1]*y+i[1]*r+s[1]*m+n[1]*c,e[2]=t[2]*y+i[2]*r+s[2]*m+n[2]*c,e}function Xa(e,t){t=t||1;var i=H()*2*Math.PI,s=H()*2-1,n=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=s*t,e}function Ka(e,t,i){var s=t[0],n=t[1],o=t[2],a=i[3]*s+i[7]*n+i[11]*o+i[15];return a=a||1,e[0]=(i[0]*s+i[4]*n+i[8]*o+i[12])/a,e[1]=(i[1]*s+i[5]*n+i[9]*o+i[13])/a,e[2]=(i[2]*s+i[6]*n+i[10]*o+i[14])/a,e}function Ja(e,t,i){var s=t[0],n=t[1],o=t[2];return e[0]=s*i[0]+n*i[3]+o*i[6],e[1]=s*i[1]+n*i[4]+o*i[7],e[2]=s*i[2]+n*i[5]+o*i[8],e}function Ya(e,t,i){var s=i[0],n=i[1],o=i[2],a=i[3],l=t[0],u=t[1],y=t[2],r=n*y-o*u,m=o*l-s*y,c=s*u-n*l,h=n*c-o*m,_=o*r-s*c,d=s*m-n*r,p=a*2;return r*=p,m*=p,c*=p,h*=2,_*=2,d*=2,e[0]=l+r+h,e[1]=u+m+_,e[2]=y+c+d,e}function Za(e,t,i,s){var n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0],o[1]=n[1]*Math.cos(s)-n[2]*Math.sin(s),o[2]=n[1]*Math.sin(s)+n[2]*Math.cos(s),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function $a(e,t,i,s){var n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[2]*Math.sin(s)+n[0]*Math.cos(s),o[1]=n[1],o[2]=n[2]*Math.cos(s)-n[0]*Math.sin(s),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function tr(e,t,i,s){var n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0]*Math.cos(s)-n[1]*Math.sin(s),o[1]=n[0]*Math.sin(s)+n[1]*Math.cos(s),o[2]=n[2],e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function er(e,t){var i=e[0],s=e[1],n=e[2],o=t[0],a=t[1],l=t[2],u=Math.sqrt(i*i+s*s+n*n),y=Math.sqrt(o*o+a*a+l*l),r=u*y,m=r&&yt(e,t)/r;return Math.acos(Math.min(Math.max(m,-1),1))}function ir(e){return e[0]=0,e[1]=0,e[2]=0,e}function sr(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function nr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function or(e,t){var i=e[0],s=e[1],n=e[2],o=t[0],a=t[1],l=t[2];return Math.abs(i-o)<=x*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-a)<=x*Math.max(1,Math.abs(s),Math.abs(a))&&Math.abs(n-l)<=x*Math.max(1,Math.abs(n),Math.abs(l))}var ar,rr,lr,mr,ur,Vt,cr,yr,Dt=F(()=>{z();ar=_e,rr=de,lr=Pe,mr=fe,ur=ge,Vt=pe,cr=Te,yr=function(){var e=ut();return function(t,i,s,n,o,a){var l,u;for(i||(i=3),s||(s=0),n?u=Math.min(n*i+s,t.length):u=t.length,l=s;l<u;l+=i)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],o(e,e,a),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2];return t}}()});var K={};X(K,{add:()=>wt,ceil:()=>hr,clone:()=>Rt,copy:()=>Ot,create:()=>be,cross:()=>br,dist:()=>Mr,distance:()=>xe,div:()=>Ar,divide:()=>ve,dot:()=>kt,equals:()=>Ut,exactEquals:()=>Nt,floor:()=>pr,forEach:()=>Er,fromValues:()=>Et,inverse:()=>Tr,len:()=>Dr,length:()=>ht,lerp:()=>Ht,max:()=>dr,min:()=>_r,mul:()=>Ir,multiply:()=>Se,negate:()=>gr,normalize:()=>jt,random:()=>Cr,round:()=>Pr,scale:()=>Ft,scaleAndAdd:()=>fr,set:()=>Wt,sqrDist:()=>Vr,sqrLen:()=>Rr,squaredDistance:()=>Be,squaredLength:()=>pt,str:()=>Br,sub:()=>Lr,subtract:()=>Ce,transformMat4:()=>Sr,transformQuat:()=>vr,zero:()=>xr});function be(){var e=new A(4);return A!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Rt(e){var t=new A(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Et(e,t,i,s){var n=new A(4);return n[0]=e,n[1]=t,n[2]=i,n[3]=s,n}function Ot(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Wt(e,t,i,s,n){return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e}function wt(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function Ce(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function Se(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function ve(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function hr(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function pr(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function _r(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function dr(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function Pr(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Ft(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function fr(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e}function xe(e,t){var i=t[0]-e[0],s=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return Math.hypot(i,s,n,o)}function Be(e,t){var i=t[0]-e[0],s=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return i*i+s*s+n*n+o*o}function ht(e){var t=e[0],i=e[1],s=e[2],n=e[3];return Math.hypot(t,i,s,n)}function pt(e){var t=e[0],i=e[1],s=e[2],n=e[3];return t*t+i*i+s*s+n*n}function gr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Tr(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function jt(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=i*i+s*s+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=i*a,e[1]=s*a,e[2]=n*a,e[3]=o*a,e}function kt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function br(e,t,i,s){var n=i[0]*s[1]-i[1]*s[0],o=i[0]*s[2]-i[2]*s[0],a=i[0]*s[3]-i[3]*s[0],l=i[1]*s[2]-i[2]*s[1],u=i[1]*s[3]-i[3]*s[1],y=i[2]*s[3]-i[3]*s[2],r=t[0],m=t[1],c=t[2],h=t[3];return e[0]=m*y-c*u+h*l,e[1]=-(r*y)+c*a-h*o,e[2]=r*u-m*a+h*n,e[3]=-(r*l)+m*o-c*n,e}function Ht(e,t,i,s){var n=t[0],o=t[1],a=t[2],l=t[3];return e[0]=n+s*(i[0]-n),e[1]=o+s*(i[1]-o),e[2]=a+s*(i[2]-a),e[3]=l+s*(i[3]-l),e}function Cr(e,t){t=t||1;var i,s,n,o,a,l;do i=H()*2-1,s=H()*2-1,a=i*i+s*s;while(a>=1);do n=H()*2-1,o=H()*2-1,l=n*n+o*o;while(l>=1);var u=Math.sqrt((1-a)/l);return e[0]=t*i,e[1]=t*s,e[2]=t*n*u,e[3]=t*o*u,e}function Sr(e,t,i){var s=t[0],n=t[1],o=t[2],a=t[3];return e[0]=i[0]*s+i[4]*n+i[8]*o+i[12]*a,e[1]=i[1]*s+i[5]*n+i[9]*o+i[13]*a,e[2]=i[2]*s+i[6]*n+i[10]*o+i[14]*a,e[3]=i[3]*s+i[7]*n+i[11]*o+i[15]*a,e}function vr(e,t,i){var s=t[0],n=t[1],o=t[2],a=i[0],l=i[1],u=i[2],y=i[3],r=y*s+l*o-u*n,m=y*n+u*s-a*o,c=y*o+a*n-l*s,h=-a*s-l*n-u*o;return e[0]=r*y+h*-a+m*-u-c*-l,e[1]=m*y+h*-l+c*-a-r*-u,e[2]=c*y+h*-u+r*-l-m*-a,e[3]=t[3],e}function xr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function Br(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Nt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Ut(e,t){var i=e[0],s=e[1],n=e[2],o=e[3],a=t[0],l=t[1],u=t[2],y=t[3];return Math.abs(i-a)<=x*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-l)<=x*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-u)<=x*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-y)<=x*Math.max(1,Math.abs(o),Math.abs(y))}var Lr,Ir,Ar,Mr,Vr,Dr,Rr,Er,qt=F(()=>{z();Lr=Ce,Ir=Se,Ar=ve,Mr=xe,Vr=Be,Dr=ht,Rr=pt,Er=function(){var e=be();return function(t,i,s,n,o,a){var l,u;for(i||(i=4),s||(s=0),n?u=Math.min(n*i+s,t.length):u=t.length,l=s;l<u;l+=i)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],o(e,e,a),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}}()});var M={};X(M,{add:()=>Xr,calculateW:()=>Fr,clone:()=>Gr,conjugate:()=>Nr,copy:()=>dt,create:()=>nt,dot:()=>Pt,equals:()=>tl,exactEquals:()=>$r,exp:()=>Ae,fromEuler:()=>Ur,fromMat3:()=>Ve,fromValues:()=>zr,getAngle:()=>wr,getAxisAngle:()=>Wr,identity:()=>Or,invert:()=>Hr,len:()=>Yr,length:()=>ft,lerp:()=>Jr,ln:()=>Me,mul:()=>Kr,multiply:()=>Ie,normalize:()=>Xt,pow:()=>jr,random:()=>kr,rotateX:()=>Gt,rotateY:()=>zt,rotateZ:()=>Qt,rotationTo:()=>el,scale:()=>De,set:()=>Qr,setAxes:()=>sl,setAxisAngle:()=>Le,slerp:()=>_t,sqlerp:()=>il,sqrLen:()=>Zr,squaredLength:()=>gt,str:()=>qr});function nt(){var e=new A(4);return A!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Or(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Le(e,t,i){i=i*.5;var s=Math.sin(i);return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=Math.cos(i),e}function Wr(e,t){var i=Math.acos(t[3])*2,s=Math.sin(i/2);return s>x?(e[0]=t[0]/s,e[1]=t[1]/s,e[2]=t[2]/s):(e[0]=1,e[1]=0,e[2]=0),i}function wr(e,t){var i=Pt(e,t);return Math.acos(2*i*i-1)}function Ie(e,t,i){var s=t[0],n=t[1],o=t[2],a=t[3],l=i[0],u=i[1],y=i[2],r=i[3];return e[0]=s*r+a*l+n*y-o*u,e[1]=n*r+a*u+o*l-s*y,e[2]=o*r+a*y+s*u-n*l,e[3]=a*r-s*l-n*u-o*y,e}function Gt(e,t,i){i*=.5;var s=t[0],n=t[1],o=t[2],a=t[3],l=Math.sin(i),u=Math.cos(i);return e[0]=s*u+a*l,e[1]=n*u+o*l,e[2]=o*u-n*l,e[3]=a*u-s*l,e}function zt(e,t,i){i*=.5;var s=t[0],n=t[1],o=t[2],a=t[3],l=Math.sin(i),u=Math.cos(i);return e[0]=s*u-o*l,e[1]=n*u+a*l,e[2]=o*u+s*l,e[3]=a*u-n*l,e}function Qt(e,t,i){i*=.5;var s=t[0],n=t[1],o=t[2],a=t[3],l=Math.sin(i),u=Math.cos(i);return e[0]=s*u+n*l,e[1]=n*u-s*l,e[2]=o*u+a*l,e[3]=a*u-o*l,e}function Fr(e,t){var i=t[0],s=t[1],n=t[2];return e[0]=i,e[1]=s,e[2]=n,e[3]=Math.sqrt(Math.abs(1-i*i-s*s-n*n)),e}function Ae(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=Math.sqrt(i*i+s*s+n*n),l=Math.exp(o),u=a>0?l*Math.sin(a)/a:0;return e[0]=i*u,e[1]=s*u,e[2]=n*u,e[3]=l*Math.cos(a),e}function Me(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=Math.sqrt(i*i+s*s+n*n),l=a>0?Math.atan2(a,o)/a:0;return e[0]=i*l,e[1]=s*l,e[2]=n*l,e[3]=.5*Math.log(i*i+s*s+n*n+o*o),e}function jr(e,t,i){return Me(e,t),De(e,e,i),Ae(e,e),e}function _t(e,t,i,s){var n=t[0],o=t[1],a=t[2],l=t[3],u=i[0],y=i[1],r=i[2],m=i[3],c,h,_,d,p;return h=n*u+o*y+a*r+l*m,h<0&&(h=-h,u=-u,y=-y,r=-r,m=-m),1-h>x?(c=Math.acos(h),_=Math.sin(c),d=Math.sin((1-s)*c)/_,p=Math.sin(s*c)/_):(d=1-s,p=s),e[0]=d*n+p*u,e[1]=d*o+p*y,e[2]=d*a+p*r,e[3]=d*l+p*m,e}function kr(e){var t=H(),i=H(),s=H(),n=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=n*Math.sin(2*Math.PI*i),e[1]=n*Math.cos(2*Math.PI*i),e[2]=o*Math.sin(2*Math.PI*s),e[3]=o*Math.cos(2*Math.PI*s),e}function Hr(e,t){var i=t[0],s=t[1],n=t[2],o=t[3],a=i*i+s*s+n*n+o*o,l=a?1/a:0;return e[0]=-i*l,e[1]=-s*l,e[2]=-n*l,e[3]=o*l,e}function Nr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Ve(e,t){var i=t[0]+t[4]+t[8],s;if(i>0)s=Math.sqrt(i+1),e[3]=.5*s,s=.5/s,e[0]=(t[5]-t[7])*s,e[1]=(t[6]-t[2])*s,e[2]=(t[1]-t[3])*s;else{var n=0;t[4]>t[0]&&(n=1),t[8]>t[n*3+n]&&(n=2);var o=(n+1)%3,a=(n+2)%3;s=Math.sqrt(t[n*3+n]-t[o*3+o]-t[a*3+a]+1),e[n]=.5*s,s=.5/s,e[3]=(t[o*3+a]-t[a*3+o])*s,e[o]=(t[o*3+n]+t[n*3+o])*s,e[a]=(t[a*3+n]+t[n*3+a])*s}return e}function Ur(e,t,i,s){var n=.5*Math.PI/180;t*=n,i*=n,s*=n;var o=Math.sin(t),a=Math.cos(t),l=Math.sin(i),u=Math.cos(i),y=Math.sin(s),r=Math.cos(s);return e[0]=o*u*r-a*l*y,e[1]=a*l*r+o*u*y,e[2]=a*u*y-o*l*r,e[3]=a*u*r+o*l*y,e}function qr(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Gr,zr,dt,Qr,Xr,Kr,De,Pt,Jr,ft,Yr,gt,Zr,Xt,$r,tl,el,il,sl,Kt=F(()=>{z();Bt();Dt();qt();Gr=Rt,zr=Et,dt=Ot,Qr=Wt,Xr=wt,Kr=Ie,De=Ft,Pt=kt,Jr=Ht,ft=ht,Yr=ft,gt=pt,Zr=gt,Xt=jt,$r=Nt,tl=Ut,el=function(){var e=ut(),t=ct(1,0,0),i=ct(0,1,0);return function(s,n,o){var a=yt(n,o);return a<-.999999?(st(e,t,n),Vt(e)<1e-6&&st(e,i,n),Mt(e,e),Le(s,e,Math.PI),s):a>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(st(e,n,o),s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=1+a,Xt(s,s))}}(),il=function(){var e=nt(),t=nt();return function(i,s,n,o,a,l){return _t(e,s,a,l),_t(t,n,o,l),_t(i,e,t,2*l*(1-l)),i}}(),sl=function(){var e=xt();return function(t,i,s,n){return e[0]=s[0],e[3]=s[1],e[6]=s[2],e[1]=n[0],e[4]=n[1],e[7]=n[2],e[2]=-i[0],e[5]=-i[1],e[8]=-i[2],Xt(t,Ve(t,e))}}()});var w={};X(w,{add:()=>xl,clone:()=>ol,conjugate:()=>Ml,copy:()=>Ee,create:()=>nl,dot:()=>We,equals:()=>Wl,exactEquals:()=>Ol,fromMat4:()=>ul,fromRotation:()=>ml,fromRotationTranslation:()=>Re,fromRotationTranslationValues:()=>rl,fromTranslation:()=>ll,fromValues:()=>al,getDual:()=>pl,getReal:()=>hl,getTranslation:()=>Pl,identity:()=>cl,invert:()=>Al,len:()=>Vl,length:()=>we,lerp:()=>Il,mul:()=>Bl,multiply:()=>Oe,normalize:()=>Rl,rotateAroundAxis:()=>vl,rotateByQuatAppend:()=>Cl,rotateByQuatPrepend:()=>Sl,rotateX:()=>gl,rotateY:()=>Tl,rotateZ:()=>bl,scale:()=>Ll,set:()=>yl,setDual:()=>dl,setReal:()=>_l,sqrLen:()=>Dl,squaredLength:()=>Tt,str:()=>El,translate:()=>fl});function nl(){var e=new A(8);return A!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function ol(e){var t=new A(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function al(e,t,i,s,n,o,a,l){var u=new A(8);return u[0]=e,u[1]=t,u[2]=i,u[3]=s,u[4]=n,u[5]=o,u[6]=a,u[7]=l,u}function rl(e,t,i,s,n,o,a){var l=new A(8);l[0]=e,l[1]=t,l[2]=i,l[3]=s;var u=n*.5,y=o*.5,r=a*.5;return l[4]=u*s+y*i-r*t,l[5]=y*s+r*e-u*i,l[6]=r*s+u*t-y*e,l[7]=-u*e-y*t-r*i,l}function Re(e,t,i){var s=i[0]*.5,n=i[1]*.5,o=i[2]*.5,a=t[0],l=t[1],u=t[2],y=t[3];return e[0]=a,e[1]=l,e[2]=u,e[3]=y,e[4]=s*y+n*u-o*l,e[5]=n*y+o*a-s*u,e[6]=o*y+s*l-n*a,e[7]=-s*a-n*l-o*u,e}function ll(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0]*.5,e[5]=t[1]*.5,e[6]=t[2]*.5,e[7]=0,e}function ml(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function ul(e,t){var i=nt();It(i,t);var s=new A(3);return Lt(s,t),Re(e,i,s),e}function Ee(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function cl(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function yl(e,t,i,s,n,o,a,l,u){return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e[4]=o,e[5]=a,e[6]=l,e[7]=u,e}function pl(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}function dl(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function Pl(e,t){var i=t[4],s=t[5],n=t[6],o=t[7],a=-t[0],l=-t[1],u=-t[2],y=t[3];return e[0]=(i*y+o*a+s*u-n*l)*2,e[1]=(s*y+o*l+n*a-i*u)*2,e[2]=(n*y+o*u+i*l-s*a)*2,e}function fl(e,t,i){var s=t[0],n=t[1],o=t[2],a=t[3],l=i[0]*.5,u=i[1]*.5,y=i[2]*.5,r=t[4],m=t[5],c=t[6],h=t[7];return e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=a*l+n*y-o*u+r,e[5]=a*u+o*l-s*y+m,e[6]=a*y+s*u-n*l+c,e[7]=-s*l-n*u-o*y+h,e}function gl(e,t,i){var s=-t[0],n=-t[1],o=-t[2],a=t[3],l=t[4],u=t[5],y=t[6],r=t[7],m=l*a+r*s+u*o-y*n,c=u*a+r*n+y*s-l*o,h=y*a+r*o+l*n-u*s,_=r*a-l*s-u*n-y*o;return Gt(e,t,i),s=e[0],n=e[1],o=e[2],a=e[3],e[4]=m*a+_*s+c*o-h*n,e[5]=c*a+_*n+h*s-m*o,e[6]=h*a+_*o+m*n-c*s,e[7]=_*a-m*s-c*n-h*o,e}function Tl(e,t,i){var s=-t[0],n=-t[1],o=-t[2],a=t[3],l=t[4],u=t[5],y=t[6],r=t[7],m=l*a+r*s+u*o-y*n,c=u*a+r*n+y*s-l*o,h=y*a+r*o+l*n-u*s,_=r*a-l*s-u*n-y*o;return zt(e,t,i),s=e[0],n=e[1],o=e[2],a=e[3],e[4]=m*a+_*s+c*o-h*n,e[5]=c*a+_*n+h*s-m*o,e[6]=h*a+_*o+m*n-c*s,e[7]=_*a-m*s-c*n-h*o,e}function bl(e,t,i){var s=-t[0],n=-t[1],o=-t[2],a=t[3],l=t[4],u=t[5],y=t[6],r=t[7],m=l*a+r*s+u*o-y*n,c=u*a+r*n+y*s-l*o,h=y*a+r*o+l*n-u*s,_=r*a-l*s-u*n-y*o;return Qt(e,t,i),s=e[0],n=e[1],o=e[2],a=e[3],e[4]=m*a+_*s+c*o-h*n,e[5]=c*a+_*n+h*s-m*o,e[6]=h*a+_*o+m*n-c*s,e[7]=_*a-m*s-c*n-h*o,e}function Cl(e,t,i){var s=i[0],n=i[1],o=i[2],a=i[3],l=t[0],u=t[1],y=t[2],r=t[3];return e[0]=l*a+r*s+u*o-y*n,e[1]=u*a+r*n+y*s-l*o,e[2]=y*a+r*o+l*n-u*s,e[3]=r*a-l*s-u*n-y*o,l=t[4],u=t[5],y=t[6],r=t[7],e[4]=l*a+r*s+u*o-y*n,e[5]=u*a+r*n+y*s-l*o,e[6]=y*a+r*o+l*n-u*s,e[7]=r*a-l*s-u*n-y*o,e}function Sl(e,t,i){var s=t[0],n=t[1],o=t[2],a=t[3],l=i[0],u=i[1],y=i[2],r=i[3];return e[0]=s*r+a*l+n*y-o*u,e[1]=n*r+a*u+o*l-s*y,e[2]=o*r+a*y+s*u-n*l,e[3]=a*r-s*l-n*u-o*y,l=i[4],u=i[5],y=i[6],r=i[7],e[4]=s*r+a*l+n*y-o*u,e[5]=n*r+a*u+o*l-s*y,e[6]=o*r+a*y+s*u-n*l,e[7]=a*r-s*l-n*u-o*y,e}function vl(e,t,i,s){if(Math.abs(s)<x)return Ee(e,t);var n=Math.hypot(i[0],i[1],i[2]);s=s*.5;var o=Math.sin(s),a=o*i[0]/n,l=o*i[1]/n,u=o*i[2]/n,y=Math.cos(s),r=t[0],m=t[1],c=t[2],h=t[3];e[0]=r*y+h*a+m*u-c*l,e[1]=m*y+h*l+c*a-r*u,e[2]=c*y+h*u+r*l-m*a,e[3]=h*y-r*a-m*l-c*u;var _=t[4],d=t[5],p=t[6],P=t[7];return e[4]=_*y+P*a+d*u-p*l,e[5]=d*y+P*l+p*a-_*u,e[6]=p*y+P*u+_*l-d*a,e[7]=P*y-_*a-d*l-p*u,e}function xl(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e}function Oe(e,t,i){var s=t[0],n=t[1],o=t[2],a=t[3],l=i[4],u=i[5],y=i[6],r=i[7],m=t[4],c=t[5],h=t[6],_=t[7],d=i[0],p=i[1],P=i[2],T=i[3];return e[0]=s*T+a*d+n*P-o*p,e[1]=n*T+a*p+o*d-s*P,e[2]=o*T+a*P+s*p-n*d,e[3]=a*T-s*d-n*p-o*P,e[4]=s*r+a*l+n*y-o*u+m*T+_*d+c*P-h*p,e[5]=n*r+a*u+o*l-s*y+c*T+_*p+h*d-m*P,e[6]=o*r+a*y+s*u-n*l+h*T+_*P+m*p-c*d,e[7]=a*r-s*l-n*u-o*y+_*T-m*d-c*p-h*P,e}function Ll(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e}function Il(e,t,i,s){var n=1-s;return We(t,i)<0&&(s=-s),e[0]=t[0]*n+i[0]*s,e[1]=t[1]*n+i[1]*s,e[2]=t[2]*n+i[2]*s,e[3]=t[3]*n+i[3]*s,e[4]=t[4]*n+i[4]*s,e[5]=t[5]*n+i[5]*s,e[6]=t[6]*n+i[6]*s,e[7]=t[7]*n+i[7]*s,e}function Al(e,t){var i=Tt(t);return e[0]=-t[0]/i,e[1]=-t[1]/i,e[2]=-t[2]/i,e[3]=t[3]/i,e[4]=-t[4]/i,e[5]=-t[5]/i,e[6]=-t[6]/i,e[7]=t[7]/i,e}function Ml(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}function Rl(e,t){var i=Tt(t);if(i>0){i=Math.sqrt(i);var s=t[0]/i,n=t[1]/i,o=t[2]/i,a=t[3]/i,l=t[4],u=t[5],y=t[6],r=t[7],m=s*l+n*u+o*y+a*r;e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=(l-s*m)/i,e[5]=(u-n*m)/i,e[6]=(y-o*m)/i,e[7]=(r-a*m)/i}return e}function El(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function Ol(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function Wl(e,t){var i=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],y=e[7],r=t[0],m=t[1],c=t[2],h=t[3],_=t[4],d=t[5],p=t[6],P=t[7];return Math.abs(i-r)<=x*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(s-m)<=x*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(n-c)<=x*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-h)<=x*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-_)<=x*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(l-d)<=x*Math.max(1,Math.abs(l),Math.abs(d))&&Math.abs(u-p)<=x*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(y-P)<=x*Math.max(1,Math.abs(y),Math.abs(P))}var hl,_l,Bl,We,we,Vl,Tt,Dl,Fe=F(()=>{z();Kt();At();hl=dt;_l=dt;Bl=Oe;We=Pt;we=ft,Vl=we,Tt=gt,Dl=Tt});var q={};X(q,{add:()=>Hl,angle:()=>rm,ceil:()=>Nl,clone:()=>wl,copy:()=>jl,create:()=>je,cross:()=>$l,dist:()=>dm,distance:()=>Ue,div:()=>_m,divide:()=>Ne,dot:()=>Zl,equals:()=>cm,exactEquals:()=>um,floor:()=>Ul,forEach:()=>gm,fromValues:()=>Fl,inverse:()=>Jl,len:()=>ym,length:()=>Ge,lerp:()=>tm,max:()=>Gl,min:()=>ql,mul:()=>pm,multiply:()=>He,negate:()=>Kl,normalize:()=>Yl,random:()=>em,rotate:()=>am,round:()=>zl,scale:()=>Ql,scaleAndAdd:()=>Xl,set:()=>kl,sqrDist:()=>Pm,sqrLen:()=>fm,squaredDistance:()=>qe,squaredLength:()=>ze,str:()=>mm,sub:()=>hm,subtract:()=>ke,transformMat2:()=>im,transformMat2d:()=>sm,transformMat3:()=>nm,transformMat4:()=>om,zero:()=>lm});function je(){var e=new A(2);return A!=Float32Array&&(e[0]=0,e[1]=0),e}function wl(e){var t=new A(2);return t[0]=e[0],t[1]=e[1],t}function Fl(e,t){var i=new A(2);return i[0]=e,i[1]=t,i}function jl(e,t){return e[0]=t[0],e[1]=t[1],e}function kl(e,t,i){return e[0]=t,e[1]=i,e}function Hl(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function ke(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function He(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function Ne(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function Nl(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Ul(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function ql(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function Gl(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function zl(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Ql(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function Xl(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e}function Ue(e,t){var i=t[0]-e[0],s=t[1]-e[1];return Math.hypot(i,s)}function qe(e,t){var i=t[0]-e[0],s=t[1]-e[1];return i*i+s*s}function Ge(e){var t=e[0],i=e[1];return Math.hypot(t,i)}function ze(e){var t=e[0],i=e[1];return t*t+i*i}function Kl(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Jl(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function Yl(e,t){var i=t[0],s=t[1],n=i*i+s*s;return n>0&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e}function Zl(e,t){return e[0]*t[0]+e[1]*t[1]}function $l(e,t,i){var s=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=s,e}function tm(e,t,i,s){var n=t[0],o=t[1];return e[0]=n+s*(i[0]-n),e[1]=o+s*(i[1]-o),e}function em(e,t){t=t||1;var i=H()*2*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function im(e,t,i){var s=t[0],n=t[1];return e[0]=i[0]*s+i[2]*n,e[1]=i[1]*s+i[3]*n,e}function sm(e,t,i){var s=t[0],n=t[1];return e[0]=i[0]*s+i[2]*n+i[4],e[1]=i[1]*s+i[3]*n+i[5],e}function nm(e,t,i){var s=t[0],n=t[1];return e[0]=i[0]*s+i[3]*n+i[6],e[1]=i[1]*s+i[4]*n+i[7],e}function om(e,t,i){var s=t[0],n=t[1];return e[0]=i[0]*s+i[4]*n+i[12],e[1]=i[1]*s+i[5]*n+i[13],e}function am(e,t,i,s){var n=t[0]-i[0],o=t[1]-i[1],a=Math.sin(s),l=Math.cos(s);return e[0]=n*l-o*a+i[0],e[1]=n*a+o*l+i[1],e}function rm(e,t){var i=e[0],s=e[1],n=t[0],o=t[1],a=Math.sqrt(i*i+s*s)*Math.sqrt(n*n+o*o),l=a&&(i*n+s*o)/a;return Math.acos(Math.min(Math.max(l,-1),1))}function lm(e){return e[0]=0,e[1]=0,e}function mm(e){return"vec2("+e[0]+", "+e[1]+")"}function um(e,t){return e[0]===t[0]&&e[1]===t[1]}function cm(e,t){var i=e[0],s=e[1],n=t[0],o=t[1];return Math.abs(i-n)<=x*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(s-o)<=x*Math.max(1,Math.abs(s),Math.abs(o))}var ym,hm,pm,_m,dm,Pm,fm,gm,Qe=F(()=>{z();ym=Ge,hm=ke,pm=He,_m=Ne,dm=Ue,Pm=qe,fm=ze,gm=function(){var e=je();return function(t,i,s,n,o,a){var l,u;for(i||(i=2),s||(s=0),n?u=Math.min(n*i+s,t.length):u=t.length,l=s;l<u;l+=i)e[0]=t[l],e[1]=t[l+1],o(e,e,a),t[l]=e[0],t[l+1]=e[1];return t}}()});var Jt=F(()=>{z();Bt();At();Kt();Fe();Qe();Dt();qt()});var bm={};var Xe=F(()=>{Jt();Array.prototype._pp_syncPrototypesProperties=function(){let t=[Array.prototype,Uint8ClampedArray.prototype,Uint8Array.prototype,Uint16Array.prototype,Uint32Array.prototype,Int8Array.prototype,Int16Array.prototype,Int32Array.prototype,Float32Array.prototype,Float64Array.prototype],i=["pp_","vec_","vec2_","vec3_","vec4_","quat_","quat2_","mat3_","mat4_","_pp_","_vec_","_quat_"];for(let s in Array.prototype){let n=!1;for(let o of i)if(s.startsWith(o)){n=!0;break}if(n)for(let o of t)o[s]=Array.prototype[s],Object.defineProperty(o,s,{enumerable:!1})}};Array.prototype.vec2_set=function(t,i){return i===void 0?q.set(this,t,t):q.set(this,t,i),this};Array.prototype.vec3_set=function(t,i,s){return i===void 0?C.set(this,t,t,t):C.set(this,t,i,s),this};Array.prototype.vec4_set=function(t,i,s,n){return i===void 0?K.set(this,t,t,t,t):K.set(this,t,i,s,n),this};Array.prototype.quat_set=function(t,i,s,n){return i===void 0?M.set(this,t,t,t,t):M.set(this,t,i,s,n),this};Array.prototype.quat2_set=function(t,i,s,n,o,a,l,u){return i===void 0?w.set(this,t,t,t,t,t,t,t,t):w.set(this,t,i,s,n,o,a,l,u),this};Array.prototype.mat3_set=function(t,i,s,n,o,a,l,u,y){return i===void 0?j.set(this,t,t,t,t,t,t,t,t,t):j.set(this,t,i,s,n,o,a,l,u,y),this};Array.prototype.mat4_set=function(t,i,s,n,o,a,l,u,y,r,m,c,h,_,d,p){return i===void 0?I.set(this,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t):I.set(this,t,i,s,n,o,a,l,u,y,r,m,c,h,_,d,p),this};Array.prototype._pp_syncPrototypesProperties();PP.vec2_create=function(t,i){let s=q.create();return t!==void 0&&s.vec2_set(t,i),s};PP.vec3_create=function(t,i,s){let n=C.create();return t!==void 0&&n.vec3_set(t,i,s),n};PP.vec4_create=function(t,i,s,n){let o=K.create();return t!==void 0&&o.vec4_set(t,i,s,n),o};PP.quat_create=function(t,i,s,n){let o=M.create();return t!==void 0&&o.quat_set(t,i,s,n),o};PP.quat2_create=function(t,i,s,n,o,a,l,u){let y=w.create();return t!==void 0&&y.quat2_set(t,i,s,n,o,a,l,u),y};PP.mat3_create=function(t,i,s,n,o,a,l,u,y){let r=j.create();return t!==void 0&&r.mat3_set(t,i,s,n,o,a,l,u,y),r};PP.mat4_create=function(t,i,s,n,o,a,l,u,y,r,m,c,h,_,d,p){let P=I.create();return t!==void 0&&P.mat4_set(t,i,s,n,o,a,l,u,y,r,m,c,h,_,d,p),P};PP.quat2_fromPositionRotation=function(t,i){return quat2_fromPositionRotationDegrees(t,i)};PP.quat2_fromPositionRotationDegrees=function(t,i){let s=PP.quat2_create();return s.quat2_setPositionRotationDegrees(t,i),s};PP.quat2_fromPositionRotationRadians=function(t,i){let s=PP.quat2_create();return s.quat2_setPositionRotationRadians(t,i),s};PP.quat2_fromPositionRotationQuat=function(t,i){let s=PP.quat2_create();return s.quat2_setPositionRotationQuat(t,i),s};PP.mat4_fromPositionRotation=function(t,i){return mat4_fromPositionRotationDegrees(t,i)};PP.mat4_fromPositionRotationDegrees=function(t,i){let s=PP.mat4_create();return s.mat4_setPositionRotationDegrees(t,i),s};PP.mat4_fromPositionRotationRadians=function(t,i){let s=PP.mat4_create();return s.mat4_setPositionRotationRadians(t,i),s};PP.mat4_fromPositionRotationQuat=function(t,i){let s=PP.mat4_create();return s.mat4_setPositionRotationQuat(t,i),s};PP.mat4_fromPositionRotationScale=function(t,i,s){return mat4_fromPositionRotationDegreesScale(t,i,s)};PP.mat4_fromPositionRotationDegreesScale=function(t,i,s){let n=PP.mat4_create();return n.mat4_setPositionRotationDegreesScale(t,i,s),n};PP.mat4_fromPositionRotationRadiansScale=function(t,i,s){let n=PP.mat4_create();return n.mat4_setPositionRotationRadiansScale(t,i,s),n};PP.mat4_fromPositionRotationQuatScale=function(t,i,s){let n=PP.mat4_create();return n.mat4_setPositionRotationQuatScale(t,i,s),n};Array.prototype.pp_first=function(){return this.length>0?this[0]:void 0};Array.prototype.pp_last=function(){return this.length>0?this[this.length-1]:void 0};Array.prototype.pp_has=function(t){return this.pp_find(t)!=null};Array.prototype.pp_hasEqual=function(t,i=null){return this.pp_findEqual(t,i)!=null};Array.prototype.pp_find=function(t){let i,s=this.findIndex(t);return s>=0&&(i=this[s]),i};Array.prototype.pp_findIndex=function(t){return this.findIndex(t)};Array.prototype.pp_findAll=function(t){return this.filter(t)};Array.prototype.pp_findAllIndexes=function(t){let i=[];for(let s=0;s<this.length;s++){let n=this[s];t(n)&&i.push(s)}return i};Array.prototype.pp_findEqual=function(t,i=null){if(i==null){let n=this.pp_findIndexEqual(t);return n<0?void 0:this[n]}let s;for(let n=0;n<this.length;n++){let o=this[n];if(i(o,t)){s=o;break}}return s};Array.prototype.pp_findAllEqual=function(t,i=null){if(i==null)return this._pp_findAllEqualOptimized(t,!1);let s=[];for(let n=0;n<this.length;n++){let o=this[n];i(o,t)&&s.push(o)}return s};Array.prototype.pp_findIndexEqual=function(t,i=null){if(i==null)return this.indexOf(t);let s=-1;for(let n=0;n<this.length;n++){let o=this[n];if(i(o,t)){s=n;break}}return s};Array.prototype.pp_findAllIndexesEqual=function(t,i=null){if(i==null)return this._pp_findAllEqualOptimized(t,!0);let s=[];for(let n=0;n<this.length;n++){let o=this[n];i(o,t)&&s.push(n)}return s};Array.prototype.pp_removeIndex=function(t){let i;if(t>=0&&t<this.length){let s=this.splice(t,1);s.length==1&&(i=s[0])}return i};Array.prototype.pp_removeAllIndexes=function(t){let i=[];for(let s of t){let n=this.pp_removeIndex(s);n!==void 0&&i.push(n)}return i};Array.prototype.pp_remove=function(t){let i,s=this.findIndex(t);return s>=0&&(i=this.pp_removeIndex(s)),i};Array.prototype.pp_removeAll=function(t){let i=[],s;do s=this.pp_remove(t),s!==void 0&&i.push(s);while(s!==void 0);return i};Array.prototype.pp_removeEqual=function(t,i=null){return this.pp_removeIndex(this.pp_findIndexEqual(t,i))};Array.prototype.pp_removeAllEqual=function(t,i=null){return this.pp_removeAllIndexes(this.pp_findAllIndexesEqual(t,i))};Array.prototype.pp_pushUnique=function(t,i=null){let s=this.length;return this.pp_hasEqual(t,i)||(s=this.push(t)),s};Array.prototype.pp_unshiftUnique=function(t,i=null){let s=this.length;return this.pp_hasEqual(t,i)||(s=this.unshift(t)),s};Array.prototype.pp_copy=function(t,i=null){for(;this.length>t.length;)this.pop();for(let s=0;s<t.length;s++)i==null?this[s]=t[s]:this[s]=i(this[s],t[s]);return this};Array.prototype.pp_clone=function(t=null){if(t==null)return this.slice(0);let i=null;switch(this.constructor.name){case"Array":i=new Array(this.length);break;case"Uint32Array":i=new Uint32Array(this.length);break;case"Int32Array":i=new Int32Array(this.length);break;case"Float32Array":i=new Float32Array(this.length);break;case"Float64Array":i=new Float64Array(this.length);break;default:i=new Array(this.length),console.error("Cloned array type not supported!");break}for(let s=0;s<this.length;s++)i[s]=t(this[s]);return i};Array.prototype.pp_equals=function(t,i=null){let s=!0;if(t!=null&&this.length==t.length){for(let n=0;n<this.length;n++)if(i!=null&&!i(this[n],t[n])||i==null&&this[n]!=t[n]){s=!1;break}}else s=!1;return s};Array.prototype.pp_clear=function(){return this.length=0,this};Array.prototype.vec_toString=function(t=null){return this._vec_buildConsoleMessage(t)};Array.prototype.vec_log=function(t=4){let i=this._vec_buildConsoleMessage(t);console.log(i)};Array.prototype.vec_error=function(t=4){let i=this._vec_buildConsoleMessage(t);console.error(i)};Array.prototype.vec_warn=function(t=4){let i=this._vec_buildConsoleMessage(t);console.warn(i)};Array.prototype.vec_scale=function(t,i=null){i=this._vec_prepareOut(i);for(let s=0;s<i.length;s++)i[s]=i[s]*t;return i};Array.prototype.vec_round=function(t=null){t=this._vec_prepareOut(t);for(let i=0;i<t.length;i++)t[i]=Math.round(t[i]);return t};Array.prototype.vec_floor=function(t=null){t=this._vec_prepareOut(t);for(let i=0;i<t.length;i++)t[i]=Math.floor(t[i]);return t};Array.prototype.vec_ceil=function(t=null){t=this._vec_prepareOut(t);for(let i=0;i<t.length;i++)t[i]=Math.ceil(t[i]);return t};Array.prototype.vec_clamp=function(t,i,s=null){s=this._vec_prepareOut(s);let n=t??-Number.MAX_VALUE,o=i??Number.MAX_VALUE,a=Math.min(n,o),l=Math.max(n,o);for(let u=0;u<s.length;u++)s[u]=Math.min(Math.max(s[u],a),l);return s};Array.prototype.vec_equals=function(t,i=0){let s=this.length==t.length;for(let n=0;n<this.length&&s;n++)s=s&&Math.abs(this[n]-t[n])<=i;return s};Array.prototype.vec2_length=function(){return q.length(this)};Array.prototype.vec2_normalize=function(t=PP.vec2_create()){return q.normalize(t,this),t};Array.prototype.vec2_copy=function(t){return q.copy(this,t),this};Array.prototype.vec2_clone=function(t=PP.vec2_create()){return q.copy(t,this),t};Array.prototype.vec2_zero=function(){return q.zero(this),this};Array.prototype.vec2_isZero=function(t=0){return this.vec2_length()<=t};Array.prototype.vec3_normalize=function(t=PP.vec3_create()){return C.normalize(t,this),t};Array.prototype.vec3_copy=function(t){return C.copy(this,t),this};Array.prototype.vec3_clone=function(t=PP.vec3_create()){return C.copy(t,this),t};Array.prototype.vec3_zero=function(){return C.zero(this),this};Array.prototype.vec3_angle=function(t){return this.vec3_angleDegrees(t)};Array.prototype.vec3_angleDegrees=function(t){return this.vec3_angleRadians(t)*(180/Math.PI)};Array.prototype.vec3_angleRadians=function(t){let i=this[0],s=this[1],n=this[2],o=t[0],a=t[1],l=t[2],u=i*i+s*s+n*n,y=o*o+a*a+l*l,r=u*y,m=0;if(r>this._pp_epsilonSquared){let c=Math.sqrt(r),h=this.vec3_dot(t)/c;m=Math.acos(Math.min(Math.max(h,-1),1))}return m};Array.prototype.vec3_equals=function(t,i=0){let s=this.length==t.length;return s&&(s&&=Math.abs(this[0]-t[0])<=i,s&&=Math.abs(this[1]-t[1])<=i,s&&=Math.abs(this[2]-t[2])<=i),s};Array.prototype.vec3_length=function(){return C.length(this)};Array.prototype.vec3_lengthSquared=function(){return C.squaredLength(this)};Array.prototype.vec3_distance=function(t){return C.dist(this,t)};Array.prototype.vec3_distanceSquared=function(t){return C.squaredDistance(this,t)};Array.prototype.vec3_add=function(t,i=PP.vec3_create()){return C.add(i,this,t),i};Array.prototype.vec3_sub=function(t,i=PP.vec3_create()){return C.sub(i,this,t),i};Array.prototype.vec3_mul=function(t,i=PP.vec3_create()){return C.mul(i,this,t),i};Array.prototype.vec3_div=function(t,i=PP.vec3_create()){return C.div(i,this,t),i};Array.prototype.vec3_scale=function(t,i=PP.vec3_create()){return C.scale(i,this,t),i};Array.prototype.vec3_dot=function(t){return C.dot(this,t)};Array.prototype.vec3_negate=function(t=PP.vec3_create()){return C.negate(t,this),t};Array.prototype.vec3_cross=function(t,i=PP.vec3_create()){return C.cross(i,this,t),i};Array.prototype.vec3_transformQuat=function(t,i=PP.vec3_create()){return C.transformQuat(i,this,t),i};Array.prototype.vec3_transformMat3=function(t,i=PP.vec3_create()){return C.transformMat3(i,this,t),i};Array.prototype.vec3_transformMat4=function(t,i=PP.vec3_create()){return C.transformMat4(i,this,t),i};Array.prototype.vec3_lengthSigned=function(t){let i=this.vec3_length();return this.vec3_isConcordant(t)||(i*=-1),i};Array.prototype.vec3_angleSigned=function(t,i){return this.vec3_angleSignedDegrees(t,i)};Array.prototype.vec3_angleSignedDegrees=function(t,i){return this.vec3_angleSignedRadians(t,i)*(180/Math.PI)};Array.prototype.vec3_angleSignedRadians=function(){let e=PP.vec3_create();return function(i,s){this.vec3_cross(i,e);let n=this.vec3_angleRadians(i);return e.vec3_isConcordant(s)||(n=-n),n}}();Array.prototype.vec3_toRadians=function(t=PP.vec3_create()){return C.set(t,k.toRadian(this[0]),k.toRadian(this[1]),k.toRadian(this[2])),t};Array.prototype.vec3_toDegrees=function(t=PP.vec3_create()){return C.set(t,this[0]*(180/Math.PI),this[1]*(180/Math.PI),this[2]*(180/Math.PI)),t};Array.prototype.vec3_toQuat=function(t){return this.vec3_degreesToQuat(t)};Array.prototype.vec3_radiansToQuat=function(t=PP.quat_create()){return t.quat_fromRadians(this),t};Array.prototype.vec3_degreesToQuat=function(t=PP.quat_create()){return t.quat_fromDegrees(this),t};Array.prototype.vec3_isNormalized=function(t=this._pp_normalizedEpsilon){return Math.abs(this.vec3_lengthSquared()-1)<t};Array.prototype.vec3_isZero=function(t=0){return this.vec3_lengthSquared()<=t*t};Array.prototype.vec3_componentAlongAxis=function(t,i=PP.vec3_create()){let s=this.vec3_dot(t);return C.copy(i,t),C.scale(i,i,s),i};Array.prototype.vec3_valueAlongAxis=function(t){return this.vec3_dot(t)};Array.prototype.vec3_removeComponentAlongAxis=function(){let e=PP.vec3_create();return function(i,s=PP.vec3_create()){return this.vec3_componentAlongAxis(i,e),C.sub(s,this,e),s}}();Array.prototype.vec3_copyComponentAlongAxis=function(){let e=PP.vec3_create();return function(i,s,n=PP.vec3_create()){return this.vec3_removeComponentAlongAxis(s,n),i.vec3_componentAlongAxis(s,e),n.vec3_add(e,n),n}}();Array.prototype.vec3_isConcordant=function(t){return this.vec3_dot(t)>=0};Array.prototype.vec3_isFartherAlongAxis=function(t,i){return this.vec3_valueAlongAxis(i)>t.vec3_valueAlongAxis(i)};Array.prototype.vec3_isToTheRight=function(t,i){return this.vec3_signTo(t,i)>=0};Array.prototype.vec3_signTo=function(){let e=PP.vec3_create(),t=PP.vec3_create();return function(s,n,o=1){this.vec3_removeComponentAlongAxis(n,e),s.vec3_removeComponentAlongAxis(n,t);let a=this.vec3_angleSigned(s,n);return a>0?1:a==0?o:-1}}();Array.prototype.vec3_projectOnAxis=function(t,i=PP.vec3_create()){return this.vec3_componentAlongAxis(t,i),i};Array.prototype.vec3_projectOnAxisAlongAxis=function(){let e=PP.vec3_create(),t=PP.vec3_create(),i=PP.vec3_create();return function(n,o,a=PP.vec3_create()){if(this.vec3_isOnAxis(n)||o.vec3_isOnAxis(n))a.vec3_copy(this);else if(o.vec3_cross(n,e),e.vec3_normalize(e),this.vec3_removeComponentAlongAxis(e,a),!a.vec3_isOnAxis(n)){a.vec3_projectOnAxis(n,t),t.vec3_sub(a,t),t.vec3_isConcordant(o)?i.vec3_copy(o):o.vec3_negate(i);let l=i.vec3_angleRadians(t),u=t.vec3_length()/Math.cos(l);i.vec3_normalize(i),i.vec3_scale(u,i),a.vec3_add(i,a),a.vec3_projectOnAxis(n,a)}return a}}();Array.prototype.vec3_projectOnPlane=function(t,i=PP.vec3_create()){return this.vec3_removeComponentAlongAxis(t,i),i};Array.prototype.vec3_projectOnPlaneAlongAxis=function(){let e=PP.vec3_create(),t=PP.vec3_create();return function(s,n,o=PP.vec3_create()){if(this.vec3_isOnPlane(s)||n.vec3_isOnPlane(s))o.vec3_copy(this);else{o.vec3_copy(this),o.vec3_projectOnPlane(s,e),e.vec3_sub(o,e),e.vec3_isConcordant(n)?t.vec3_copy(n):n.vec3_negate(t);let a=t.vec3_angleRadians(e),l=e.vec3_length()/Math.cos(a);t.vec3_normalize(t),t.vec3_scale(l,t),o.vec3_add(t,o),o.vec3_projectOnPlane(s,o)}return o}}();Array.prototype.vec3_isOnAxis=function(t){let i=this.vec3_angle(t);return Math.abs(i)<this._pp_degreesEpsilon||Math.abs(i-180)<this._pp_degreesEpsilon};Array.prototype.vec3_isOnPlane=function(t){let i=this.vec3_angle(t);return Math.abs(i-90)<this._pp_degreesEpsilon};Array.prototype.vec3_rotate=function(t,i){return this.vec3_rotateDegrees(t,i)};Array.prototype.vec3_rotateDegrees=function(){let e=PP.vec3_create();return function(i,s){return this.vec3_rotateAroundDegrees(i,e,s)}}();Array.prototype.vec3_rotateRadians=function(){let e=PP.vec3_create();return function(i,s){return this.vec3_rotateAroundRadians(i,e,s)}}();Array.prototype.vec3_rotateQuat=function(){let e=PP.vec3_create();return function(i,s){return this.vec3_rotateAroundQuat(i,e,s)}}();Array.prototype.vec3_rotateAxis=function(t,i,s){return this.vec3_rotateAxisDegrees(t,i,s)};Array.prototype.vec3_rotateAxisDegrees=function(){let e=PP.vec3_create();return function(i,s,n){return this.vec3_rotateAroundAxisDegrees(i,s,e,n)}}();Array.prototype.vec3_rotateAxisRadians=function(){let e=PP.vec3_create();return function(i,s,n){return this.vec3_rotateAroundAxisRadians(i,s,e,n)}}();Array.prototype.vec3_rotateAround=function(t,i,s){return this.vec3_rotateAroundDegrees(t,i,s)};Array.prototype.vec3_rotateAroundDegrees=function(){let e=PP.quat_create();return function(i,s,n=PP.vec3_create()){return i.vec3_degreesToQuat(e),this.vec3_rotateAroundQuat(e,s,n)}}();Array.prototype.vec3_rotateAroundRadians=function(){let e=PP.quat_create();return function(i,s,n=PP.vec3_create()){return i.vec3_radiansToQuat(e),this.vec3_rotateAroundQuat(e,s,n)}}();Array.prototype.vec3_rotateAroundQuat=function(t,i,s=PP.vec3_create()){return C.sub(s,this,i),C.transformQuat(s,s,t),C.add(s,s,i),s};Array.prototype.vec3_rotateAroundAxis=function(t,i,s,n){return this.vec3_rotateAroundAxisDegrees(t,i,s,n)};Array.prototype.vec3_rotateAroundAxisDegrees=function(t,i,s,n){return this.vec3_rotateAroundAxisRadians(k.toRadian(t),i,s,n)};Array.prototype.vec3_rotateAroundAxisRadians=function(){let e=PP.quat_create();return function(i,s,n,o=PP.vec3_create()){return M.setAxisAngle(e,s,i),this.vec3_rotateAroundQuat(e,n,o)}}();Array.prototype.vec3_convertPositionToWorld=function(t,i){return this.vec3_convertPositionToWorldMatrix(t,i)};Array.prototype.vec3_convertPositionToLocal=function(t,i){return this.vec3_convertPositionToLocalMatrix(t,i)};Array.prototype.vec3_convertPositionToWorldMatrix=function(t,i=PP.vec3_create()){return C.transformMat4(i,this,t),i};Array.prototype.vec3_convertPositionToLocalMatrix=function(){let e=PP.mat4_create();return function(i,s=PP.vec3_create()){return I.invert(e,i),C.transformMat4(s,this,e),s}}();Array.prototype.vec3_convertPositionToWorldQuat=function(){let e=PP.mat4_create(),t=PP.vec3_create(),i=PP.quat_create(),s=PP.vec3_create();return C.set(s,1,1,1),function(o,a=PP.vec3_create()){return o.quat2_getPosition(t),o.quat2_getRotationQuat(i),e.mat4_setPositionRotationQuatScale(t,i,s),this.vec3_convertPositionToWorldMatrix(e,a)}}();Array.prototype.vec3_convertPositionToLocalQuat=function(){let e=PP.mat4_create(),t=PP.vec3_create(),i=PP.quat_create(),s=PP.vec3_create();return C.set(s,1,1,1),function(o,a=PP.vec3_create()){return o.quat2_getPosition(t),o.quat2_getRotationQuat(i),e.mat4_setPositionRotationQuatScale(t,i,s),this.vec3_convertPositionToLocalMatrix(e,a)}}();Array.prototype.vec3_convertDirectionToWorld=function(t,i){return this.vec3_convertDirectionToWorldMatrix(t,i)};Array.prototype.vec3_convertDirectionToLocal=function(t,i){return this.vec3_convertDirectionToLocalMatrix(t,i)};Array.prototype.vec3_convertDirectionToWorldMatrix=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return i.mat4_getRotationQuat(e),C.transformQuat(s,this,e),s}}();Array.prototype.vec3_convertDirectionToLocalMatrix=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return i.mat4_getRotationQuat(e),M.conjugate(e,e),C.transformQuat(s,this,e),s}}();Array.prototype.vec3_convertDirectionToWorldQuat=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return i.quat2_getRotationQuat(e),C.transformQuat(s,this,e),s}}();Array.prototype.vec3_convertDirectionToLocalQuat=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return i.quat2_getRotationQuat(e),M.conjugate(e,e),C.transformQuat(s,this,e),s}}();Array.prototype.vec3_log=function(t=4){this.vec_log(t)};Array.prototype.vec3_error=function(t=4){this.vec_error(t)};Array.prototype.vec3_warn=function(t=4){this.vec_warn(t)};Array.prototype.vec3_addRotation=function(t,i){return this.vec3_degreesAddRotation(t,i)};Array.prototype.vec3_addRotationDegrees=function(t,i){return quat.vec3_degreesAddRotationDegrees(t,i)};Array.prototype.vec3_addRotationRadians=function(t,i){return quat.vec3_degreesAddRotationRadians(t,i)};Array.prototype.vec3_addRotationQuat=function(t,i){return quat.vec3_degreesAddRotationQuat(t,i)};Array.prototype.vec3_degreesAddRotation=function(t,i){return this.vec3_degreesAddRotationDegrees(t,i)};Array.prototype.vec3_degreesAddRotationDegrees=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return this.vec3_degreesToQuat(e),e.quat_addRotationDegrees(i,e).quat_toDegrees(s)}}();Array.prototype.vec3_degreesAddRotationRadians=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return this.vec3_degreesToQuat(e),e.quat_addRotationRadians(i,e).quat_toDegrees(s)}}();Array.prototype.vec3_degreesAddRotationQuat=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return this.vec3_degreesToQuat(e),e.quat_addRotationQuat(i,e).quat_toDegrees(s)}}();Array.prototype.vec3_radiansAddRotation=function(t,i){return this.vec3_radiansAddRotationDegrees(t,i)};Array.prototype.vec3_radiansAddRotationDegrees=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return this.vec3_radiansToQuat(e),e.quat_addRotationDegrees(i,e).quat_toRadians(s)}}();Array.prototype.vec3_radiansAddRotationRadians=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return this.vec3_radiansToQuat(e),e.quat_addRotationRadians(i,e).quat_toRadians(s)}}();Array.prototype.vec3_radiansAddRotationQuat=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return this.vec3_radiansToQuat(e),e.quat_addRotationQuat(i,e).quat_toRadians(s)}}();Array.prototype.vec3_toMatrix=function(t=PP.mat3_create()){return this.vec3_degreesToMatrix(t)};Array.prototype.vec3_degreesToMatrix=function(){let e=PP.quat_create();return function(i=PP.mat3_create()){return this.vec3_degreesToQuat(e),e.quat_toMatrix(i)}}();Array.prototype.vec3_radiansToMatrix=function(){let e=PP.quat_create();return function(i=PP.mat3_create()){return this.vec3_radiansToQuat(e),e.quat_toMatrix(i)}}();Array.prototype.vec3_rotationTo=function(t,i){return this.vec3_rotationToDegrees(t,i)};Array.prototype.vec3_rotationToDegrees=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return this.vec3_rotationToQuat(i,e),e.quat_toDegrees(s),s}}();Array.prototype.vec3_rotationToRadians=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return this.vec3_rotationToQuat(i,e),e.quat_toRadians(s),s}}();Array.prototype.vec3_rotationToQuat=function(){let e=PP.vec3_create();return function(i,s=PP.quat_create()){this.vec3_cross(i,e),e.vec3_normalize(e);let n=this.vec3_angleSigned(i,e);return s.quat_fromAxis(n,e),s}}();Array.prototype.vec3_rotationToPivoted=function(t,i,s){return this.vec3_rotationToPivotedDegrees(t,i,s)};Array.prototype.vec3_rotationToPivotedDegrees=function(){let e=PP.quat_create();return function(i,s,n=PP.vec3_create()){return this.vec3_rotationToPivotedQuat(i,s,e),e.quat_toDegrees(n),n}}();Array.prototype.vec3_rotationToPivotedRadians=function(){let e=PP.quat_create();return function(i,s,n=PP.vec3_create()){return this.vec3_rotationToPivotedQuat(i,s,e),e.quat_toRadians(n),n}}();Array.prototype.vec3_rotationToPivotedQuat=function(){let e=PP.vec3_create(),t=PP.vec3_create(),i=PP.vec3_create();return function(n,o,a=PP.quat_create()){this.vec3_removeComponentAlongAxis(o,e),n.vec3_removeComponentAlongAxis(o,t),e.vec3_cross(t,i),i.vec3_normalize(i);let l=e.vec3_angleSigned(t,i);return a.quat_fromAxis(l,i),a}}();Array.prototype.vec3_lerp=function(t,i,s=PP.vec3_create()){return i<=0?(s.vec3_copy(this),s):i>=1?(s.vec3_copy(t),s):(C.lerp(s,this,t,i),s)};Array.prototype.vec3_interpolate=function(t,i,s=PP.EasingFunction.linear,n=PP.vec3_create()){let o=s(i);return this.vec3_lerp(t,o,n)};Array.prototype.vec4_copy=function(t){return K.copy(this,t),this};Array.prototype.quat_normalize=function(t=PP.quat_create()){return M.normalize(t,this),t};Array.prototype.quat_copy=function(t){return M.copy(this,t),this};Array.prototype.quat_clone=function(t=PP.quat_create()){return M.copy(t,this),t};Array.prototype.quat_identity=function(){return M.identity(this),this};Array.prototype.quat_length=function(){return M.length(this)};Array.prototype.quat_lengthSquared=function(){return M.squaredLength(this)};Array.prototype.quat_invert=function(t=PP.quat_create()){return M.invert(t,this),t};Array.prototype.quat_conjugate=function(t=PP.quat_create()){return M.conjugate(t,this),t};Array.prototype.quat_mul=function(t,i=PP.quat_create()){return M.mul(i,this,t),i};Array.prototype.quat_getAxis=function(){let e=PP.vec3_create(0,0,0);return function(i=PP.vec3_create()){return M.getAxisAngle(i,this)<=this._pp_epsilon&&i.vec3_copy(e),i}}();Array.prototype.quat_getAngle=function(){return this.quat_getAngleDegrees()};Array.prototype.quat_getAngleDegrees=function(){return this.quat_getAngleRadians()*(180/Math.PI)};Array.prototype.quat_getAngleRadians=function(){let e=PP.vec3_create();return function(){return M.getAxisAngle(e,this)}}();Array.prototype.quat_getAxisScaled=function(t=PP.vec3_create()){return this.quat_getAxisScaledDegrees(t)};Array.prototype.quat_getAxisScaledDegrees=function(t=PP.vec3_create()){this.quat_getAxis(t);let i=this.quat_getAngleDegrees();return t.vec3_scale(i,t),t};Array.prototype.quat_getAxisScaledRadians=function(){let e=PP.vec3_create(0,0,0);return function(i=PP.vec3_create()){this.quat_getAxis(i);let s=this.quat_getAngleRadians();return s<=this._pp_epsilon?i.vec3_copy(e):i.vec3_scale(s,i),i}}();Array.prototype.quat_getAxes=function(t=[PP.vec3_create(),PP.vec3_create(),PP.vec3_create()]){return this.quat_getLeft(t[0]),this.quat_getUp(t[1]),this.quat_getForward(t[2]),t};Array.prototype.quat_getForward=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return j.fromQuat(e,this),C.set(i,e[6],e[7],e[8]),C.normalize(i,i),i}}();Array.prototype.quat_getBackward=function(t){return t=this.quat_getForward(t),t.vec3_negate(t),t};Array.prototype.quat_getLeft=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return j.fromQuat(e,this),C.set(i,e[0],e[1],e[2]),C.normalize(i,i),i}}();Array.prototype.quat_getRight=function(t){return t=this.quat_getLeft(t),t.vec3_negate(t),t};Array.prototype.quat_getUp=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return j.fromQuat(e,this),C.set(i,e[3],e[4],e[5]),C.normalize(i,i),i}}();Array.prototype.quat_getDown=function(t){return t=this.quat_getUp(t),t.vec3_negate(t),t};Array.prototype.quat_setAxes=function(t,i,s){return s!=null?this.quat_setForward(s,i,t):i!=null?this.quat_setUp(i,s,t):this.quat_setLeft(t,i,s)};Array.prototype.quat_setForward=function(t,i=null,s=null){return this._quat_setAxes([s,i,t],[2,1,0])};Array.prototype.quat_setBackward=function(){let e=PP.vec3_create();return function(i,s=null,n=null){return i.vec3_negate(e),this._quat_setAxes([n,s,e],[2,1,0])}}();Array.prototype.quat_setUp=function(t,i=null,s=null){return this._quat_setAxes([s,t,i],[1,2,0])};Array.prototype.quat_setDown=function(){let e=PP.vec3_create();return function(i,s=null,n=null){return i.vec3_negate(e),this._quat_setAxes([n,e,s],[1,2,0])}}();Array.prototype.quat_setLeft=function(t,i=null,s=null){return this._quat_setAxes([t,i,s],[0,1,2])};Array.prototype.quat_setRight=function(){let e=PP.vec3_create();return function(i,s=null,n=null){return i.vec3_negate(e),this._quat_setAxes([e,s,n],[0,1,2])}}();Array.prototype.quat_toWorld=function(t,i=PP.quat_create()){return M.mul(i,t,this),i};Array.prototype.quat_toLocal=function(){let e=PP.quat_create();return function(i,s=PP.quat_create()){return M.conjugate(e,i),M.mul(s,e,this),s}}();Array.prototype.quat_fromAxis=function(t,i){return this.quat_fromAxisDegrees(t,i)};Array.prototype.quat_fromAxisDegrees=function(t,i){return M.setAxisAngle(this,i,k.toRadian(t)),this};Array.prototype.quat_fromAxisRadians=function(t,i){return M.setAxisAngle(this,i,t),this};Array.prototype.quat_fromAxes=function(){let e=PP.mat3_create();return function(i,s,n){return e.mat3_fromAxes(i,s,n),e.mat3_toQuat(this)}}();Array.prototype.quat_fromRadians=function(){let e=PP.vec3_create();return function(i){return i.vec3_toDegrees(e),this.quat_fromDegrees(e)}}();Array.prototype.quat_fromDegrees=function(t){return M.fromEuler(this,t[0],t[1],t[2]),this};Array.prototype.quat_toRadians=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return j.fromQuat(e,this),i[1]=Math.asin(-this._pp_clamp(e[2],-1,1)),Math.abs(e[2])<1-this._pp_epsilon?(i[0]=Math.atan2(e[5],e[8]),i[2]=Math.atan2(e[1],e[0])):(i[0]=0,i[2]=Math.atan2(-e[3],e[4])),i}}();Array.prototype.quat_toDegrees=function(t=PP.vec3_create()){return this.quat_toRadians(t),t.vec3_toDegrees(t),t};Array.prototype.quat_isNormalized=function(t=this._pp_normalizedEpsilon){return Math.abs(this.quat_lengthSquared()-1)<t};Array.prototype.quat_addRotation=function(t,i){return this.quat_addRotationDegrees(t,i)};Array.prototype.quat_addRotationDegrees=function(){let e=PP.quat_create();return function(i,s){return i.vec3_degreesToQuat(e),this.quat_addRotationQuat(e,s)}}();Array.prototype.quat_addRotationRadians=function(){let e=PP.quat_create();return function(i,s){return i.vec3_radiansToQuat(e),this.quat_addRotationQuat(e,s)}}();Array.prototype.quat_addRotationQuat=function(t,i=PP.quat_create()){return t.quat_mul(this,i),i};Array.prototype.quat_subRotation=function(t,i){return this.quat_subRotationDegrees(t,i)};Array.prototype.quat_subRotationDegrees=function(){let e=PP.quat_create();return function(i,s){return i.vec3_degreesToQuat(e),this.quat_subRotationQuat(e,s)}}();Array.prototype.quat_subRotationRadians=function(){let e=PP.quat_create();return function(i,s){return i.vec3_radiansToQuat(e),this.quat_subRotationQuat(e,s)}}();Array.prototype.quat_subRotationQuat=function(){let e=PP.quat_create();return function(i,s=PP.quat_create()){return i.quat_invert(e),this.quat_mul(e,s),this.quat_isNormalized()&&i.quat_isNormalized()&&s.quat_normalize(s),s}}();Array.prototype.quat_rotationTo=function(t,i){return this.quat_rotationToDegrees(t,i)};Array.prototype.quat_rotationToDegrees=function(){let e=PP.quat_create();return function(i,s){return i.vec3_degreesToQuat(e),this.quat_rotationToQuat(e,s)}}();Array.prototype.quat_rotationToRadians=function(){let e=PP.quat_create();return function(i,s){return i.vec3_radiansToQuat(e),this.quat_rotationToQuat(e,s)}}();Array.prototype.quat_rotationToQuat=function(t,i){return t.quat_subRotationQuat(this,i)};Array.prototype.quat_getTwist=function(){let e=PP.vec3_create(),t=PP.vec3_create(),i=PP.quat_create();return function(n,o=PP.quat_create()){e[0]=this[0],e[1]=this[1],e[2]=this[2];let a=C.dot(n,e);return n.vec3_scale(a,t),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=this[3],i.quat_normalize(i),a<0&&(i[0]=-i[0],i[1]=-i[1],i[2]=-i[2],i[3]=-i[3]),o.quat_copy(i)}}();Array.prototype.quat_getSwing=function(){let e=PP.quat_create();return function(i,s=PP.quat_create()){return this.quat_getTwist(i,e),this.quat_getSwingFromTwist(e,s),s}}();Array.prototype.quat_getSwingFromTwist=function(t,i=PP.quat_create()){return this.quat_subRotationQuat(t,i)};Array.prototype.quat_getTwistFromSwing=function(){let e=PP.quat_create();return function(i,s=PP.quat_create()){return i.quat_invert(e),this.quat_addRotationQuat(e,s),s}}();Array.prototype.quat_fromTwistSwing=function(t,i){return t.quat_addRotationQuat(i,this)};Array.prototype.quat_toMatrix=function(t=PP.mat3_create()){return j.fromQuat(t,this),t};Array.prototype.quat_rotate=function(t,i){return this.quat_rotateDegrees(t,i)};Array.prototype.quat_rotateDegrees=function(t,i){return this.quat_addRotationDegrees(t,i)};Array.prototype.quat_rotateRadians=function(t,i){return this.quat_addRotationRadians(t,i)};Array.prototype.quat_rotateQuat=function(t,i){return this.quat_addRotationQuat(t,i)};Array.prototype.quat_rotateAxis=function(t,i,s){return this.quat_rotateAxisDegrees(t,i,s)};Array.prototype.quat_rotateAxisDegrees=function(){let e=PP.quat_create();return function(i,s,n){return e.quat_fromAxisDegrees(i,s),this.quat_rotateQuat(e,n)}}();Array.prototype.quat_rotateAxisRadians=function(){let e=PP.quat_create();return function(i,s,n){return e.quat_fromAxisRadians(i,s),this.quat_rotateQuat(e,n)}}();Array.prototype.quat_lerp=function(t,i,s=PP.quat_create()){return i<=0?(s.quat_copy(this),s):i>=1?(s.quat_copy(t),s):(M.lerp(s,this,t,i),s)};Array.prototype.quat_interpolate=function(t,i,s=PP.EasingFunction.linear,n=PP.quat_create()){let o=s(i);return this.quat_lerp(t,o,n)};Array.prototype.quat_slerp=function(t,i,s=PP.quat_create()){return i<=0?(s.quat_copy(this),s):i>=1?(s.quat_copy(t),s):(M.slerp(s,this,t,i),s)};Array.prototype.quat_sinterpolate=function(t,i,s=PP.EasingFunction.linear,n=PP.quat_create()){let o=s(i);return this.quat_slerp(t,o,n)};Array.prototype.quat2_normalize=function(t=PP.quat2_create()){return w.normalize(t,this),t};Array.prototype.quat2_invert=function(t=PP.quat2_create()){return w.invert(t,this),t};Array.prototype.quat2_conjugate=function(t=PP.quat2_create()){return w.conjugate(t,this),t};Array.prototype.quat2_copy=function(t){return w.copy(this,t),this};Array.prototype.quat2_identity=function(){return w.identity(this),this};Array.prototype.quat2_getPosition=function(t=PP.vec3_create()){return w.getTranslation(t,this),t};Array.prototype.quat2_getRotation=function(t){return this.quat2_getRotationDegrees(t)};Array.prototype.quat2_getRotationDegrees=function(){let e=PP.quat_create();return function(i=PP.vec3_create()){return this.quat2_getRotationQuat(e).quat_toDegrees(i),i}}();Array.prototype.quat2_getRotationRadians=function(){let e=PP.quat_create();return function(i=PP.vec3_create()){return this.quat2_getRotationQuat(e).quat_toRadians(i),i}}();Array.prototype.quat2_getRotationQuat=function(t=PP.quat_create()){return M.copy(t,this),t};Array.prototype.quat2_setPosition=function(){let e=PP.quat_create();return function(i){return this.quat2_getRotationQuat(e),this.quat2_setPositionRotationQuat(i,e),this}}();Array.prototype.quat2_setRotation=function(t){return this.quat2_setRotationDegrees(t)};Array.prototype.quat2_setRotationDegrees=function(){let e=PP.vec3_create();return function(i){return this.quat2_getPosition(e),this.quat2_setPositionRotationDegrees(e,i),this}}();Array.prototype.quat2_setRotationRadians=function(){let e=PP.vec3_create();return function(i){return this.quat2_getPosition(e),this.quat2_setPositionRotationRadians(e,i),this}}();Array.prototype.quat2_setRotationQuat=function(){let e=PP.vec3_create();return function(i){return this.quat2_getPosition(e),this.quat2_setPositionRotationQuat(e,i),this}}();Array.prototype.quat2_setPositionRotation=function(t,i){return this.quat2_setPositionRotationDegrees(t,i)};Array.prototype.quat2_setPositionRotationDegrees=function(){let e=PP.quat_create();return function(i,s){return s.vec3_degreesToQuat(e),w.fromRotationTranslation(this,e,i),this}}();Array.prototype.quat2_setPositionRotationRadians=function(){let e=PP.quat_create();return function(i,s){return s.vec3_radiansToQuat(e),w.fromRotationTranslation(this,e,i),this}}();Array.prototype.quat2_setPositionRotationQuat=function(t,i){return w.fromRotationTranslation(this,i,t),this};Array.prototype.quat2_isNormalized=function(t=this._pp_normalizedEpsilon){return Math.abs(this.quat2_lengthSquared()-1)<t};Array.prototype.quat2_length=function(){return w.length(this)};Array.prototype.quat2_lengthSquared=function(){return w.squaredLength(this)};Array.prototype.quat2_mul=function(t,i=PP.quat2_create()){return w.mul(i,this,t),i};Array.prototype.quat2_getAxes=function(t=[PP.vec3_create(),PP.vec3_create(),PP.vec3_create()]){return this.quat2_getLeft(t[0]),this.quat2_getUp(t[1]),this.quat2_getForward(t[2]),t};Array.prototype.quat2_getForward=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return j.fromQuat(e,this),C.set(i,e[6],e[7],e[8]),C.normalize(i,i),i}}();Array.prototype.quat2_getBackward=function(t){return t=this.quat2_getForward(t),t.vec3_negate(t),t};Array.prototype.quat2_getLeft=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return j.fromQuat(e,this),C.set(i,e[0],e[1],e[2]),C.normalize(i,i),i}}();Array.prototype.quat2_getRight=function(t){return t=this.quat2_getLeft(t),t.vec3_negate(t),t};Array.prototype.quat2_getUp=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return j.fromQuat(e,this),C.set(i,e[3],e[4],e[5]),C.normalize(i,i),i}}();Array.prototype.quat2_getDown=function(t){return t=this.quat2_getUp(t),t.vec3_negate(t),t};Array.prototype.quat2_toWorld=function(t,i=PP.quat2_create()){return w.mul(i,t,this),i};Array.prototype.quat2_toLocal=function(){let e=PP.quat2_create();return function(i,s=PP.quat2_create()){return w.conjugate(e,i),w.mul(s,e,this),s}}();Array.prototype.quat2_rotateAxis=function(t,i,s){return this.quat2_rotateAxisDegrees(t,i,s)};Array.prototype.quat2_rotateAxisDegrees=function(t,i,s){return this.quat2_rotateAxisRadians(k.toRadian(t),i,s)};Array.prototype.quat2_rotateAxisRadians=function(){let e=PP.quat_create();return function(i,s,n){return this.quat2_getRotationQuat(e),e.quat_rotateAxisRadians(i,s,e),n.quat2_copy(this),n.quat2_setRotationQuat(e),n}}();Array.prototype.quat2_toMatrix=function(t=PP.mat4_create()){return I.fromQuat2(t,this),t};Array.prototype.quat2_fromMatrix=function(t){return t.mat4_toQuat(this),this};Array.prototype.quat2_lerp=function(t,i,s=PP.quat2_create()){return i<=0?(s.quat2_copy(this),s):i>=1?(s.quat2_copy(t),s):(w.lerp(s,this,t,i),s)};Array.prototype.quat2_interpolate=function(t,i,s=PP.EasingFunction.linear,n=PP.quat2_create()){let o=s(i);return this.quat2_lerp(t,o,n)};Array.prototype.mat3_toDegrees=function(){let e=PP.quat_create();return function(i=PP.vec3_create()){return this.mat3_toQuat(e),e.quat_toDegrees(i),i}}();Array.prototype.mat3_toRadians=function(){let e=PP.quat_create();return function(i=PP.vec3_create()){return this.mat3_toQuat(e),e.quat_toRadians(i),i}}();Array.prototype.mat3_toQuat=function(t=PP.quat_create()){return M.fromMat3(t,this),t};Array.prototype.mat3_fromAxes=function(t,i,s){return j.set(this,t[0],t[1],t[2],i[0],i[1],i[2],s[0],s[1],s[2]),this};Array.prototype.mat4_copy=function(t){return I.copy(this,t),this};Array.prototype.mat4_identity=function(){return I.identity(this),this};Array.prototype.mat4_invert=function(t=PP.mat4_create()){return I.invert(t,this),t};Array.prototype.mat4_mul=function(t,i=PP.mat4_create()){return I.mul(i,this,t),i};Array.prototype.mat4_scale=function(t,i=PP.mat4_create()){return I.scale(i,this,t),i};Array.prototype.mat4_clone=function(t=PP.mat4_create()){return I.copy(t,this),t};Array.prototype.mat4_getPosition=function(t=PP.vec3_create()){return I.getTranslation(t,this),t};Array.prototype.mat4_getRotation=function(t=PP.vec3_create()){return this.mat4_getRotationDegrees(t)};Array.prototype.mat4_getRotationDegrees=function(){let e=PP.quat_create();return function(i=PP.vec3_create()){return this.mat4_getRotationQuat(e),e.quat_toDegrees(i),i}}();Array.prototype.mat4_getRotationRadians=function(){let e=PP.quat_create();return function(i=PP.vec3_create()){return this.mat4_getRotationQuat(e),e.quat_toRadians(i),i}}();Array.prototype.mat4_getRotationQuat=function(){let e=PP.vec3_create(),t=PP.mat4_create(),i=PP.vec3_create(),s=PP.vec3_create();return C.set(s,1,1,1),function(o=PP.quat_create()){return I.getScaling(e,this),C.divide(i,s,e),I.scale(t,this,i),I.getRotation(o,t),M.normalize(o,o),o}}();Array.prototype.mat4_getScale=function(t=PP.vec3_create()){return I.getScaling(t,this),t};Array.prototype.mat4_setPosition=function(t){return this[12]=t[0],this[13]=t[1],this[14]=t[2],this};Array.prototype.mat4_setRotation=function(t){return this.mat4_setRotationDegrees(t),this};Array.prototype.mat4_setRotationDegrees=function(){let e=PP.quat_create();return function(i){return this.mat4_setRotationQuat(i.vec3_degreesToQuat(e)),this}}();Array.prototype.mat4_setRotationRadians=function(){let e=PP.vec3_create();return function(i){return this.mat4_setRotationDegrees(i.vec3_toDegrees(e)),this}}();Array.prototype.mat4_setRotationQuat=function(){let e=PP.vec3_create(),t=PP.vec3_create();return function(s){return this.mat4_getPosition(e),this.mat4_getScale(t),this.mat4_setPositionRotationQuatScale(e,s,t),this}}();Array.prototype.mat4_setScale=function(){let e=PP.vec3_create();return function(i){return I.getScaling(e,this),C.divide(e,i,e),I.scale(this,this,e),this}}();Array.prototype.mat4_setPositionRotationScale=function(t,i,s){return this.mat4_setPositionRotationDegreesScale(t,i,s),this};Array.prototype.mat4_setPositionRotationDegreesScale=function(){let e=PP.quat_create();return function(i,s,n){return this.mat4_setPositionRotationQuatScale(i,s.vec3_degreesToQuat(e),n),this}}();Array.prototype.mat4_setPositionRotationRadiansScale=function(){let e=PP.vec3_create();return function(i,s,n){return this.mat4_setPositionRotationDegreesScale(i,s.vec3_toDegrees(e),n),this}}();Array.prototype.mat4_setPositionRotationQuatScale=function(t,i,s){return I.fromRotationTranslationScale(this,i,t,s),this};Array.prototype.mat4_setPositionRotation=function(t,i){return this.mat4_setPositionRotationDegrees(t,i),this};Array.prototype.mat4_setPositionRotationDegrees=function(){let e=PP.quat_create();return function(i,s){return this.mat4_setPositionRotationQuat(i,s.vec3_degreesToQuat(e)),this}}();Array.prototype.mat4_setPositionRotationRadians=function(){let e=PP.vec3_create();return function(i,s){return this.mat4_setPositionRotationDegrees(i,s.vec3_toDegrees(e)),this}}();Array.prototype.mat4_setPositionRotationQuat=function(t,i){return I.fromRotationTranslation(this,i,t),this};Array.prototype.mat4_getAxes=function(t=[PP.vec3_create(),PP.vec3_create(),PP.vec3_create()]){return this.mat4_getLeft(t[0]),this.mat4_getUp(t[1]),this.mat4_getForward(t[2]),t};Array.prototype.mat4_getForward=function(t=PP.vec3_create()){return C.set(t,this[8],this[9],this[10]),C.normalize(t,t),t};Array.prototype.mat4_getBackward=function(t){return t=this.mat4_getForward(t),t.vec3_negate(t),t};Array.prototype.mat4_getLeft=function(t=PP.vec3_create()){return C.set(t,this[0],this[1],this[2]),C.normalize(t,t),t};Array.prototype.mat4_getRight=function(t){return t=this.mat4_getLeft(t),t.vec3_negate(t),t};Array.prototype.mat4_getUp=function(t=PP.vec3_create()){return C.set(t,this[4],this[5],this[6]),C.normalize(t,t),t};Array.prototype.mat4_getDown=function(t){return t=this.mat4_getUp(t),t.vec3_negate(t),t};Array.prototype.mat4_toWorld=function(){let e=PP.mat4_create(),t=PP.vec3_create(),i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create();return C.set(n,1,1,1),function(a,l=PP.mat4_create()){return a.mat4_hasUniformScale()?I.mul(l,a,this):(C.set(t,this[12],this[13],this[14]),t.vec3_convertPositionToWorldMatrix(a,t),I.getScaling(i,a),C.divide(s,n,i),I.scale(e,a,s),I.mul(l,e,this),I.scale(l,l,i),l[12]=t[0],l[13]=t[1],l[14]=t[2],l[15]=1),l}}();Array.prototype.mat4_toLocal=function(){let e=PP.mat4_create(),t=PP.vec3_create(),i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create();return C.set(n,1,1,1),function(a,l=PP.mat4_create()){return a.mat4_hasUniformScale()?(I.invert(e,a),I.mul(l,e,this)):(C.set(t,this[12],this[13],this[14]),t.vec3_convertPositionToLocalMatrix(a,t),I.getScaling(i,a),C.divide(s,n,i),I.scale(e,a,s),I.invert(e,e),I.mul(l,e,this),I.scale(l,l,s),l[12]=t[0],l[13]=t[1],l[14]=t[2],l[15]=1),l}}();Array.prototype.mat4_hasUniformScale=function(){let e=PP.vec3_create();return function(){return I.getScaling(e,this),Math.abs(e[0]-e[1])<this._pp_epsilon&&Math.abs(e[1]-e[2])<this._pp_epsilon&&Math.abs(e[0]-e[2])<this._pp_epsilon}}();Array.prototype.mat4_toQuat=function(){let e=PP.vec3_create(),t=PP.quat_create();return function(s=PP.quat2_create()){return I.getTranslation(e,this),this.mat4_getRotationQuat(t),w.fromRotationTranslation(s,t,e),s}}();Array.prototype.mat4_fromQuat=function(t){return t.quat2_toMatrix(this),this};Array.prototype._pp_epsilon=1e-6;Array.prototype._pp_epsilonSquared=Array.prototype._pp_epsilon*Array.prototype._pp_epsilon;Array.prototype._pp_degreesEpsilon=1e-5;Array.prototype._pp_normalizedEpsilon=1e-6;Array.prototype._pp_clamp=function(t,i,s){return Math.min(Math.max(t,i),s)};Array.prototype._vec_buildConsoleMessage=function(t){let i="[";for(let s=0;s<this.length;s++)s!=0&&(i=i.concat(", ")),t!=null?i=i.concat(this[s].toFixed(t)):i=i.concat(this[s].toString());return i=i.concat("]"),i};Array.prototype._vec_prepareOut=function(t){return t==null?t=this.pp_clone():t!=this&&t.pp_copy(this),t};Array.prototype._pp_findAllEqualOptimized=function(t,i){let s=[],n=-1;for(;(n=this.indexOf(t,n+1))>=0;)s.push(i?n:this[n]);return s};Array.prototype._quat_setAxes=function(){let e=[PP.vec3_create(),PP.vec3_create(),PP.vec3_create()],t=[[1,-1,1],[1,1,-1],[-1,1,-1]],i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create(),o=PP.vec3_create(),a=PP.vec3_create(),l=PP.mat3_create(),u=PP.quat_create();return function(r,m){let c=r[m[0]],h=r[m[1]],_=r[m[2]];if(c==null||c.vec3_isZero(this._pp_epsilon))return;let d=!1;h!=null&&c.vec3_angleRadians(h)>this._pp_epsilon&&(d=!0);let p=!1;if(_!=null&&c.vec3_angleRadians(_)>this._pp_epsilon&&(p=!0),d||p){let P=null,T=null,g=null;d?(P=h,T=1,g=2):(P=_,T=2,g=1);let b=t[m[0]];C.cross(e[g],c,P),C.scale(e[g],e[g],b[m[g]]),C.cross(e[T],c,e[g]),C.scale(e[T],e[T],b[m[T]]),C.cross(e[0],e[1],e[2]),C.scale(e[0],e[0],b[m[0]]),C.normalize(i,e[m.pp_findIndexEqual(0)]),C.normalize(s,e[m.pp_findIndexEqual(1)]),C.normalize(n,e[m.pp_findIndexEqual(2)]),j.set(l,i[0],i[1],i[2],s[0],s[1],s[2],n[0],n[1],n[2]),M.fromMat3(u,l),M.normalize(u,u),this.quat_copy(u)}else{m[0]==0?this.quat_getLeft(o):m[0]==1?this.quat_getUp(o):this.quat_getForward(o);let P=c.vec3_angleRadians(o);P>this._pp_epsilon&&(C.cross(a,o,c),C.normalize(a,a),M.setAxisAngle(u,a,P),this.quat_rotateQuat(u,this))}return this}}();Array.prototype._pp_syncPrototypesProperties()});var Ke=f(()=>{Math.PP_EPSILON_NUMBER=1e-5;Math.PP_EPSILON_NUMBER_SQUARED=Math.PP_EPSILON_NUMBER*Math.PP_EPSILON_NUMBER;Math.PP_EPSILON_DEGREES=1e-4;Math.pp_clamp=function(t,i,s){let n=i??-Number.MAX_VALUE,o=s??Number.MAX_VALUE,a=Math.min(n,o),l=Math.max(n,o);return Math.min(Math.max(t,a),l)};Math.pp_sign=function(t,i=1){let s=Math.sign(t);return s==0&&(s=Math.sign(i)),s};Math.pp_toDegrees=function(t){return t*(180/Math.PI)};Math.pp_toRadians=function(t){return t*(Math.PI/180)};Math.pp_roundDecimal=function(t,i){let s=Math.pow(10,i);return t=Math.round(t*s)/s,t};Math.pp_mapToRange=function(t,i,s,n,o){if(i==s)return n;let a=Math.pp_clamp(t,i,s);if(a==i)return n;if(a==s)return o;let l=n+(o-n)/(s-i)*(a-i);return Math.pp_clamp(l,n,o)};Math.pp_random=function(t=0,i=1){return Math.random()*(i-t)+t};Math.pp_randomInt=function(t,i){let s=Math.min(t,i),n=Math.max(t,i);return Math.floor(Math.random()*(n-s+1)+s)};Math.pp_randomBool=function(){return Math.pp_randomInt(0,1)==0};Math.pp_randomSign=function(){return Math.random()<.5?1:-1};Math.pp_randomPick=function(...t){let i=null;if(t.length>0)if(t.length==1&&t[0].length!=null){if(t[0].length>0){let s=Math.pp_randomInt(0,t[0].length-1);i=t[0][s]}}else{let s=Math.pp_randomInt(0,t.length-1);i=t[s]}return i};Math.pp_lerp=function(t,i,s){return s<=0?t:s>=1?i:s*(i-t)+t};PP.EasingFunction={linear:e=>e,easeIn:e=>e*e*e,easeOut:e=>(e-1)*(e-1)*(e-1)+1,easeInOut:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1};Math.pp_interpolate=function(t,i,s,n=PP.EasingFunction.linear){let o=n(s);return Math.pp_lerp(t,i,o)};Math.pp_angleDistance=function(t,i){return Math.pp_angleDistanceDegrees(t,i)};Math.pp_angleDistanceDegrees=function(t,i){return Math.abs(Math.pp_angleDistanceSignedDegrees(t,i))};Math.pp_angleDistanceRadians=function(t,i){return Math.abs(Math.pp_angleDistanceSignedRadians(t,i))};Math.pp_angleDistanceSigned=function(t,i){return Math.pp_angleDistanceSignedDegrees(t,i)};Math.pp_angleDistanceSignedDegrees=function(t,i){let s=Math.pp_angleClampDegrees(t,!0),n=Math.pp_angleClampDegrees(i,!0),o=n-s;return n-s>180?o=n-s-360:n-s<-180&&(o=n-s+360),o};Math.pp_angleDistanceSignedRadians=function(t,i){return Math.pp_toRadians(Math.pp_angleDistanceSignedDegrees(Math.pp_toDegrees(t),Math.pp_toDegrees(i)))};Math.pp_angleClamp=function(t,i=!1){return Math.pp_angleClampDegrees(t,i)};Math.pp_angleClampDegrees=function(t,i=!1){let s=t%360;return s<0&&(s+=360),i||s>180&&(s-=360),s};Math.pp_angleClampRadians=function(t,i=!1){return Math.pp_toRadians(Math.pp_angleClampDegrees(Math.pp_toDegrees(t),i))};Math.pp_isInsideAngleRange=function(t,i,s,n=!1){return Math.pp_isInsideAngleRangeDegrees(t,i,s,n)};Math.pp_isInsideAngleRangeDegrees=function(t,i,s,n=!1){let o=!1,a=Math.pp_angleClampDegrees(t,!0),l=Math.pp_angleClampDegrees(i,!0),u=Math.pp_angleClampDegrees(s,!0);if(n&&Math.pp_angleDistanceSignedDegrees(l,u)<0){let y=l;l=u,u=y}return l<u?o=a>=l&&a<=u:o=a>=l||a<=u,o};Math.pp_isInsideAngleRangeRadians=function(t,i,s,n=!1){return Math.pp_isInsideAngleRangeDegrees(Math.pp_toDegrees(t),Math.pp_toDegrees(i),Math.pp_toDegrees(s),n)};for(let e in Math){let t=["pp_","_pp_"],i=!1;for(let s of t)if(e.startsWith(s)){i=!0;break}i&&Object.defineProperty(Math,e,{enumerable:!1})}});var Je=f(()=>{if(WL&&WL.Object){WL.Object.prototype.pp_getPosition=function(t){return this.pp_getPositionWorld(t)},WL.Object.prototype.pp_getPositionWorld=function(t=PP.vec3_create()){return this.getTranslationWorld(t),t},WL.Object.prototype.pp_getPositionLocal=function(t=PP.vec3_create()){return this.getTranslationLocal(t),t},WL.Object.prototype.pp_getRotation=function(t){return this.pp_getRotationWorld(t)},WL.Object.prototype.pp_getRotationDegrees=function(t){return this.pp_getRotationWorldDegrees(t)},WL.Object.prototype.pp_getRotationRadians=function(t){return this.pp_getRotationWorldRadians(t)},WL.Object.prototype.pp_getRotationMatrix=function(t){return this.pp_getRotationWorldMatrix(t)},WL.Object.prototype.pp_getRotationQuat=function(t){return this.pp_getRotationWorldQuat(t)},WL.Object.prototype.pp_getRotationWorld=function(t){return this.pp_getRotationWorldDegrees(t)},WL.Object.prototype.pp_getRotationWorldDegrees=function(t){return t=this.pp_getRotationWorldRadians(t),t.forEach(function(i,s,n){n[s]=this._pp_toDegrees(i)}.bind(this)),t},WL.Object.prototype.pp_getRotationWorldRadians=function(){let e=PP.quat_create();return function(i=PP.vec3_create()){return this.pp_getRotationWorldQuat(e),this._pp_quaternionToRadians(e,i),i}}(),WL.Object.prototype.pp_getRotationWorldMatrix=function(){let e=PP.quat_create();return function(i=PP.mat3_create()){return this.pp_getRotationWorldQuat(e),e.quat_toMatrix(i),i}}(),WL.Object.prototype.pp_getRotationWorldQuat=function(t=PP.quat_create()){return t.quat_copy(this.rotationWorld),t},WL.Object.prototype.pp_getRotationLocal=function(t){return this.pp_getRotationLocalDegrees(t)},WL.Object.prototype.pp_getRotationLocalDegrees=function(t){return t=this.pp_getRotationLocalRadians(t),t.forEach(function(i,s,n){n[s]=this._pp_toDegrees(i)}.bind(this)),t},WL.Object.prototype.pp_getRotationLocalRadians=function(){let e=PP.quat_create();return function(i=PP.vec3_create()){return this.pp_getRotationLocalQuat(e),this._pp_quaternionToRadians(e,i),i}}(),WL.Object.prototype.pp_getRotationLocalMatrix=function(){let e=PP.quat_create();return function(i=PP.mat3_create()){return this.pp_getRotationLocalQuat(e),e.quat_toMatrix(i),i}}(),WL.Object.prototype.pp_getRotationLocalQuat=function(t=PP.quat_create()){return t.quat_copy(this.rotationLocal),t},WL.Object.prototype.pp_getScale=function(t){return this.pp_getScaleWorld(t)},WL.Object.prototype.pp_getScaleWorld=function(t=PP.vec3_create()){return t.vec3_copy(this.scalingWorld),t},WL.Object.prototype.pp_getScaleLocal=function(t=PP.vec3_create()){return t.vec3_copy(this.scalingLocal),t},WL.Object.prototype.pp_getTransform=function(t){return this.pp_getTransformWorld(t)},WL.Object.prototype.pp_getTransformMatrix=function(t){return this.pp_getTransformWorldMatrix(t)},WL.Object.prototype.pp_getTransformQuat=function(t){return this.pp_getTransformWorldQuat(t)},WL.Object.prototype.pp_getTransformWorld=function(t){return this.pp_getTransformWorldMatrix(t)},WL.Object.prototype.pp_getTransformWorldMatrix=function(){let e=PP.quat2_create(),t=PP.vec3_create();return function(s=PP.mat4_create()){return this.pp_getTransformWorldQuat(e),this.pp_getScaleWorld(t),s.mat4_fromQuat(e),s.mat4_scale(t,s),s}}(),WL.Object.prototype.pp_getTransformWorldQuat=function(t=PP.quat2_create()){return t.quat2_copy(this.transformWorld),t},WL.Object.prototype.pp_getTransformLocal=function(e){return this.pp_getTransformLocalMatrix(e)},WL.Object.prototype.pp_getTransformLocalMatrix=function(){let t=PP.quat2_create(),i=PP.vec3_create();return function(n=PP.mat4_create()){return this.pp_getTransformLocalQuat(t),this.pp_getScaleLocal(i),n.mat4_fromQuat(t),n.mat4_scale(i,n),n}}(),WL.Object.prototype.pp_getTransformLocalQuat=function(t=PP.quat2_create()){return t.quat2_copy(this.transformLocal),t},WL.Object.prototype.pp_getAxes=function(t){return this.pp_getAxesWorld(t)},WL.Object.prototype.pp_getAxesWorld=function(t=[PP.vec3_create(),PP.vec3_create(),PP.vec3_create()]){return this.pp_getLeftWorld(t[0]),this.pp_getUpWorld(t[1]),this.pp_getForwardWorld(t[2]),t},WL.Object.prototype.pp_getAxesLocal=function(t=[PP.vec3_create(),PP.vec3_create(),PP.vec3_create()]){return this.pp_getLeftLocal(t[0]),this.pp_getUpLocal(t[1]),this.pp_getForwardLocal(t[2]),t},WL.Object.prototype.pp_getForward=function(t){return this.pp_getForwardWorld(t)},WL.Object.prototype.pp_getForwardWorld=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationWorldMatrix(e),i[0]=e[6],i[1]=e[7],i[2]=e[8],i}}(),WL.Object.prototype.pp_getForwardLocal=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationLocalMatrix(e),i[0]=e[6],i[1]=e[7],i[2]=e[8],i}}(),WL.Object.prototype.pp_getBackward=function(t){return this.pp_getBackwardWorld(t)},WL.Object.prototype.pp_getBackwardWorld=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationWorldMatrix(e),i[0]=-e[6],i[1]=-e[7],i[2]=-e[8],i}}(),WL.Object.prototype.pp_getBackwardLocal=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationLocalMatrix(e),i[0]=-e[6],i[1]=-e[7],i[2]=-e[8],i}}(),WL.Object.prototype.pp_getUp=function(t){return this.pp_getUpWorld(t)},WL.Object.prototype.pp_getUpWorld=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationWorldMatrix(e),i[0]=e[3],i[1]=e[4],i[2]=e[5],i}}(),WL.Object.prototype.pp_getUpLocal=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationLocalMatrix(e),i[0]=e[3],i[1]=e[4],i[2]=e[5],i}}(),WL.Object.prototype.pp_getDown=function(t){return this.pp_getDownWorld(t)},WL.Object.prototype.pp_getDownWorld=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationWorldMatrix(e),i[0]=-e[3],i[1]=-e[4],i[2]=-e[5],i}}(),WL.Object.prototype.pp_getDownLocal=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationLocalMatrix(e),i[0]=-e[3],i[1]=-e[4],i[2]=-e[5],i}}(),WL.Object.prototype.pp_getLeft=function(t){return this.pp_getLeftWorld(t)},WL.Object.prototype.pp_getLeftWorld=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationWorldMatrix(e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i}}(),WL.Object.prototype.pp_getLeftLocal=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationLocalMatrix(e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i}}(),WL.Object.prototype.pp_getRight=function(t){return this.pp_getRightWorld(t)},WL.Object.prototype.pp_getRightWorld=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationWorldMatrix(e),i[0]=-e[0],i[1]=-e[1],i[2]=-e[2],i}}(),WL.Object.prototype.pp_getRightLocal=function(){let e=PP.mat3_create();return function(i=PP.vec3_create()){return this.pp_getRotationLocalMatrix(e),i[0]=-e[0],i[1]=-e[1],i[2]=-e[2],i}}(),WL.Object.prototype.pp_setPosition=function(t){this.pp_setPositionWorld(t)},WL.Object.prototype.pp_setPositionWorld=function(t){this.setTranslationWorld(t)},WL.Object.prototype.pp_setPositionLocal=function(t){this.setTranslationLocal(t)},WL.Object.prototype.pp_setRotation=function(t){this.pp_setRotationWorld(t)},WL.Object.prototype.pp_setRotationDegrees=function(t){this.pp_setRotationWorldDegrees(t)},WL.Object.prototype.pp_setRotationRadians=function(t){this.pp_setRotationWorldRadians(t)},WL.Object.prototype.pp_setRotationMatrix=function(t){this.pp_setRotationWorldMatrix(t)},WL.Object.prototype.pp_setRotationQuat=function(t){this.pp_setRotationWorldQuat(t)},WL.Object.prototype.pp_setRotationWorld=function(t){this.pp_setRotationWorldDegrees(t)},WL.Object.prototype.pp_setRotationWorldDegrees=function(){let e=PP.quat_create();return function(i){this._pp_degreesToQuaternion(i,e),this.pp_setRotationWorldQuat(e)}}(),WL.Object.prototype.pp_setRotationWorldRadians=function(){let e=PP.vec3_create();return function(i){i.forEach(function(s,n,o){e[n]=this._pp_toDegrees(s)}.bind(this)),this.pp_setRotationWorldDegrees(e)}}(),WL.Object.prototype.pp_setRotationWorldMatrix=function(){let e=PP.quat_create();return function(i){i.mat3_toQuat(e),this.pp_setRotationWorldQuat(e)}}(),WL.Object.prototype.pp_setRotationWorldQuat=function(t){this.rotationWorld=t},WL.Object.prototype.pp_setRotationLocal=function(t){this.pp_setRotationLocalDegrees(t)},WL.Object.prototype.pp_setRotationLocalDegrees=function(){let e=PP.quat_create();return function(i){this._pp_degreesToQuaternion(i,e),this.pp_setRotationLocalQuat(e)}}(),WL.Object.prototype.pp_setRotationLocalRadians=function(){let e=PP.vec3_create();return function(i){i.forEach(function(s,n,o){e[n]=this._pp_toDegrees(s)}.bind(this)),this.pp_setRotationLocalDegrees(e)}}(),WL.Object.prototype.pp_setRotationLocalMatrix=function(){let e=PP.quat_create();return function(i){i.mat3_toQuat(e),this.pp_setRotationLocalQuat(e)}}(),WL.Object.prototype.pp_setRotationLocalQuat=function(t){this.rotationLocal=t},WL.Object.prototype.pp_setScale=function(t){this.pp_setScaleWorld(t)},WL.Object.prototype.pp_setScaleWorld=function(){let e=PP.vec3_create();return function(i){isNaN(i)?this.scalingWorld=i:(e.vec3_set(i),this.scalingWorld=e)}}(),WL.Object.prototype.pp_setScaleLocal=function(){let e=PP.vec3_create();return function(i){isNaN(i)?this.scalingLocal=i:(e.vec3_set(i),this.scalingLocal=e)}}(),WL.Object.prototype.pp_setAxes=function(t,i,s){this.pp_setAxesWorld(t,i,s)},WL.Object.prototype.pp_setAxesWorld=function(t,i,s){s!=null?this.pp_setForwardWorld(s,i,t):i!=null?this.pp_setUpWorld(i,s,t):this.pp_setLeftWorld(t,i,s)},WL.Object.prototype.pp_setAxesLocal=function(t,i,s){s!=null?this.pp_setForwardLocal(s,i,t):i!=null?this.pp_setUpLocal(i,s,t):this.pp_setLeftLocal(t,i,s)},WL.Object.prototype.pp_setForward=function(t,i,s){this.pp_setForwardWorld(t,i,s)},WL.Object.prototype.pp_setForwardWorld=function(t,i=null,s=null){this._pp_setAxes([s,i,t],[2,1,0],!1)},WL.Object.prototype.pp_setForwardLocal=function(t,i=null,s=null){this._pp_setAxes([s,i,t],[2,1,0],!0)},WL.Object.prototype.pp_setBackward=function(t,i,s){this.pp_setBackwardWorld(t,i,s)},WL.Object.prototype.pp_setBackwardWorld=function(){let e=PP.vec3_create();return function(i,s=null,n=null){i.vec3_negate(e),this._pp_setAxes([n,s,e],[2,1,0],!1)}}(),WL.Object.prototype.pp_setBackwardLocal=function(){let e=PP.vec3_create();return function(i,s=null,n=null){i.vec3_negate(e),this._pp_setAxes([n,s,e],[2,1,0],!0)}}(),WL.Object.prototype.pp_setUp=function(t,i,s){this.pp_setUpWorld(t,i,s)},WL.Object.prototype.pp_setUpWorld=function(t,i=null,s=null){this._pp_setAxes([s,t,i],[1,2,0],!1)},WL.Object.prototype.pp_setUpLocal=function(t,i=null,s=null){this._pp_setAxes([s,t,i],[1,2,0],!0)},WL.Object.prototype.pp_setDown=function(t,i,s){this.pp_setDownWorld(t,i,s)},WL.Object.prototype.pp_setDownWorld=function(){let e=PP.vec3_create();return function(i,s=null,n=null){i.vec3_negate(e),this._pp_setAxes([n,e,s],[1,2,0],!1)}}(),WL.Object.prototype.pp_setDownLocal=function(){let e=PP.vec3_create();return function(i,s=null,n=null){i.vec3_negate(e),this._pp_setAxes([n,e,s],[1,2,0],!0)}}(),WL.Object.prototype.pp_setLeft=function(t,i,s){this.pp_setLeftWorld(t,i,s)},WL.Object.prototype.pp_setLeftWorld=function(t,i=null,s=null){this._pp_setAxes([t,i,s],[0,1,2],!1)},WL.Object.prototype.pp_setLeftLocal=function(t,i=null,s=null){this._pp_setAxes([t,i,s],[0,1,2],!0)},WL.Object.prototype.pp_setRight=function(t,i,s){this.pp_setRightWorld(t,i,s)},WL.Object.prototype.pp_setRightWorld=function(){let e=PP.vec3_create();return function(i,s=null,n=null){i.vec3_negate(e),this._pp_setAxes([e,s,n],[0,1,2],!1)}}(),WL.Object.prototype.pp_setRightLocal=function(){let e=PP.vec3_create();return function(i,s=null,n=null){i.vec3_negate(e),this._pp_setAxes([e,s,n],[0,1,2],!0)}}(),WL.Object.prototype.pp_setTransform=function(t){this.pp_setTransformWorld(t)},WL.Object.prototype.pp_setTransformMatrix=function(t){this.pp_setTransformWorldMatrix(t)},WL.Object.prototype.pp_setTransformQuat=function(t){this.pp_setTransformWorldQuat(t)},WL.Object.prototype.pp_setTransformWorld=function(t){return this.pp_setTransformWorldMatrix(t)},WL.Object.prototype.pp_setTransformWorldMatrix=function(){let e=PP.vec3_create(),t=PP.quat_create(),i=PP.vec3_create(),s=PP.mat4_create(),n=PP.vec3_create(),o=PP.vec3_create(1);return function(l){l.mat4_getPosition(e),l.mat4_getScale(i),o.vec3_div(i,n),l.mat4_scale(n,s),s.mat4_getRotationQuat(t),t.quat_normalize(t),this.pp_setScaleWorld(i),this.pp_setRotationWorldQuat(t),this.pp_setPositionWorld(e)}}(),WL.Object.prototype.pp_setTransformWorldQuat=function(t){this.transformWorld=t},WL.Object.prototype.pp_setTransformLocal=function(t){return this.pp_setTransformLocalMatrix(t)},WL.Object.prototype.pp_setTransformLocalMatrix=function(){let e=PP.vec3_create(),t=PP.quat_create(),i=PP.vec3_create(),s=PP.mat4_create(),n=PP.vec3_create(),o=PP.vec3_create(1);return function(l){l.mat4_getPosition(e),l.mat4_getScale(i),o.vec3_div(i,n),l.mat4_scale(n,s),s.mat4_getRotationQuat(t),t.quat_normalize(t),this.pp_setScaleLocal(i),this.pp_setRotationLocalQuat(t),this.pp_setPositionLocal(e)}}(),WL.Object.prototype.pp_setTransformLocalQuat=function(t){this.transformLocal=t},WL.Object.prototype.pp_resetPosition=function(){this.pp_resetPositionWorld()},WL.Object.prototype.pp_resetPositionWorld=function(){let e=PP.vec3_create();return function(){this.pp_setPositionWorld(e)}}(),WL.Object.prototype.pp_resetPositionLocal=function(){let e=PP.vec3_create();return function(){this.pp_setPositionLocal(e)}}(),WL.Object.prototype.pp_resetRotation=function(){this.pp_resetRotationWorld()},WL.Object.prototype.pp_resetRotationWorld=function(){let e=PP.quat_create();return function(){this.pp_setRotationWorldQuat(e)}}(),WL.Object.prototype.pp_resetRotationLocal=function(){let e=PP.quat_create();return function(){this.pp_setRotationLocalQuat(e)}}(),WL.Object.prototype.pp_resetScale=function(){this.pp_resetScaleWorld()},WL.Object.prototype.pp_resetScaleWorld=function(){let e=PP.vec3_create(1);return function(){this.pp_setScaleWorld(e)}}(),WL.Object.prototype.pp_resetScaleLocal=function(){let e=PP.vec3_create(1);return function(){this.pp_setScaleLocal(e)}}(),WL.Object.prototype.pp_resetTransform=function(){this.pp_resetTransformWorld()},WL.Object.prototype.pp_resetTransformWorld=function(){this.pp_resetScaleWorld(),this.pp_resetRotationWorld(),this.pp_resetPositionWorld()},WL.Object.prototype.pp_resetTransformLocal=function(){this.pp_resetScaleLocal(),this.pp_resetRotationLocal(),this.pp_resetPositionLocal()},WL.Object.prototype.pp_translate=function(t){this.pp_translateWorld(t)},WL.Object.prototype.pp_translateWorld=function(t){this.translateWorld(t)},WL.Object.prototype.pp_translateLocal=function(t){this.translate(t)},WL.Object.prototype.pp_translateObject=function(t){this.translateObject(t)},WL.Object.prototype.pp_translateAxis=function(t,i){this.pp_translateAxisWorld(t,i)},WL.Object.prototype.pp_translateAxisWorld=function(){let e=PP.vec3_create();return function(i,s){s.vec3_scale(i,e),this.pp_translateWorld(e)}}(),WL.Object.prototype.pp_translateAxisLocal=function(){let e=PP.vec3_create();return function(i,s){s.vec3_scale(i,e),this.pp_translateLocal(e)}}(),WL.Object.prototype.pp_translateAxisObject=function(){let e=PP.vec3_create();return function(i,s){s.vec3_scale(i,e),this.pp_translateObject(e)}}(),WL.Object.prototype.pp_rotate=function(t){this.pp_rotateWorld(t)},WL.Object.prototype.pp_rotateDegrees=function(t){this.pp_rotateWorldDegrees(t)},WL.Object.prototype.pp_rotateRadians=function(t){this.pp_rotateWorldRadians(t)},WL.Object.prototype.pp_rotateMatrix=function(t){this.pp_rotateWorldMatrix(t)},WL.Object.prototype.pp_rotateQuat=function(t){this.pp_rotateWorldQuat(t)},WL.Object.prototype.pp_rotateWorld=function(t){this.pp_rotateWorldDegrees(t)},WL.Object.prototype.pp_rotateWorldDegrees=function(){let e=PP.quat_create();return function(i){this._pp_degreesToQuaternion(i,e),this.pp_rotateWorldQuat(e)}}(),WL.Object.prototype.pp_rotateWorldRadians=function(){let e=PP.vec3_create();return function(i){i.forEach(function(s,n,o){e[n]=this._pp_toDegrees(s)}.bind(this)),this.pp_rotateWorldDegrees(e)}}(),WL.Object.prototype.pp_rotateWorldMatrix=function(){let e=PP.quat_create();return function(i){i.mat3_toQuat(e),e.quat_normalize(e),this.pp_rotateWorldQuat(e)}}(),WL.Object.prototype.pp_rotateWorldQuat=function(){let e=PP.quat_create();return function(i){this.pp_getRotationWorldQuat(e),i.quat_mul(e,e),e.quat_normalize(e),this.pp_setRotationWorldQuat(e)}}(),WL.Object.prototype.pp_rotateLocal=function(t){this.pp_rotateLocalDegrees(t)},WL.Object.prototype.pp_rotateLocalDegrees=function(){let e=PP.quat_create();return function(i){this._pp_degreesToQuaternion(i,e),this.pp_rotateLocalQuat(e)}}(),WL.Object.prototype.pp_rotateLocalRadians=function(){let e=PP.vec3_create();return function(i){i.forEach(function(s,n,o){e[n]=this._pp_toDegrees(s)}.bind(this)),this.pp_rotateLocalDegrees(e)}}(),WL.Object.prototype.pp_rotateLocalMatrix=function(){let e=PP.quat_create();return function(i){i.mat3_toQuat(e),e.quat_normalize(e),this.pp_rotateLocalQuat(e)}}(),WL.Object.prototype.pp_rotateLocalQuat=function(){let e=PP.quat_create();return function(i){this.pp_getRotationLocalQuat(e),i.quat_mul(e,e),e.quat_normalize(e),this.pp_setRotationLocalQuat(e)}}(),WL.Object.prototype.pp_rotateObject=function(t){this.pp_rotateObjectDegrees(t)},WL.Object.prototype.pp_rotateObjectDegrees=function(){let e=PP.quat_create();return function(i){this._pp_degreesToQuaternion(i,e),this.pp_rotateObjectQuat(e)}}(),WL.Object.prototype.pp_rotateObjectRadians=function(){let e=PP.vec3_create();return function(i){i.forEach(function(s,n,o){e[n]=this._pp_toDegrees(s)}.bind(this)),this.pp_rotateObjectDegrees(e)}}(),WL.Object.prototype.pp_rotateObjectMatrix=function(){let e=PP.quat_create();return function(i){i.mat3_toQuat(e),e.quat_normalize(e),this.pp_rotateObjectQuat(e)}}(),WL.Object.prototype.pp_rotateObjectQuat=function(t){this.rotateObject(t)},WL.Object.prototype.pp_rotateAxis=function(t,i){this.pp_rotateAxisWorld(t,i)},WL.Object.prototype.pp_rotateAxisDegrees=function(t,i){this.pp_rotateAxisWorldDegrees(t,i)},WL.Object.prototype.pp_rotateAxisRadians=function(t,i){this.pp_rotateAxisWorldRadians(t,i)},WL.Object.prototype.pp_rotateAxisWorld=function(t,i){this.pp_rotateAxisWorldDegrees(t,i)},WL.Object.prototype.pp_rotateAxisWorldDegrees=function(t,i){this.pp_rotateAxisWorldRadians(Math.pp_toRadians(t),i)},WL.Object.prototype.pp_rotateAxisWorldRadians=function(){let e=PP.quat_create();return function(i,s){e.quat_fromAxisRadians(i,s),this.pp_rotateWorldQuat(e)}}(),WL.Object.prototype.pp_rotateAxisLocal=function(t,i){this.pp_rotateAxisLocalDegrees(t,i)},WL.Object.prototype.pp_rotateAxisLocalDegrees=function(t,i){this.pp_rotateAxisLocalRadians(Math.pp_toRadians(t),i)},WL.Object.prototype.pp_rotateAxisLocalRadians=function(){let e=PP.quat_create();return function(i,s){e.quat_fromAxisRadians(i,s),this.pp_rotateLocalQuat(e)}}(),WL.Object.prototype.pp_rotateAxisObject=function(t,i){this.pp_rotateAxisObjectDegrees(t,i)},WL.Object.prototype.pp_rotateAxisObjectDegrees=function(t,i){this.pp_rotateAxisObjectRadians(Math.pp_toRadians(t),i)},WL.Object.prototype.pp_rotateAxisObjectRadians=function(){let e=PP.quat_create();return function(i,s){e.quat_fromAxisRadians(i,s),this.pp_rotateObjectQuat(e)}}(),WL.Object.prototype.pp_rotateAround=function(t,i){this.pp_rotateAroundWorld(t,i)},WL.Object.prototype.pp_rotateAroundDegrees=function(t,i){this.pp_rotateAroundWorldDegrees(t,i)},WL.Object.prototype.pp_rotateAroundRadians=function(t,i){this.pp_rotateAroundWorldRadians(t,i)},WL.Object.prototype.pp_rotateAroundMatrix=function(t,i){this.pp_rotateAroundWorldMatrix(t,i)},WL.Object.prototype.pp_rotateAroundQuat=function(t,i){this.pp_rotateAroundWorldQuat(t,i)},WL.Object.prototype.pp_rotateAroundWorld=function(t,i){this.pp_rotateAroundWorldDegrees(t,i)},WL.Object.prototype.pp_rotateAroundWorldDegrees=function(){let e=PP.quat_create();return function(i,s){this._pp_degreesToQuaternion(i,e),this.pp_rotateAroundWorldQuat(e,s)}}(),WL.Object.prototype.pp_rotateAroundWorldRadians=function(){let e=PP.vec3_create();return function(i,s){i.forEach(function(n,o,a){e[o]=this._pp_toDegrees(n)}.bind(this)),this.pp_rotateAroundWorldDegrees(e,s)}}(),WL.Object.prototype.pp_rotateAroundWorldMatrix=function(){let e=PP.quat_create();return function(i,s){i.mat3_toQuat(e),e.quat_normalize(e),this.pp_rotateAroundWorldQuat(e,s)}}(),WL.Object.prototype.pp_rotateAroundWorldQuat=function(){let e=PP.vec3_create();return function(i,s){i.quat_getAxis(e);let n=i.quat_getAngleRadians();this.pp_rotateAroundAxisWorldRadians(n,e,s)}}(),WL.Object.prototype.pp_rotateAroundLocal=function(t,i){this.pp_rotateAroundLocalDegrees(t,i)},WL.Object.prototype.pp_rotateAroundLocalDegrees=function(){let e=PP.quat_create();return function(i,s){this._pp_degreesToQuaternion(i,e),this.pp_rotateAroundLocalQuat(e,s)}}(),WL.Object.prototype.pp_rotateAroundLocalRadians=function(){let e=PP.vec3_create();return function(i,s){i.forEach(function(n,o,a){e[o]=this._pp_toDegrees(n)}.bind(this)),this.pp_rotateAroundLocalDegrees(e,s)}}(),WL.Object.prototype.pp_rotateAroundLocalMatrix=function(){let e=PP.quat_create();return function(i,s){i.mat3_toQuat(e),e.quat_normalize(e),this.pp_rotateAroundLocalQuat(e,s)}}(),WL.Object.prototype.pp_rotateAroundLocalQuat=function(){let e=PP.vec3_create();return function(i,s){i.quat_getAxis(e);let n=i.quat_getAngleRadians();this.pp_rotateAroundAxisLocalRadians(n,e,s)}}(),WL.Object.prototype.pp_rotateAroundObject=function(t,i){this.pp_rotateAroundObjectDegrees(t,i)},WL.Object.prototype.pp_rotateAroundObjectDegrees=function(){let e=PP.quat_create();return function(i,s){this._pp_degreesToQuaternion(i,e),this.pp_rotateAroundObjectQuat(e,s)}}(),WL.Object.prototype.pp_rotateAroundObjectRadians=function(){let e=PP.vec3_create();return function(i,s){i.forEach(function(n,o,a){e[o]=this._pp_toDegrees(n)}.bind(this)),this.pp_rotateAroundObjectDegrees(e,s)}}(),WL.Object.prototype.pp_rotateAroundObjectMatrix=function(){let e=PP.quat_create();return function(i,s){i.mat3_toQuat(e),e.quat_normalize(e),this.pp_rotateAroundObjectQuat(e,s)}}(),WL.Object.prototype.pp_rotateAroundObjectQuat=function(){let e=PP.vec3_create();return function(i,s){i.quat_getAxis(e);let n=i.quat_getAngleRadians();this.pp_rotateAroundAxisObjectRadians(n,e,s)}}(),WL.Object.prototype.pp_rotateAroundAxis=function(t,i,s){this.pp_rotateAroundAxisWorld(t,i,s)},WL.Object.prototype.pp_rotateAroundAxisDegrees=function(t,i,s){this.pp_rotateAroundAxisWorldDegrees(t,i,s)},WL.Object.prototype.pp_rotateAroundAxisRadians=function(t,i,s){this.pp_rotateAroundAxisWorldRadians(t,i,s)},WL.Object.prototype.pp_rotateAroundAxisWorld=function(t,i,s){this.pp_rotateAroundAxisWorldDegrees(t,i,s)},WL.Object.prototype.pp_rotateAroundAxisWorldDegrees=function(t,i,s){this.pp_rotateAroundAxisWorldRadians(Math.pp_toRadians(t),i,s)},WL.Object.prototype.pp_rotateAroundAxisWorldRadians=function(){let e=PP.quat2_create(),t=PP.quat2_create(),i=PP.quat2_create(),s=PP.quat_create();return function(o,a,l){e.quat2_setPositionRotationQuat(l,s),this.pp_getTransformWorldQuat(i),e.quat2_conjugate(t),t.quat2_mul(i,i),e.quat2_rotateAxisRadians(o,a,e),e.quat2_mul(i,i),this.pp_setTransformWorldQuat(i)}}(),WL.Object.prototype.pp_rotateAroundAxisLocal=function(t,i,s){this.pp_rotateAroundAxisLocalDegrees(t,i,s)},WL.Object.prototype.pp_rotateAroundAxisLocalDegrees=function(t,i,s){this.pp_rotateAroundAxisLocalRadians(Math.pp_toRadians(t),i,s)},WL.Object.prototype.pp_rotateAroundAxisLocalRadians=function(){let e=PP.vec3_create(),t=PP.vec3_create();return function(s,n,o){this.pp_convertPositionLocalToWorld(o,e),this.pp_convertDirectionLocalToWorld(n,t),this.pp_rotateAroundAxisWorldRadians(s,t,e)}}(),WL.Object.prototype.pp_rotateAroundAxisObject=function(t,i,s){this.pp_rotateAroundAxisObjectDegrees(t,i,s)},WL.Object.prototype.pp_rotateAroundAxisObjectDegrees=function(t,i,s){this.pp_rotateAroundAxisObjectRadians(Math.pp_toRadians(t),i,s)},WL.Object.prototype.pp_rotateAroundAxisObjectRadians=function(){let e=PP.vec3_create(),t=PP.vec3_create();return function(s,n,o){this.pp_convertPositionObjectToWorld(o,e),this.pp_convertDirectionObjectToWorld(n,t),this.pp_rotateAroundAxisWorldRadians(s,t,e)}}(),WL.Object.prototype.pp_scaleObject=function(){let e=PP.vec3_create();return function(i){isNaN(i)?this.scale(i):(e.vec3_set(i),this.scale(e))}}(),WL.Object.prototype.pp_lookAt=function(t,i){this.pp_lookAtWorld(t,i)},WL.Object.prototype.pp_lookAtWorld=function(){let e=PP.vec3_create();return function(i,s){this.pp_getPositionWorld(e),i.vec3_sub(e,e),this.pp_lookToWorld(e,s)}}(),WL.Object.prototype.pp_lookAtLocal=function(){let e=PP.vec3_create();return function(i,s){this.pp_getPositionLocal(e),i.vec3_sub(e,e),this.pp_lookToLocal(e,s)}}(),WL.Object.prototype.pp_lookTo=function(t,i){this.pp_lookToWorld(t,i)},WL.Object.prototype.pp_lookToWorld=function(){let e=PP.vec3_create();return function(i,s=this.pp_getUpWorld(e)){this.pp_setForwardWorld(i,s)}}(),WL.Object.prototype.pp_lookToLocal=function(){let e=PP.vec3_create();return function(i,s=this.pp_getUpLocal(e)){this.pp_setForwardLocal(i,s)}}(),WL.Object.prototype.pp_setParent=function(){let e=PP.vec3_create(),t=PP.quat_create(),i=PP.vec3_create();return function(n,o=!0){o?(this.pp_getPositionWorld(e),this.pp_getRotationWorldQuat(t),this.pp_getScaleWorld(i),this.parent=n,this.pp_setScaleWorld(i),this.pp_setRotationWorldQuat(t),this.pp_setPositionWorld(e)):this.parent=n}}(),WL.Object.prototype.pp_getParent=function(){return this.parent},WL.Object.prototype.pp_convertPositionObjectToWorld=function(){let e=PP.mat4_create();return function(i,s=PP.vec3_create()){return this.pp_getTransformWorldMatrix(e),i.vec3_transformMat4(e,s),s}}(),WL.Object.prototype.pp_convertDirectionObjectToWorld=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return this.pp_getRotationWorldQuat(e),i.vec3_transformQuat(e,s),s}}(),WL.Object.prototype.pp_convertPositionWorldToObject=function(){let e=PP.mat4_create();return function(i,s=PP.vec3_create()){return this.pp_getTransformWorldMatrix(e),e.mat4_invert(e),i.vec3_transformMat4(e,s),s}}(),WL.Object.prototype.pp_convertDirectionWorldToObject=function(){let e=PP.quat_create();return function(i,s=PP.vec3_create()){return this.pp_getRotationWorldQuat(e),e.quat_conjugate(e),i.vec3_transformQuat(e,s),s}}(),WL.Object.prototype.pp_convertPositionLocalToWorld=function(t,i=PP.vec3_create()){return this.pp_getParent()?this.pp_getParent().pp_convertPositionObjectToWorld(t,i):i.vec3_copy(t),i},WL.Object.prototype.pp_convertDirectionLocalToWorld=function(t,i=PP.vec3_create()){return this.pp_getParent()?this.pp_getParent().pp_convertDirectionObjectToWorld(t,i):i.vec3_copy(t),i},WL.Object.prototype.pp_convertPositionWorldToLocal=function(t,i=PP.vec3_create()){return this.pp_getParent()?this.pp_getParent().pp_convertPositionWorldToObject(t,i):i.vec3_copy(t),i},WL.Object.prototype.pp_convertDirectionWorldToLocal=function(t,i=PP.vec3_create()){return this.pp_getParent()?this.pp_getParent().pp_convertDirectionWorldToObject(t,i):i.vec3_copy(t),i},WL.Object.prototype.pp_convertPositionObjectToLocal=function(t,i=PP.vec3_create()){return this.pp_convertPositionObjectToWorld(t,i),this.pp_convertPositionWorldToLocal(i,i),i},WL.Object.prototype.pp_convertDirectionObjectToLocal=function(t,i=PP.vec3_create()){return this.pp_convertDirectionObjectToWorld(t,i),this.pp_convertDirectionWorldToLocal(i,i),i},WL.Object.prototype.pp_convertPositionLocalToObject=function(t,i=PP.vec3_create()){return this.pp_convertPositionLocalToWorld(t,i),this.pp_convertPositionWorldToObject(i,i),i},WL.Object.prototype.pp_convertDirectionLocalToObject=function(t,i=PP.vec3_create()){return this.pp_convertDirectionLocalToWorld(t,i),this.pp_convertDirectionWorldToObject(i,i),i},WL.Object.prototype.pp_convertTransformObjectToWorld=function(t,i){return this.pp_convertTransformObjectToWorldMatrix(t,i)},WL.Object.prototype.pp_convertTransformObjectToWorldMatrix=function(){let e=PP.mat4_create(),t=PP.vec3_create(),i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create(1);return function(a,l=PP.mat4_create()){return this.pp_getTransformWorldMatrix(e),this.pp_hasUniformScaleWorld()?e.mat4_mul(a,l):(t.vec3_set(a[12],a[13],a[14]),this.pp_convertPositionObjectToWorld(t,t),e.mat4_getScale(i),n.vec3_div(i,s),e.mat4_scale(s,e),e.mat4_mul(a,l),l.mat4_scale(i,l),l[12]=t[0],l[13]=t[1],l[14]=t[2],l[15]=1),l}}(),WL.Object.prototype.pp_convertTransformObjectToWorldQuat=function(){let e=PP.vec3_create(),t=PP.quat_create();return function(s,n=PP.quat2_create()){return this.pp_getRotationWorldQuat(t),t.quat_mul(s,t),s.quat2_getPosition(e),this.pp_convertPositionObjectToWorld(e,e),n.quat2_setPositionRotationQuat(e,t),n}}(),WL.Object.prototype.pp_convertTransformWorldToObject=function(t,i){return this.pp_convertTransformWorldToObjectMatrix(t,i)},WL.Object.prototype.pp_convertTransformWorldToObjectMatrix=function(){let e=PP.mat4_create(),t=PP.vec3_create(),i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create(1);return function(a,l=PP.mat4_create()){return this.pp_getTransformWorldMatrix(e),this.pp_hasUniformScaleWorld()?(e.mat4_invert(e),e.mat4_mul(a,l)):(t.vec3_set(a[12],a[13],a[14]),this.pp_convertPositionWorldToObject(t,t),e.mat4_getScale(i),n.vec3_div(i,s),e.mat4_scale(s,e),e.mat4_invert(e),e.mat4_mul(a,l),l.mat4_scale(s,l),l[12]=t[0],l[13]=t[1],l[14]=t[2],l[15]=1),l}}(),WL.Object.prototype.pp_convertTransformWorldToObjectQuat=function(){let e=PP.vec3_create(),t=PP.quat_create();return function(s,n=PP.quat2_create()){return this.pp_getRotationWorldQuat(t),t.quat_conjugate(t),t.quat_mul(s,t),s.quat2_getPosition(e),this.pp_convertPositionWorldToObject(e,e),n.quat2_setPositionRotationQuat(e,t),n}}(),WL.Object.prototype.pp_convertTransformLocalToWorld=function(t,i){return this.pp_convertTransformLocalToWorldMatrix(t,i)},WL.Object.prototype.pp_convertTransformLocalToWorldMatrix=function(t,i=PP.mat4_create()){return this.pp_getParent()?this.pp_getParent().pp_convertTransformObjectToWorldMatrix(t,i):i.mat4_copy(t),i},WL.Object.prototype.pp_convertTransformLocalToWorldQuat=function(t,i=PP.quat2_create()){return this.pp_getParent()?this.pp_getParent().pp_convertTransformObjectToWorldQuat(t,i):i.quat2_copy(t),i},WL.Object.prototype.pp_convertTransformWorldToLocal=function(t,i){return this.pp_convertTransformWorldToLocalMatrix(t,i)},WL.Object.prototype.pp_convertTransformWorldToLocalMatrix=function(t,i=PP.mat4_create()){return this.pp_getParent()?this.pp_getParent().pp_convertTransformWorldToObjectMatrix(t,i):i.mat4_copy(t),i},WL.Object.prototype.pp_convertTransformWorldToLocalQuat=function(t,i=PP.quat2_create()){return this.pp_getParent()?this.pp_getParent().pp_convertTransformWorldToObjectQuat(t,i):i.quat2_copy(t),i},WL.Object.prototype.pp_convertTransformObjectToLocal=function(t,i){return this.pp_convertTransformObjectToLocalMatrix(t,i)},WL.Object.prototype.pp_convertTransformObjectToLocalMatrix=function(t,i=PP.mat4_create()){return this.pp_convertTransformObjectToWorldMatrix(t,i),this.pp_convertTransformWorldToLocalMatrix(i,i),i},WL.Object.prototype.pp_convertTransformObjectToLocalQuat=function(t,i=PP.quat2_create()){return this.pp_convertTransformObjectToWorldQuat(t,i),this.pp_convertTransformWorldToLocalQuat(i,i),i},WL.Object.prototype.pp_convertTransformLocalToObject=function(t,i){return this.pp_convertTransformLocalToObjectMatrix(t,i)},WL.Object.prototype.pp_convertTransformLocalToObjectMatrix=function(t,i=PP.mat4_create()){return this.pp_convertTransformLocalToWorldMatrix(t,i),this.pp_convertTransformWorldToObjectMatrix(i,i),i},WL.Object.prototype.pp_convertTransformLocalToObjectQuat=function(t,i=PP.quat2_create()){return this.pp_convertTransformLocalToWorldQuat(t,i),this.pp_convertTransformWorldToObjectQuat(i,i),i},WL.Object.prototype.pp_addComponent=function(t,i,s=null){let n=null;return typeof i=="boolean"?(n={},n.active=i):(n=i,s!=null&&(n==null&&(n={}),n.active=s)),this.addComponent(t,n)},WL.Object.prototype.pp_getComponent=function(t,i=0){return this.pp_getComponentHierarchy(t,i)},WL.Object.prototype.pp_getComponentSelf=function(t,i=0){return this.getComponent(t,i)},WL.Object.prototype.pp_getComponentHierarchy=function(t,i=0){return this.pp_getComponentHierarchyBreadth(t,i)},WL.Object.prototype.pp_getComponentHierarchyBreadth=function(t,i=0){let s=this.pp_getHierarchyBreadth();return WL.Object.pp_getComponentObjects(s,t,i)},WL.Object.prototype.pp_getComponentHierarchyDepth=function(t,i=0){let s=this.pp_getHierarchyDepth();return WL.Object.pp_getComponentObjects(s,t,i)},WL.Object.prototype.pp_getComponentDescendants=function(t,i=0){return this.pp_getComponentDescendantsBreadth(t,i)},WL.Object.prototype.pp_getComponentDescendantsBreadth=function(t,i=0){let s=this.pp_getDescendantsBreadth();return WL.Object.pp_getComponentObjects(s,t,i)},WL.Object.prototype.pp_getComponentDescendantsDepth=function(t,i=0){let s=this.pp_getDescendantsDepth();return WL.Object.pp_getComponentObjects(s,t,i)},WL.Object.prototype.pp_getComponentChildren=function(t,i=0){let s=this.pp_getChildren();return WL.Object.pp_getComponentObjects(s,t,i)},WL.Object.prototype.pp_getComponents=function(t){return this.pp_getComponentsHierarchy(t)},WL.Object.prototype.pp_getComponentsSelf=function(t){return this.getComponents(t)},WL.Object.prototype.pp_getComponentsHierarchy=function(t){return this.pp_getComponentsHierarchyBreadth(t)},WL.Object.prototype.pp_getComponentsHierarchyBreadth=function(t){let i=this.pp_getHierarchyBreadth();return WL.Object.pp_getComponentsObjects(i,t)},WL.Object.prototype.pp_getComponentsHierarchyDepth=function(t){let i=this.pp_getHierarchyDepth();return WL.Object.pp_getComponentsObjects(i,t)},WL.Object.prototype.pp_getComponentsDescendants=function(t){return this.pp_getComponentsDescendantsBreadth(t)},WL.Object.prototype.pp_getComponentsDescendantsBreadth=function(t){let i=this.pp_getDescendantsBreadth();return WL.Object.pp_getComponentsObjects(i,t)},WL.Object.prototype.pp_getComponentsDescendantsDepth=function(t){let i=this.pp_getDescendantsDepth();return WL.Object.pp_getComponentsObjects(i,t)},WL.Object.prototype.pp_getComponentsChildren=function(t){let i=this.pp_getChildren();return WL.Object.pp_getComponentsObjects(i,t)},WL.Object.prototype.pp_setActive=function(t,i=!0){i?this.pp_setActiveHierarchy(t):this.active=t},WL.Object.prototype.pp_setActiveSelf=function(t){this.pp_setActive(t,!1)},WL.Object.prototype.pp_setActiveHierarchy=function(t){this.pp_setActiveHierarchyBreadth(t)},WL.Object.prototype.pp_setActiveHierarchyBreadth=function(t){let i=this.pp_getHierarchyBreadth();return WL.Object.pp_setActiveObjects(i,t)},WL.Object.prototype.pp_setActiveHierarchyDepth=function(t){let i=this.pp_getHierarchyDepth();return WL.Object.pp_setActiveObjects(i,t)},WL.Object.prototype.pp_setActiveDescendants=function(t){this.pp_setActiveDescendantsBreadth(t)},WL.Object.prototype.pp_setActiveDescendantsBreadth=function(t){let i=this.pp_getDescendantsBreadth();return WL.Object.pp_setActiveObjects(i,t)},WL.Object.prototype.pp_setActiveDescendantsDepth=function(t){let i=this.pp_getDescendantsDepth();return WL.Object.pp_setActiveObjects(i,t)},WL.Object.prototype.pp_setActiveChildren=function(t){let i=this.pp_getChildren();return WL.Object.pp_setActiveObjects(i,t)},WL.Object.prototype.pp_hasUniformScale=function(){return this.pp_hasUniformScaleWorld()},WL.Object.prototype.pp_hasUniformScaleWorld=function(){let e=PP.vec3_create();return function(){return this.pp_getScaleWorld(e),Math.abs(e[0]-e[1])<this._pp_epsilon&&Math.abs(e[1]-e[2])<this._pp_epsilon&&Math.abs(e[0]-e[2])<this._pp_epsilon}}(),WL.Object.prototype.pp_hasUniformScaleLocal=function(){let e=PP.vec3_create();return function(){return this.pp_getScaleLocal(e),Math.abs(e[0]-e[1])<this._pp_epsilon&&Math.abs(e[1]-e[2])<this._pp_epsilon&&Math.abs(e[0]-e[2])<this._pp_epsilon}}(),PP.CloneParams=class{constructor(){this.myIgnoreNonCloneable=!1,this.myIgnoreComponents=!1,this.myIgnoreChildren=!1,this.myComponentsToIgnore=[],this.myComponentsToInclude=[],this.myIgnoreComponentCallback=null,this.myChildrenToIgnore=[],this.myChildrenToInclude=[],this.myIgnoreChildCallback=null,this.myDeepCloneParams=new PP.DeepCloneParams,this.myCustomParamsMap=new Map}},PP.DeepCloneParams=class{constructor(){this._myDeepCloneObject=!1,this._myOverrideDeepCloneComponentsMap=new Map,this._myOverrideDeepCloneComponentsVariablesMap=new Map}setDeepCloneObject(t){this._myDeepCloneObject=t}setDeepCloneComponent(t,i){this._myOverrideDeepCloneComponentsMap.set(t,i)}setDeepCloneComponentVariable(t,i,s){let n=null;this._myOverrideDeepCloneComponentsVariablesMap.has(t)||this._myOverrideDeepCloneComponentsVariablesMap.set(t,new Map),n=this._myOverrideDeepCloneComponentsVariablesMap.get(t),n.set(i,s)}isDeepCloneComponent(t){let i=this._myOverrideDeepCloneComponentsMap.get(t);return i??this._myDeepCloneObject}isDeepCloneComponentVariable(t,i){let s=this._myOverrideDeepCloneComponentsVariablesMap.get(t);if(s!=null){let n=s.get(i);if(n!=null)return n}return this.isDeepCloneComponent(t)}},WL.Object.prototype.pp_clone=function(){let e=PP.vec3_create(),t=PP.quat2_create();return function(s=new PP.CloneParams){let n=null;if(this.pp_isCloneable(s)){let o=[];o.push([this.parent,this]);let a=[];for(;o.length>0;){let y=o.shift(),r=y[0],m=y[1],c=WL.scene.addObject(r);if(c.name=m.name,c.pp_setScaleLocal(m.pp_getScaleLocal(e)),c.pp_setTransformLocalQuat(m.pp_getTransformLocalQuat(t)),s.myIgnoreComponents||a.push([m,c]),!s.myIgnoreChildren)for(let h of m.children){let _=!1;s.myChildrenToInclude.length>0?_=s.myChildrenToInclude.find(d=>d.pp_equals(h))!=null:_=s.myChildrenToIgnore.find(d=>d.pp_equals(h))==null,_&&s.myIgnoreChildCallback!=null&&(_=!s.myIgnoreChildCallback(h)),_&&o.push([c,h])}n==null&&(n=c)}let l=[];for(;a.length>0;){let y=a.shift(),r=y[0],m=y[1],c=r.pp_getComponentsSelf();for(let h of c)if(h.pp_clone!=null){let _=!1;s.myComponentsToInclude.length>0?_=s.myComponentsToInclude.indexOf(h.type)!=-1:_=s.myComponentsToIgnore.indexOf(h.type)==-1,_&&s.myIgnoreComponentCallback!=null&&(_=!s.myIgnoreComponentCallback(h)),_&&l.push([h,m])}}let u=[];for(;l.length>0;){let y=l.shift(),r=y[0],m=y[1],c=r.pp_clone(m,s.myDeepCloneParams,s.myCustomParamsMap);r.pp_clonePostProcess!=null&&u.push([r,c])}for(;l.length>0;){let y=l.shift(),r=y[0],m=y[1];r.pp_clonePostProcess(m,s.myDeepCloneParams,s.myCustomParamsMap)}}return n}}(),WL.Object.prototype.pp_isCloneable=function(t=new PP.CloneParams){if(t.myIgnoreNonCloneable||t.myIgnoreComponents)return!0;let i=!0,s=[];for(s.push(this);i&&s.length>0;){let n=s.shift(),o=this.pp_getComponentsSelf();for(let a of o){let l=!1;if(t.myComponentsToInclude.length>0?l=t.myComponentsToInclude.indexOf(a.type)!=-1:l=t.myComponentsToIgnore.indexOf(a.type)==-1,l&&t.myIgnoreComponentCallback!=null&&(l=!t.myIgnoreComponentCallback(a)),l&&a.pp_clone==null){i=!1;break}}if(i&&!t.myIgnoreChildren)for(let a of n.children){let l=!1;t.myChildrenToInclude.length>0?l=t.myChildrenToInclude.find(u=>u.pp_equals(a))!=null:l=t.myChildrenToIgnore.find(u=>u.pp_equals(a))==null,l&&t.myIgnoreChildCallback!=null&&(l=!t.myIgnoreChildCallback(a)),l&&s.push(a)}}return i},WL.Object.prototype.pp_toString=function(){return this.pp_toStringCompact()},WL.Object.prototype.pp_toStringExtended=function(){let e="    ",t=`
`,i="{",s="}",n="name: ",o="id: ",a="components: ",l="type: ",u="children: ",y="[",r="]",m=y,c=r,h=",",_=t.concat(e,e);return function(){let p="";p=p.concat(i,t);let P=this.pp_getComponentsSelf(),T=this.pp_getChildren(),g=this.pp_getName();if(P.length>0||T.length>0||g.length>0?p=p.concat(e,o,this.pp_getID(),h,t):p=p.concat(e,o,this.pp_getID(),t),g.length>0&&(P.length>0||T.length>0?p=p.concat(e,n,this.pp_getName(),h,t):p=p.concat(e,n,this.pp_getName(),t)),P.length>0){p=p.concat(e,a,t,e,y,t);for(let b=0;b<P.length;b++){let S=P[b];p=p.concat(e,e,i,t),p=p.concat(e,e,e,l,S.type,h,t),p=p.concat(e,e,e,o,S._id,h,t),p=p.concat(e,e,s),b!=P.length-1?p=p.concat(h,t):p=p.concat(t)}T.length>0?p=p.concat(e,r,h,t):p=p.concat(e,r,t)}if(T.length>0){p=p.concat(e,u,t,e,m,t);for(let b=0;b<T.length;b++){let v=T[b].pp_toStringExtended();v=v.replaceAll(t,_),v=e.concat(e,v),p=p.concat(v),b!=T.length-1?p=p.concat(h,t):p=p.concat(t)}p=p.concat(e,c,t)}return p=p.concat(s),p}}(),WL.Object.prototype.pp_toStringCompact=function(){let e="    ",t=`
`,i="<none>",s="name: ",n="components: ",o=", ",a=t.concat(e);return function(){let u="",y=this.pp_getName();y.length>0?u=u.concat(s,y):u=u.concat(s,i);let r=this.pp_getComponentsSelf();if(r.length>0){u=u.concat(o,n);for(let c=0;c<r.length;c++){let h=r[c];u=u.concat(h.type),c!=r.length-1&&(u=u.concat(o))}}let m=this.pp_getChildren();if(m.length>0){u=u.concat(t);for(let c=0;c<m.length;c++){let _=m[c].pp_toStringCompact();_=_.replaceAll(t,a),_=e.concat(_),u=u.concat(_),c!=m.length-1&&(u=u.concat(t))}}return u}}(),WL.Object.prototype.pp_getObjectByName=function(t){return this.pp_getObjectByNameHierarchy(t)},WL.Object.prototype.pp_getObjectByNameHierarchy=function(t){return this.pp_getObjectByNameHierarchyBreadth(t)},WL.Object.prototype.pp_getObjectByNameHierarchyBreadth=function(t){let i=this.pp_getHierarchyBreadth();return WL.Object.pp_getObjectByNameObjects(i,t)},WL.Object.prototype.pp_getObjectByNameHierarchyDepth=function(t){let i=this.pp_getHierarchyDepth();return WL.Object.pp_getObjectByNameObjects(i,t)},WL.Object.prototype.pp_getObjectByNameDescendants=function(t){return this.pp_getObjectByNameDescendantsBreadth(t)},WL.Object.prototype.pp_getObjectByNameDescendantsBreadth=function(t){let i=this.pp_getDescendantsBreadth();return WL.Object.pp_getObjectByNameObjects(i,t)},WL.Object.prototype.pp_getObjectByNameDescendantsDepth=function(t){let i=this.pp_getDescendantsDepth();return WL.Object.pp_getObjectByNameObjects(i,t)},WL.Object.prototype.pp_getObjectByNameChildren=function(t){let i=this.pp_getChildren();return WL.Object.pp_getObjectByNameObjects(i,t)},WL.Object.prototype.pp_getObjectsByName=function(t){return this.pp_getObjectsByNameHierarchy(t)},WL.Object.prototype.pp_getObjectsByNameHierarchy=function(t){return this.pp_getObjectsByNameHierarchyBreadth(t)},WL.Object.prototype.pp_getObjectsByNameHierarchyBreadth=function(t){let i=this.pp_getHierarchyBreadth();return WL.Object.pp_getObjectsByNameObjects(i,t)},WL.Object.prototype.pp_getObjectsByNameHierarchyDepth=function(t){let i=this.pp_getHierarchyDepth();return WL.Object.pp_getObjectsByNameObjects(i,t)},WL.Object.prototype.pp_getObjectsByNameDescendants=function(t){return this.pp_getObjectsByNameDescendantsBreadth(t)},WL.Object.prototype.pp_getObjectsByNameDescendantsBreadth=function(t){let i=this.pp_getDescendantsBreadth();return WL.Object.pp_getObjectsByNameObjects(i,t)},WL.Object.prototype.pp_getObjectsByNameDescendantsDepth=function(t){let i=this.pp_getDescendantsDepth();return WL.Object.pp_getObjectsByNameObjects(i,t)},WL.Object.prototype.pp_getObjectsByNameChildren=function(t){let i=this.pp_getChildren();return WL.Object.pp_getObjectsByNameObjects(i,t)},WL.Object.prototype.pp_getHierarchy=function(){return this.pp_getHierarchyBreadth()},WL.Object.prototype.pp_getHierarchyBreadth=function(){let t=this.pp_getDescendantsBreadth();return t.unshift(this),t},WL.Object.prototype.pp_getHierarchyDepth=function(){let t=this.pp_getDescendantsDepth();return t.unshift(this),t},WL.Object.prototype.pp_getDescendants=function(){return this.pp_getDescendantsBreadth()},WL.Object.prototype.pp_getDescendantsBreadth=function(){let t=[],i=this.children;for(;i.length>0;){let s=i.shift();t.push(s);for(let n of s.children)i.push(n)}return t},WL.Object.prototype.pp_getDescendantsDepth=function(){let t=[],i=this.pp_getChildren();for(let s of i){t.push(s);let n=s.pp_getDescendantsDepth();n.length>0&&t.push(...n)}return t},WL.Object.prototype.pp_getChildren=function(){return this.children},WL.Object.prototype.pp_getSelf=function(){return this},WL.Object.prototype.pp_addObject=function(){return WL.scene.addObject(this)},WL.Object.prototype.pp_getName=function(){return this.name},WL.Object.prototype.pp_setName=function(t){this.name=t},WL.Object.prototype.pp_getID=function(){return this.objectId},WL.Object.prototype.pp_markDirty=function(){return this.setDirty()},WL.Object.prototype.pp_equals=function(t){return this.equals(t)},WL.Object.prototype.pp_destroy=function(){return this.destroy()},WL.Object.prototype.pp_reserveObjects=function(t){this.pp_reserveObjectsHierarchy(t)},WL.Object.prototype.pp_reserveObjectsSelf=function(t){let i=this.pp_getComponentsAmountMapSelf();this._pp_reserveObjects(t,i)},WL.Object.prototype.pp_reserveObjectsHierarchy=function(t){let i=this.pp_getComponentsAmountMapHierarchy();this._pp_reserveObjects(t,i)},WL.Object.prototype.pp_reserveObjectsDescendants=function(t){let i=this.pp_getComponentsAmountMapDescendants();this._pp_reserveObjects(t,i)},WL.Object.prototype.pp_reserveObjectsChildren=function(t){let i=this.pp_getComponentsAmountMapChildren();this._pp_reserveObjects(t,i)},WL.Object.prototype.pp_getComponentsAmountMap=function(t=new Map){return this.pp_getComponentsAmountMapHierarchy(t)},WL.Object.prototype.pp_getComponentsAmountMapSelf=function(t=new Map){let i=t.get("object");i==null&&(i=0),i+=1,t.set("object",i);let s=this.pp_getComponentsSelf();for(let n of s){let o=n.type,a=t.get(o);a==null&&(a=0),a+=1,t.set(o,a)}return t},WL.Object.prototype.pp_getComponentsAmountMapHierarchy=function(t=new Map){let i=this.pp_getHierarchy();for(let s of i)s.pp_getComponentsAmountMapSelf(t);return t},WL.Object.prototype.pp_getComponentsAmountMapDescendants=function(t=new Map){let i=this.pp_getDescendants();for(let s of i)s.pp_getComponentsAmountMapSelf(t);return t},WL.Object.prototype.pp_getComponentsAmountMapChildren=function(t=new Map){let i=this.pp_getChildren();for(let s of i)s.pp_getComponentsAmountMapSelf(t);return t},WL.Object.pp_getComponentObjects=function(t,i,s=0){let n=null;for(let o of t)if(n=o.getComponent(i,s),n!=null)break;return n},WL.Object.pp_getComponentsObjects=function(t,i){let s=[];for(let n of t)s.push(...n.getComponents(i));return s},WL.Object.pp_setActiveObjects=function(t,i){for(let s of t)s.active=i},WL.Object.pp_getObjectByNameObjects=function(t,i){let s=null;for(let n of t)if(n.pp_getName()==i){s=n;break}return s},WL.Object.pp_getObjectsByNameObjects=function(t,i){let s=[];for(let n of t)n.pp_getName()==i&&s.push(n);return s},WL.Object.prototype._pp_epsilon=1e-6,WL.Object.prototype._pp_quaternionToRadians=function(){let e=PP.mat3_create();return function(i,s=PP.vec3_create()){return i.quat_toMatrix(e),s[1]=Math.asin(-this._pp_clamp(e[2],-1,1)),Math.abs(e[2])<.9999999?(s[0]=Math.atan2(e[5],e[8]),s[2]=Math.atan2(e[1],e[0])):(s[0]=0,s[2]=Math.atan2(-e[3],e[4])),s}}(),WL.Object.prototype._pp_degreesToQuaternion=function(t,i=PP.quat_create()){return i.quat_fromDegrees(t),i},WL.Object.prototype._pp_toDegrees=function(t){return t*(180/Math.PI)},WL.Object.prototype._pp_clamp=function(t,i,s){return Math.min(Math.max(t,i),s)},WL.Object.prototype._pp_reserveObjects=function(t,i){let s=i.get("object")*t;i.delete("object");let n={};for(let[o,a]of i.entries())n[o]=a*t;WL.scene.reserveObjects(s,n)},WL.Object.prototype._pp_setAxes=function(){let e=[PP.vec3_create(),PP.vec3_create(),PP.vec3_create()],t=[[1,-1,1],[1,1,-1],[-1,1,-1]],i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create(),o=PP.vec3_create(),a=PP.vec3_create(),l=PP.mat3_create(),u=PP.quat_create();return function(r,m,c){let h=r[m[0]],_=r[m[1]],d=r[m[2]];if(h==null||h.vec3_length()<=this._pp_epsilon)return;let p=!1;_!=null&&h.vec3_angleRadians(_)>this._pp_epsilon&&(p=!0);let P=!1;if(d!=null&&h.vec3_angleRadians(d)>this._pp_epsilon&&(P=!0),p||P){let T=null,g=null,b=null;p?(T=_,g=1,b=2):(T=d,g=2,b=1);let S=t[m[0]];h.vec3_cross(T,e[b]),e[b].vec3_scale(S[m[b]],e[b]),h.vec3_cross(e[b],e[g]),e[g].vec3_scale(S[m[g]],e[g]),e[1].vec3_cross(e[2],e[0]),e[0].vec3_scale(S[m[0]],e[0]),e[m.pp_findIndexEqual(0)].vec3_normalize(i),e[m.pp_findIndexEqual(1)].vec3_normalize(s),e[m.pp_findIndexEqual(2)].vec3_normalize(n),l.mat3_set(i[0],i[1],i[2],s[0],s[1],s[2],n[0],n[1],n[2]),l.mat3_toQuat(u),u.quat_normalize(u),c?this.pp_setRotationLocalQuat(u):this.pp_setRotationWorldQuat(u)}else{m[0]==0?c?this.pp_getLeftLocal(o):this.pp_getLeftWorld(o):m[0]==1?c?this.pp_getUpLocal(o):this.pp_getUpWorld(o):c?this.pp_getForwardLocal(o):this.pp_getForwardWorld(o);let T=h.vec3_angleRadians(o);T!=0&&(o.vec3_cross(h,a),a.vec3_normalize(a),u.quat_fromAxisRadians(T,a),c?this.pp_rotateLocalQuat(u):this.pp_rotateWorldQuat(u))}}}();for(let e in WL.Object.prototype){let t=["pp_","_pp_"],i=!1;for(let s of t)if(e.startsWith(s)){i=!0;break}i&&Object.defineProperty(WL.Object.prototype,e,{enumerable:!1})}}});var Ye=f(()=>{if(WL&&WL.Scene){WL.Scene.prototype.pp_getRoot=function(){return new WL.Object(0)},WL.Scene.prototype.pp_getObjects=function(){return this.pp_getObjectsBreadth()},WL.Scene.prototype.pp_getObjectsBreadth=function(){return this.pp_getRoot().pp_getHierarchyBreadth()},WL.Scene.prototype.pp_getObjectsDepth=function(){return this.pp_getRoot().pp_getHierarchyDepth()},WL.Scene.prototype.pp_getComponent=function(t,i=0){return this.pp_getComponentBreadth(t,i)},WL.Scene.prototype.pp_getComponentBreadth=function(t,i=0){return this.pp_getRoot().pp_getComponentHierarchyBreadth(t,i)},WL.Scene.prototype.pp_getComponentDepth=function(t,i=0){return this.pp_getRoot().pp_getComponentHierarchyDepth(t,i)},WL.Scene.prototype.pp_getComponents=function(t){return this.pp_getComponentsBreadth(t)},WL.Scene.prototype.pp_getComponentsBreadth=function(t){return this.pp_getRoot().pp_getComponentsHierarchyBreadth(t)},WL.Scene.prototype.pp_getComponentsDepth=function(t){return this.pp_getRoot().pp_getComponentsHierarchyDepth(t)},WL.Scene.prototype.pp_getObjectByName=function(t){return this.pp_getObjectByNameBreadth(t)},WL.Scene.prototype.pp_getObjectByNameBreadth=function(t){return this.pp_getRoot().pp_getObjectByNameHierarchyBreadth(t)},WL.Scene.prototype.pp_getObjectByNameDepth=function(t){return this.pp_getRoot().pp_getObjectByNameHierarchyDepth(t)},WL.Scene.prototype.pp_getObjectsByName=function(t){return this.pp_getObjectsByNameBreadth(t)},WL.Scene.prototype.pp_getObjectsByNameBreadth=function(t){return this.pp_getRoot().pp_getObjectsByNameHierarchyBreadth(t)},WL.Scene.prototype.pp_getObjectsByNameDepth=function(t){return this.pp_getRoot().pp_getObjectsByNameHierarchyDepth(t)},WL.Scene.prototype.pp_toString=function(){return this.pp_toStringCompact()},WL.Scene.prototype.pp_toStringCompact=function(){return this.pp_getRoot().pp_toStringCompact()},WL.Scene.prototype.pp_toStringExtended=function(){return this.pp_getRoot().pp_toStringExtended()},WL.Scene.prototype.pp_getComponentsAmountMap=function(t=new Map){return this.pp_getRoot().pp_getComponentsAmountMapHierarchy(t)};for(let e in WL.Scene.prototype){let t=["pp_","_pp_"],i=!1;for(let s of t)if(e.startsWith(s)){i=!0;break}i&&Object.defineProperty(WL.Scene.prototype,e,{enumerable:!1})}}});var Ze=f(()=>{WL&&WL.Object&&(WL.MeshComponent.prototype.pp_clone=function(t,i=new PP.DeepCloneParams,s=null){let n=t.pp_addComponent(this.type);return n.active=this.active,i.isDeepCloneComponentVariable("mesh","material")?n.material=this.material.clone():n.material=this.material,i.isDeepCloneComponentVariable("mesh","mesh")?n.mesh=PP.MeshUtils.cloneMesh(this.mesh):n.mesh=this.mesh,n.skin=this.skin,n},WL.CollisionComponent.prototype.pp_clone=function(t,i=new PP.DeepCloneParams,s=null){let n=t.pp_addComponent(this.type);return n.active=this.active,n.collider=this.collider,n.extents=this.extents.slice(0),n.group=this.group,n},WL.TextComponent.prototype.pp_clone=function(t,i=new PP.DeepCloneParams,s=null){let n=t.pp_addComponent(this.type);return n.active=this.active,i.isDeepCloneComponent("text")?n.text=this.text.slice(0):n.text=this.text,i.isDeepCloneComponentVariable("text","material")?n.material=this.material.clone():n.material=this.material,n.alignment=this.alignment,n.justification=this.justification,n},WL.PhysXComponent.prototype.pp_clone=function(t,i=new PP.DeepCloneParams,s=null){let n={static:this.static,simulate:this.simulate,angularDamping:this.angularDamping,dynamicFriction:this.dynamicFriction,extents:this.extents,kinematic:this.kinematic,linearDamping:this.linearDamping,mass:this.mass,restituition:this.restituition,shape:this.shape,shapeData:this.shapeData,staticFriction:this.staticFriction,bounciness:this.bounciness,allowQuery:this.allowQuery,allowSimulation:this.allowSimulation,gravity:this.gravity,trigger:this.trigger};this.static||(n.angularVelocity=this.angularVelocity,n.linearVelocity=this.linearVelocity);let o=t.pp_addComponent(this.type,n);return o.active=this.active,o},Object.defineProperty(WL.MeshComponent.prototype,"pp_clone",{enumerable:!1}),Object.defineProperty(WL.CollisionComponent.prototype,"pp_clone",{enumerable:!1}),Object.defineProperty(WL.TextComponent.prototype,"pp_clone",{enumerable:!1}),Object.defineProperty(WL.PhysXComponent.prototype,"pp_clone",{enumerable:!1}))});var Cm={};var $e=F(()=>{Jt();_WL&&_WL._componentTypes&&_WL._componentTypes[_WL._componentTypeIndices.cursor]?(_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.init=function(){this.session=null,this.collisionMask=1<<this.collisionGroup,this.maxDistance=100,this.doubleClickTimer=0,this.tripleClickTimer=0,this.multipleClickObject=null,this.multipleClickDelay=.3,this.visible=!1;let t=this.onDestroy.bind(this);WL.onSceneLoaded.push(t),this.onDestroyCallbacks=[()=>{let i=WL.onSceneLoaded.indexOf(t);i>=0&&WL.onSceneLoaded.splice(i,1)}],this.prevHitLocationLocalToTarget=PP.vec3_create(),this.pointerId=null,this.lastClientX=null,this.lastClientY=null,this.lastWidth=null,this.lastHeight=null},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.start=function(){if(this.handedness==0){let i=this.object.getComponent("input");i?(this.handedness=i.handedness,this.input=i):console.warn("cursor component on object",this.object.name,'was configured with handedness "input component", but object has no input component.')}else this.handedness=["left","right"][this.handedness-1];this.globalTarget=this.object.addComponent("cursor-target"),this.transformQuat=PP.quat2_create(),this.rotationQuat=PP.quat_create(),this.transformMatrix=PP.mat4_create(),this.origin=new Float32Array(3),this.cursorObjScale=new Float32Array(3),this.direction=PP.vec3_create(),this.tempQuat=new Float32Array(4),this.setViewComponent(this.object.getComponent("view")),this.isHovering=!1,this.visible=!0,this.isDown=!1,this.lastIsDown=!1,this.isUpWithNoDown=!1,this.isRealDown=!1,this.cursorPos=new Float32Array(3),this.hoveringObject=null;let t=this.setupVREvents.bind(this);WL.onXRSessionStart.push(t),this.onDestroyCallbacks.push(()=>{let i=WL.onXRSessionStart.indexOf(t);i>=0&&WL.onXRSessionStart.splice(i,1)}),this.showRay=!0,this.cursorRayObject&&(this.cursorRayObject.pp_setActive(!0),this.showRay=!1,this.cursorRayOrigin=new Float32Array(3),this.cursorRayScale=new Float32Array(3),this.cursorRayScale.set(this.cursorRayObject.scalingLocal),this._setCursorRayTransform(null)),this._setCursorVisibility(!1)},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.setViewComponent=function(t){if(this.viewComponent=t,this.viewComponent!=null){let i=this.onClick.bind(this);WL.canvas.addEventListener("click",i);let s=this.onPointerDown.bind(this);WL.canvas.addEventListener("pointerdown",s);let n=this.onPointerMove.bind(this);WL.canvas.addEventListener("pointermove",n);let o=this.onPointerUp.bind(this);WL.canvas.addEventListener("pointerup",o);let a=this.onPointerLeave.bind(this);WL.canvas.addEventListener("pointerleave",a),this.projectionMatrix=new Float32Array(16),I.invert(this.projectionMatrix,this.viewComponent.projectionMatrix);let l=this.onViewportResize.bind(this);window.addEventListener("resize",l),this.onDestroyCallbacks.push(()=>{WL.canvas.removeEventListener("click",i),WL.canvas.removeEventListener("pointerdown",s),WL.canvas.removeEventListener("pointermove",n),WL.canvas.removeEventListener("pointerup",o),WL.canvas.removeEventListener("pointerleave",a),window.removeEventListener("resize",l)})}},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onViewportResize=function(){!this.viewComponent||I.invert(this.projectionMatrix,this.viewComponent.projectionMatrix)},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype._setCursorRayTransform=function(t){if(!!this.cursorRayObject&&this.cursorRayScalingAxis!=4&&(this.cursorRayObject.resetScaling(),t!=null)){this.cursorRayObject.getTranslationWorld(this.cursorRayOrigin);let i=C.dist(this.cursorRayOrigin,t);this.cursorRayScale[this.cursorRayScalingAxis]=i,this.cursorRayObject.scale(this.cursorRayScale)}},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype._setCursorVisibility=function(t){this.visible=t,this.cursorObject&&this.cursorObject.pp_setActive(t)},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.update=function(t){this.doubleClickTimer>0&&(this.doubleClickTimer-=t),this.tripleClickTimer>0&&(this.tripleClickTimer-=t),this.doUpdate(!1)},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.doUpdate=function(t){if(this.session){if(this.arTouchDown&&this.input&&WL.xrSession.inputSources[0].handedness==="none"&&WL.xrSession.inputSources[0].gamepad){let s=WL.xrSession.inputSources[0].gamepad.axes;this.direction.vec3_set(s[0],-s[1],-1),this.updateDirection()}else this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction);let i=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);i.hitCount>0?this.cursorPos.set(i.locations[0]):this.cursorPos.fill(0),this.hoverBehaviour(i,t)}else if(this.viewComponent!=null&&this.lastClientX!=null){let i=this.updateMousePos(this.lastClientX,this.lastClientY,this.lastWidth,this.lastHeight);this.hoverBehaviour(i,!1)}this.cursorObject&&(this.hoveringObject&&(this.cursorPos[0]!=0||this.cursorPos[1]!=0||this.cursorPos[2]!=0)?(this._setCursorVisibility(!0),this.cursorObject.setTranslationWorld(this.cursorPos),this.cursorObject.transformLocal=this.cursorObject.transformLocal.quat2_normalize(this.transformQuat),this._setCursorRayTransform(this.cursorPos)):(this.visible&&this.cursorRayObject&&this._setCursorRayTransform(null),this._setCursorVisibility(!1))),this.cursorRayObject&&this.cursorRayObject.pp_setActive(!0),this.hoveringObject==null&&(this.pointerId=null)},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.hoverBehaviour=function(t,i,s=!1){if(!s&&t.hitCount>0){let n=!1;if(!this.hoveringObject||!this.hoveringObject.equals(t.objects[0])){if(this.hoveringObject){let l=this.hoveringObject.getComponent("cursor-target");l&&l.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}n=!0,this.hoveringObject=t.objects[0],this.styleCursor&&(document.body.style.cursor="pointer");let a=this.hoveringObject.getComponent("cursor-target");a&&a.onHover(this.hoveringObject,this),this.globalTarget.onHover(this.hoveringObject,this),!this._isDown()&&this.isRealDown&&(this.isDown=!1,this.lastIsDown=!1,this.isUpWithNoDown=!1,a&&a.onDownOnHover(this.hoveringObject,this),this.globalTarget.onDownOnHover(this.hoveringObject,this))}let o=this.hoveringObject.getComponent("cursor-target");!n&&this._isMoving(t.locations[0])&&(o&&o.onMove(this.hoveringObject,this),this.globalTarget.onMove(this.hoveringObject,this)),this._isDown()?(o&&o.onDown(this.hoveringObject,this),this.globalTarget.onDown(this.hoveringObject,this),this.tripleClickTimer>0&&this.multipleClickObject&&this.multipleClickObject.equals(this.hoveringObject)?(o&&o.onTripleClick(this.hoveringObject,this),this.globalTarget.onTripleClick(this.hoveringObject,this),this.tripleClickTimer=0):this.doubleClickTimer>0&&this.multipleClickObject&&this.multipleClickObject.equals(this.hoveringObject)?(o&&o.onDoubleClick(this.hoveringObject,this),this.globalTarget.onDoubleClick(this.hoveringObject,this),this.tripleClickTimer=this.multipleClickDelay,this.doubleClickTimer=0):(o&&o.onClick(this.hoveringObject,this),this.globalTarget.onClick(this.hoveringObject,this),this.tripleClickTimer=0,this.doubleClickTimer=this.multipleClickDelay,this.multipleClickObject=this.hoveringObject)):!this.isUpWithNoDown&&!n&&this._isUp()?(o&&o.onUp(this.hoveringObject,this),this.globalTarget.onUp(this.hoveringObject,this)):(this.isUpWithNoDown||n&&this._isUp())&&(o&&o.onUpWithNoDown(this.hoveringObject,this),this.globalTarget.onUpWithNoDown(this.hoveringObject,this)),this.prevHitLocationLocalToTarget=this.hoveringObject.pp_convertPositionWorldToLocal(t.locations[0],this.prevHitLocationLocalToTarget)}else if(this.hoveringObject&&(s||t.hitCount==0)){let n=this.hoveringObject.getComponent("cursor-target");n&&n.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this),this.hoveringObject=null,this.styleCursor&&(document.body.style.cursor="default")}this.hoveringObject?this.lastIsDown=this.isDown:(this.isDown=!1,this.lastIsDown=!1),this.isUpWithNoDown=!1},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.setupVREvents=function(t){this.session=t;let i=function(a){this.session=null}.bind(this);t.addEventListener("end",i);let s=this.onSelect.bind(this);t.addEventListener("select",s);let n=this.onSelectStart.bind(this);t.addEventListener("selectstart",n);let o=this.onSelectEnd.bind(this);t.addEventListener("selectend",o),this.onDestroyCallbacks.push(()=>{!this.session||(t.removeEventListener("end",i),t.removeEventListener("select",s),t.removeEventListener("selectstart",n),t.removeEventListener("selectend",o))}),this.onViewportResize()},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onSelect=function(t){},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onSelectStart=function(t){this.active&&(this.arTouchDown=!0,t.inputSource.handedness==this.handedness&&(this.isDown=!0)),t.inputSource.handedness==this.handedness&&(this.isRealDown=!0)},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onSelectEnd=function(t){this.active&&(this.arTouchDown=!1,t.inputSource.handedness==this.handedness&&(this.isDown||(this.isUpWithNoDown=!0),this.isDown=!1)),t.inputSource.handedness==this.handedness&&(this.isRealDown=!1)},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onPointerMove=function(t){if(this.active){if(this.pointerId!=null&&this.pointerId!=t.pointerId)return;let i=document.body.getBoundingClientRect(),s=this.updateMousePos(t.clientX,t.clientY,i.width,i.height);this.hoverBehaviour(s,!1),this.hoveringObject!=null?this.pointerId=t.pointerId:this.pointerId=null}},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onClick=function(t){},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onPointerDown=function(t){if(!(this.pointerId!=null&&this.pointerId!=t.pointerId||t.button!==0))if(this.active){let i=document.body.getBoundingClientRect(),s=this.updateMousePos(t.clientX,t.clientY,i.width,i.height);this.isDown=!0,this.isRealDown=!0,this.hoverBehaviour(s,!1),this.hoveringObject!=null?this.pointerId=t.pointerId:this.pointerId=null}else this.isRealDown=!0},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onPointerUp=function(t){if(!(this.pointerId!=null&&this.pointerId!=t.pointerId||t.button!==0))if(this.active){let i=document.body.getBoundingClientRect(),s=this.updateMousePos(t.clientX,t.clientY,i.width,i.height);this.isDown||(this.isUpWithNoDown=!0),this.isDown=!1,this.isRealDown=!1,this.hoverBehaviour(s,!1),this.hoveringObject!=null?this.pointerId=t.pointerId:this.pointerId=null}else this.isRealDown=!1},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onPointerLeave=function(t){(this.pointerId==null||this.pointerId==t.pointerId)&&(this.active&&this.hoverBehaviour(null,!1,!0),this.pointerId=null,this.lastClientX=null,this.lastClientY=null,this.lastWidth=null,this.lastHeight=null)},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.updateMousePos=function(t,i,s,n){this.lastClientX=t,this.lastClientY=i,this.lastWidth=s,this.lastHeight=n;let o=t/s,a=i/n;return this.direction.vec3_set(o*2-1,-a*2+1,-1),this.updateDirection()},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.updateDirection=function(){this.object.getTranslationWorld(this.origin),C.transformMat4(this.direction,this.direction,this.projectionMatrix),C.normalize(this.direction,this.direction),C.transformQuat(this.direction,this.direction,this.object.transformWorld);let t=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);return t.hitCount>0?this.cursorPos.set(t.locations[0]):this.cursorPos.fill(0),t},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onDeactivate=function(){if(this.hoveringObject){let t=this.hoveringObject.getComponent("cursor-target");t&&t.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.hoveringObject=null,this.styleCursor&&(document.body.style.cursor="default"),this.isDown=!1,this.lastIsDown=!1,this.isUpWithNoDown=!1,this._setCursorVisibility(!1),this.cursorRayObject&&this.cursorRayObject.pp_setActive(!1),this.pointerId=null,this.lastClientX=null,this.lastClientY=null,this.lastWidth=null,this.lastHeight=null},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onActivate=function(){this.showRay=!0,this.isDown=!1,this.lastIsDown=!1,this.isUpWithNoDown=!1},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype.onDestroy=function(){for(let t of this.onDestroyCallbacks)t()},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype._isDown=function(){return this.isDown!==this.lastIsDown&&this.isDown},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype._isUp=function(){return this.isDown!==this.lastIsDown&&!this.isDown},_WL._componentTypes[_WL._componentTypeIndices.cursor].prototype._isMoving=function(){let e=PP.vec3_create();return function(i){let s=!1;return e=this.hoveringObject.pp_convertPositionWorldToLocal(i,e),e.vec_equals(this.prevHitLocationLocalToTarget,1e-4)||(s=!0),s}}()):console.error(`Wonderland Engine "cursor" component not found.
 Add the component to your project to avoid any issue with the PP bundle.`)});var ti=f(()=>{_WL&&_WL._componentTypes&&_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]]?(_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.init=function(){this.hoverFunctions=[],this.unHoverFunctions=[],this.clickFunctions=[],this.doubleClickFunctions=[],this.tripleClickFunctions=[],this.moveFunctions=[],this.downFunctions=[],this.upFunctions=[],this.downOnHoverFunctions=[],this.upWithNoDownFunctions=[],this.isSurface=!1},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onHover=function(t,i){for(let s of this.hoverFunctions)s(t,i)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onUnhover=function(t,i){for(let s of this.unHoverFunctions)s(t,i)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onClick=function(t,i){for(let s of this.clickFunctions)s(t,i)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onMove=function(t,i){for(let s of this.moveFunctions)s(t,i)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onDown=function(t,i){for(let s of this.downFunctions)s(t,i)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onUp=function(t,i){for(let s of this.upFunctions)s(t,i)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.addHoverFunction=function(t){this._validateCallback(t),this.hoverFunctions.push(t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.removeHoverFunction=function(t){this._validateCallback(t),this._removeItemOnce(this.hoverFunctions,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.addUnHoverFunction=function(t){this._validateCallback(t),this.unHoverFunctions.push(t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.removeUnHoverFunction=function(t){this._validateCallback(t),this._removeItemOnce(this.unHoverFunctions,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.addClickFunction=function(t){this._validateCallback(t),this.clickFunctions.push(t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.removeClickFunction=function(t){this._validateCallback(t),this._removeItemOnce(this.clickFunctions,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.addMoveFunction=function(t){this._validateCallback(t),this.moveFunctions.push(t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.removeMoveFunction=function(t){this._validateCallback(t),this._removeItemOnce(this.moveFunctions,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.addDownFunction=function(t){this._validateCallback(t),this.downFunctions.push(t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.removeDownFunction=function(t){this._validateCallback(t),this._removeItemOnce(this.downFunctions,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.addUpFunction=function(t){this._validateCallback(t),this.upFunctions.push(t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.removeUpFunction=function(t){this._validateCallback(t),this._removeItemOnce(this.upFunctions,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype._removeItemOnce=function(t,i){var s=t.indexOf(i);return s>-1&&t.splice(s,1),t},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype._validateCallback=function(t){if(typeof t!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function")},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onDoubleClick=function(t,i){for(let s of this.doubleClickFunctions)s(t,i)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.addDoubleClickFunction=function(t){this._validateCallback(t),this.doubleClickFunctions.push(t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.removeDoubleClickFunction=function(t){this._validateCallback(t),this._removeItemOnce(this.doubleClickFunctions,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onTripleClick=function(t,i){for(let s of this.tripleClickFunctions)s(t,i)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.addTripleClickFunction=function(t){this._validateCallback(t),this.tripleClickFunctions.push(t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.removeTripleClickFunction=function(t){this._validateCallback(t),this._removeItemOnce(this.tripleClickFunctions,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onDownOnHover=function(t,i){for(let s of this.downOnHoverFunctions)s(t,i)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.addDownOnHoverFunction=function(t){this._validateCallback(t),this.downOnHoverFunctions.push(t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.removeDownOnHoverFunction=function(t){this._validateCallback(t),this._removeItemOnce(this.downOnHoverFunctions,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onUpWithNoDown=function(t,i){for(let s of this.upWithNoDownFunctions)s(t,i)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.addUpWithNoDownFunction=function(t){this._validateCallback(t),this.upWithNoDownFunctions.push(t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.removeUpWithNoDownFunction=function(t){this._validateCallback(t),this._removeItemOnce(this.upWithNoDownFunctions,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.start=function(){},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.update=function(t){},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onActivate=function(){},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onDeactivate=function(){},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].prototype.onDestroy=function(){}):console.error(`Wonderland Engine "cursor-target" component not found.
 Add the component to your project to avoid any issue with the PP bundle.`)});var ei=f(()=>{_WL&&_WL._componentTypes&&_WL._componentTypes[_WL._componentTypeIndices["mouse-look"]]?(_WL._componentTypes[_WL._componentTypeIndices["mouse-look"]].prototype.init=function(){this.pointerId=null,this.prevMoveEvent=null,this.resetMovingDelay=.15,this.resetMovingTimer=new PP.Timer(this.resetMovingDelay,!1),this.isMoving=!1,document.body.addEventListener("pointermove",this._onMove.bind(this)),this.requireMouseDown&&(this.mouseButtonIndex==2&&WL.canvas.addEventListener("contextmenu",function(t){t.preventDefault()},!1),WL.canvas.addEventListener("pointerdown",function(t){if(this.pointerId==null&&!this.mouseDown&&t.button==this.mouseButtonIndex&&(this.pointerId=t.pointerId,this.mouseDown=!0,document.body.style.cursor="grabbing",t.button==1))return t.preventDefault(),!1}.bind(this)),document.body.addEventListener("pointerup",function(t){t.pointerId==this.pointerId&&this.mouseDown&&t.button==this.mouseButtonIndex&&(this.mouseDown=!1,document.body.style.cursor="initial")}.bind(this))),document.body.addEventListener("pointerleave",function(t){t.pointerId==this.pointerId&&(this.pointerId=null,this.prevMoveEvent=null,this.mouseDown&&(this.mouseDown=!1,document.body.style.cursor="initial"))}.bind(this))},_WL._componentTypes[_WL._componentTypeIndices["mouse-look"]].prototype.update=function(t){this.resetMovingTimer.isRunning()&&(this.resetMovingTimer.update(t),this.resetMovingTimer.isDone()&&(this.resetMovingTimer.reset(),this.isMoving=!1)),this.isMoving||((!this.requireMouseDown||!this.mouseDown)&&(this.pointerId=null),this.prevMoveEvent=null)},_WL._componentTypes[_WL._componentTypeIndices["mouse-look"]].prototype._onMove=function(){let e=PP.vec3_create(),t=PP.vec3_create(),i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create(),o=PP.vec3_create();return function(l){if(!(this.pointerId!=null&&l.pointerId!=this.pointerId)&&this.active&&(this.mouseDown||!this.requireMouseDown)){e=this.object.pp_getBackward(e),t=this.object.pp_getUp(t),i.vec3_set(0,1,0),this.object.pp_getParent()!=null&&(i=this.object.pp_getParent().pp_getUp(i)),n=e.vec3_cross(i,n);let u=1;e.vec3_angle(i)<u?n=t.vec3_negate(n).vec3_cross(i,n):e.vec3_angle(i.vec3_negate(s))<u?n=t.vec3_cross(i,n):t.vec3_isConcordant(i)||n.vec3_negate(n),n.vec3_normalize(n);let y=l.movementX,r=l.movementY;(y==null||r==null)&&(this.prevMoveEvent!=null?(y=l.pageX-this.prevMoveEvent.pageX,r=l.pageY-this.prevMoveEvent.pageY):(y=0,r=0)),this.rotationX=-this.sensitity*y,this.rotationY=-this.sensitity*r,this.object.pp_rotateAxis(this.rotationY,n);let m=90-.001;o=this.object.pp_getUp(o);let c=Math.pp_angleClamp(o.vec3_angleSigned(i,n));if(Math.abs(c)>m){let h=(Math.abs(c)-m)*Math.pp_sign(c);this.object.pp_rotateAxis(h,n)}this.object.pp_rotateAxis(this.rotationX,i),this.prevMoveEvent=l,this.pointerId=l.pointerId,this.resetMovingTimer.start(this.resetMovingDelay),this.isMoving=!0}}}()):console.error(`Wonderland Engine "mouse-look" component not found.
 Add the component to your project to avoid any issue with the PP bundle.`)});var ot=f(bt=>{(function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var r=this||t;return r._counter=1e3,r._html5AudioPool=[],r.html5PoolSize=10,r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r._canPlayEvent="canplaythrough",r._navigator=typeof window<"u"&&window.navigator?window.navigator:null,r.masterGain=null,r.noAudio=!1,r.usingWebAudio=!0,r.autoSuspend=!0,r.ctx=null,r.autoUnlock=!0,r._setup(),r},volume:function(r){var m=this||t;if(r=parseFloat(r),m.ctx||y(),typeof r<"u"&&r>=0&&r<=1){if(m._volume=r,m._muted)return m;m.usingWebAudio&&m.masterGain.gain.setValueAtTime(r,t.ctx.currentTime);for(var c=0;c<m._howls.length;c++)if(!m._howls[c]._webAudio)for(var h=m._howls[c]._getSoundIds(),_=0;_<h.length;_++){var d=m._howls[c]._soundById(h[_]);d&&d._node&&(d._node.volume=d._volume*r)}return m}return m._volume},mute:function(r){var m=this||t;m.ctx||y(),m._muted=r,m.usingWebAudio&&m.masterGain.gain.setValueAtTime(r?0:m._volume,t.ctx.currentTime);for(var c=0;c<m._howls.length;c++)if(!m._howls[c]._webAudio)for(var h=m._howls[c]._getSoundIds(),_=0;_<h.length;_++){var d=m._howls[c]._soundById(h[_]);d&&d._node&&(d._node.muted=r?!0:d._muted)}return m},stop:function(){for(var r=this||t,m=0;m<r._howls.length;m++)r._howls[m].stop();return r},unload:function(){for(var r=this||t,m=r._howls.length-1;m>=0;m--)r._howls[m].unload();return r.usingWebAudio&&r.ctx&&typeof r.ctx.close<"u"&&(r.ctx.close(),r.ctx=null,y()),r},codecs:function(r){return(this||t)._codecs[r.replace(/^x-/,"")]},_setup:function(){var r=this||t;if(r.state=r.ctx&&r.ctx.state||"suspended",r._autoSuspend(),!r.usingWebAudio)if(typeof Audio<"u")try{var m=new Audio;typeof m.oncanplaythrough>"u"&&(r._canPlayEvent="canplay")}catch{r.noAudio=!0}else r.noAudio=!0;try{var m=new Audio;m.muted&&(r.noAudio=!0)}catch{}return r.noAudio||r._setupCodecs(),r},_setupCodecs:function(){var r=this||t,m=null;try{m=typeof Audio<"u"?new Audio:null}catch{return r}if(!m||typeof m.canPlayType!="function")return r;var c=m.canPlayType("audio/mpeg;").replace(/^no$/,""),h=r._navigator?r._navigator.userAgent:"",_=h.match(/OPR\/([0-6].)/g),d=_&&parseInt(_[0].split("/")[1],10)<33,p=h.indexOf("Safari")!==-1&&h.indexOf("Chrome")===-1,P=h.match(/Version\/(.*?) /),T=p&&P&&parseInt(P[1],10)<15;return r._codecs={mp3:!!(!d&&(c||m.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!c,opus:!!m.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!m.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!m.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(m.canPlayType('audio/wav; codecs="1"')||m.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!m.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!m.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(m.canPlayType("audio/x-m4a;")||m.canPlayType("audio/m4a;")||m.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(m.canPlayType("audio/x-m4b;")||m.canPlayType("audio/m4b;")||m.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(m.canPlayType("audio/x-mp4;")||m.canPlayType("audio/mp4;")||m.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!T&&m.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!T&&m.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!m.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(m.canPlayType("audio/x-flac;")||m.canPlayType("audio/flac;")).replace(/^no$/,"")},r},_unlockAudio:function(){var r=this||t;if(!(r._audioUnlocked||!r.ctx)){r._audioUnlocked=!1,r.autoUnlock=!1,!r._mobileUnloaded&&r.ctx.sampleRate!==44100&&(r._mobileUnloaded=!0,r.unload()),r._scratchBuffer=r.ctx.createBuffer(1,1,22050);var m=function(c){for(;r._html5AudioPool.length<r.html5PoolSize;)try{var h=new Audio;h._unlocked=!0,r._releaseHtml5Audio(h)}catch{r.noAudio=!0;break}for(var _=0;_<r._howls.length;_++)if(!r._howls[_]._webAudio)for(var d=r._howls[_]._getSoundIds(),p=0;p<d.length;p++){var P=r._howls[_]._soundById(d[p]);P&&P._node&&!P._node._unlocked&&(P._node._unlocked=!0,P._node.load())}r._autoResume();var T=r.ctx.createBufferSource();T.buffer=r._scratchBuffer,T.connect(r.ctx.destination),typeof T.start>"u"?T.noteOn(0):T.start(0),typeof r.ctx.resume=="function"&&r.ctx.resume(),T.onended=function(){T.disconnect(0),r._audioUnlocked=!0,document.removeEventListener("touchstart",m,!0),document.removeEventListener("touchend",m,!0),document.removeEventListener("click",m,!0),document.removeEventListener("keydown",m,!0);for(var g=0;g<r._howls.length;g++)r._howls[g]._emit("unlock")}};return document.addEventListener("touchstart",m,!0),document.addEventListener("touchend",m,!0),document.addEventListener("click",m,!0),document.addEventListener("keydown",m,!0),r}},_obtainHtml5Audio:function(){var r=this||t;if(r._html5AudioPool.length)return r._html5AudioPool.pop();var m=new Audio().play();return m&&typeof Promise<"u"&&(m instanceof Promise||typeof m.then=="function")&&m.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(r){var m=this||t;return r._unlocked&&m._html5AudioPool.push(r),m},_autoSuspend:function(){var r=this;if(!(!r.autoSuspend||!r.ctx||typeof r.ctx.suspend>"u"||!t.usingWebAudio)){for(var m=0;m<r._howls.length;m++)if(r._howls[m]._webAudio){for(var c=0;c<r._howls[m]._sounds.length;c++)if(!r._howls[m]._sounds[c]._paused)return r}return r._suspendTimer&&clearTimeout(r._suspendTimer),r._suspendTimer=setTimeout(function(){if(!!r.autoSuspend){r._suspendTimer=null,r.state="suspending";var h=function(){r.state="suspended",r._resumeAfterSuspend&&(delete r._resumeAfterSuspend,r._autoResume())};r.ctx.suspend().then(h,h)}},3e4),r}},_autoResume:function(){var r=this;if(!(!r.ctx||typeof r.ctx.resume>"u"||!t.usingWebAudio))return r.state==="running"&&r.ctx.state!=="interrupted"&&r._suspendTimer?(clearTimeout(r._suspendTimer),r._suspendTimer=null):r.state==="suspended"||r.state==="running"&&r.ctx.state==="interrupted"?(r.ctx.resume().then(function(){r.state="running";for(var m=0;m<r._howls.length;m++)r._howls[m]._emit("resume")}),r._suspendTimer&&(clearTimeout(r._suspendTimer),r._suspendTimer=null)):r.state==="suspending"&&(r._resumeAfterSuspend=!0),r}};var t=new e,i=function(r){var m=this;if(!r.src||r.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}m.init(r)};i.prototype={init:function(r){var m=this;return t.ctx||y(),m._autoplay=r.autoplay||!1,m._format=typeof r.format!="string"?r.format:[r.format],m._html5=r.html5||!1,m._muted=r.mute||!1,m._loop=r.loop||!1,m._pool=r.pool||5,m._preload=typeof r.preload=="boolean"||r.preload==="metadata"?r.preload:!0,m._rate=r.rate||1,m._sprite=r.sprite||{},m._src=typeof r.src!="string"?r.src:[r.src],m._volume=r.volume!==void 0?r.volume:1,m._xhr={method:r.xhr&&r.xhr.method?r.xhr.method:"GET",headers:r.xhr&&r.xhr.headers?r.xhr.headers:null,withCredentials:r.xhr&&r.xhr.withCredentials?r.xhr.withCredentials:!1},m._duration=0,m._state="unloaded",m._sounds=[],m._endTimers={},m._queue=[],m._playLock=!1,m._onend=r.onend?[{fn:r.onend}]:[],m._onfade=r.onfade?[{fn:r.onfade}]:[],m._onload=r.onload?[{fn:r.onload}]:[],m._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],m._onplayerror=r.onplayerror?[{fn:r.onplayerror}]:[],m._onpause=r.onpause?[{fn:r.onpause}]:[],m._onplay=r.onplay?[{fn:r.onplay}]:[],m._onstop=r.onstop?[{fn:r.onstop}]:[],m._onmute=r.onmute?[{fn:r.onmute}]:[],m._onvolume=r.onvolume?[{fn:r.onvolume}]:[],m._onrate=r.onrate?[{fn:r.onrate}]:[],m._onseek=r.onseek?[{fn:r.onseek}]:[],m._onunlock=r.onunlock?[{fn:r.onunlock}]:[],m._onresume=[],m._webAudio=t.usingWebAudio&&!m._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(m),m._autoplay&&m._queue.push({event:"play",action:function(){m.play()}}),m._preload&&m._preload!=="none"&&m.load(),m},load:function(){var r=this,m=null;if(t.noAudio){r._emit("loaderror",null,"No audio support.");return}typeof r._src=="string"&&(r._src=[r._src]);for(var c=0;c<r._src.length;c++){var h,_;if(r._format&&r._format[c])h=r._format[c];else{if(_=r._src[c],typeof _!="string"){r._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}h=/^data:audio\/([^;,]+);/i.exec(_),h||(h=/\.([^.]+)$/.exec(_.split("?",1)[0])),h&&(h=h[1].toLowerCase())}if(h||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),h&&t.codecs(h)){m=r._src[c];break}}if(!m){r._emit("loaderror",null,"No codec support for selected audio sources.");return}return r._src=m,r._state="loading",window.location.protocol==="https:"&&m.slice(0,5)==="http:"&&(r._html5=!0,r._webAudio=!1),new s(r),r._webAudio&&o(r),r},play:function(r,m){var c=this,h=null;if(typeof r=="number")h=r,r=null;else{if(typeof r=="string"&&c._state==="loaded"&&!c._sprite[r])return null;if(typeof r>"u"&&(r="__default",!c._playLock)){for(var _=0,d=0;d<c._sounds.length;d++)c._sounds[d]._paused&&!c._sounds[d]._ended&&(_++,h=c._sounds[d]._id);_===1?r=null:h=null}}var p=h?c._soundById(h):c._inactiveSound();if(!p)return null;if(h&&!r&&(r=p._sprite||"__default"),c._state!=="loaded"){p._sprite=r,p._ended=!1;var P=p._id;return c._queue.push({event:"play",action:function(){c.play(P)}}),P}if(h&&!p._paused)return m||c._loadQueue("play"),p._id;c._webAudio&&t._autoResume();var T=Math.max(0,p._seek>0?p._seek:c._sprite[r][0]/1e3),g=Math.max(0,(c._sprite[r][0]+c._sprite[r][1])/1e3-T),b=g*1e3/Math.abs(p._rate),S=c._sprite[r][0]/1e3,v=(c._sprite[r][0]+c._sprite[r][1])/1e3;p._sprite=r,p._ended=!1;var R=function(){p._paused=!1,p._seek=T,p._start=S,p._stop=v,p._loop=!!(p._loop||c._sprite[r][2])};if(T>=v){c._ended(p);return}var B=p._node;if(c._webAudio){var E=function(){c._playLock=!1,R(),c._refreshBuffer(p);var D=p._muted||c._muted?0:p._volume;B.gain.setValueAtTime(D,t.ctx.currentTime),p._playStart=t.ctx.currentTime,typeof B.bufferSource.start>"u"?p._loop?B.bufferSource.noteGrainOn(0,T,86400):B.bufferSource.noteGrainOn(0,T,g):p._loop?B.bufferSource.start(0,T,86400):B.bufferSource.start(0,T,g),b!==1/0&&(c._endTimers[p._id]=setTimeout(c._ended.bind(c,p),b)),m||setTimeout(function(){c._emit("play",p._id),c._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?E():(c._playLock=!0,c.once("resume",E),c._clearTimer(p._id))}else{var V=function(){B.currentTime=T,B.muted=p._muted||c._muted||t._muted||B.muted,B.volume=p._volume*t.volume(),B.playbackRate=p._rate;try{var D=B.play();if(D&&typeof Promise<"u"&&(D instanceof Promise||typeof D.then=="function")?(c._playLock=!0,R(),D.then(function(){c._playLock=!1,B._unlocked=!0,m?c._loadQueue():c._emit("play",p._id)}).catch(function(){c._playLock=!1,c._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):m||(c._playLock=!1,R(),c._emit("play",p._id)),B.playbackRate=p._rate,B.paused){c._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}r!=="__default"||p._loop?c._endTimers[p._id]=setTimeout(c._ended.bind(c,p),b):(c._endTimers[p._id]=function(){c._ended(p),B.removeEventListener("ended",c._endTimers[p._id],!1)},B.addEventListener("ended",c._endTimers[p._id],!1))}catch(L){c._emit("playerror",p._id,L)}};B.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(B.src=c._src,B.load());var W=window&&window.ejecta||!B.readyState&&t._navigator.isCocoonJS;if(B.readyState>=3||W)V();else{c._playLock=!0,c._state="loading";var O=function(){c._state="loaded",V(),B.removeEventListener(t._canPlayEvent,O,!1)};B.addEventListener(t._canPlayEvent,O,!1),c._clearTimer(p._id)}}return p._id},pause:function(r){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"pause",action:function(){m.pause(r)}}),m;for(var c=m._getSoundIds(r),h=0;h<c.length;h++){m._clearTimer(c[h]);var _=m._soundById(c[h]);if(_&&!_._paused&&(_._seek=m.seek(c[h]),_._rateSeek=0,_._paused=!0,m._stopFade(c[h]),_._node))if(m._webAudio){if(!_._node.bufferSource)continue;typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),m._cleanBuffer(_._node)}else(!isNaN(_._node.duration)||_._node.duration===1/0)&&_._node.pause();arguments[1]||m._emit("pause",_?_._id:null)}return m},stop:function(r,m){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"stop",action:function(){c.stop(r)}}),c;for(var h=c._getSoundIds(r),_=0;_<h.length;_++){c._clearTimer(h[_]);var d=c._soundById(h[_]);d&&(d._seek=d._start||0,d._rateSeek=0,d._paused=!0,d._ended=!0,c._stopFade(h[_]),d._node&&(c._webAudio?d._node.bufferSource&&(typeof d._node.bufferSource.stop>"u"?d._node.bufferSource.noteOff(0):d._node.bufferSource.stop(0),c._cleanBuffer(d._node)):(!isNaN(d._node.duration)||d._node.duration===1/0)&&(d._node.currentTime=d._start||0,d._node.pause(),d._node.duration===1/0&&c._clearSound(d._node))),m||c._emit("stop",d._id))}return c},mute:function(r,m){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"mute",action:function(){c.mute(r,m)}}),c;if(typeof m>"u")if(typeof r=="boolean")c._muted=r;else return c._muted;for(var h=c._getSoundIds(m),_=0;_<h.length;_++){var d=c._soundById(h[_]);d&&(d._muted=r,d._interval&&c._stopFade(d._id),c._webAudio&&d._node?d._node.gain.setValueAtTime(r?0:d._volume,t.ctx.currentTime):d._node&&(d._node.muted=t._muted?!0:r),c._emit("mute",d._id))}return c},volume:function(){var r=this,m=arguments,c,h;if(m.length===0)return r._volume;if(m.length===1||m.length===2&&typeof m[1]>"u"){var _=r._getSoundIds(),d=_.indexOf(m[0]);d>=0?h=parseInt(m[0],10):c=parseFloat(m[0])}else m.length>=2&&(c=parseFloat(m[0]),h=parseInt(m[1],10));var p;if(typeof c<"u"&&c>=0&&c<=1){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,m)}}),r;typeof h>"u"&&(r._volume=c),h=r._getSoundIds(h);for(var P=0;P<h.length;P++)p=r._soundById(h[P]),p&&(p._volume=c,m[2]||r._stopFade(h[P]),r._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(c,t.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=c*t.volume()),r._emit("volume",p._id))}else return p=h?r._soundById(h):r._sounds[0],p?p._volume:0;return r},fade:function(r,m,c,h){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(r,m,c,h)}}),_;r=Math.min(Math.max(0,parseFloat(r)),1),m=Math.min(Math.max(0,parseFloat(m)),1),c=parseFloat(c),_.volume(r,h);for(var d=_._getSoundIds(h),p=0;p<d.length;p++){var P=_._soundById(d[p]);if(P){if(h||_._stopFade(d[p]),_._webAudio&&!P._muted){var T=t.ctx.currentTime,g=T+c/1e3;P._volume=r,P._node.gain.setValueAtTime(r,T),P._node.gain.linearRampToValueAtTime(m,g)}_._startFadeInterval(P,r,m,c,d[p],typeof h>"u")}}return _},_startFadeInterval:function(r,m,c,h,_,d){var p=this,P=m,T=c-m,g=Math.abs(T/.01),b=Math.max(4,g>0?h/g:h),S=Date.now();r._fadeTo=c,r._interval=setInterval(function(){var v=(Date.now()-S)/h;S=Date.now(),P+=T*v,P=Math.round(P*100)/100,T<0?P=Math.max(c,P):P=Math.min(c,P),p._webAudio?r._volume=P:p.volume(P,r._id,!0),d&&(p._volume=P),(c<m&&P<=c||c>m&&P>=c)&&(clearInterval(r._interval),r._interval=null,r._fadeTo=null,p.volume(c,r._id),p._emit("fade",r._id))},b)},_stopFade:function(r){var m=this,c=m._soundById(r);return c&&c._interval&&(m._webAudio&&c._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(c._interval),c._interval=null,m.volume(c._fadeTo,r),c._fadeTo=null,m._emit("fade",r)),m},loop:function(){var r=this,m=arguments,c,h,_;if(m.length===0)return r._loop;if(m.length===1)if(typeof m[0]=="boolean")c=m[0],r._loop=c;else return _=r._soundById(parseInt(m[0],10)),_?_._loop:!1;else m.length===2&&(c=m[0],h=parseInt(m[1],10));for(var d=r._getSoundIds(h),p=0;p<d.length;p++)_=r._soundById(d[p]),_&&(_._loop=c,r._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=c,c&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,r.playing(d[p])&&(r.pause(d[p],!0),r.play(d[p],!0)))));return r},rate:function(){var r=this,m=arguments,c,h;if(m.length===0)h=r._sounds[0]._id;else if(m.length===1){var _=r._getSoundIds(),d=_.indexOf(m[0]);d>=0?h=parseInt(m[0],10):c=parseFloat(m[0])}else m.length===2&&(c=parseFloat(m[0]),h=parseInt(m[1],10));var p;if(typeof c=="number"){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,m)}}),r;typeof h>"u"&&(r._rate=c),h=r._getSoundIds(h);for(var P=0;P<h.length;P++)if(p=r._soundById(h[P]),p){r.playing(h[P])&&(p._rateSeek=r.seek(h[P]),p._playStart=r._webAudio?t.ctx.currentTime:p._playStart),p._rate=c,r._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(c,t.ctx.currentTime):p._node&&(p._node.playbackRate=c);var T=r.seek(h[P]),g=(r._sprite[p._sprite][0]+r._sprite[p._sprite][1])/1e3-T,b=g*1e3/Math.abs(p._rate);(r._endTimers[h[P]]||!p._paused)&&(r._clearTimer(h[P]),r._endTimers[h[P]]=setTimeout(r._ended.bind(r,p),b)),r._emit("rate",p._id)}}else return p=r._soundById(h),p?p._rate:r._rate;return r},seek:function(){var r=this,m=arguments,c,h;if(m.length===0)r._sounds.length&&(h=r._sounds[0]._id);else if(m.length===1){var _=r._getSoundIds(),d=_.indexOf(m[0]);d>=0?h=parseInt(m[0],10):r._sounds.length&&(h=r._sounds[0]._id,c=parseFloat(m[0]))}else m.length===2&&(c=parseFloat(m[0]),h=parseInt(m[1],10));if(typeof h>"u")return 0;if(typeof c=="number"&&(r._state!=="loaded"||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,m)}}),r;var p=r._soundById(h);if(p)if(typeof c=="number"&&c>=0){var P=r.playing(h);P&&r.pause(h,!0),p._seek=c,p._ended=!1,r._clearTimer(h),!r._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=c);var T=function(){P&&r.play(h,!0),r._emit("seek",h)};if(P&&!r._webAudio){var g=function(){r._playLock?setTimeout(g,0):T()};setTimeout(g,0)}else T()}else if(r._webAudio){var b=r.playing(h)?t.ctx.currentTime-p._playStart:0,S=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(S+b*Math.abs(p._rate))}else return p._node.currentTime;return r},playing:function(r){var m=this;if(typeof r=="number"){var c=m._soundById(r);return c?!c._paused:!1}for(var h=0;h<m._sounds.length;h++)if(!m._sounds[h]._paused)return!0;return!1},duration:function(r){var m=this,c=m._duration,h=m._soundById(r);return h&&(c=m._sprite[h._sprite][1]/1e3),c},state:function(){return this._state},unload:function(){for(var r=this,m=r._sounds,c=0;c<m.length;c++)m[c]._paused||r.stop(m[c]._id),r._webAudio||(r._clearSound(m[c]._node),m[c]._node.removeEventListener("error",m[c]._errorFn,!1),m[c]._node.removeEventListener(t._canPlayEvent,m[c]._loadFn,!1),m[c]._node.removeEventListener("ended",m[c]._endFn,!1),t._releaseHtml5Audio(m[c]._node)),delete m[c]._node,r._clearTimer(m[c]._id);var h=t._howls.indexOf(r);h>=0&&t._howls.splice(h,1);var _=!0;for(c=0;c<t._howls.length;c++)if(t._howls[c]._src===r._src||r._src.indexOf(t._howls[c]._src)>=0){_=!1;break}return n&&_&&delete n[r._src],t.noAudio=!1,r._state="unloaded",r._sounds=[],r=null,null},on:function(r,m,c,h){var _=this,d=_["_on"+r];return typeof m=="function"&&d.push(h?{id:c,fn:m,once:h}:{id:c,fn:m}),_},off:function(r,m,c){var h=this,_=h["_on"+r],d=0;if(typeof m=="number"&&(c=m,m=null),m||c)for(d=0;d<_.length;d++){var p=c===_[d].id;if(m===_[d].fn&&p||!m&&p){_.splice(d,1);break}}else if(r)h["_on"+r]=[];else{var P=Object.keys(h);for(d=0;d<P.length;d++)P[d].indexOf("_on")===0&&Array.isArray(h[P[d]])&&(h[P[d]]=[])}return h},once:function(r,m,c){var h=this;return h.on(r,m,c,1),h},_emit:function(r,m,c){for(var h=this,_=h["_on"+r],d=_.length-1;d>=0;d--)(!_[d].id||_[d].id===m||r==="load")&&(setTimeout(function(p){p.call(this,m,c)}.bind(h,_[d].fn),0),_[d].once&&h.off(r,_[d].fn,_[d].id));return h._loadQueue(r),h},_loadQueue:function(r){var m=this;if(m._queue.length>0){var c=m._queue[0];c.event===r&&(m._queue.shift(),m._loadQueue()),r||c.action()}return m},_ended:function(r){var m=this,c=r._sprite;if(!m._webAudio&&r._node&&!r._node.paused&&!r._node.ended&&r._node.currentTime<r._stop)return setTimeout(m._ended.bind(m,r),100),m;var h=!!(r._loop||m._sprite[c][2]);if(m._emit("end",r._id),!m._webAudio&&h&&m.stop(r._id,!0).play(r._id),m._webAudio&&h){m._emit("play",r._id),r._seek=r._start||0,r._rateSeek=0,r._playStart=t.ctx.currentTime;var _=(r._stop-r._start)*1e3/Math.abs(r._rate);m._endTimers[r._id]=setTimeout(m._ended.bind(m,r),_)}return m._webAudio&&!h&&(r._paused=!0,r._ended=!0,r._seek=r._start||0,r._rateSeek=0,m._clearTimer(r._id),m._cleanBuffer(r._node),t._autoSuspend()),!m._webAudio&&!h&&m.stop(r._id,!0),m},_clearTimer:function(r){var m=this;if(m._endTimers[r]){if(typeof m._endTimers[r]!="function")clearTimeout(m._endTimers[r]);else{var c=m._soundById(r);c&&c._node&&c._node.removeEventListener("ended",m._endTimers[r],!1)}delete m._endTimers[r]}return m},_soundById:function(r){for(var m=this,c=0;c<m._sounds.length;c++)if(r===m._sounds[c]._id)return m._sounds[c];return null},_inactiveSound:function(){var r=this;r._drain();for(var m=0;m<r._sounds.length;m++)if(r._sounds[m]._ended)return r._sounds[m].reset();return new s(r)},_drain:function(){var r=this,m=r._pool,c=0,h=0;if(!(r._sounds.length<m)){for(h=0;h<r._sounds.length;h++)r._sounds[h]._ended&&c++;for(h=r._sounds.length-1;h>=0;h--){if(c<=m)return;r._sounds[h]._ended&&(r._webAudio&&r._sounds[h]._node&&r._sounds[h]._node.disconnect(0),r._sounds.splice(h,1),c--)}}},_getSoundIds:function(r){var m=this;if(typeof r>"u"){for(var c=[],h=0;h<m._sounds.length;h++)c.push(m._sounds[h]._id);return c}else return[r]},_refreshBuffer:function(r){var m=this;return r._node.bufferSource=t.ctx.createBufferSource(),r._node.bufferSource.buffer=n[m._src],r._panner?r._node.bufferSource.connect(r._panner):r._node.bufferSource.connect(r._node),r._node.bufferSource.loop=r._loop,r._loop&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop||0),r._node.bufferSource.playbackRate.setValueAtTime(r._rate,t.ctx.currentTime),m},_cleanBuffer:function(r){var m=this,c=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&r.bufferSource&&(r.bufferSource.onended=null,r.bufferSource.disconnect(0),c))try{r.bufferSource.buffer=t._scratchBuffer}catch{}return r.bufferSource=null,m},_clearSound:function(r){var m=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);m||(r.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(r){this._parent=r,this.init()};s.prototype={init:function(){var r=this,m=r._parent;return r._muted=m._muted,r._loop=m._loop,r._volume=m._volume,r._rate=m._rate,r._seek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,m._sounds.push(r),r.create(),r},create:function(){var r=this,m=r._parent,c=t._muted||r._muted||r._parent._muted?0:r._volume;return m._webAudio?(r._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),r._node.gain.setValueAtTime(c,t.ctx.currentTime),r._node.paused=!0,r._node.connect(t.masterGain)):t.noAudio||(r._node=t._obtainHtml5Audio(),r._errorFn=r._errorListener.bind(r),r._node.addEventListener("error",r._errorFn,!1),r._loadFn=r._loadListener.bind(r),r._node.addEventListener(t._canPlayEvent,r._loadFn,!1),r._endFn=r._endListener.bind(r),r._node.addEventListener("ended",r._endFn,!1),r._node.src=m._src,r._node.preload=m._preload===!0?"auto":m._preload,r._node.volume=c*t.volume(),r._node.load()),r},reset:function(){var r=this,m=r._parent;return r._muted=m._muted,r._loop=m._loop,r._volume=m._volume,r._rate=m._rate,r._seek=0,r._rateSeek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,r},_errorListener:function(){var r=this;r._parent._emit("loaderror",r._id,r._node.error?r._node.error.code:0),r._node.removeEventListener("error",r._errorFn,!1)},_loadListener:function(){var r=this,m=r._parent;m._duration=Math.ceil(r._node.duration*10)/10,Object.keys(m._sprite).length===0&&(m._sprite={__default:[0,m._duration*1e3]}),m._state!=="loaded"&&(m._state="loaded",m._emit("load"),m._loadQueue()),r._node.removeEventListener(t._canPlayEvent,r._loadFn,!1)},_endListener:function(){var r=this,m=r._parent;m._duration===1/0&&(m._duration=Math.ceil(r._node.duration*10)/10,m._sprite.__default[1]===1/0&&(m._sprite.__default[1]=m._duration*1e3),m._ended(r)),r._node.removeEventListener("ended",r._endFn,!1)}};var n={},o=function(r){var m=r._src;if(n[m]){r._duration=n[m].duration,u(r);return}if(/^data:[^;]+;base64,/.test(m)){for(var c=atob(m.split(",")[1]),h=new Uint8Array(c.length),_=0;_<c.length;++_)h[_]=c.charCodeAt(_);l(h.buffer,r)}else{var d=new XMLHttpRequest;d.open(r._xhr.method,m,!0),d.withCredentials=r._xhr.withCredentials,d.responseType="arraybuffer",r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(p){d.setRequestHeader(p,r._xhr.headers[p])}),d.onload=function(){var p=(d.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){r._emit("loaderror",null,"Failed loading audio file with status: "+d.status+".");return}l(d.response,r)},d.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete n[m],r.load())},a(d)}},a=function(r){try{r.send()}catch{r.onerror()}},l=function(r,m){var c=function(){m._emit("loaderror",null,"Decoding audio data failed.")},h=function(_){_&&m._sounds.length>0?(n[m._src]=_,u(m,_)):c()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(r).then(h).catch(c):t.ctx.decodeAudioData(r,h,c)},u=function(r,m){m&&!r._duration&&(r._duration=m.duration),Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue())},y=function(){if(!!t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var r=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),m=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),c=m?parseInt(m[1],10):null;if(r&&c&&c<9){var h=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!h&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:i}}),typeof bt<"u"&&(bt.Howler=t,bt.Howl=i),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=t,global.Howl=i,global.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=i,window.Sound=s)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var s=i._howls.length-1;s>=0;s--)i._howls[s].stereo(t);return i},HowlerGlobal.prototype.pos=function(t,i,s){var n=this;if(!n.ctx||!n.ctx.listener)return n;if(i=typeof i!="number"?n._pos[1]:i,s=typeof s!="number"?n._pos[2]:s,typeof t=="number")n._pos=[t,i,s],typeof n.ctx.listener.positionX<"u"?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]);else return n._pos;return n},HowlerGlobal.prototype.orientation=function(t,i,s,n,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var u=l._orientation;if(i=typeof i!="number"?u[1]:i,s=typeof s!="number"?u[2]:s,n=typeof n!="number"?u[3]:n,o=typeof o!="number"?u[4]:o,a=typeof a!="number"?u[5]:a,typeof t=="number")l._orientation=[t,i,s,n,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(t,i,s,n,o,a);else return u;return l},Howl.prototype.init=function(t){return function(i){var s=this;return s._orientation=i.orientation||[1,0,0],s._stereo=i.stereo||null,s._pos=i.pos||null,s._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},s._onstereo=i.onstereo?[{fn:i.onstereo}]:[],s._onpos=i.onpos?[{fn:i.onpos}]:[],s._onorientation=i.onorientation?[{fn:i.onorientation}]:[],t.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(t,i)}}),s;var n=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof t=="number")s._stereo=t,s._pos=[t,0,0];else return s._stereo;for(var o=s._getSoundIds(i),a=0;a<o.length;a++){var l=s._soundById(o[a]);if(l)if(typeof t=="number")l._stereo=t,l._pos=[t,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,n),n==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(t,0,0):l._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),s._emit("stereo",l._id);else return l._stereo}return s},Howl.prototype.pos=function(t,i,s,n){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,i,s,n)}}),o;if(i=typeof i!="number"?0:i,s=typeof s!="number"?-.5:s,typeof n>"u")if(typeof t=="number")o._pos=[t,i,s];else return o._pos;for(var a=o._getSoundIds(n),l=0;l<a.length;l++){var u=o._soundById(a[l]);if(u)if(typeof t=="number")u._pos=[t,i,s],u._node&&((!u._panner||u._panner.pan)&&e(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):u._panner.setPosition(t,i,s)),o._emit("pos",u._id);else return u._pos}return o},Howl.prototype.orientation=function(t,i,s,n){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,i,s,n)}}),o;if(i=typeof i!="number"?o._orientation[1]:i,s=typeof s!="number"?o._orientation[2]:s,typeof n>"u")if(typeof t=="number")o._orientation=[t,i,s];else return o._orientation;for(var a=o._getSoundIds(n),l=0;l<a.length;l++){var u=o._soundById(a[l]);if(u)if(typeof t=="number")u._orientation=[t,i,s],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),e(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):u._panner.setOrientation(t,i,s)),o._emit("orientation",u._id);else return u._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,i=arguments,s,n,o;if(!t._webAudio)return t;if(i.length===0)return t._pannerAttr;if(i.length===1)if(typeof i[0]=="object")s=i[0],typeof n>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),t._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(i[0],10)),o?o._pannerAttr:t._pannerAttr;else i.length===2&&(s=i[0],n=parseInt(i[1],10));for(var a=t._getSoundIds(n),l=0;l<a.length;l++)if(o=t._soundById(a[l]),o){var u=o._pannerAttr;u={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:u.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:u.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:u.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:u.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:u.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:u.panningModel};var y=o._panner;y?(y.coneInnerAngle=u.coneInnerAngle,y.coneOuterAngle=u.coneOuterAngle,y.coneOuterGain=u.coneOuterGain,y.distanceModel=u.distanceModel,y.maxDistance=u.maxDistance,y.refDistance=u.refDistance,y.rolloffFactor=u.rolloffFactor,y.panningModel=u.panningModel):(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var i=this,s=i._parent;i._orientation=s._orientation,i._stereo=s._stereo,i._pos=s._pos,i._pannerAttr=s._pannerAttr,t.call(this),i._stereo?s.stereo(i._stereo):i._pos&&s.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var i=this,s=i._parent;return i._orientation=s._orientation,i._stereo=s._stereo,i._pos=s._pos,i._pannerAttr=s._pannerAttr,i._stereo?s.stereo(i._stereo):i._pos?s.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,s._refreshBuffer(i)),t.call(this)}}(Sound.prototype.reset);var e=function(t,i){i=i||"spatial",i==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var Sm={};var Yt,ii=F(()=>{Yt=mt(ot());WL.registerComponent("pp-spatial-audio-listener",{_myEnabled:{type:WL.Type.Enum,values:["always","vr","non vr"],default:"always"}},{init:function(){this._myOrigin=new Float32Array(3),this._myForward=new Float32Array(3),this._myUp=new Float32Array(3)},update:function(){(this._myEnabled==0||this._myEnabled==1&&WL.xrSession||this._myEnabled==2&&!WL.xrSession)&&(this.object.pp_getPosition(this._myOrigin),this.object.pp_getForward(this._myForward),this.object.pp_getUp(this._myUp),Yt.Howler.pos(this._myOrigin[0],this._myOrigin[1],this._myOrigin[2]),Yt.Howler.orientation(this._myForward[0],this._myForward[1],this._myForward[2],this._myUp[0],this._myUp[1],this._myUp[2]))}})});var si=F(()=>{});function at(e){return e===""?!0:e&&(typeof e=="string"||e.constructor===String)}var Zt=F(()=>{});var vm,N,ni,oi,ai,ri,li,mi,ui,Ct,ci,$,yi,hi,xm,J,rt,pi,Q,lt=F(()=>{Zt();vm=["_id","_manager","type","_type","active"];(function(e){e[e.Bool=2]="Bool",e[e.Int=4]="Int",e[e.Float=8]="Float",e[e.String=16]="String",e[e.Enum=32]="Enum",e[e.Object=64]="Object",e[e.Mesh=128]="Mesh",e[e.Texture=256]="Texture",e[e.Material=512]="Material",e[e.Animation=1024]="Animation",e[e.Skin=2048]="Skin"})(N||(N={}));(function(e){e[e.Sphere=0]="Sphere",e[e.AxisAlignedBox=1]="AxisAlignedBox",e[e.Box=2]="Box"})(ni||(ni={}));(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(oi||(oi={}));(function(e){e[e.Line=1]="Line",e[e.Middle=2]="Middle",e[e.Top=3]="Top",e[e.Bottom=4]="Bottom"})(ai||(ai={}));(function(e){e[e.None=0]="None",e[e.Outline=1]="Outline"})(ri||(ri={}));(function(e){e[e.Head=0]="Head",e[e.EyeLeft=1]="EyeLeft",e[e.EyeRight=2]="EyeRight",e[e.ControllerLeft=3]="ControllerLeft",e[e.ControllerRight=4]="ControllerRight",e[e.RayLeft=5]="RayLeft",e[e.RayRight=6]="RayRight"})(li||(li={}));(function(e){e[e.Point=1]="Point",e[e.Spot=2]="Spot",e[e.Sun=3]="Sun"})(mi||(mi={}));(function(e){e[e.Playing=1]="Playing",e[e.Paused=2]="Paused",e[e.Stopped=3]="Stopped"})(ui||(ui={}));(function(e){e[e.Force=0]="Force",e[e.Impulse=1]="Impulse",e[e.VelocityChange=2]="VelocityChange",e[e.Acceleration=3]="Acceleration"})(Ct||(Ct={}));(function(e){e[e.Touch=0]="Touch",e[e.TouchLost=1]="TouchLost",e[e.TriggerTouch=2]="TriggerTouch",e[e.TriggerTouchLost=3]="TriggerTouchLost"})(ci||(ci={}));(function(e){e[e.None=0]="None",e[e.Sphere=1]="Sphere",e[e.Capsule=2]="Capsule",e[e.Box=3]="Box",e[e.Plane=4]="Plane",e[e.ConvexMesh=5]="ConvexMesh",e[e.TriangleMesh=6]="TriangleMesh"})($||($={}));(function(e){e[e.Position=0]="Position",e[e.Tangent=1]="Tangent",e[e.Normal=2]="Normal",e[e.TextureCoordinate=3]="TextureCoordinate",e[e.Color=4]="Color",e[e.JointId=5]="JointId",e[e.JointWeight=6]="JointWeight",e[e.SecondaryJointId=7]="SecondaryJointId",e[e.SecondaryJointWeight=8]="SecondaryJointWeight"})(yi||(yi={}));(function(e){e[e.UnsignedInt=0]="UnsignedInt",e[e.Int=1]="Int",e[e.Float=2]="Float",e[e.Sampler=3]="Sampler",e[e.Font=4]="Font"})(hi||(hi={}));xm=[0,1,0],J=class{_manager;_id;_object;_type;_engine;constructor(t,i=-1,s=-1){this._engine=t,this._manager=i,this._id=s,this._object=null,this._type=null}get engine(){return this._engine}get type(){return this._type||Q._typeNameFor(this._manager)}get object(){if(!this._object){let t=_wl_component_get_object(this._manager,this._id);this._object=this._engine.wrapObject(t)}return this._object}set active(t){_wl_component_setActive(this._manager,this._id,t)}get active(){return _wl_component_isActive(this._manager,this._id)!=0}destroy(){_wl_component_remove(this._manager,this._id),this._manager=void 0,this._id=void 0}equals(t){return t?this._manager==t._manager&&this._id==t._id:!1}};Z(J,"TypeName"),Z(J,"Properties");rt=class extends J{set static(t){_wl_physx_component_set_static(this._id,t)}get static(){return!!_wl_physx_component_get_static(this._id)}set kinematic(t){_wl_physx_component_set_kinematic(this._id,t)}get kinematic(){return!!_wl_physx_component_get_kinematic(this._id)}set gravity(t){_wl_physx_component_set_gravity(this._id,t)}get gravity(){return!!_wl_physx_component_get_gravity(this._id)}set simulate(t){_wl_physx_component_set_simulate(this._id,t)}get simulate(){return!!_wl_physx_component_get_simulate(this._id)}set allowSimulation(t){_wl_physx_component_set_allowSimulation(this._id,t)}get allowSimulation(){return!!_wl_physx_component_get_allowSimulation(this._id)}set allowQuery(t){_wl_physx_component_set_allowQuery(this._id,t)}get allowQuery(){return!!_wl_physx_component_get_allowQuery(this._id)}set trigger(t){_wl_physx_component_set_trigger(this._id,t)}get trigger(){return!!_wl_physx_component_get_trigger(this._id)}set shape(t){_wl_physx_component_set_shape(this._id,t)}get shape(){return _wl_physx_component_get_shape(this._id)}set shapeData(t){t==null||![$.TriangleMesh,$.ConvexMesh].includes(this.shape)||_wl_physx_component_set_shape_data(this._id,t.index)}get shapeData(){return[$.TriangleMesh,$.ConvexMesh].includes(this.shape)?{index:_wl_physx_component_get_shape_data(this._id)}:null}set extents(t){this.extents.set(t)}get extents(){let t=_wl_physx_component_get_extents(this._id);return new Float32Array(HEAPF32.buffer,t,3)}get staticFriction(){return _wl_physx_component_get_staticFriction(this._id)}set staticFriction(t){_wl_physx_component_set_staticFriction(this._id,t)}get dynamicFriction(){return _wl_physx_component_get_dynamicFriction(this._id)}set dynamicFriction(t){_wl_physx_component_set_dynamicFriction(this._id,t)}get bounciness(){return _wl_physx_component_get_bounciness(this._id)}set bounciness(t){_wl_physx_component_set_bounciness(this._id,t)}get linearDamping(){return _wl_physx_component_get_linearDamping(this._id)}set linearDamping(t){_wl_physx_component_set_linearDamping(this._id,t)}get angularDamping(){return _wl_physx_component_get_angularDamping(this._id)}set angularDamping(t){_wl_physx_component_set_angularDamping(this._id,t)}set linearVelocity(t){_wl_physx_component_set_linearVelocity(this._id,t[0],t[1],t[2])}get linearVelocity(){return _wl_physx_component_get_linearVelocity(this._id,this._engine.wasm._tempMem),new Float32Array(HEAPF32.buffer,this._engine.wasm._tempMem,3)}set angularVelocity(t){_wl_physx_component_set_angularVelocity(this._id,t[0],t[1],t[2])}get angularVelocity(){return _wl_physx_component_get_angularVelocity(this._id,this._engine.wasm._tempMem),new Float32Array(HEAPF32.buffer,this._engine.wasm._tempMem,3)}set mass(t){_wl_physx_component_set_mass(this._id,t)}get mass(){return _wl_physx_component_get_mass(this._id)}set massSpaceInteriaTensor(t){_wl_physx_component_set_massSpaceInertiaTensor(this._id,t[0],t[1],t[2])}addForce(t,i,s,n,o){i=i||Ct.Force,n?_wl_physx_component_addForceAt(this._id,t[0],t[1],t[2],i,!!s,n[0],n[1],n[2],!!o):_wl_physx_component_addForce(this._id,t[0],t[1],t[2],i,!!s)}addTorque(t,i=Ct.Force){_wl_physx_component_addTorque(this._id,t[0],t[1],t[2],i)}onCollision(t){return this.onCollisionWith(this,t)}onCollisionWith(t,i){let s=this._engine.physics;return s._callbacks[this._id]=s._callbacks[this._id]||[],s._callbacks[this._id].push(i),_wl_physx_component_addCallback(this._id,t._id||this._id)}removeCollisionCallback(t){let i=this._engine.physics,s=_wl_physx_component_removeCallback(this._id,t);s&&i._callbacks[this._id].splice(-s)}};Z(rt,"TypeName","physx");for(let e of["static","extents","staticFriction","dynamicFriction","bounciness","linearDamping","angularDamping","shape","shapeData","kinematic","linearVelocity","angularVelocity","mass"])Object.defineProperty(rt.prototype,e,{enumerable:!0});(function(e){e[e.UnsignedByte=1]="UnsignedByte",e[e.UnsignedShort=2]="UnsignedShort",e[e.UnsignedInt=4]="UnsignedInt"})(pi||(pi={}));Q=class{objectId;_engine;constructor(t,i){this.objectId=i,this._engine=t}get name(){return UTF8ToString(_wl_object_name(this.objectId))}set name(t){let i=lengthBytesUTF8(t)+1,s=_malloc(i);stringToUTF8(t,s,i),_wl_object_set_name(this.objectId,s),_free(s)}get parent(){let t=_wl_object_parent(this.objectId);return t===0?null:this._engine.wrapObject(t)}get children(){let t=_wl_object_get_children_count(this.objectId);if(t===0)return[];let i=this._engine.wasm;i.requireTempMem(t*2),_wl_object_get_children(this.objectId,i._tempMem,i._tempMemSize>>1);let s=new Array(t);for(let n=0;n<t;++n)s[n]=this._engine.wrapObject(i._tempMemUint16[n]);return s}set parent(t){_wl_object_set_parent(this.objectId,t==null?0:t.objectId)}resetTransform(){_wl_object_reset_translation_rotation(this.objectId),_wl_object_reset_scaling(this.objectId)}resetTranslationRotation(){_wl_object_reset_translation_rotation(this.objectId)}resetRotation(){_wl_object_reset_rotation(this.objectId)}resetTranslation(){_wl_object_reset_translation(this.objectId)}resetScaling(){_wl_object_reset_scaling(this.objectId)}translate(t){_wl_object_translate(this.objectId,t[0],t[1],t[2])}translateObject(t){_wl_object_translate_obj(this.objectId,t[0],t[1],t[2])}translateWorld(t){_wl_object_translate_world(this.objectId,t[0],t[1],t[2])}rotateAxisAngleDeg(t,i){_wl_object_rotate_axis_angle(this.objectId,t[0],t[1],t[2],i)}rotateAxisAngleRad(t,i){_wl_object_rotate_axis_angle_rad(this.objectId,t[0],t[1],t[2],i)}rotateAxisAngleDegObject(t,i){_wl_object_rotate_axis_angle_obj(this.objectId,t[0],t[1],t[2],i)}rotateAxisAngleRadObject(t,i){_wl_object_rotate_axis_angle_rad_obj(this.objectId,t[0],t[1],t[2],i)}rotate(t){_wl_object_rotate_quat(this.objectId,t[0],t[1],t[2],t[3])}rotateObject(t){_wl_object_rotate_quat_obj(this.objectId,t[0],t[1],t[2],t[3])}scale(t){_wl_object_scale(this.objectId,t[0],t[1],t[2])}get transformLocal(){return new Float32Array(HEAPF32.buffer,_wl_object_trans_local(this.objectId),8)}set transformLocal(t){this.transformLocal.set(t),this.setDirty()}getTranslationLocal(t){let i=this._engine.wasm;return _wl_object_get_translation_local(this.objectId,i._tempMem),t[0]=i._tempMemFloat[0],t[1]=i._tempMemFloat[1],t[2]=i._tempMemFloat[2],t}getTranslationWorld(t){let i=this._engine.wasm;return _wl_object_get_translation_world(this.objectId,i._tempMem),t[0]=i._tempMemFloat[0],t[1]=i._tempMemFloat[1],t[2]=i._tempMemFloat[2],t}setTranslationLocal(t){_wl_object_set_translation_local(this.objectId,t[0],t[1],t[2])}setTranslationWorld(t){_wl_object_set_translation_world(this.objectId,t[0],t[1],t[2])}get transformWorld(){return new Float32Array(HEAPF32.buffer,_wl_object_trans_world(this.objectId),8)}set transformWorld(t){this.transformWorld.set(t),_wl_object_trans_world_to_local(this.objectId)}get scalingLocal(){return new Float32Array(HEAPF32.buffer,_wl_object_scaling_local(this.objectId),3)}set scalingLocal(t){this.scalingLocal.set(t),this.setDirty()}get scalingWorld(){return new Float32Array(HEAPF32.buffer,_wl_object_scaling_world(this.objectId),3)}set scalingWorld(t){this.scalingWorld.set(t),_wl_object_scaling_world_to_local(this.objectId)}get rotationLocal(){return this.transformLocal.subarray(0,4)}get rotationWorld(){return this.transformWorld.subarray(0,4)}set rotationLocal(t){_wl_object_set_rotation_local(this.objectId,t[0],t[1],t[2],t[3])}set rotationWorld(t){_wl_object_set_rotation_world(this.objectId,t[0],t[1],t[2],t[3])}getForward(t){return t[0]=0,t[1]=0,t[2]=-1,this.transformVectorWorld(t),t}getUp(t){return t[0]=0,t[1]=1,t[2]=0,this.transformVectorWorld(t),t}getRight(t){return t[0]=1,t[1]=0,t[2]=0,this.transformVectorWorld(t),t}transformVectorWorld(t,i){i=i||t;let s=this._engine.wasm;return s._tempMemFloat[0]=i[0],s._tempMemFloat[1]=i[1],s._tempMemFloat[2]=i[2],_wl_object_transformVectorWorld(this.objectId,s._tempMem),t[0]=s._tempMemFloat[0],t[1]=s._tempMemFloat[1],t[2]=s._tempMemFloat[2],t}transformVectorLocal(t,i){i=i||t;let s=this._engine.wasm;return s._tempMemFloat[0]=i[0],s._tempMemFloat[1]=i[1],s._tempMemFloat[2]=i[2],_wl_object_transformVectorLocal(this.objectId,s._tempMem),t[0]=s._tempMemFloat[0],t[1]=s._tempMemFloat[1],t[2]=s._tempMemFloat[2],t}transformPointWorld(t,i){i=i||t;let s=this._engine.wasm;return s._tempMemFloat[0]=i[0],s._tempMemFloat[1]=i[1],s._tempMemFloat[2]=i[2],_wl_object_transformPointWorld(this.objectId,s._tempMem),t[0]=s._tempMemFloat[0],t[1]=s._tempMemFloat[1],t[2]=s._tempMemFloat[2],t}transformPointLocal(t,i){i=i||t;let s=this._engine.wasm;return s._tempMemFloat[0]=i[0],s._tempMemFloat[1]=i[1],s._tempMemFloat[2]=i[2],_wl_object_transformPointLocal(this.objectId,s._tempMem),t[0]=s._tempMemFloat[0],t[1]=s._tempMemFloat[1],t[2]=s._tempMemFloat[2],t}transformVectorInverseWorld(t,i){i=i||t;let s=this._engine.wasm;return s._tempMemFloat[0]=i[0],s._tempMemFloat[1]=i[1],s._tempMemFloat[2]=i[2],_wl_object_transformVectorInverseWorld(this.objectId,s._tempMem),t[0]=s._tempMemFloat[0],t[1]=s._tempMemFloat[1],t[2]=s._tempMemFloat[2],t}transformVectorInverseLocal(t,i){i=i||t;let s=this._engine.wasm;return s._tempMemFloat[0]=i[0],s._tempMemFloat[1]=i[1],s._tempMemFloat[2]=i[2],_wl_object_transformVectorInverseLocal(this.objectId,s._tempMem),t[0]=s._tempMemFloat[0],t[1]=s._tempMemFloat[1],t[2]=s._tempMemFloat[2],t}transformPointInverseWorld(t,i){i=i||t;let s=this._engine.wasm;return s._tempMemFloat[0]=i[0],s._tempMemFloat[1]=i[1],s._tempMemFloat[2]=i[2],_wl_object_transformPointInverseWorld(this.objectId,s._tempMem),t[0]=s._tempMemFloat[0],t[1]=s._tempMemFloat[1],t[2]=s._tempMemFloat[2],t}transformPointInverseLocal(t,i){i=i||t;let s=this._engine.wasm;return s._tempMemFloat.set(i),_wl_object_transformPointInverseLocal(this.objectId,s._tempMem),t[0]=s._tempMemFloat[0],t[1]=s._tempMemFloat[1],t[2]=s._tempMemFloat[2],t}toWorldSpaceTransform(t,i){i=i||t;let s=this._engine.wasm;return s._tempMemFloat.set(i),_wl_object_toWorldSpaceTransform(this.objectId,s._tempMem),t[0]=s._tempMemFloat[0],t[1]=s._tempMemFloat[1],t[2]=s._tempMemFloat[2],t[3]=s._tempMemFloat[3],t[4]=s._tempMemFloat[4],t[5]=s._tempMemFloat[5],t[6]=s._tempMemFloat[6],t[7]=s._tempMemFloat[7],t}toLocalSpaceTransform(t,i){let s=this.parent;return i=i||t,s?s.toObjectSpaceTransform(i):t!==i&&(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7]),t}toObjectSpaceTransform(t,i){i=i||t;let s=this._engine.wasm;return s._tempMemFloat.set(i),_wl_object_toObjectSpaceTransform(this.objectId,s._tempMem),t[0]=s._tempMemFloat[0],t[1]=s._tempMemFloat[1],t[2]=s._tempMemFloat[2],t[3]=s._tempMemFloat[3],t[4]=s._tempMemFloat[4],t[5]=s._tempMemFloat[5],t[6]=s._tempMemFloat[6],t[7]=s._tempMemFloat[7],t}lookAt(t,i=xm){_wl_object_lookAt(this.objectId,t[0],t[1],t[2],i[0],i[1],i[2])}destroy(){_wl_scene_remove_object(this.objectId),this.objectId=null}setDirty(){_wl_object_set_dirty(this.objectId)}set active(t){let i=this.getComponents();for(let s of i)s.active=t}getComponent(t,i){let s=at(t)?t:t.TypeName,n=lengthBytesUTF8(s)+1,o=_malloc(n);stringToUTF8(s,o,n);let a=_wl_get_component_manager_index(o);if(_free(o),a<0){let u=this._engine.wasm._componentTypeIndices[s],y=_wl_get_js_component_index(this.objectId,u,i||0);return y<0?null:this._engine.wasm._components[y]}let l=_wl_get_component_id(this.objectId,a,i||0);return this._engine._wrapComponent(s,a,l)}getComponents(t){let i=null,s=null;t&&(s=at(t)?t:t.TypeName,i=Q._typeIndexFor(s));let n=this._engine.wasm,o=[],a=Math.floor(n._tempMemSize/3*2),l=_wl_object_get_components(this.objectId,n._tempMem,a),u=2*l;_wl_object_get_component_types(this.objectId,n._tempMem+u,a);let y=Q._typeIndexFor("js");for(let r=0;r<l;++r){let m=n._tempMemUint8[r+u],c=n._tempMemUint16[r];if(m==y){let h=_wl_get_js_component_index_for_id(c),_=n._components[h];(i===null||_.type==s)&&o.push(_);continue}if(i===null){let h=Q._typeNameFor(m);o.push(this._engine._wrapComponent(h,m,c))}else m==i&&o.push(this._engine._wrapComponent(s,i,c))}return o}addComponent(t,i){let s=this._engine.wasm,n=at(t)?t:t.TypeName,o=Q._typeIndexFor(n),a=null,l=null;if(o<0){if(!(n in s._componentTypeIndices))throw new TypeError("Unknown component type '"+n+"'");let u=_wl_object_add_js_component(this.objectId,s._componentTypeIndices[n]);l=_wl_get_js_component_index_for_id(u),a=s._components[l]}else{let u=_wl_object_add_component(this.objectId,o);a=this._engine._wrapComponent(n,o,u)}if(i!==void 0)for(let u in i)vm.includes(u)||(a[u]=i[u]);return o<0&&_wljs_component_init(l),(!i||!("active"in i&&!i.active))&&(a.active=!0),a}get changed(){return!!_wl_object_is_changed(this.objectId)}equals(t){return t?this.objectId==t.objectId:!1}static _typeIndexFor(t){let i=lengthBytesUTF8(t)+1,s=_malloc(i);stringToUTF8(t,s,i);let n=_wl_get_component_manager_index(s);return _free(s),n}static _typeNameFor(t){return UTF8ToString(_wl_component_manager_name(t))}}});var G,$t=F(()=>{lt();Zt();G=new Array(11);G[N.Bool]=!1;G[N.Int]=0;G[N.Float]=0;G[N.String]="";G[N.Enum]=0;G[N.Object]=null;G[N.Mesh]=null;G[N.Texture]=null;G[N.Material]=null;G[N.Animation]=null;G[N.Skin]=null});var te=F(()=>{lt()});var _i=F(()=>{si();$t();te();lt();lt();$t();te()});var Im={};var St,di=F(()=>{_i();PP.myAudioManager=null;PP.AudioManagerComponent=(St=class extends J{init(){PP.myAudioManager=new PP.AudioManager}start(){}update(t){}},Z(St,"TypeName","pp-audio-manager"),Z(St,"Properties",{}),St);WL.registerComponent(PP.AudioManagerComponent)});var Am={};var vt,Pi=F(()=>{vt=mt(ot());PP.AudioManager=class{constructor(){this._myAudioSetups=new Map}createAudioPlayer(t){return this.getAudioSetup(t)!=null?new PP.AudioPlayer(this.getAudioSetup(t)):null}getAudioSetup(t){return this._myAudioSetups.get(t)}addAudioSetup(t,i,s=!0){this._myAudioSetups.set(t,i),s&&this.createAudioPlayer(t)}removeAudioSetup(t){this._myAudioSetups.delete(t)}setVolume(t){vt.Howler.volume(t)}setMute(t){vt.Howler.mute(t)}stop(){vt.Howler.stop()}}});var Mm={};var fi,gi=F(()=>{fi=mt(ot());PP.AudioEvent={END:"end",STOP:"stop",LOAD:"load",LOAD_ERROR:"loaderror",PLAY:"play",PLAY_ERROR:"playerror",PAUSE:"pause",MUTE:"mute",VOLUME:"volume",RATE:"rate",SEEK:"seek",FADE:"fade",UNLOCK:"unlock"};PP.AudioPlayer=class{constructor(t,i=!0){t==null?this._myAudioSetup=new PP.AudioSetup:typeof t=="string"?this._myAudioSetup=new PP.AudioSetup(audioSetupOrAudioFile):this._myAudioSetup=t.clone(),this._myAudio=null,i&&(this._myAudio=new fi.Howl({src:[this._myAudioSetup.myAudioFilePath],loop:this._myAudioSetup.myLoop,volume:this._myAudioSetup.myVolume,autoplay:this._myAudioSetup.myAutoplay,rate:this._myAudioSetup.myRate,pool:this._myAudioSetup.myPool,pos:this._myAudioSetup.mySpatial?this._myAudioSetup.myPosition:null,refDistance:this._myAudioSetup.myReferenceDistance,preload:this._myAudioSetup.myPreload}),this._myAudio._pannerAttr.refDistance=this._myAudioSetup.myReferenceDistance),this._myLastAudioID=null,this._myCallbacks=new Map;for(let s in PP.AudioEvent)this._myCallbacks.set(PP.AudioEvent[s],new Map);i&&this._addListeners()}isValid(){return this._myAudio!=null}play(){if(Howler.state!="running"&&this._myAudioSetup.myPreventPlayWhenAudioContextNotRunning)return!1;let t=this._myAudio.play();return t!=null&&(this._myLastAudioID=t,this.updatePosition(this._myAudioSetup.myPosition,!0),this.updatePitch(this._myAudioSetup.myPitch,!0),this.updateVolume(this._myAudioSetup.myVolume,!0)),t!=null}stop(){this._myAudio.stop()}pause(){this._myAudio.pause()}resume(){this._myAudio.play()}isPlaying(t=!1){let i=!1;return t?i=this._myAudio.playing(this._myLastAudioID):i=this._myAudio.playing(),i}isLoaded(){return this._myAudio.state()=="loaded"}fade(t,i,s,n=!1){this.setVolume(i),n?this._myAudio.fade(t,i,s*1e3,this._myLastAudioID):this._myAudio.fade(t,i,s*1e3)}updatePosition(t,i=!1){this.setPosition(t),this._myAudioSetup.mySpatial&&t&&(i?this._myAudio.pos(t[0],t[1],t[2],this._myLastAudioID):this._myAudio.pos(t[0],t[1],t[2]))}updatePitch(t,i=!1){this.updateRate(t,i)}updateRate(t,i=!1){this.setRate(t),t!=null&&(i?this._myAudio.rate(t,this._myLastAudioID):this._myAudio.rate(t))}updateVolume(t,i=!1){this.setVolume(t),t!=null&&(i?this._myAudio.volume(t,this._myLastAudioID):this._myAudio.volume(t))}setSpatial(t){this._myAudioSetup.mySpatial=t}setPosition(t){this._myAudioSetup.myPosition=t}setPitch(t){this._myAudioSetup.myPitch=t}setRate(t){this._myAudioSetup.myRate=t}setVolume(t){this._myAudioSetup.myVolume=t}getDuration(){return this._myAudio.duration()}getVolume(){return this._myAudioSetup.myVolume}getPitch(){return this._myAudioSetup.myPitch}getRate(){return this._myAudioSetup.myRate}registerAudioEventListener(t,i,s){this._myCallbacks.get(t).set(i,s)}unregisterAudioEventListener(t,i){this._myCallbacks.get(t).delete(i)}_addListeners(){if(this._myAudio!=null)for(let t in PP.AudioEvent){let i=PP.AudioEvent[t];this._myAudio.on(i,function(s){let n=this._myCallbacks.get(i);for(let o of n.values())o(s)}.bind(this))}}}});var Ti=f(()=>{PP.AudioSetup=class{constructor(t=null){this.myAudioFilePath=t?t.slice(0):null,this.myLoop=!1,this.myAutoplay=!1,this.myVolume=1,this._myRate=1,this.myPool=5,this.myPreload=!0,this.myPreventPlayWhenAudioContextNotRunning=!1,this.myPosition=null,this.mySpatial=!0,this.myReferenceDistance=1}clone(){let t=new PP.AudioSetup;return t.myAudioFilePath=this.myAudioFilePath.slice(0),t.myLoop=this.myLoop,t.myAutoplay=this.myAutoplay,t.myVolume=this.myVolume,t.myPitch=this.myPitch,t.myRate=this.myRate,t.myPool=this.myPool,t.myPreload=this.myPreload,t.myPreventPlayWhenAudioContextNotRunning=this.myPreventPlayWhenAudioContextNotRunning,this.myPosition!=null?t.myPosition=this.myPosition.vec3_clone():t.myPosition=null,t.mySpatial=this.mySpatial,t.myReferenceDistance=this.myReferenceDistance,t}get myPitch(){return this._myRate}get myRate(){return this._myRate}set myPitch(t){this._myRate=t}set myRate(t){this._myRate=t}}});var Vm={};var bi,Ci=F(()=>{bi=mt(ot());WL.registerComponent("pp-mute-everything",{},{init:function(){},start:function(){bi.Howler.mute(!0)},update:function(e){}})});var Si=f(()=>{PP.AudioUtils={isAudioPlaybackBlocked:function(){let e=!1;return Howler!=null&&Howler.state!="running"&&(e=!0),e}}});var vi=f(()=>{PP.HowlerAudioPlayer=class extends PP.AudioPlayer{constructor(t,i=null){super(i,!1),this._myAudio=t,i==null?(this._myAudioSetup.myAudioFilePath=this._myAudio._src,this._myAudioSetup.myLoop=this._myAudio._loop,this._myAudioSetup.myAutoplay=this._myAudio._autoplay,this._myAudioSetup.myVolume=this._myAudio._volume,this._myAudioSetup.myRate=this._myAudio._rate,this._myAudioSetup.myPool=this._myAudio._pool,this._myAudioSetup.myPreload=this._myAudio._preload,this._myAudioSetup.myPosition=this._myAudio._pos!=null?this._myAudio._pos.vec3_clone():null,this._myAudioSetup.mySpatial=this._myAudio._pos!=null,this._myAudioSetup.myReferenceDistance=this._myAudio._pannerAttr.refDistance):(this._myAudioSetup.myAudioFilePath=this._myAudio._src,this._myAudio.loop(this._myAudioSetup.myLoop),this._myAudio._autoplay=this._myAudioSetup.myAutoplay,this._myAudio.volume(this._myAudioSetup.myVolume),this._myAudio.rate(this._myAudioSetup.myRate),this._myAudio._pool=this._myAudioSetup.myPool,this._myAudio._preload=this._myAudioSetup.myPreload,this.updatePosition(this._myAudioSetup.myPosition),this._myAudio._pannerAttr.refDistance=this._myAudioSetup.myReferenceDistance,this._myAudioSetup.myAutoplay&&this._myAudio.play()),this._addListeners()}}});var xi=f(()=>{WL.registerComponent("pp-benchmark-max-physx",{_myStaticDomeSize:{type:WL.Type.Float,default:40},_myStaticPhysXCount:{type:WL.Type.Int,default:1e3},_myDynamicDomeSize:{type:WL.Type.Float,default:80},_myDynamicPhysXCount:{type:WL.Type.Int,default:250},_myKinematicDomeSize:{type:WL.Type.Float,default:120},_myKinematicPhysXCount:{type:WL.Type.Int,default:250},_myRaycastCount:{type:WL.Type.Int,default:100},_myVisualizeRaycast:{type:WL.Type.Bool,default:!1},_myVisualizeRaycastDelay:{type:WL.Type.Float,default:.5},_myUseConvexMesh:{type:WL.Type.Bool,default:!1},_myShapeIndex:{type:WL.Type.Int,default:0},_myShapeScaleMultiplier:{type:WL.Type.Float,default:1},_myEnableLog:{type:WL.Type.Bool,default:!0}},{start:function(){this._myRootObject=WL.scene.addObject(this.object),this._myRaycastSetup=new PP.RaycastSetup,this._myRaycastResults=new PP.RaycastResults,this._myStaticPhysXObjects=[],this._myStaticPhysXComponents=[],this._myStaticPhysXCollectors=[],this._myDynamicPhysXObjects=[],this._myDynamicPhysXComponents=[],this._myDynamicPhysXCollectors=[],this._myKinematicPhysXObjects=[],this._myKinematicPhysXComponents=[],this._myKinematicPhysXCollectors=[],this._spawnDome(!0,!1),this._spawnDome(!1,!1),this._spawnDome(!1,!0),this._myStartTimer=new PP.Timer(1),this._myTimer=new PP.Timer(0),this._myDebugTimer=new PP.Timer(this._myVisualizeRaycastDelay),this._myEnableLogTimer=new PP.Timer(1),this._myFPSHistory=[];for(let e=0;e<7;e++)this._myFPSHistory.push(0);this._myAddVelocityDelay=10,this._myTranslateVec3=PP.vec3_create(),this._myRotateVec3=PP.vec3_create()},update:function(e){if(this._myStartTimer.update(e),this._myStartTimer.isDone()){if(this._myTimer.update(e),this._myDebugTimer.update(e),this._myEnableLogTimer.update(e),this._myTimer.isDone()){this._myTimer.start();let t=!1;this._myDebugTimer.isDone()&&(this._myDebugTimer.start(),t=!0),t=t&&this._myVisualizeRaycast,this._raycastTest(t)}if(this._myFPSHistory.pop(),this._myFPSHistory.unshift(Math.round(1/e)),this._myEnableLog&&this._myEnableLogTimer.isDone()){this._myEnableLogTimer.start(),console.clear(),console.log("Static PhysX Dome Size:",this._myStaticPhysXObjects.length),console.log("Dynamic PhysX Dome Size:",this._myDynamicPhysXObjects.length),console.log("Kinematic PhysX Dome Size:",this._myKinematicPhysXObjects.length);let t=0;for(let a of this._myStaticPhysXCollectors)t+=a.getCollisions().length;let i=0;for(let a of this._myDynamicPhysXCollectors)i+=a.getCollisions().length;let s=0;for(let a of this._myKinematicPhysXCollectors)s+=a.getCollisions().length;let n=(t+i+s)/2;console.log("Current Collisions Count:",n),console.log("Raycast Count:",this._myRaycastCount),console.log("FPS History:");let o="";for(let a of this._myFPSHistory)o=o.concat(a,`
`);console.log(o)}}if(this._myAddVelocityDelay>0&&(this._myAddVelocityDelay--,this._myAddVelocityDelay==0))for(let t of this._myDynamicPhysXComponents){t.kinematic=!1;let i=50;t.linearVelocity=[Math.pp_random(-i,i),Math.pp_random(-i,i),Math.pp_random(-i,i)],t.angularVelocity=[Math.pp_random(-i,i),Math.pp_random(-i,i),Math.pp_random(-i,i)]}for(let t of this._myKinematicPhysXObjects){let i=5*e;this._myTranslateVec3.vec3_set(Math.pp_random(-i,i),Math.pp_random(-i,i),Math.pp_random(-i,i)),t.pp_translate(this._myTranslateVec3),rotateStrength=50*e,this._myRotateVec3.vec3_set(Math.pp_random(-rotateStrength,rotateStrength),Math.pp_random(-rotateStrength,rotateStrength),Math.pp_random(-rotateStrength,rotateStrength)),t.pp_rotate(this._myRotateVec3)}},_raycastTest(e){let t=this._myRaycastCount,i=1e4;for(let s=0;s<t;s++){let n=[Math.pp_random(1,2)*Math.pp_randomSign(),Math.pp_random(1,2)*Math.pp_randomSign(),Math.pp_random(1,2)*Math.pp_randomSign()],o=[Math.pp_random(-1,1),Math.pp_random(-1,1),Math.pp_random(-1,1)];o.vec3_normalize(o),this._myRaycastSetup.myOrigin.vec3_copy(n),this._myRaycastSetup.myDirection.vec3_copy(o),this._myRaycastSetup.myDistance=i,this._myRaycastSetup.myBlockLayerFlags.setMask(255);let a=PP.PhysicsUtils.raycast(this._myRaycastSetup,this._myRaycastResults);e&&PP.myDebugVisualManager.drawRaycast(this._myDebugTimer.getDuration(),a,!0,5,.015)}},_spawnDome(e,t){let i=this._myStaticPhysXCount,s=this._myStaticPhysXObjects,n=Math.ceil(Math.sqrt(this._myStaticPhysXCount));e||(t?(n=Math.ceil(Math.sqrt(this._myDynamicPhysXCount)),i=this._myDynamicPhysXCount,s=this._myDynamicPhysXObjects):(n=Math.ceil(Math.sqrt(this._myKinematicPhysXCount)),i=this._myKinematicPhysXCount,s=this._myKinematicPhysXObjects));let o=Math.PI*2/n,a=Math.max(0,this._myStaticDomeSize-20),l=this._myStaticDomeSize+20;e||(t?(a=Math.max(0,this._myDynamicDomeSize-20),l=this._myDynamicDomeSize+20):(a=Math.max(0,this._myKinematicDomeSize-20),l=this._myKinematicDomeSize+20));let u=0,y=Math.pp_toRadians(10),r=PP.vec3_create(0,1,0),m=PP.vec3_create(0,0,-1);for(let c=0;c<n/2;c++){let h=PP.vec3_create(0,1,0),_=PP.vec3_create();m.vec3_cross(h,_),_.vec3_normalize(_);for(let d=0;d<n;d++){if(s.length<i){let p=Math.random()*(l-a)+a,P=(Math.random()*2-1)*(y-u)+u,T=(Math.random()*2-1)*(y-u)+u,g=h.slice(0);g.vec3_rotateAxisRadians(P,_,g),g.vec3_rotateAxisRadians(T,r,g),g.vec3_scale(p,g),this._addPhysX(g,e,t)}if(h.vec3_rotateAxisRadians(o/2,_,h),s.length<i){let p=Math.random()*(l-a)+a,P=(Math.random()*2-1)*(y-u)+u,T=(Math.random()*2-1)*(y-u)+u,g=h.slice(0);g.vec3_rotateAxisRadians(P,_,g),g.vec3_rotateAxisRadians(T,r,g),g.vec3_scale(p,g),this._addPhysX(g,e,t)}h.vec3_rotateAxisRadians(o/2,_,h)}m.vec3_rotateAxisRadians(o,r,m)}},_addPhysX(e,t,i){let s=e,n=Math.pp_random(1,10),o=Math.pp_randomPick(WL.Shape.Sphere,WL.Shape.Box);this._myUseConvexMesh&&(o=WL.Shape.ConvexMesh,n*=this._myShapeScaleMultiplier);let a=WL.scene.addObject(this._myRootObject);a.pp_setPosition(s);let l=a.pp_addComponent("physx",{shape:o,shapeData:{index:this._myShapeIndex},extents:PP.vec3_create(n,n,n),static:t,kinematic:!i,mass:1});t?(this._myStaticPhysXObjects.push(a),this._myStaticPhysXComponents.push(l),this._myStaticPhysXCollectors.push(new PP.PhysicsCollisionCollector(l))):i?(this._myDynamicPhysXObjects.push(a),this._myDynamicPhysXComponents.push(l),this._myDynamicPhysXCollectors.push(new PP.PhysicsCollisionCollector(l))):(this._myKinematicPhysXObjects.push(a),this._myKinematicPhysXComponents.push(l),this._myKinematicPhysXCollectors.push(new PP.PhysicsCollisionCollector(l)))}})});var Bi=f(()=>{WL.registerComponent("pp-benchmark-max-visible-triangles",{_myTargetFrameRate:{type:WL.Type.Int,default:-1},_myTargetFrameRateThreshold:{type:WL.Type.Int,default:3},_myStartPlaneCount:{type:WL.Type.Int,default:1},_myPlaneTriangles:{type:WL.Type.Int,default:100},_mySecondsBeforeDoubling:{type:WL.Type.Float,default:.5},_myDTHistoryToIgnorePercentage:{type:WL.Type.Float,default:.25},_myCloneMaterial:{type:WL.Type.Bool,default:!1},_myCloneMesh:{type:WL.Type.Bool,default:!1},_myEnableLog:{type:WL.Type.Bool,default:!0},_myPlaneMaterial:{type:WL.Type.Material},_myBackgroundMaterial:{type:WL.Type.Material},_myTextMaterial:{type:WL.Type.Material,default:null}},{_start(){this._myBackgroundSize=4,this._myBackgroundObject.pp_setActive(!0),this._myBackgroundObject.pp_setScale(this._myBackgroundSize+.1),this._myBackgroundObject.pp_translate(PP.vec3_create(0,0,-.001)),this._myDoubleTimer=new PP.Timer(this._mySecondsBeforeDoubling),this._myIsDone=!1,this._myCurrentPlanes=this._myStartPlaneCount,this._myDTHistory=[],this._myUpperLimit=-1,this._myLowerLimit=0,this._myPlanes=[],this._mySkipNextFrames=0,this._myMaxWaitFrames=0,this._myMaxPlanesReached=!1,this._myFirstTime=!0},_update(e){{if(e<1e-5)return;if(e>.5&&this._myMaxWaitFrames>0){this._myMaxWaitFrames--;return}if(this._myMaxWaitFrames=10,this._mySkipNextFrames>0){this._mySkipNextFrames--;return}}if(!this._myIsDone&&(this._myDoubleTimer.update(e),this._myDTHistory.push(e),this._myDoubleTimer.isDone())){this._myDoubleTimer.start();let t=this._computeAverageFrameRate(!1);if(this._myFirstTime)this._myFirstTime=!1;else{let i=!1;t<this._myStableFrameRate-this._myTargetFrameRateThreshold?(this._myUpperLimit=this._myCurrentPlanes,i=!0,this._myUpperLimit==1&&(this._myLowerLimit=1)):(this._myLowerLimit=this._myCurrentPlanes,this._myUpperLimit>0&&(this._myUpperLimit=Math.max(this._myUpperLimit,this._myLowerLimit))),this._myTriangleTextComponent.text="Triangles: "+this._myCurrentPlanes*this._myRealTrianglesAmount,this._myPlaneTextComponent.text="Planes: "+this._myCurrentPlanes,this._myFPSTextComponent.text="FPS: "+t+" / "+this._myStableFrameRate,i?(this._myTriangleTextComponent.material.color=this._myLagColor,this._myPlaneTextComponent.material.color=this._myLagColor,this._myFPSTextComponent.material.color=this._myLagColor):(this._myTriangleTextComponent.material.color=this._myNormalColor,this._myPlaneTextComponent.material.color=this._myNormalColor,this._myFPSTextComponent.material.color=this._myNormalColor);let s=!1;(this._myUpperLimit>0&&!i&&this._myUpperLimit-this._myLowerLimit<=Math.max(2,1e3/this._myRealTrianglesAmount)||i&&this._myUpperLimit-this._myLowerLimit<=1||!i&&this._myMaxPlanesReached)&&(t<this._myStableFrameRate-this._myTargetFrameRateThreshold?(this._myLowerLimit=Math.max(1,Math.floor(this._myUpperLimit/2.5)),this._myUpperLimit=0,s=!0,this._myEnableLog&&console.log("Rst - Triangles:",this._myCurrentPlanes*this._myRealTrianglesAmount,"- Planes:",this._myCurrentPlanes,"- Frame Rate:",t)):(this._myMaxPlanesReached?this._myEnableLog&&(console.log("Aborted - Max Planes Reached"),this._myDoneTextComponent.text="Aborted - Max Planes Reached"):(this._displayPlanes(this._myLowerLimit),this._myEnableLog&&(console.log(`
End - Triangles:`,this._myLowerLimit*this._myRealTrianglesAmount,"- Planes:",this._myLowerLimit,"- Frame Rate:",t),console.log("Plane Triangles (Adjusted):",this._myRealTrianglesAmount),console.log("Target Frame Rate:",this._myStableFrameRate,"- Threshold: ",this._myStableFrameRate-this._myTargetFrameRateThreshold)),this._myTriangleTextComponent.text="Triangles: "+this._myLowerLimit*this._myRealTrianglesAmount,this._myPlaneTextComponent.text="Planes: "+this._myLowerLimit,this._myFPSTextComponent.text="FPS: "+t+" / "+this._myStableFrameRate,this._myDoneTextComponent.text="End"),this._myIsDone=!0)),i&&!s&&this._myEnableLog&&console.log("Lag - Triangles:",this._myCurrentPlanes*this._myRealTrianglesAmount,"- Planes:",this._myCurrentPlanes,"- Frame Rate:",t),this._myIsDone||(this._myUpperLimit>0?(this._myCurrentPlanes=Math.floor((this._myUpperLimit+this._myLowerLimit)/2),this._myCurrentPlanes=Math.max(this._myCurrentPlanes,1)):s?this._myCurrentPlanes=this._myLowerLimit:this._myCurrentPlanes=this._myLowerLimit*2,this._myCurrentPlanes>5e4?(this._myCurrentPlanes=5e4,this._myMaxPlanesReached=!0):this._myMaxPlanesReached=!1)}this._myIsDone||(this._displayPlanes(this._myCurrentPlanes),this._myElapsedTime=0,this._myFrameCount=0,this._mySkipNextFrames=30)}},_displayPlanes(e){for(;this._myPlanes.length>e;){let a=this._myPlanes.pop();this._myPlanePool.release(a)}for(;this._myPlanes.length<e;){let a=this._myPlanePool.get();this._myPlanes.push(a)}let t=1;for(;t*t<e;)t++;let i=.01,s=i*(t-1),n=(this._myBackgroundSize*2-s)/(t*2),o=e;for(let a=0;a<t&&o>0;a++)for(let l=0;l<t&&o>0;l++){let u=this._myPlanes[o-1];u.pp_setScale(n);let y=[-this._myBackgroundSize+n+l*n*2+l*i,this._myBackgroundSize-n-a*n*2-a*i,0];u.pp_setPositionLocal(y),u.pp_setActive(!0),o--}},start(){this._myLagColor=PP.vec4_create(.5,0,0,1),this._myNormalColor=PP.vec4_create(0,0,0,1),this._myRealTrianglesAmount=0,this._myTrianglesObject=WL.scene.addObject(this.object),this._myBackgroundObject=WL.scene.addObject(this._myTrianglesObject);{let t=this._myBackgroundObject.addComponent("mesh");t.mesh=PP.MeshUtils.createPlaneMesh(),t.material=this._myBackgroundMaterial.clone()}this._myPlaneObject=WL.scene.addObject(this._myTrianglesObject);{let t=this._myPlaneObject.addComponent("mesh");t.mesh=this._createPlaneMesh(this._myPlaneTriangles),this._myRealTrianglesAmount=t.mesh.indexData.length/3,t.material=this._myPlaneMaterial.clone()}let e=new PP.ObjectPoolParams;this._myCloneMesh?this._myRealTrianglesAmount<=4?e.myInitialPoolSize=15e3:this._myRealTrianglesAmount<=8?e.myInitialPoolSize=1e4:this._myRealTrianglesAmount<=64?e.myInitialPoolSize=7500:e.myInitialPoolSize=5e3:e.myInitialPoolSize=3e4,e.myPercentageToAddWhenEmpty=0,e.myAmountToAddWhenEmpty=1e4,e.myCloneParams=new PP.CloneParams,e.myCloneParams.myDeepCloneParams.setDeepCloneComponentVariable("mesh","material",this._myCloneMaterial),e.myCloneParams.myDeepCloneParams.setDeepCloneComponentVariable("mesh","mesh",this._myCloneMesh),this._myPlanePool=new PP.ObjectPool(this._myPlaneObject,e),this._myBackgroundObject.pp_setActive(!1),this._myPlaneObject.pp_setActive(!1),this._myStartTimer=new PP.Timer(this._mySecondsBeforeDoubling*2),this._mySessionStarted=!1,this._myTextsObject=WL.scene.addObject(this._myTrianglesObject),this._myTriangleTextObject=WL.scene.addObject(this._myTextsObject),this._myTriangleTextComponent=this._myTriangleTextObject.addComponent("text"),this._myTriangleTextComponent.alignment=WL.Alignment.Left,this._myTriangleTextComponent.justification=WL.Justification.Line,this._myTriangleTextComponent.material=this._myTextMaterial.clone(),this._myTriangleTextComponent.material.color=this._myNormalColor,this._myTriangleTextComponent.text=" ",this._myPlaneTextObject=WL.scene.addObject(this._myTextsObject),this._myPlaneTextComponent=this._myPlaneTextObject.addComponent("text"),this._myPlaneTextComponent.alignment=WL.Alignment.Left,this._myPlaneTextComponent.justification=WL.Justification.Line,this._myPlaneTextComponent.material=this._myTextMaterial.clone(),this._myPlaneTextComponent.material.color=this._myNormalColor,this._myPlaneTextComponent.text=" ",this._myFPSTextObject=WL.scene.addObject(this._myTextsObject),this._myFPSTextComponent=this._myFPSTextObject.addComponent("text"),this._myFPSTextComponent.alignment=WL.Alignment.Left,this._myFPSTextComponent.justification=WL.Justification.Line,this._myFPSTextComponent.material=this._myTextMaterial.clone(),this._myFPSTextComponent.material.color=this._myNormalColor,this._myFPSTextComponent.text=" ",this._myDoneTextObject=WL.scene.addObject(this._myTrianglesObject),this._myDoneTextComponent=this._myDoneTextObject.addComponent("text"),this._myDoneTextComponent.alignment=WL.Alignment.Center,this._myDoneTextComponent.justification=WL.Justification.Line,this._myDoneTextComponent.material=this._myTextMaterial.clone(),this._myDoneTextComponent.material.color=this._myNormalColor,this._myDoneTextComponent.text=" ",this._myTextsObject.pp_setPositionLocal(PP.vec3_create(0,4.3,0)),this._myTextsObject.pp_setScale(2.75),this._myTriangleTextObject.pp_setPositionLocal(PP.vec3_create(-1.4,0,0)),this._myPlaneTextObject.pp_setPositionLocal(PP.vec3_create(.55,0,0)),this._myFPSTextObject.pp_setPositionLocal(PP.vec3_create(-.315,0,0)),this._myDoneTextObject.pp_setPositionLocal(PP.vec3_create(0,-4.6,0)),this._myDoneTextObject.pp_setScale(4),this._myDTHistory=[]},update(e){this._mySessionStarted?this._myStartTimer.isRunning()?(this._myStartTimer.update(e),this._myDTHistory.push(e),this._myStartTimer.isDone()&&(this._myStableFrameRate=this._computeAverageFrameRate(!0),this._myTargetFrameRate>0&&(this._myStableFrameRate=this._myTargetFrameRate),this._myEnableLog&&(console.log(`
Plane Triangles (Adjusted):`,this._myRealTrianglesAmount),console.log("Target Frame Rate:",this._myStableFrameRate,"- Threshold: ",this._myStableFrameRate-this._myTargetFrameRateThreshold),console.log("")),this._start())):this._update(e):this._mySessionStarted=WL.xrSession!=null},_computeAverageFrameRate(e){let t=0;this._myDTHistory.sort();let i=Math.floor(this._myDTHistory.length)*Math.min(.9,this._myDTHistoryToIgnorePercentage*(e?2:1));for(let n=0;n<i;n++)this._myDTHistory.pop();let s=0;for(let n of this._myDTHistory)s+=n;return s/=this._myDTHistory.length,t=Math.round(1/s),this._myDTHistory=[],t},_createPlaneMesh(e){let t=Math.ceil(e/2),i=1,s=1,n=1;for(;n*n<t;)n++;for(i=n,s=n;i>1&&s>1&&i*s>t&&(i-1)*s>=t;)i--;let o=new PP.MeshCreationParams;for(let l=0;l<i+1;l++)for(let u=0;u<s+1;u++){let y=2/s*u,r=2/i*l,m=new PP.MeshCreationVertexParams;m.myPosition=new PP.vec3_create,m.myPosition[0]=y-1,m.myPosition[1]=r-1,m.myPosition[2]=0,m.myTextureCoordinates=new PP.vec2_create,m.myTextureCoordinates[0]=y/2,m.myTextureCoordinates[1]=r/2,m.myNormal=new PP.vec3_create,m.myNormal[0]=0,m.myNormal[1]=0,m.myNormal[2]=1,o.myVertexes.push(m)}for(let l=0;l<i;l++)for(let u=0;u<s;u++){let y=new PP.MeshCreationTriangleParams;y.myIndexes[0]=l*(s+1)+u,y.myIndexes[1]=l*(s+1)+u+1,y.myIndexes[2]=(l+1)*(s+1)+u;let r=new PP.MeshCreationTriangleParams;r.myIndexes[0]=(l+1)*(s+1)+u,r.myIndexes[1]=l*(s+1)+u+1,r.myIndexes[2]=(l+1)*(s+1)+u+1,o.myTriangles.push(y),o.myTriangles.push(r)}return PP.MeshUtils.createMesh(o)}})});var Li=f(()=>{PP.ObjectPoolManager=class{constructor(){this._myPools=new Map}addPool(t,i,s=new PP.ObjectPoolParams){if(this._myPools.has(t))console.error("Pool already created with this ID");else{let n=new PP.ObjectPool(i,s);this._myPools.set(t,n)}}increasePool(t,i){let s=this._myPools.get(t);s&&s.increase(i)}increasePoolPercentage(t,i){let s=this._myPools.get(t);s&&s.increasePercentage(i)}getPool(t){return this._myPools.get(t)}hasPool(t){return this._myPools.has(t)}getObject(t){return this._myPools.has(t)?this._myPools.get(t).get():null}releaseObject(t,i){this._myPools.get(t).release(i)}};PP.ObjectPoolParams=class{constructor(){this.myInitialPoolSize=0,this.myAmountToAddWhenEmpty=0,this.myPercentageToAddWhenEmpty=0,this.myCloneParams=void 0,this.myOptimizeObjectsAllocation=!0,this.myCloneCallback=void 0,this.mySetActiveCallback=void 0,this.myEqualCallback=void 0,this.myOptimizeObjectsAllocationCallback=void 0,this.myEnableDebugLog=!0}};PP.ObjectPool=class{constructor(t,i){this._myObjectPoolParams=i,this._myPrototype=this._clone(t),this._myAvailableObjects=[],this._myBusyObjects=[],this._addToPool(i.myInitialPoolSize,!1)}get(){let t=this._myAvailableObjects.shift();if(t==null){let i=Math.ceil(this._myBusyObjects.length*this._myObjectPoolParams.myPercentageToAddWhenEmpty);i+=this._myObjectPoolParams.myAmountToAddWhenEmpty,this._addToPool(i,this._myObjectPoolParams.myEnableDebugLog),t=this._myAvailableObjects.shift()}return t!=null&&this._myBusyObjects.push(t),t}release(t){let i=this._myBusyObjects.pp_remove(this._equals.bind(this,t));i&&(this._setActive(i,!1),this._myAvailableObjects.push(i))}increase(t){this._addToPool(t,!1)}increasePercentage(t){let i=Math.ceil(this.getSize()*t);this._addToPool(i,!1)}getSize(){return this._myBusyObjects.length+this._myAvailableObjects.length}getAvailableSize(){return this._myAvailableObjects.length}getBusySize(){return this._myAvailableObjects.length}_addToPool(t,i){if(!(t<=0)){this._myObjectPoolParams.myOptimizeObjectsAllocation&&(this._myObjectPoolParams.myOptimizeObjectsAllocationCallback?this._myObjectPoolParams.myOptimizeObjectsAllocationCallback(this._myPrototype,t):this._myPrototype.pp_reserveObjectsHierarchy!=null&&this._myPrototype.pp_reserveObjectsHierarchy(t));for(let s=0;s<t;s++)this._myAvailableObjects.push(this._clone(this._myPrototype));i&&console.warn("Added new elements to the pool:",t)}}_clone(t){let i=null;return this._myObjectPoolParams.myCloneCallback!=null?i=this._myObjectPoolParams.myCloneCallback(t,this._myObjectPoolParams.myCloneParams):t.pp_clone!=null?i=t.pp_clone(this._myObjectPoolParams.myCloneParams):t.clone!=null&&(i=t.clone(this._myObjectPoolParams.myCloneParams)),i==null?console.error("Object not cloneable, pool will return null"):this._setActive(i,!1),i}_setActive(t,i){this._myObjectPoolParams.mySetActiveCallback!=null?this._myObjectPoolParams.mySetActiveCallback(t,i):t.pp_setActive!=null?t.pp_setActive(i):t.setActive!=null&&t.setActive(i)}_equals(t,i){let s=!1;return this._myObjectPoolParams.myEqualCallback!=null?s=this._myObjectPoolParams.myEqualCallback(t,i):t.pp_equals!=null?s=t.pp_equals(i):t.equals!=null?s=t.equals(i):s=t==i,s}}});var Ii=f(()=>{PP.SaveManager=class{constructor(){this._mySaveCache=new Map,this._myCacheEnabled=!0,this._myCommitSavesDelayTimer=new PP.Timer(0,!1),this._myDelaySavesCommit=!0,this._myIDsToCommit=[],this._myCacheDefaultValueOnFail=!0,WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this)),this._myClearCallbacks=new Map,this._myDeleteCallbacks=new Map,this._myDeleteIDCallbacks=new Map,this._mySaveCallbacks=new Map,this._mySaveValueChangedCallbacks=new Map,this._mySaveIDCallbacks=new Map,this._mySaveValueChangedIDCallbacks=new Map,this._myCommitSaveCallbacks=new Map,this._myCommitSaveIDCallbacks=new Map,this._myCommitSavesCallbacks=new Map,this._myLoadCallbacks=new Map,this._myLoadIDCallbacks=new Map}setCommitSavesDelay(t){this._myCommitSavesDelayTimer.start(t)}setDelaySavesCommit(t){this._myDelaySavesCommit=t}setCacheDefaultValueOnFail(t){this._myCacheDefaultValueOnFail=t}setCacheEnabled(t){this._myCacheEnabled=t}update(t){this._myCommitSavesDelayTimer.isRunning()&&(this._myCommitSavesDelayTimer.update(t),this._myCommitSavesDelayTimer.isDone()&&this.commitSaves())}save(t,i,s=null,n=null){let o=!1;if(this._mySaveCache.has(t)&&this._isCacheEnabled(n)&&(o=this._mySaveCache.get(t)===i),!o)if(this._mySaveCache.set(t,i),this._myDelaySavesCommit&&s==null||s!=null&&s)this._myIDsToCommit.pp_pushUnique(t),this._myCommitSavesDelayTimer.isRunning()||this._myCommitSavesDelayTimer.start();else{let a=this._commitSave(t,!1);if(this._myCommitSavesCallbacks.size>0){let l=!1;this._myCommitSavesCallbacks.forEach(function(u){u(l,a)})}}if(this._mySaveCallbacks.size>0&&this._mySaveCallbacks.forEach(function(a){a(t,i)}),this._mySaveIDCallbacks.size>0){let a=this._mySaveIDCallbacks.get(t);a?.forEach(function(l){l(t,i)})}if(!o&&(this._mySaveValueChangedCallbacks.size>0&&this._mySaveValueChangedCallbacks.forEach(function(a){a(t,i)}),this._mySaveValueChangedIDCallbacks.size>0)){let a=this._mySaveValueChangedIDCallbacks.get(t);a?.forEach(function(l){l(t,i)})}}commitSaves(){if(this._myIDsToCommit.length>0){let t=!1;for(let i of this._myIDsToCommit)if(this._mySaveCache.has(i)){let s=this._commitSave(i,!0);t=t||s}if(this._myIDsToCommit=[],this._myCommitSavesCallbacks.size>0){let i=!0;this._myCommitSavesCallbacks.forEach(function(s){s(i,t)})}}}has(t,i=null){return this._mySaveCache.has(t)&&this._isCacheEnabled(i)||PP.SaveUtils.has(t)}delete(t){if(this._mySaveCache.delete(t),PP.SaveUtils.delete(t),this._myDeleteCallbacks.size>0&&this._myDeleteCallbacks.forEach(function(i){i(t)}),this._myDeleteIDCallbacks.size>0){let i=this._myDeleteIDCallbacks.get(t);i?.forEach(function(s){s(t)})}}clear(){this._mySaveCache.clear(),PP.SaveUtils.clear(),this._myClearCallbacks.size>0&&this._myClearCallbacks.forEach(function(t){t()})}load(t,i=null,s=null){return this._load(t,i,"load",s)}loadString(t,i=null,s=null){return this._load(t,i,"loadString",s)}loadNumber(t,i=null,s=null){return this._load(t,i,"loadNumber",s)}loadBool(t,i=null,s=null){return this._load(t,i,"loadBool",s)}getCommitSavesDelay(){return this._myCommitSavesDelayTimer.getDuration()}isDelaySavesCommit(){return this._myDelaySavesCommit}isCacheDefaultValueOnFail(){return this._myCacheDefaultValueOnFail}isCacheEnabled(){return this._myCacheEnabled}_commitSave(t,i){let s=this._mySaveCache.get(t),n=!1;try{PP.SaveUtils.save(t,s)}catch{n=!0}if(this._myCommitSaveCallbacks.size>0&&this._myCommitSaveCallbacks.forEach(function(o){o(t,s,i,n)}),this._myCommitSaveIDCallbacks.size>0){let o=this._myCommitSaveIDCallbacks.get(t);o?.forEach(function(a){a(t,s,i,n)})}return n}_load(t,i,s,n=null){let o=null,a=!1,l=!1;if(this._mySaveCache.has(t)&&this._isCacheEnabled(n))o=this._mySaveCache.get(t),o==null&&i!=null&&(o=i,this._myCacheDefaultValueOnFail&&this._mySaveCache.set(t,o)),l=!0;else{let u=null;try{u=PP.SaveUtils[s](t,null)}catch{u=null,a=!0}u==null?o=i:o=u,u!=null||this._myCacheDefaultValueOnFail?this._mySaveCache.set(t,o):this._mySaveCache.set(t,null)}if(this._myLoadCallbacks.size>0&&this._myLoadCallbacks.forEach(function(u){u(t,o,l,a)}),this._myLoadIDCallbacks.size>0){let u=this._myLoadIDCallbacks.get(t);u?.forEach(function(y){y(t,o,l,a)})}return o}_onXRSessionStart(t){t.addEventListener("visibilitychange",function(i){i.session.visibilityState!="visible"&&this._onXRSessionInterrupt()}.bind(this))}_onXRSessionEnd(){this._onXRSessionInterrupt()}_onXRSessionInterrupt(){this.commitSaves()}registerClearEventListener(t,i){this._myClearCallbacks.set(t,i)}unregisterClearEventListener(t){this._myClearCallbacks.delete(t)}registerDeleteEventListener(t,i){this._myDeleteCallbacks.set(t,i)}unregisterDeleteEventListener(t){this._myDeleteCallbacks.delete(t)}registerDeleteIDEventListener(t,i,s){let n=this._myDeleteIDCallbacks.get(t);n==null&&(this._myDeleteIDCallbacks.set(t,new Map),n=this._myDeleteIDCallbacks.get(t)),n.set(i,s)}unregisterDeleteIDEventListener(t,i){let s=this._myDeleteIDCallbacks.get(t);s!=null&&(s.delete(i),s.size<=0&&this._myDeleteIDCallbacks.delete(t))}registerSaveEventListener(t,i){this._mySaveCallbacks.set(t,i)}unregisterSaveEventListener(t){this._mySaveCallbacks.delete(t)}registerSaveIDEventListener(t,i,s){let n=this._mySaveIDCallbacks.get(t);n==null&&(this._mySaveIDCallbacks.set(t,new Map),n=this._mySaveIDCallbacks.get(t)),n.set(i,s)}unregisterSaveIDEventListener(t,i){let s=this._mySaveIDCallbacks.get(t);s!=null&&(s.delete(i),s.size<=0&&this._mySaveIDCallbacks.delete(t))}registerSaveValueChangedEventListener(t,i){this._mySaveValueChangedCallbacks.set(t,i)}unregisterSaveValueChangedEventListener(t){this._mySaveValueChangedCallbacks.delete(t)}registerSaveValueChangedIDEventListener(t,i,s){let n=this._mySaveValueChangedIDCallbacks.get(t);n==null&&(this._mySaveValueChangedIDCallbacks.set(t,new Map),n=this._mySaveValueChangedIDCallbacks.get(t)),n.set(i,s)}unregisterSaveValueChangedIDEventListener(t,i){let s=this._mySaveValueChangedIDCallbacks.get(t);s!=null&&(s.delete(i),s.size<=0&&this._mySaveValueChangedIDCallbacks.delete(t))}registerCommitSavesEventListener(t,i){this._myCommitSavesCallbacks.set(t,i)}unregisterCommitSavesEventListener(t){this._myCommitSavesCallbacks.delete(t)}registerCommitSaveEventListener(t,i){this._myCommitSaveCallbacks.set(t,i)}unregisterCommitSaveEventListener(t){this._myCommitSaveCallbacks.delete(t)}registerCommitSaveIDEventListener(t,i,s){let n=this._myCommitSaveIDCallbacks.get(t);n==null&&(this._myCommitSaveIDCallbacks.set(t,new Map),n=this._myCommitSaveIDCallbacks.get(t)),n.set(i,s)}unregisterCommitSaveIDEventListener(t,i){let s=this._myCommitSaveIDCallbacks.get(t);s!=null&&(s.delete(i),s.size<=0&&this._myCommitSaveIDCallbacks.delete(t))}registerLoadEventListener(t,i){this._myLoadCallbacks.set(t,i)}unregisterLoadEventListener(t){this._myLoadCallbacks.delete(t)}registerLoadIDEventListener(t,i,s){let n=this._myLoadIDCallbacks.get(t);n==null&&(this._myLoadIDCallbacks.set(t,new Map),n=this._myLoadIDCallbacks.get(t)),n.set(i,s)}unregisterLoadIDEventListener(t,i){let s=this._myLoadIDCallbacks.get(t);s!=null&&(s.delete(i),s.size<=0&&this._myLoadIDCallbacks.delete(t))}_isCacheEnabled(t=null){return this._myCacheEnabled&&t==null||t!=null&&t}}});var Ai=f(()=>{PP.Timer=class{constructor(t,i=!0){this._myDuration=t,this._myOnEndCallbacks=new Map,this._myDone=!1,this._myJustDone=!1,this._myStarted=!1,i?this.start():this.reset()}start(t=null){this.reset(t),this._myStarted=!0}end(){this._done()}reset(t=null){t!=null&&(this._myDuration=Math.max(0,t)),this._myTimeLeft=this._myDuration,this._myDone=!1,this._myJustDone=!1,this._myStarted=!1}update(t){this._myJustDone=!1,this.isRunning()&&(this._myTimeLeft=Math.max(0,this._myTimeLeft-t),this._myTimeLeft==0&&this._done())}isDone(){return this._myDone}isJustDone(){return this._myJustDone}isStarted(){return this._myStarted}isRunning(){return this.isStarted()&&!this.isDone()}getDuration(){return this._myDuration}setDuration(t){this._myDuration=Math.max(0,t)}getTimeLeft(){return this._myTimeLeft}getPercentage(){let t=1;return this._myTimeLeft>0&&this._myDuration>0&&(t=(this._myDuration-this._myTimeLeft)/this._myDuration),Math.pp_clamp(t,0,1)}setPercentage(t){if(this.isRunning()){let i=Math.pp_clamp(1-t,0,1);this._myTimeLeft=this._myDuration*i}}onEnd(t,i=null){this._myOnEndCallbacks.set(i,t)}unregisterOnEnd(t=null){this._myOnEndCallbacks.delete(t)}_done(){if(this._myTimeLeft=0,this._myDone=!0,this._myJustDone=!0,this._myOnEndCallbacks.size>0)for(let t of this._myOnEndCallbacks.values())t()}}});var Mi=f(()=>{WL.registerComponent("pp-clear-console-on-xr-session-start",{},{init:function(){},start:function(){this._myFirstTime=!0,WL.onXRSessionStart.push(function(){this._myFirstTime&&(this._myFirstTime=!1,console.clear())}.bind(this))},update:function(e){}})});var Vi=f(()=>{WL.registerComponent("pp-set-active",{_myActive:{type:WL.Type.Bool,default:!0},_mySetActiveOn:{type:WL.Type.Enum,values:["self","children","descendants","hierarchy"],default:"hierarchy"},_mySetActiveWhen:{type:WL.Type.Enum,values:["init","start","first_update"],default:"init"}},{init:function(){this.active&&this._mySetActiveWhen==0&&this._setActive()},start:function(){this._mySetActiveWhen==1&&this._setActive(),this._myFirst=!0},update:function(e){this._mySetActiveWhen==2&&this._myFirst&&(this._myFirst=!1,this._setActive())},_setActive(){this._mySetActiveOn==0?this.object.pp_setActiveSelf(this._myActive):this._mySetActiveOn==1?this.object.pp_setActiveChildren(this._myActive):this._mySetActiveOn==2?this.object.pp_setActiveDescendants(this._myActive):this.object.pp_setActiveHierarchy(this._myActive)}})});var Di=f(()=>{WL.registerComponent("pp-adjust-hierarchy-physx-scale",{_myWhen:{type:WL.Type.Enum,values:["init","start","first_update"],default:"start"}},{init:function(){this.active&&this._myWhen==0&&this._adjustScale()},start:function(){this._myWhen==1&&this._adjustScale(),this._myFirst=!0},update:function(e){this._myWhen==2&&this._myFirst&&(this._myFirst=!1,this._adjustScale())},_adjustScale(){let e=this.object.pp_getScale(),t=this.object.pp_getComponentsHierarchy("physx");for(let i of t)i.extents[0]=i.extents[0]*e[0],i.extents[1]=i.extents[1]*e[1],i.extents[2]=i.extents[2]*e[2],i.active&&(i.active=!1,i.active=!0)}})});var Ri=f(()=>{WL.registerComponent("pp-get-player-objects",{_myPlayer:{type:WL.Type.Object},_myPlayerPivot:{type:WL.Type.Object},_myNonVRCamera:{type:WL.Type.Object},_myEyeLeft:{type:WL.Type.Object},_myEyeRight:{type:WL.Type.Object},_myHead:{type:WL.Type.Object},_myNonVRHead:{type:WL.Type.Object},_myVRHead:{type:WL.Type.Object},_myHandLeft:{type:WL.Type.Object},_myHandRight:{type:WL.Type.Object}},{init:function(){PP.myPlayerObjects.myPlayer=this._myPlayer,PP.myPlayerObjects.myPlayerPivot=this._myPlayerPivot,PP.myPlayerObjects.myNonVRCamera=this._myNonVRCamera,PP.myPlayerObjects.myHead=this._myHead,PP.myPlayerObjects.myNonVRHead=this._myNonVRHead,PP.myPlayerObjects.myVRHead=this._myVRHead,PP.myPlayerObjects.myEyeLeft=this._myEyeLeft,PP.myPlayerObjects.myEyeRight=this._myEyeRight,PP.myPlayerObjects.myHandLeft=this._myHandLeft,PP.myPlayerObjects.myHandRight=this._myHandRight,PP.myPlayerObjects.myEyes=[],PP.myPlayerObjects.myEyes[PP.Handedness.LEFT]=this._myEyeLeft,PP.myPlayerObjects.myEyes[PP.Handedness.RIGHT]=this._myEyeRight,PP.myPlayerObjects.myHands=[],PP.myPlayerObjects.myHands[PP.Handedness.LEFT]=this._myHandLeft,PP.myPlayerObjects.myHands[PP.Handedness.RIGHT]=this._myHandRight,PP.myPlayerObjects.myPlayerPivot==null&&(PP.myPlayerObjects.myPlayerPivot=PP.myPlayerObjects.myPlayer)}});PP.myPlayerObjects={myPlayer:null,myPlayerPivot:null,myNonVRCamera:null,myNonVRHead:null,myVRHead:null,myHead:null,myEyeLeft:null,myEyeRight:null,myEyes:[],myHandLeft:null,myHandRight:null,myHands:[]}});var Ei=f(()=>{WL.registerComponent("pp-get-default-resources",{_myPlane:{type:WL.Type.Mesh},_myCube:{type:WL.Type.Mesh},_mySphere:{type:WL.Type.Mesh},_myCone:{type:WL.Type.Mesh},_myCylinder:{type:WL.Type.Mesh},_myCircle:{type:WL.Type.Mesh},_myFlatOpaque:{type:WL.Type.Material},_myFlatTransparentNoDepth:{type:WL.Type.Material},_myPhongOpaque:{type:WL.Type.Material},_myText:{type:WL.Type.Material}},{init(){PP.myDefaultResources.myMeshes.myPlane=PP.MeshUtils.cloneMesh(this._myPlane),PP.myDefaultResources.myMeshes.myCube=PP.MeshUtils.cloneMesh(this._myCube),PP.myDefaultResources.myMeshes.mySphere=PP.MeshUtils.cloneMesh(this._mySphere),PP.myDefaultResources.myMeshes.myCone=PP.MeshUtils.cloneMesh(this._myCone),PP.myDefaultResources.myMeshes.myCylinder=PP.MeshUtils.cloneMesh(this._myCylinder),PP.myDefaultResources.myMeshes.myCircle=PP.MeshUtils.cloneMesh(this._myCircle),PP.myDefaultResources.myMeshes.myInvertedCube=PP.MeshUtils.invertMesh(this._myCube),PP.myDefaultResources.myMeshes.myInvertedSphere=PP.MeshUtils.invertMesh(this._mySphere),PP.myDefaultResources.myMeshes.myInvertedCone=PP.MeshUtils.invertMesh(this._myCone),PP.myDefaultResources.myMeshes.myInvertedCylinder=PP.MeshUtils.invertMesh(this._myCylinder),this._myFlatOpaque!=null&&(PP.myDefaultResources.myMaterials.myFlatOpaque=this._myFlatOpaque.clone()),this._myFlatTransparentNoDepth!=null&&(PP.myDefaultResources.myMaterials.myFlatTransparentNoDepth=this._myFlatTransparentNoDepth.clone()),this._myPhongOpaque!=null&&(PP.myDefaultResources.myMaterials.myPhongOpaque=this._myPhongOpaque.clone()),this._myText!=null&&(PP.myDefaultResources.myMaterials.myText=this._myText.clone())}});PP.myDefaultResources={myMeshes:{myPlane:null,myCube:null,mySphere:null,myCone:null,myCylinder:null,myCircle:null,myInvertedCube:null,myInvertedSphere:null,myInvertedCone:null,myInvertedCylinder:null},myMaterials:{myFlatOpaque:null,myFlatTransparentNoDepth:null,myPhongOpaque:null,myText:null}}});var Oi=f(()=>{WL.registerComponent("pp-show-fps",{_myRefreshSeconds:{type:WL.Type.Float,default:.25},_myTextMaterial:{type:WL.Type.Material}},{init:function(){},start(){this._myTimer=new PP.Timer(this._myRefreshSeconds),this._myTotalDT=0,this._myFrames=0,this._myVisualFPSParent=this.object.pp_addObject();let e=new PP.VisualTextParams;e.myText="0",e.myTransform.mat4_setPositionRotationScale(PP.vec3_create(-.115,-.115,.35),PP.vec3_create(0,180,0),PP.vec3_create(.3,.3,.3)),this._myTextMaterial!=null?e.myMaterial=this._myTextMaterial.clone():(e.myMaterial=PP.myDefaultResources.myMaterials.myText.clone(),e.myMaterial.color=PP.vec4_create(0,1,0,1)),e.myParent=this._myVisualFPSParent,e.myIsLocal=!0,this._myVisualFPS=new PP.VisualText(e),PP.myEasyTuneVariables.add(new PP.EasyTuneNumber("FPS X",-.25,.1,3)),PP.myEasyTuneVariables.add(new PP.EasyTuneNumber("FPS Y",-.13,.1,3)),PP.myEasyTuneVariables.add(new PP.EasyTuneNumber("FPS Z",.35,.1,3))},update:function(){let e=PP.quat2_create();return function(i){if(this._myTotalDT+=i,this._myFrames++,this._myTimer.update(i),this._myTimer.isDone()){this._myTimer.start();let s=Math.round(this._myFrames/this._myTotalDT),n=this._myVisualFPS.getParams();PP.XRUtils.isSessionActive()?n.myTransform.mat4_setPositionRotationScale(PP.vec3_create(-.115,-.115,.35),PP.vec3_create(0,180,0),PP.vec3_create(.3,.3,.3)):n.myTransform.mat4_setPositionRotationScale(PP.vec3_create(-.25,-.13,.35),PP.vec3_create(0,180,0),PP.vec3_create(.3,.3,.3)),n.myText=s.toFixed(0),this._myVisualFPS.paramsUpdated(),this._myTotalDT=0,this._myFrames=0}this._myVisualFPSParent.pp_setTransformQuat(PP.myPlayerObjects.myHead.pp_getTransformQuat(e))}}()})});var Wi=f(()=>{PP.StateData=class{constructor(t,i){this.myID=t,this.myObject=i}};PP.TransitionData=class{constructor(t,i,s,n,o){this.myID=t,this.myFromState=i,this.myToState=s,this.myObject=n,this.mySkipStateFunction=o}};PP.PendingPerform=class{constructor(t,...i){this.myID=t,this.myArgs=i}};PP.PerformMode={IMMEDIATE:0,DELAYED:1};PP.PerformDelayedMode={QUEUE:0,KEEP_FIRST:1,KEEP_LAST:2};PP.SkipStateFunction={NONE:0,END:1,START:2,BOTH:3};PP.FSM=class{constructor(t=PP.PerformMode.IMMEDIATE,i=PP.PerformDelayedMode.QUEUE){this._myCurrentStateData=null,this._myStates=new Map,this._myTransitions=new Map,this._myDebugLogActive=!1,this._myDebugShowDelayedInfo=!1,this._myDebugLogName="FSM",this._myPerformMode=t,this._myPerformDelayedMode=i,this._myPendingPerforms=[],this._myCurrentlyPerformedTransition=null,this._myInitCallbacks=new Map,this._myInitIDCallbacks=new Map,this._myTransitionCallbacks=new Map,this._myTransitionIDCallbacks=[]}addState(t,i=null){let s=null;!i||typeof i=="function"?(s={},typeof i=="function"?s.update=function(){return i(...arguments)}:s.update=null,s.clone=function(){let a={};return a.update=this.update,a.clone=this.clone,a}):s=i;let n=new PP.StateData(t,s);this._myStates.set(t,n),this._myTransitions.set(t,new Map)}addTransition(t,i,s,n=null,o=PP.SkipStateFunction.NONE){let a=null;if(!n||typeof n=="function"?(a={},typeof n=="function"?a.perform=function(){return n(...arguments)}:a.perform=null,a.clone=function(){let u={};return u.perform=this.perform,u.clone=this.clone,u}):a=n,this.hasState(t)&&this.hasState(i)){let l=this._getTransitionsFromState(t),u=new PP.TransitionData(s,this.getState(t),this.getState(i),a,o);l.set(s,u)}else!this.hasState(t)&&!this.hasState(i)?console.error("Can't add transition:",s,"- from state not found:",t,"- to state not found:",i):this.hasState(t)?this.hasState(i)||console.error("Can't add transition:",s,"- to state not found:",i):console.error("Can't add transition:",s,"- from state not found:",t)}init(t,i=null,...s){let n=i;if(i&&typeof i=="function"&&(n={},n.performInit=i),this.hasState(t)){let o=this._myStates.get(t);if(this._myDebugLogActive&&console.log(this._myDebugLogName,"- Init:",t),n&&n.performInit?n.performInit(this,o,...s):o.myObject&&o.myObject.init&&o.myObject.init(this,o,...s),this._myCurrentStateData=o,this._myInitCallbacks.size>0&&this._myInitCallbacks.forEach(function(a){a(this,o,n,...s)}.bind(this)),this._myInitIDCallbacks.size>0){let a=this._myInitIDCallbacks.get(t);a?.forEach(function(l){l(this,o,n,...s)}.bind(this))}}else this._myDebugLogActive&&console.warn(this._myDebugLogName,"- Init state not found:",t)}update(t,...i){if(this._myPendingPerforms.length>0){for(let s=0;s<this._myPendingPerforms.length;s++)this._perform(this._myPendingPerforms[s].myID,PP.PerformMode.DELAYED,...this._myPendingPerforms[s].myArgs);this._myPendingPerforms=[]}this._myCurrentStateData&&this._myCurrentStateData.myObject&&this._myCurrentStateData.myObject.update&&this._myCurrentStateData.myObject.update(t,this,...i)}perform(t,...i){this._myPerformMode==PP.PerformMode.DELAYED?this.performDelayed(t,...i):this.performImmediate(t,...i)}performDelayed(t,...i){let s=!1;switch(this._myPerformDelayedMode){case PP.PerformDelayedMode.QUEUE:this._myPendingPerforms.push(new PP.PendingPerform(t,...i)),s=!0;break;case PP.PerformDelayedMode.KEEP_FIRST:this.hasPendingPerforms()||(this._myPendingPerforms.push(new PP.PendingPerform(t,...i)),s=!0);break;case PP.PerformDelayedMode.KEEP_LAST:this.resetPendingPerforms(),this._myPendingPerforms.push(new PP.PendingPerform(t,...i)),s=!0;break}return s}performImmediate(t,...i){return this._perform(t,PP.PerformMode.IMMEDIATE,...i)}canPerform(t){return this.hasTransitionFromState(this._myCurrentStateData.myID,t)}canGoTo(t,i=null){return this.hasTransitionFromStateToState(this._myCurrentStateData.myID,t,i)}isInState(t){return this._myCurrentStateData!=null&&this._myCurrentStateData.myID==t}isPerformingTransition(){return this._myCurrentlyPerformedTransition!=null}getCurrentlyPerformedTransition(){return this._myCurrentlyPerformedTransition}hasBeenInit(){return this._myCurrentStateData!=null}reset(){this.resetState(),this.resetPendingPerforms()}resetState(){this._myCurrentStateData=null}resetPendingPerforms(){this._myPendingPerforms=[]}getCurrentState(){return this._myCurrentStateData}getCurrentTransitions(){return this.getTransitionsFromState(this._myCurrentStateData.myID)}getCurrentTransitionsToState(t){return this.getTransitionsFromStateToState(this._myCurrentStateData.myID,t)}getState(t){return this._myStates.get(t)}getStates(){return this._myStates.values()}getTransitions(){let t=[];for(let i of this._myTransitions.values())for(let s of i.values())t.push(s);return t}getTransitionsFromState(t){let i=this._getTransitionsFromState(t);return Array.from(i.values())}getTransitionsFromStateToState(t,i){let s=this._getTransitionsFromState(t),n=[];for(let o of s.values())o.myToState.myID==i&&n.push(o);return n}removeState(t){if(this.hasState(t)){this._myStates.delete(t),this._myTransitions.delete(t);for(let i of this._myTransitions.values()){let s=[];for(let[n,o]of i.entries())o.myToState.myID==t&&s.push(n);for(let n of s)i.delete(n)}return!0}return!1}removeTransitionFromState(t,i){let s=this._getTransitionsFromState(t);return s?s.delete(i):!1}hasState(t){return this._myStates.has(t)}hasTransitionFromState(t,i){return this.getTransitionsFromState(t).findIndex(function(o){return o.myID==i})>=0}hasTransitionFromStateToState(t,i,s=null){let n=this.getTransitionsFromStateToState(t,i),o=!1;return s?o=n.findIndex(function(l){return l.myID==s})>=0:o=n.length>0,o}setPerformMode(t){this._myPerformMode=t}getPerformMode(){return this._myPerformMode}setPerformDelayedMode(t){this._myPerformDelayedMode=t}getPerformDelayedMode(){return this._myPerformDelayedMode}hasPendingPerforms(){return this._myPendingPerforms.length>0}getPendingPerforms(){return this._myPendingPerforms.slice(0)}clone(t=!1){if(!this.isCloneable(t))return null;let i=new PP.FSM;i._myDebugLogActive=this._myDebugLogActive,i._myDebugShowDelayedInfo=this._myDebugShowDelayedInfo,i._myDebugLogName=this._myDebugLogName.slice(0),i._myPerformMode=this._myPerformMode,i._myPerformDelayedMode=this._myPerformDelayedMode,i._myPendingPerforms=this._myPendingPerforms.slice(0);for(let s of this._myStates.entries()){let n=null;t?n=new PP.StateData(s[1].myID,s[1].myObject.clone()):n=new PP.StateData(s[1].myID,s[1].myObject),i._myStates.set(n.myID,n)}for(let s of this._myTransitions.entries()){let n=new Map;i._myTransitions.set(s[0],n);for(let o of s[1].entries()){let a=null,l=i.getState(o[1].myFromState.myID),u=i.getState(o[1].myToState.myID);t?a=new PP.TransitionData(o[1].myID,l,u,o[1].myObject.clone(),o[1].mySkipStateFunction):a=new PP.TransitionData(o[1].myID,l,u,o[1].myObject,o[1].mySkipStateFunction),n.set(a.myID,a)}}return this._myCurrentStateData&&(i._myCurrentStateData=i.getState(this._myCurrentStateData.myID)),i}isCloneable(t=!1){if(!t)return!0;let i=!0;for(let s of this._myStates.entries())i=i&&s[1].myObject.clone!=null;for(let s of this._myTransitions.entries())for(let n of s[1].entries())i=i&&n[1].myObject.clone!=null;return i}setDebugLogActive(t,i=null,s=!1){this._myDebugLogActive=t,this._myDebugShowDelayedInfo=s,i&&(this._myDebugLogName="FSM: ".concat(i))}registerInitEventListener(t,i){this._myInitCallbacks.set(t,i)}unregisterInitEventListener(t){this._myInitCallbacks.delete(t)}registerInitIDEventListener(t,i,s){let n=this._myInitIDCallbacks.get(t);n==null&&(this._myInitIDCallbacks.set(t,new Map),n=this._myInitIDCallbacks.get(t)),n.set(i,s)}unregisterInitIDEventListener(t,i){let s=this._myInitIDCallbacks.get(t);s!=null&&(s.delete(i),s.size<=0&&this._myInitIDCallbacks.delete(t))}registerTransitionEventListener(t,i){this._myTransitionCallbacks.set(t,i)}unregisterTransitionEventListener(t){this._myTransitionCallbacks.delete(t)}registerTransitionIDEventListener(t,i,s,n,o){let a=null;for(let l of this._myTransitionIDCallbacks)if(l[0]==t&&l[1]==i&&l[2]==s){a=l[3];break}if(a==null){let l=[];l[0]=t,l[1]=i,l[2]=s,l[3]=new Map,a=l[3],this._myTransitionIDCallbacks.push(l)}a.set(n,o)}unregisterTransitionIDEventListener(t,i,s,n){let o=null;for(let a of this._myTransitionIDCallbacks)if(a[0]==t&&a[1]==i&&a[2]==s){o=a[3];break}o!=null&&(o.delete(n),o.size<=0&&this._myTransitionIDCallbacks.pp_remove(a=>a[0]==t&&a[1]==i&&a[2]==s))}_perform(t,i,...s){if(this.isPerformingTransition()){let n=this.getCurrentlyPerformedTransition(),o=[this._myDebugLogName,"- Trying to perform:",t];return this._myDebugShowDelayedInfo&&o.push(i==PP.PerformMode.DELAYED?"- Delayed":"- Immediate"),o.push("- But another transition is currently being performed -",n.myID),console.warn(...o),!1}if(this._myCurrentStateData){if(this.canPerform(t)){let o=this._myTransitions.get(this._myCurrentStateData.myID).get(t);this._myCurrentlyPerformedTransition=o;let a=this._myCurrentStateData,l=this._myStates.get(o.myToState.myID);if(this._myDebugLogActive){let u=[this._myDebugLogName,"- From:",a.myID,"- To:",l.myID,"- With:",t];this._myDebugShowDelayedInfo&&u.push(i==PP.PerformMode.DELAYED?"- Delayed":"- Immediate"),console.log(...u)}if(o.mySkipStateFunction!=PP.SkipStateFunction.END&&o.mySkipStateFunction!=PP.SkipStateFunction.BOTH&&a.myObject&&a.myObject.end&&a.myObject.end(this,o,...s),o.myObject&&o.myObject.perform&&o.myObject.perform(this,o,...s),o.mySkipStateFunction!=PP.SkipStateFunction.START&&o.mySkipStateFunction!=PP.SkipStateFunction.BOTH&&l.myObject&&l.myObject.start&&l.myObject.start(this,o,...s),this._myCurrentStateData=o.myToState,this._myTransitionCallbacks.size>0&&this._myTransitionCallbacks.forEach(function(u){u(this,a,l,o,i,...s)}.bind(this)),this._myTransitionIDCallbacks.length>0){let u=[];for(let y of this._myTransitionIDCallbacks)(y[0]==null||y[0]==a.myID)&&(y[1]==null||y[1]==l.myID)&&(y[2]==null||y[2]==o.myID)&&u.push(y[3]);for(let y of this.internalTransitionIDCallbacks)y.forEach(function(r){r(this,a,l,o,i,...s)}.bind(this))}return this._myCurrentlyPerformedTransition=null,!0}else if(this._myDebugLogActive){let n=[this._myDebugLogName,"- No Transition:",t,"- From:",this._myCurrentStateData.myID];this._myDebugShowDelayedInfo&&n.push(i==PP.PerformMode.DELAYED?"- Delayed":"- Immediate"),console.warn(...n)}}else if(this._myDebugLogActive){let n=[this._myDebugLogName,"- FSM not initialized yet"];this._myDebugShowDelayedInfo&&n.push(i==PP.PerformMode.DELAYED?"- Delayed":"- Immediate"),console.warn(...n)}return!1}_getTransitionsFromState(t){return this._myTransitions.get(t)}}});var wi=f(()=>{PP.State=class{update(t,i,...s){}init(t,i,...s){}start(t,i,...s){}end(t,i,...s){}}});var Fi=f(()=>{PP.Transition=class{performInit(t,i,...s){}perform(t,i,...s){}}});var ji=f(()=>{PP.TimerState=class extends PP.State{constructor(t=0,i=null,...s){super(),this._myTransitionToPerformOnEnd=i,this._myTransitionArgs=s,this._myTimer=new PP.Timer(t,!1)}setDuration(t){this._myTimer.setDuration(t)}setTransitionToPerformOnEnd(t,...i){this._myTransitionToPerformOnEnd=t,this._myTransitionArgs=i}onEnd(t,i=null){this._myTimer.onEnd(t,i)}unregisterOnEnd(t=null){this._myTimer.unregisterOnEnd(t)}update(t,i){this._myTimer.update(t),this._myTimer.isDone()&&this._myTransitionToPerformOnEnd!=null&&i.perform(this._myTransitionToPerformOnEnd,...this._myTransitionArgs)}start(t,i,s=null,n=null,...o){this._myTimer.start(s),n!=null&&(this._myTransitionToPerformOnEnd=n,this._myTransitionArgs=o)}init(t,i,s=null,n=null,...o){this._myTimer.start(s),n!=null&&(this._myTransitionToPerformOnEnd=n,this._myTransitionArgs=o)}}});var ki=f(()=>{PP.ColorUtils={rgbToHsv:function(e){let t=e.pp_clone(),i=e[0],s=e[1],n=e[2];var o=Math.max(i,s,n),a=Math.min(i,s,n),l=o-a,u,y=o===0?0:l/o,r=o;switch(o){case a:u=0;break;case i:u=s-n+l*(s<n?6:0),u/=6*l;break;case s:u=n-i+l*2,u/=6*l;break;case n:u=i-s+l*4,u/=6*l;break}return t[0]=u,t[1]=y,t[2]=r,t},hsvToRgb:function(e){let t=e.pp_clone(),i=e[0],s=e[1],n=e[2],o,a,l,u,y,r,m,c;switch(u=Math.floor(i*6),y=i*6-u,r=n*(1-s),m=n*(1-y*s),c=n*(1-(1-y)*s),u%6){case 0:o=n,a=c,l=r;break;case 1:o=m,a=n,l=r;break;case 2:o=r,a=n,l=c;break;case 3:o=r,a=m,l=n;break;case 4:o=c,a=r,l=n;break;case 5:o=n,a=r,l=m;break}return t[0]=o,t[1]=a,t[2]=l,t},rgbCodeToHuman(e){return PP.ColorUtils.color1To255(e)},rgbHumanToCode(e){return PP.ColorUtils.color255To1(e)},hsvCodeToHuman(e){return PP.ColorUtils.color1To255(e)},hsvHumanToCode(e){return PP.ColorUtils.color255To1(e)},color255To1(e){let t=e.pp_clone();for(let i=0;i<t.length;i++)t[i]/=255,t[i]=Math.pp_clamp(t[i],0,1);return t},color1To255(e){let t=e.pp_clone();for(let i=0;i<t.length;i++)t[i]=Math.round(t[i]*255),t[i]=Math.pp_clamp(t[i],0,255);return t}}});var Hi=f(()=>{PP.MaterialUtils={setAlpha:function(){let e=PP.vec4_create();return function(i,s){i.color!=null&&(e.vec4_copy(i.color),e[3]=s,i.color=e),i.diffuseColor!=null&&(e.vec4_copy(i.diffuseColor),e[3]=s,i.diffuseColor=e),i.ambientColor!=null&&(e.vec4_copy(i.ambientColor),e[3]=s,i.ambientColor=e)}}(),setObjectAlpha:function(e,t){let i=e.pp_getComponentsHierarchy("mesh");for(let s of i)s.material!=null&&PP.MaterialUtils.setAlpha(s.material,t)},setObjectMaterial:function(e,t,i=!1){let s=e.pp_getComponentsHierarchy("mesh");for(let n of s)i?n.material=t.clone():n.material=t},setObjectClonedMaterials:function(e){let t=e.pp_getComponentsHierarchy("mesh");for(let i of t)i.material=i.material.clone()},setObjectSpecularColor:function(e,t){let i=e.pp_getComponentsHierarchy("mesh");for(let s of i)s.material.specularColor!=null&&(s.material.specularColor=t)},setObjectFogColor:function(e,t){let i=e.pp_getComponentsHierarchy("mesh");for(let s of i)s.material.fogColor!=null&&(s.material.fogColor=t)}}});var Ni=f(()=>{PP.MeshCreationVertexParams=class{constructor(){this.myPosition=null,this.myTextureCoordinates=null,this.myNormal=null,this.myColor=null}};PP.MeshCreationTriangleParams=class{constructor(){this.myIndexes=new Uint32Array(3)}};PP.MeshCreationParams=class{constructor(){this.myVertexes=[],this.myTriangles=[]}};PP.MeshUtils={createPlaneMesh:function(){let e=4,t=new PP.MeshCreationParams;for(let o=0;o<e;++o){let a=new PP.MeshCreationVertexParams;a.myPosition=new PP.vec3_create,a.myPosition[0]=-1+(o&1)*2,a.myPosition[1]=-1+((o&2)>>1)*2,a.myPosition[2]=0,a.myTextureCoordinates=new PP.vec2_create,a.myTextureCoordinates[0]=o&1,a.myTextureCoordinates[1]=(o&2)>>1,a.myNormal=new PP.vec3_create,a.myNormal[0]=0,a.myNormal[1]=0,a.myNormal[2]=1,t.myVertexes.push(a)}let i=new PP.MeshCreationTriangleParams;i.myIndexes[0]=0,i.myIndexes[1]=1,i.myIndexes[2]=2;let s=new PP.MeshCreationTriangleParams;return s.myIndexes[0]=2,s.myIndexes[1]=1,s.myIndexes[2]=3,t.myTriangles.push(i),t.myTriangles.push(s),PP.MeshUtils.createMesh(t)},createMesh:function(e){let t=[];for(let y of e.myTriangles)t.push(y.myIndexes[0]),t.push(y.myIndexes[1]),t.push(y.myIndexes[2]);let i=new Uint32Array(t.length);i.pp_copy(t);let s=e.myVertexes.length,n=new WL.Mesh({vertexCount:s,indexData:i,indexType:WL.MeshIndexType.UnsignedInt}),o=null,a=null,l=null,u=null;try{o=n.attribute(WL.MeshAttribute.Position)}catch{o=null}try{a=n.attribute(WL.MeshAttribute.TextureCoordinate)}catch{a=null}try{l=n.attribute(WL.MeshAttribute.Normal)}catch{l=null}try{u=n.attribute(WL.MeshAttribute.Color)}catch{u=null}for(let y=0;y<e.myVertexes.length;y++){let r=e.myVertexes[y];o!=null&&r.myPosition&&o.set(y,r.myPosition),a!=null&&r.myTextureCoordinates&&a.set(y,r.myTextureCoordinates),l!=null&&r.myNormal&&l.set(y,r.myNormal),u!=null&&r.myColor&&u.set(y,r.myColor)}return n},cloneMesh:function(){let e=PP.vec3_create(),t=PP.vec2_create(),i=PP.vec3_create(),s=PP.vec4_create();return function(o){if(o==null)return null;let a=new Uint32Array(o.indexData.length);for(let p=0;p<o.indexData.length;p++)a[p]=o.indexData[p];let l=new WL.Mesh({vertexCount:o.vertexCount,indexData:a,indexType:WL.MeshIndexType.UnsignedInt}),u=null,y=null,r=null,m=null,c=null,h=null,_=null,d=null;try{u=o.attribute(WL.MeshAttribute.Position),c=l.attribute(WL.MeshAttribute.Position)}catch{u=null,c=null}try{y=o.attribute(WL.MeshAttribute.TextureCoordinate),h=l.attribute(WL.MeshAttribute.TextureCoordinate)}catch{y=null,h=null}try{r=o.attribute(WL.MeshAttribute.Normal),_=l.attribute(WL.MeshAttribute.Normal)}catch{r=null,_=null}try{m=o.attribute(WL.MeshAttribute.Color),d=l.attribute(WL.MeshAttribute.Color)}catch{m=null,d=null}for(let p=0;p<o.vertexCount;p++)u!=null&&c!=null&&c.set(p,u.get(p,e)),y!=null&&h!=null&&h.set(p,y.get(p,t)),r!=null&&_!=null&&_.set(p,r.get(p,i)),m!=null&&d!=null&&d.set(p,m.get(p,s));return l}}(),invertMesh:function(){let e=PP.vec3_create(),t=PP.vec2_create(),i=PP.vec3_create(),s=PP.vec4_create();return function(o){if(o==null)return null;let a=new Uint32Array(o.indexData.length);for(let p=0;p<o.indexData.length/3;p++)a[p*3+0]=o.indexData[p*3+2],a[p*3+1]=o.indexData[p*3+1],a[p*3+2]=o.indexData[p*3+0];let l=new WL.Mesh({vertexCount:o.vertexCount,indexData:a,indexType:WL.MeshIndexType.UnsignedInt}),u=null,y=null,r=null,m=null,c=null,h=null,_=null,d=null;try{u=o.attribute(WL.MeshAttribute.Position),c=l.attribute(WL.MeshAttribute.Position)}catch{u=null,c=null}try{y=o.attribute(WL.MeshAttribute.TextureCoordinate),h=l.attribute(WL.MeshAttribute.TextureCoordinate)}catch{y=null,h=null}try{r=o.attribute(WL.MeshAttribute.Normal),_=l.attribute(WL.MeshAttribute.Normal)}catch{r=null,_=null}try{m=o.attribute(WL.MeshAttribute.Color),d=l.attribute(WL.MeshAttribute.Color)}catch{m=null,d=null}for(let p=0;p<o.vertexCount;p++)u!=null&&c!=null&&c.set(p,u.get(p,e)),y!=null&&h!=null&&h.set(p,y.get(p,t)),r!=null&&_!=null&&(r.get(p,i),i.vec3_negate(i),_.set(p,i)),m!=null&&d!=null&&d.set(p,m.get(p,s));return l}}()}});var Ui=f(()=>{PP.SaveUtils={save:function(e,t){t!=null&&localStorage.setItem(e,t)},has:function(e){return PP.SaveUtils.loadString(e,null)!=null},delete:function(e){return localStorage.removeItem(e)},clear:function(){return localStorage.clear()},load:function(e,t=null){return PP.SaveUtils.loadString(e,t)},loadString:function(e,t=null){let i=localStorage.getItem(e);return i==null&&(i=t),i},loadNumber:function(e,t=null){let i=PP.SaveUtils.loadString(e);return i!=null?Number(i):t},loadBool:function(e,t=null){let i=PP.SaveUtils.loadString(e);return i=="true"?!0:i=="false"?!1:t}}});var qi=f(()=>{PP.TextUtils={setClonedMaterials:function(e){let t=e.pp_getComponentsHierarchy("text");for(let i of t)i.material=i.material.clone()}}});var Gi=f(()=>{PP.XRUtils={isDeviceEmulated:function(){return"CustomWebXRPolyfill"in window},isSessionActive:function(){return WL.xrSession!=null},isReferenceSpaceLocalFloor:function(){return!["local","viewer"].includes(WebXR.refSpace)}}});var zi=f(()=>{PP.BrowserUtils={isMobile:function(){return/Mobi/i.test(window.navigator.userAgent)},isDesktop:function(){return!PP.BrowserUtils.isMobile()}}});var Qi=f(()=>{PP.PhysicsUtils={_myLayerFlagsAmount:8,_myLayerFlagsNames:["0","1","2","3","4","5","6","7"],setLayerFlagsAmount:function(e){PP.PhysicsUtils._myLayerFlagsAmount=e},setLayerFlagsNames:function(e){PP.PhysicsUtils._myLayerFlagsNames=e},getLayerFlagsAmount:function(){return PP.PhysicsUtils._myLayerFlagsAmount},getLayerFlagsNames:function(){return PP.PhysicsUtils._myLayerFlagsNames},raycast:function(){let e=PP.vec3_create(),t=PP.vec3_create(),i=(s,n)=>s.pp_equals(n);return function(n,o=new PP.RaycastResults){let a=WL.physics.rayCast(n.myOrigin,n.myDirection,n.myBlockLayerFlags.getMask(),n.myDistance);o.myRaycastSetup==null&&(o.myRaycastSetup=new PP.RaycastSetup),o.myRaycastSetup.copy(n);let l=0,u=0,y=a.hitCount;if(y!=0){let r=null,m=null,c=null,h=null;t=n.myDirection.vec3_negate(t);for(let _=0;_<y;_++){if(n.myObjectsToIgnore.length!=0&&(r==null&&(r=a.objects),n.myObjectsToIgnore.pp_hasEqual(r[_],i)))continue;m==null&&(m=a.distances);let d=m[_]==0;if(d&&(c==null&&(c=a.locations),d&&=n.myOrigin.vec3_sub(c[_],e).vec3_isZero(Math.PP_EPSILON_NUMBER),d&&(h||(h=a.normals),d&&=t.vec3_equals(h[_],Math.PP_EPSILON_DEGREES))),!n.myIgnoreHitsInsideCollision||!d){let p=null;l<o.myHits.length?p=o.myHits[l]:o._myUnusedHits!=null&&o._myUnusedHits.length>0?(p=o._myUnusedHits.pop(),o.myHits.push(p)):(p=new PP.RaycastHit,o.myHits.push(p)),r==null&&(r=a.objects),c==null&&(c=a.locations),h==null&&(h=a.normals),p.myPosition.vec3_copy(c[_]),p.myNormal.vec3_copy(h[_]),p.myDistance=m[_],p.myObject=r[_],p.myIsInsideCollision=d,u++,l++}}}if(o.myHits.length>u){o._myUnusedHits==null&&(o._myUnusedHits=[]);let r=o.myHits.length-u;for(let m=0;m<r;m++)o._myUnusedHits.push(o.myHits.pop())}return o}}()}});var Xi=f(()=>{PP.RaycastSetup=class{constructor(){this.myOrigin=PP.vec3_create(),this.myDirection=PP.vec3_create(),this.myDistance=0,this.myBlockLayerFlags=new PP.PhysicsLayerFlags,this.myObjectsToIgnore=[],this.myIgnoreHitsInsideCollision=!1}copy(t){this.myOrigin.vec3_copy(t.myOrigin),this.myDirection.vec3_copy(t.myDirection),this.myDistance=t.myDistance,this.myBlockLayerFlags.copy(t.myBlockLayerFlags),this.myObjectsToIgnore.pp_copy(t.myObjectsToIgnore),this.myIgnoreHitsInsideCollision=t.myIgnoreHitsInsideCollision}reset(){this.myOrigin.vec3_zero(),this.myDirection.vec3_zero(),this.myDistance=0,this.myBlockLayerFlags.setAllFlagsActive(!1),this.myObjectsToIgnore.pp_clear(),this.myIgnoreHitsInsideCollision=!1}};PP.RaycastResults=class{constructor(){this.myRaycastSetup=null,this.myHits=[],this._myUnusedHits=null}isColliding(t=!1){return t?this.getFirstHitOutsideCollision()!=null:this.myHits.length>0}getFirstHitInsideCollision(){let t=null;for(let i of this.myHits)if(i.myIsInsideCollision){t=i;break}return t}getFirstHitOutsideCollision(){let t=null;for(let i of this.myHits)if(!i.myIsInsideCollision){t=i;break}return t}getHitsInsideCollision(){let t=[];for(let i of this.myHits)i.myIsInsideCollision&&t.push(i);return t}getHitsOutsideCollision(){let t=[];for(let i of this.myHits)i.myIsInsideCollision||t.push(i);return t}removeHit(t){let i=this.myHits.pp_removeIndex(t);return i!=null&&(this._myUnusedHits==null&&(this._myUnusedHits=[]),this._myUnusedHits.push(i)),i}removeAllHits(){this._myUnusedHits==null&&(this._myUnusedHits=[]),this._myUnusedHits.push(...this.myHits),this.myHits.pp_clear()}copy(t){}reset(){this.myRaycastSetup!=null&&this.myRaycastSetup.reset(),this.removeAllHits()}};PP.RaycastHit=class{constructor(){this.myPosition=PP.vec3_create(),this.myNormal=PP.vec3_create(),this.myDistance=0,this.myObject=null,this.myIsInsideCollision=!1}isValid(){return this.myObject!=null}copy(t){this.myPosition.vec3_copy(t.myPosition),this.myNormal.vec3_copy(t.myNormal),this.myDistance=t.myDistance,this.myObject=t.myObject,this.myIsInsideCollision=t.myIsInsideCollision}reset(){this.myPosition.vec3_zero(),this.myNormal.vec3_zero(),this.myDistance=0,this.myObject=null,this.myIsInsideCollision=!1}};PP.RaycastResults.prototype.copy=function(){let e=function(t,i){return t==null&&(t=new PP.RaycastHit),t.copy(i),t};return function(i){if(i.myRaycastSetup==null?this.myRaycastSetup=null:(this.myRaycastSetup==null&&(this.myRaycastSetup=new PP.RaycastSetup),this.myRaycastSetup.copy(i.myRaycastSetup)),this.myHits.length>i.myHits.length){this._myUnusedHits==null&&(this._myUnusedHits=[]);for(let s=0;s<this.myHits.length-i.myHits.length;s++)this._myUnusedHits.push(this.myHits.pop())}else if(this.myHits.length<i.myHits.length&&this._myUnusedHits!=null){let s=Math.min(this._myUnusedHits.length,i.myHits.length-this.myHits.length);for(let n=0;n<s;n++)this.myHits.push(this._myUnusedHits.pop())}this.myHits.pp_copy(i.myHits,e)}}();Object.defineProperty(PP.RaycastResults.prototype,"copy",{enumerable:!1})});var Ki=f(()=>{PP.PhysicsLayerFlags=class{constructor(){this._myLayerMask=0}setFlagActive(t,i){let s=t;if(isNaN(t)&&(s=PP.PhysicsUtils.getLayerFlagsNames().pp_findIndexEqual(t)),s>=0&&s<PP.PhysicsUtils.getLayerFlagsAmount()){let n=1<<s;i?this._myLayerMask=this._myLayerMask|n:this._myLayerMask=this._myLayerMask&~n}}isFlagActive(t){let i=t;isNaN(t)&&(i=PP.PhysicsUtils.getLayerFlagsNames().pp_findIndexEqual(t));let s=!1;if(i>=0&&i<PP.PhysicsUtils.getLayerFlagsAmount()){let n=1<<i;s=!!(this._myLayerMask&n)}return s}setAllFlagsActive(t){t?this._myLayerMask=Math.pow(2,PP.PhysicsUtils.getLayerFlagsAmount())-1:this._myLayerMask=0}add(t){this._myLayerMask=this._myLayerMask|t.getMask()}remove(t){this._myLayerMask=this._myLayerMask&~t.getMask()}intersect(t){this._myLayerMask=this._myLayerMask&t.getMask()}copy(t){this._myLayerMask=t._myLayerMask}getMask(){return this._myLayerMask}setMask(t){this._myLayerMask=t}}});var Ji=f(()=>{PP.PhysicsCollisionCollector=class{constructor(t,i=!1){this._myPhysX=t,this._myIsTrigger=i,this._myCollisions=[],this._myCollisionsStart=[],this._myCollisionsEnd=[],this._myUpdateActive=!1,this._myCollisionsStartToProcess=[],this._myCollisionsEndToProcess=[],this._myCollisionCallbackID=null,this._myIsActive=!1,this.setActive(!0),this._myDebugActive=!1,this._myTriggerDesyncFixDelay=new PP.Timer(.1),this._myCollisionCallbacks=new Map,this._myCollisionStartCallbacks=new Map,this._myCollisionEndCallbacks=new Map}getPhysX(){return this._myPhysX}getCollisions(){return this._myCollisions}getCollisionsStart(){return this._myCollisionsStart}getCollisionsEnd(){return this._myCollisionsEnd}setActive(t){this._myIsActive!=t&&(this._myIsActive=t,this._myCollisions=[],this._myCollisionsStart=[],this._myCollisionsEnd=[],this._myUpdateActive=!1,this._myCollisionsStartToProcess=[],this._myCollisionsEndToProcess=[],this._myIsActive?this._myCollisionCallbackID=this._myPhysX.onCollision(this._onCollision.bind(this)):this._myCollisionCallbackID!=null&&(this._myPhysX.removeCollisionCallback(this._myCollisionCallbackID),this._myCollisionCallbackID=null))}setUpdateActive(t){this._myUpdateActive=t}update(t){!this._myIsActive||(this._myUpdateActive=!0,this._myCollisionsStart=this._myCollisionsStartToProcess,this._myCollisionsStartToProcess=[],this._myCollisionsEnd=this._myCollisionsEndToProcess,this._myCollisionsEndToProcess=[],this._myIsTrigger&&this._triggerDesyncFix(t))}destroy(){this._myCollisionCallbackID!=null&&(this._myPhysX.removeCollisionCallback(this._myCollisionCallbackID),this._myCollisionCallbackID=null)}setDebugActive(t){this._myDebugActive=t}registerCollisionEventListener(t,i){this._myCollisionCallbacks.set(t,i)}unregisterCollisionEventListener(t){this._myCollisionCallbacks.delete(t)}registerCollisionStartEventListener(t,i){this._myCollisionStartCallbacks.set(t,i)}unregisterCollisionStartEventListener(t){this._myCollisionStartCallbacks.delete(t)}registerCollisionEndEventListener(t,i){this._myCollisionEndCallbacks.set(t,i)}unregisterCollisionEndEventListener(t){this._myCollisionEndCallbacks.delete(t)}_onCollision(t,i){t==WL.CollisionEventType.Touch||t==WL.CollisionEventType.TriggerTouch?this._onCollisionStart(i):(t==WL.CollisionEventType.TouchLost||t==WL.CollisionEventType.TriggerTouchLost)&&this._onCollisionEnd(i),this._myCollisionCallbacks.size>0&&this._myCollisionCallbacks.forEach(function(s){s(this._myPhysX,i,t)})}_onCollisionStart(t){if(this._myDebugActive){let i=!1;for(let s of this._myCollisions)if(s.pp_equals(t.object)){i=!0;break}i&&console.error("Collision Start on object already collected")}this._myCollisions.push(t.object),this._myUpdateActive&&(this._myCollisionsStartToProcess.push(t.object),this._myCollisionsEndToProcess.pp_removeAll(function(i){return i.pp_equals(t.object)})),this._myDebugActive&&console.log("Collision Start -",this._myCollisions.length),this._myCollisionStartCallbacks.size>0&&this._myCollisionStartCallbacks.forEach(function(i){i(this._myPhysX,t,type)})}_onCollisionEnd(t){if(this._myDebugActive){let i=!1;for(let s of this._myCollisions)if(s.pp_equals(t.object)){i=!0;break}i||console.error("Collision End on object not collected")}this._myCollisions.pp_removeAll(function(i){return i.pp_equals(t.object)}),this._myUpdateActive&&(this._myCollisionsEndToProcess.push(t.object),this._myCollisionsStartToProcess.pp_removeAll(function(i){return i.pp_equals(t.object)})),this._myDebugActive&&console.log("Collision End -",this._myCollisions.length),this._myCollisionEndCallbacks.size>0&&this._myCollisionEndCallbacks.forEach(function(i){i(this._myPhysX,t,type)})}_triggerDesyncFix(t){if(this._myTriggerDesyncFixDelay.update(t),this._myTriggerDesyncFixDelay.isDone()){this._myTriggerDesyncFixDelay.start();let i=this._myCollisions.pp_findAll(function(s){let n=s.pp_getComponentSelf("physx");return n==null||!n.active});if(i.length>0)for(let s of i){let n=s.pp_getComponentSelf("physx");n?this._onCollisionEnd(n):console.error("NO PHYSX, HOW?")}}}}});var Yi=f(()=>{PP.VisualManager=class{constructor(){this._myVisualElementPrototypeCreationCallbacks=new Map,this._myVisualElementsTypeMap=new Map,this._myVisualElementLastID=0,this._myVisualElementsPool=new PP.ObjectPoolManager,this._myVisualElementsToShow=[],this._myActive=!0,this._addStandardVisualElementTypes()}setActive(t){this._myActive!=t&&(this._myActive=t,this._myActive||this.clearDraw())}isActive(){return this._myActive}start(){}update(t){this._updateDraw(t)}draw(t,i=0,s=null){if(!this._myActive)return 0;let n=null,o=!1;if(s!=null&&this._myVisualElementsTypeMap.has(t.myType)){let u=this._myVisualElementsTypeMap.get(t.myType);u.has(s)&&(n=u.get(s)[0],n.copyParams(t),n.setVisible(!1),o=!0)}if(n==null&&(n=this._getVisualElement(t)),n==null)return console.error("Couldn't create the requested visual element"),null;this._myVisualElementsTypeMap.has(t.myType)||this._myVisualElementsTypeMap.set(t.myType,new Map);let a=this._myVisualElementsTypeMap.get(t.myType),l=null;if(!o)l=this._myVisualElementLastID+1,this._myVisualElementLastID=l,a.set(l,[n,new PP.Timer(i,i!=null)]);else{l=s;let u=a.get(l);u[0]=n,u[1].reset(i),i!=null&&u[1].start()}return this._myVisualElementsToShow.push(n),l}getDraw(t){let i=null;for(let s of this._myVisualElementsTypeMap.values())if(s.has(t)){i=s.get(t)[0];break}return i}clearDraw(t=null){if(t==null){for(let i of this._myVisualElementsTypeMap.values())for(let s of i.values())this._myVisualElementsPool.releaseObject(s[0].getParams().myType,s[0]);this._myVisualElementsToShow=[],this._myVisualElementsTypeMap=new Map,this._myVisualElementLastID=0}else for(let i of this._myVisualElementsTypeMap.values())if(i.has(t)){let s=i.get(t);this._myVisualElementsPool.releaseObject(s[0].getParams().myType,s[0]),i.delete(t),this._myVisualElementsToShow.pp_removeEqual(s[0]);break}}allocateDraw(t,i){this._myVisualElementsPool.hasPool(t)||this._addVisualElementTypeToPool(t);let s=this._myVisualElementsPool.getPool(t),n=s.getAvailableSize()-i;n<0&&s.increase(-n)}addVisualElementType(t,i){this._myVisualElementPrototypeCreationCallbacks.set(t,i)}removeVisualElementType(t){this._myVisualElementPrototypeCreationCallbacks.delete(t)}_updateDraw(t){for(let i of this._myVisualElementsToShow)i.setVisible(!0);this._myVisualElementsToShow=[];for(let i of this._myVisualElementsTypeMap.values()){let s=[];for(let n of i.entries()){let o=n[1];o[1].isDone()&&(this._myVisualElementsPool.releaseObject(o[0].getParams().myType,o[0]),s.push(n[0])),o[1].update(t)}for(let n of s)i.delete(n)}}_getVisualElement(t){let i=null;return this._myVisualElementsPool.hasPool(t.myType)||this._addVisualElementTypeToPool(t.myType),i=this._myVisualElementsPool.getObject(t.myType),i?.copyParams(t),i}_addVisualElementTypeToPool(t){let i=new PP.ObjectPoolParams;i.myInitialPoolSize=10,i.myAmountToAddWhenEmpty=0,i.myPercentageToAddWhenEmpty=.5,i.myEnableDebugLog=!1,i.mySetActiveCallback=function(n,o){n.setVisible(o)};let s=null;this._myVisualElementPrototypeCreationCallbacks.has(t)&&(s=this._myVisualElementPrototypeCreationCallbacks.get(t)()),s!=null?(s.setVisible(!1),s.setAutoRefresh(!0),this._myVisualElementsPool.addPool(t,s,i)):console.error("Visual element type not supported")}_addStandardVisualElementTypes(){this.addVisualElementType(PP.VisualElementType.LINE,()=>new PP.VisualLine),this.addVisualElementType(PP.VisualElementType.MESH,()=>new PP.VisualMesh),this.addVisualElementType(PP.VisualElementType.POINT,()=>new PP.VisualPoint),this.addVisualElementType(PP.VisualElementType.ARROW,()=>new PP.VisualArrow),this.addVisualElementType(PP.VisualElementType.TEXT,()=>new PP.VisualText),this.addVisualElementType(PP.VisualElementType.TRANSFORM,()=>new PP.VisualTransform),this.addVisualElementType(PP.VisualElementType.RAYCAST,()=>new PP.VisualRaycast),this.addVisualElementType(PP.VisualElementType.TORUS,()=>new PP.VisualTorus)}}});var Zi=f(()=>{PP.VisualElementType={MESH:0,LINE:1,POINT:2,TEXT:3,ARROW:4,TRANSFORM:5,RAYCAST:6,TORUS:7}});var $i=f(()=>{PP.VisualLineParams=class{constructor(){this.myStart=PP.vec3_create(),this.myDirection=PP.vec3_create(0,0,1),this.myLength=0,this.myThickness=.005,this.myMesh=null,this.myMaterial=null,this.myColor=null,this.myParent=PP.myVisualData.myRootObject,this.myIsLocal=!1,this.myType=PP.VisualElementType.LINE}setStartEnd(t,i){return i.vec3_sub(t,this.myDirection),this.myLength=this.myDirection.vec3_length(),this.myDirection.vec3_normalize(this.myDirection),this.myStart.vec3_copy(t),this}copy(t){}};PP.VisualLine=class{constructor(t=new PP.VisualLineParams){this._myParams=t,this._myVisible=!1,this._myAutoRefresh=!0,this._myDirty=!1,this._myLineRootObject=null,this._myLineObject=null,this._myLineMeshComponent=null,this._myFlatOpaqueMaterial=null,this._build(),this.forceRefresh(),this.setVisible(!0)}setVisible(t){this._myVisible!=t&&(this._myVisible=t,this._myLineRootObject.pp_setActive(t))}setAutoRefresh(t){this._myAutoRefresh=t}getParams(){return this._myParams}setParams(t){this._myParams=t,this._markDirty()}copyParams(t){this._myParams.copy(t),this._markDirty()}paramsUpdated(){this._markDirty()}refresh(){this.update(0)}forceRefresh(){this._refresh()}update(t){this._myDirty&&(this._refresh(),this._myDirty=!1)}_build(){this._myLineRootObject=WL.scene.addObject(null),this._myLineObject=WL.scene.addObject(this._myLineRootObject),this._myLineMeshComponent=this._myLineObject.addComponent("mesh")}_markDirty(){this._myDirty=!0,this._myAutoRefresh&&this.update(0)}clone(){let t=new PP.VisualLineParams;t.copy(this._myParams);let i=new PP.VisualLine(t);return i.setAutoRefresh(this._myAutoRefresh),i.setVisible(this._myVisible),i._myDirty=this._myDirty,i}};PP.VisualLine.prototype._refresh=function(){let e=PP.vec3_create(),t=PP.vec3_create(),i=PP.vec3_create(0,1,0);return function(){this._myLineRootObject.pp_setParent(this._myParams.myParent,!1),this._myParams.myIsLocal?this._myLineRootObject.pp_setPositionLocal(this._myParams.myStart):this._myLineRootObject.pp_setPosition(this._myParams.myStart),e.vec3_set(this._myParams.myThickness/2,this._myParams.myLength/2,this._myParams.myThickness/2),this._myParams.myIsLocal?this._myLineObject.pp_setScaleLocal(e):this._myLineObject.pp_setScale(e),this._myParams.myIsLocal?this._myLineObject.pp_setUpLocal(this._myParams.myDirection,i):this._myLineObject.pp_setUp(this._myParams.myDirection,i),this._myLineObject.pp_resetPositionLocal(),t.vec3_set(0,this._myParams.myLength/2,0),this._myLineObject.pp_translateObject(t),this._myParams.myMesh!=null?this._myLineMeshComponent.mesh=this._myParams.myMesh:this._myLineMeshComponent.mesh=PP.myDefaultResources.myMeshes.myCylinder,this._myParams.myMaterial==null?this._myParams.myColor==null?this._myLineMeshComponent.material=PP.myVisualData.myDefaultMaterials.myDefaultMeshMaterial:(this._myFlatOpaqueMaterial==null&&(this._myFlatOpaqueMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone()),this._myLineMeshComponent.material=this._myFlatOpaqueMaterial,this._myFlatOpaqueMaterial.color=this._myParams.myColor):this._myLineMeshComponent.material=this._myParams.myMaterial}}();PP.VisualLineParams.prototype.copy=function(t){this.myStart.vec3_copy(t.myStart),this.myDirection.vec3_copy(t.myDirection),this.myLength=t.myLength,this.myThickness=t.myThickness,this.myMesh=t.myMesh,t.myMaterial!=null?this.myMaterial=t.myMaterial.clone():this.myMaterial=null,t.myColor!=null?this.myColor.vec4_copy(t.myColor):this.myColor=null,this.myParent=t.myParent,this.myIsLocal=t.myIsLocal,this.myType=t.myType};Object.defineProperty(PP.VisualLine.prototype,"_refresh",{enumerable:!1});Object.defineProperty(PP.VisualLineParams.prototype,"copy",{enumerable:!1})});var ts=f(()=>{PP.VisualMeshParams=class{constructor(){this.myTransform=PP.mat4_create(),this.myMesh=null,this.myMaterial=null,this.myParent=PP.myVisualData.myRootObject,this.myIsLocal=!1,this.myType=PP.VisualElementType.MESH}copy(t){}};PP.VisualMesh=class{constructor(t=new PP.VisualMeshParams){this._myParams=t,this._myVisible=!1,this._myAutoRefresh=!0,this._myDirty=!1,this._myMeshObject=null,this._myMeshComponent=null,this._build(),this.forceRefresh(),this.setVisible(!0)}setVisible(t){this._myVisible!=t&&(this._myVisible=t,this._myMeshObject.pp_setActive(t))}setAutoRefresh(t){this._myAutoRefresh=t}getParams(){return this._myParams}setParams(t){this._myParams=t,this._markDirty()}copyParams(t){this._myParams.copy(t),this._markDirty()}paramsUpdated(){this._markDirty()}refresh(){this.update(0)}forceRefresh(){this._refresh()}update(t){this._myDirty&&(this._refresh(),this._myDirty=!1)}_refresh(){this._myMeshObject.pp_setParent(this._myParams.myParent,!1),this._myParams.myIsLocal?this._myMeshObject.pp_setTransformLocal(this._myParams.myTransform):this._myMeshObject.pp_setTransform(this._myParams.myTransform),this._myParams.myMesh==null?this._myMeshComponent.mesh=PP.myDefaultResources.myMeshes.mySphere:this._myMeshComponent.mesh=this._myParams.myMesh,this._myParams.myMaterial==null?this._myMeshComponent.material=PP.myVisualData.myDefaultMaterials.myDefaultMeshMaterial:this._myMeshComponent.material=this._myParams.myMaterial}_build(){this._myMeshObject=WL.scene.addObject(null),this._myMeshComponent=this._myMeshObject.addComponent("mesh")}_markDirty(){this._myDirty=!0,this._myAutoRefresh&&this.update(0)}clone(){let t=new PP.VisualMeshParams;t.copy(this._myParams);let i=new PP.VisualMesh(t);return i.setAutoRefresh(this._myAutoRefresh),i.setVisible(this._myVisible),i._myDirty=this._myDirty,i}};PP.VisualMeshParams.prototype.copy=function(t){this.myTransform.pp_copy(t.myTransform),t.myMesh!=null?this.myMesh=t.myMesh:this.myMesh=null,t.myMaterial!=null?this.myMaterial=t.myMaterial.clone():this.myMaterial=null,this.myParent=t.myParent,this.myIsLocal=t.myIsLocal,this.myType=t.myType};Object.defineProperty(PP.VisualMeshParams.prototype,"copy",{enumerable:!1})});var es=f(()=>{PP.VisualPointParams=class{constructor(){this.myPosition=PP.vec3_create(),this.myRadius=.005,this.myMesh=null,this.myMaterial=null,this.myColor=null,this.myParent=PP.myVisualData.myRootObject,this.myIsLocal=!1,this.myType=PP.VisualElementType.POINT}copy(t){}};PP.VisualPoint=class{constructor(t=new PP.VisualPointParams){this._myParams=t,this._myVisible=!1,this._myAutoRefresh=!0,this._myDirty=!1,this._myPointObject=null,this._myPointMeshComponent=null,this._myFlatOpaqueMaterial=null,this._build(),this.forceRefresh(),this.setVisible(!0)}setVisible(t){this._myVisible!=t&&(this._myVisible=t,this._myPointObject.pp_setActive(t))}setAutoRefresh(t){this._myAutoRefresh=t}getParams(){return this._myParams}setParams(t){this._myParams=t,this._markDirty()}copyParams(t){this._myParams.copy(t),this._markDirty()}paramsUpdated(){this._markDirty()}refresh(){this.update(0)}forceRefresh(){this._refresh()}update(t){this._myDirty&&(this._refresh(),this._myDirty=!1)}_build(){this._myPointObject=WL.scene.addObject(null),this._myPointMeshComponent=this._myPointObject.addComponent("mesh")}_markDirty(){this._myDirty=!0,this._myAutoRefresh&&this.update(0)}clone(){let t=new PP.VisualPointParams;t.copy(this._myParams);let i=new PP.VisualPoint(t);return i.setAutoRefresh(this._myAutoRefresh),i.setVisible(this._myVisible),i._myDirty=this._myDirty,i}};PP.VisualPoint.prototype._refresh=function(){let e=PP.vec3_create(0,0,0);return function(){this._myPointObject.pp_setParent(this._myParams.myParent,!1),this._myParams.myIsLocal?(this._myPointObject.pp_setPositionLocal(this._myParams.myPosition),this._myPointObject.pp_setRotationLocal(e),this._myPointObject.pp_setScaleLocal(this._myParams.myRadius)):(this._myPointObject.pp_setPosition(this._myParams.myPosition),this._myPointObject.pp_setRotation(e),this._myPointObject.pp_setScale(this._myParams.myRadius)),this._myParams.myMesh!=null?this._myPointMeshComponent.mesh=this._myParams.myMesh:this._myPointMeshComponent.mesh=PP.myDefaultResources.myMeshes.mySphere,this._myParams.myMaterial==null?this._myParams.myColor==null?this._myPointMeshComponent.material=PP.myVisualData.myDefaultMaterials.myDefaultMeshMaterial:(this._myFlatOpaqueMaterial==null&&(this._myFlatOpaqueMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone()),this._myPointMeshComponent.material=this._myFlatOpaqueMaterial,this._myFlatOpaqueMaterial.color=this._myParams.myColor):this._myPointMeshComponent.material=this._myParams.myMaterial}}();PP.VisualPointParams.prototype.copy=function(t){this.myPosition.vec3_copy(t.myPosition),this.myRadius=t.myRadius,this.myMesh=t.myMesh,t.myMaterial!=null?this.myMaterial=t.myMaterial.clone():this.myMaterial=null,t.myColor!=null?this.myColor.vec4_copy(t.myColor):this.myColor=null,this.myParent=t.myParent,this.myIsLocal=t.myIsLocal,this.myType=t.myType};Object.defineProperty(PP.VisualPoint.prototype,"_refresh",{enumerable:!1});Object.defineProperty(PP.VisualPointParams.prototype,"copy",{enumerable:!1})});var is=f(()=>{PP.VisualArrowParams=class{constructor(){this.myStart=PP.vec3_create(),this.myDirection=PP.vec3_create(0,0,1),this.myLength=0,this.myThickness=.005,this.myLineMesh=null,this.myArrowMesh=null,this.myMaterial=null,this.myColor=null,this.myParent=PP.myVisualData.myRootObject,this.myIsLocal=!1,this.myType=PP.VisualElementType.ARROW}setStartEnd(t,i){return i.vec3_sub(t,this.myDirection),this.myLength=this.myDirection.vec3_length(),this.myDirection.vec3_normalize(this.myDirection),this.myStart.vec3_copy(t),this}copy(t){}};PP.VisualArrow=class{constructor(t=new PP.VisualArrowParams){this._myParams=t,this._myVisible=!1,this._myAutoRefresh=!0,this._myDirty=!1,this._myVisualLine=new PP.VisualLine,this._myVisualLine.setAutoRefresh(!1),this._myArrowRootObject=null,this._myArrowObject=null,this._myArrowMeshComponent=null,this._myFlatOpaqueMaterial=null,this._build(),this.forceRefresh(),this.setVisible(!0)}setVisible(t){this._myVisible!=t&&(this._myVisible=t,this._myVisualLine.setVisible(t),this._myArrowRootObject.pp_setActive(t))}setAutoRefresh(t){this._myAutoRefresh=t}getParams(){return this._myParams}setParams(t){this._myParams=t,this._markDirty()}copyParams(t){this._myParams.copy(t),this._markDirty()}paramsUpdated(){this._markDirty()}refresh(){this.update(0)}forceRefresh(){this._refresh(),this._myVisualLine.forceRefresh()}update(t){this._myDirty&&(this._refresh(),this._myDirty=!1),this._myVisualLine.update(t)}_build(){this._myArrowRootObject=WL.scene.addObject(null),this._myArrowObject=WL.scene.addObject(this._myArrowRootObject),this._myArrowMeshComponent=this._myArrowObject.addComponent("mesh")}_markDirty(){this._myDirty=!0,this._myAutoRefresh&&this.update(0)}clone(){let t=new PP.VisualArrowParams;t.copy(this._myParams);let i=new PP.VisualArrow(t);return i.setAutoRefresh(this._myAutoRefresh),i.setVisible(this._myVisible),i._myDirty=this._myDirty,i}};PP.VisualArrow.prototype._refresh=function(){let e=PP.vec3_create(),t=PP.vec3_create(),i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create(0,1,0);return function(){this._myArrowRootObject.pp_setParent(this._myParams.myParent,!1),this._myParams.myDirection.vec3_scale(Math.max(.001,this._myParams.myLength-this._myParams.myThickness*4),e),e.vec3_add(this._myParams.myStart,e),this._myParams.myIsLocal?(this._myArrowRootObject.pp_setPositionLocal(e),this._myArrowRootObject.pp_setUpLocal(this._myParams.myDirection,n)):(this._myArrowRootObject.pp_setPosition(e),this._myArrowRootObject.pp_setUp(this._myParams.myDirection,n)),t.vec3_set(0,this._myParams.myThickness*2-1e-5,0),this._myArrowRootObject.pp_translateObject(t),i.vec3_set(this._myParams.myThickness*1.25,this._myParams.myThickness*2,this._myParams.myThickness*1.25),this._myParams.myIsLocal?this._myArrowObject.pp_setScaleLocal(i):this._myArrowObject.pp_setScale(i),this._myParams.myArrowMesh!=null?this._myArrowMeshComponent.mesh=this._myParams.myArrowMesh:this._myArrowMeshComponent.mesh=PP.myDefaultResources.myMeshes.myCone,this._myParams.myMaterial==null?this._myParams.myColor==null?this._myArrowMeshComponent.material=PP.myVisualData.myDefaultMaterials.myDefaultMeshMaterial:(this._myFlatOpaqueMaterial==null&&(this._myFlatOpaqueMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone()),this._myArrowMeshComponent.material=this._myFlatOpaqueMaterial,this._myFlatOpaqueMaterial.color=this._myParams.myColor):this._myArrowMeshComponent.material=this._myParams.myMaterial,s=e.vec3_sub(this._myParams.myStart,s);let a=this._myVisualLine.getParams();a.myStart.vec3_copy(this._myParams.myStart),a.myDirection=s.vec3_normalize(a.myDirection),a.myLength=s.vec3_length(),a.myThickness=this._myParams.myThickness,a.myMesh=this._myParams.myLineMesh,a.myMaterial=this._myArrowMeshComponent.material,a.myParent=this._myParams.myParent,a.myIsLocal=this._myParams.myIsLocal,this._myVisualLine.paramsUpdated()}}();PP.VisualArrowParams.prototype.copy=function(t){this.myStart.vec3_copy(t.myStart),this.myDirection.vec3_copy(t.myDirection),this.myLength=t.myLength,this.myThickness=t.myThickness,this.myArrowMesh=t.myArrowMesh,this.myLineMesh=t.myLineMesh,t.myMaterial!=null?this.myMaterial=t.myMaterial.clone():this.myMaterial=null,t.myColor!=null?this.myColor.vec4_copy(t.myColor):this.myColor=null,this.myParent=t.myParent,this.myIsLocal=t.myIsLocal,this.myType=t.myType};Object.defineProperty(PP.VisualArrow.prototype,"_refresh",{enumerable:!1});Object.defineProperty(PP.VisualArrowParams.prototype,"copy",{enumerable:!1})});var ss=f(()=>{PP.VisualTextParams=class{constructor(){this.myText="",this.myAlignment=WL.Alignment.Center,this.myJustification=WL.Justification.Middle,this.myTransform=PP.mat4_create(),this.myMaterial=null,this.myColor=null,this.myParent=PP.myVisualData.myRootObject,this.myIsLocal=!1,this.myType=PP.VisualElementType.TEXT}copy(t){}};PP.VisualText=class{constructor(t=new PP.VisualTextParams){this._myParams=t,this._myVisible=!1,this._myAutoRefresh=!0,this._myDirty=!1,this._myTextObject=null,this._myTextComponent=null,this._myTextMaterial=null,this._build(),this.forceRefresh(),this.setVisible(!0)}setVisible(t){this._myVisible!=t&&(this._myVisible=t,this._myTextObject.pp_setActive(t))}setAutoRefresh(t){this._myAutoRefresh=t}getParams(){return this._myParams}setParams(t){this._myParams=t,this._markDirty()}copyParams(t){this._myParams.copy(t),this._markDirty()}paramsUpdated(){this._markDirty()}refresh(){this.update(0)}forceRefresh(){this._refresh()}update(t){this._myDirty&&(this._refresh(),this._myDirty=!1)}_refresh(){this._myTextObject.pp_setParent(this._myParams.myParent,!1),this._myParams.myIsLocal?this._myTextObject.pp_setTransformLocal(this._myParams.myTransform):this._myTextObject.pp_setTransform(this._myParams.myTransform),this._myParams.myMaterial==null?this._myParams.myColor==null?this._myTextComponent.material=PP.myVisualData.myDefaultMaterials.myDefaultTextMaterial:(this._myTextMaterial==null&&(this._myTextMaterial=PP.myDefaultResources.myMaterials.myText.clone()),this._myTextComponent.material=this._myTextMaterial,this._myTextMaterial.color=this._myParams.myColor):this._myTextComponent.material=this._myParams.myMaterial,this._myTextComponent.text=this._myParams.myText,this._myTextComponent.alignment=this._myParams.myAlignment,this._myTextComponent.justification=this._myParams.myJustification,this._myDirty=!1}_build(){this._myTextObject=WL.scene.addObject(null),this._myTextComponent=this._myTextObject.addComponent("text")}_markDirty(){this._myDirty=!0,this._myAutoRefresh&&this.update(0)}clone(){let t=new PP.VisualTextParams;t.copy(this._myParams);let i=new PP.VisualText(t);return i.setAutoRefresh(this._myAutoRefresh),i.setVisible(this._myVisible),i._myDirty=this._myDirty,i}};PP.VisualTextParams.prototype.copy=function(t){this.myText=t.myText,this.myAlignment=t.myAlignment,this.myJustification=t.myJustification,this.myTransform.mat4_copy(t.myTransform),t.myMaterial!=null?this.myMaterial=t.myMaterial.clone():this.myMaterial=null,t.myColor!=null?this.myColor.vec4_copy(t.myColor):this.myColor=null,this.myParent=t.myParent,this.myIsLocal=t.myIsLocal,this.myType=t.myType};Object.defineProperty(PP.VisualTextParams.prototype,"copy",{enumerable:!1})});var ns=f(()=>{PP.VisualTransformParams=class{constructor(){this.myTransform=PP.mat4_create(),this.myLength=.2,this.myThickness=.005,this.myForwardMaterial=null,this.myUpMaterial=null,this.myRightMaterial=null,this.myParent=PP.myVisualData.myRootObject,this.myIsLocal=!1,this.myType=PP.VisualElementType.TRANSFORM}copy(t){}};PP.VisualTransform=class{constructor(t=new PP.VisualTransformParams){this._myParams=t,this._myVisible=!1,this._myAutoRefresh=!0,this._myDirty=!1,this._myVisualRight=new PP.VisualArrow,this._myVisualUp=new PP.VisualArrow,this._myVisualForward=new PP.VisualArrow,this._myVisualRight.setAutoRefresh(!1),this._myVisualUp.setAutoRefresh(!1),this._myVisualForward.setAutoRefresh(!1),this.forceRefresh(),this.setVisible(!0)}setVisible(t){this._myVisible!=t&&(this._myVisible=t,this._myVisualRight.setVisible(t),this._myVisualUp.setVisible(t),this._myVisualForward.setVisible(t))}setAutoRefresh(t){this._myAutoRefresh=t}getParams(){return this._myParams}setParams(t){this._myParams=t,this._markDirty()}copyParams(t){this._myParams.copy(t),this._markDirty()}paramsUpdated(){this._markDirty()}refresh(){this.update(0)}forceRefresh(){this._refresh(),this._myVisualRight.forceRefresh(),this._myVisualUp.forceRefresh(),this._myVisualForward.forceRefresh()}update(t){this._myDirty&&(this._refresh(),this._myDirty=!1),this._myVisualRight.update(t),this._myVisualUp.update(t),this._myVisualForward.update(t)}_markDirty(){this._myDirty=!0,this._myAutoRefresh&&this.update(0)}clone(){let t=new PP.VisualTransformParams;t.copy(this._myParams);let i=new PP.VisualTransform(t);return i.setAutoRefresh(this._myAutoRefresh),i.setVisible(this._myVisible),i._myDirty=this._myDirty,i}};PP.VisualTransform.prototype._refresh=function(){let e=[PP.vec3_create(),PP.vec3_create(),PP.vec3_create()],t=PP.vec3_create(),i=PP.vec3_create();return function(){e=this._myParams.myTransform.mat4_getAxes(e),t=this._myParams.myTransform.mat4_getScale(t);let n=0;for(let o of t)n=Math.max(o,n);n==0?(t[0]=1,t[1]=1,t[2]=1):(t[0]=t[0]/n,t[1]=t[1]/n,t[2]=t[2]/n),i=this._myParams.myTransform.mat4_getPosition(i);{let o=this._myVisualRight.getParams();o.myStart.vec3_copy(i),o.myDirection=e[0].vec3_negate(o.myDirection).vec3_normalize(o.myDirection),o.myLength=Math.max(this._myParams.myLength*t[0],.001),o.myThickness=this._myParams.myThickness,this._myParams.myRightMaterial==null?o.myMaterial=PP.myVisualData.myDefaultMaterials.myDefaultRightMaterial:o.myMaterial=this._myParams.myRightMaterial,o.myParent=this._myParams.myParent,o.myIsLocal=this._myParams.myIsLocal,this._myVisualRight.paramsUpdated()}{let o=this._myVisualUp.getParams();o.myStart.vec3_copy(i),o.myDirection=e[1].vec3_normalize(o.myDirection),o.myLength=Math.max(this._myParams.myLength*t[1],.001),o.myThickness=this._myParams.myThickness,this._myParams.myUpMaterial==null?o.myMaterial=PP.myVisualData.myDefaultMaterials.myDefaultUpMaterial:o.myMaterial=this._myParams.myUpMaterial,o.myParent=this._myParams.myParent,o.myIsLocal=this._myParams.myIsLocal,this._myVisualUp.paramsUpdated()}{let o=this._myVisualForward.getParams();o.myStart.vec3_copy(i),o.myDirection=e[2].vec3_normalize(o.myDirection),o.myLength=Math.max(this._myParams.myLength*t[2],.001),o.myThickness=this._myParams.myThickness,this._myParams.myForwardMaterial==null?o.myMaterial=PP.myVisualData.myDefaultMaterials.myDefaultForwardMaterial:o.myMaterial=this._myParams.myForwardMaterial,o.myParent=this._myParams.myParent,o.myIsLocal=this._myParams.myIsLocal,this._myVisualForward.paramsUpdated()}}}();PP.VisualTransformParams.prototype.copy=function(t){this.myTransform.mat4_copy(t.myTransform),this.myLength=t.myLength,this.myThickness=t.myThickness,t.myRightMaterial!=null?this.myRightMaterial=t.myRightMaterial.clone():this.myRightMaterial=null,t.myUpMaterial!=null?this.myUpMaterial=t.myUpMaterial.clone():this.myUpMaterial=null,t.myForwardMaterial!=null?this.myForwardMaterial=t.myForwardMaterial.clone():this.myForwardMaterial=null,this.myParent=t.myParent,this.myIsLocal=t.myIsLocal,this.myType=t.myType};Object.defineProperty(PP.VisualTransform.prototype,"_refresh",{enumerable:!1});Object.defineProperty(PP.VisualTransformParams.prototype,"copy",{enumerable:!1})});var os=f(()=>{PP.VisualRaycastParams=class{constructor(){this._myRaycastResults=new PP.RaycastResults,this.myHitNormalLength=.2,this.myThickness=.005,this.myShowOnlyFirstHit=!0,this.myRayMaterial=null,this.myHitNormalMaterial=null,this.myParent=PP.myVisualData.myRootObject,this.myIsLocal=!1,this.myType=PP.VisualElementType.RAYCAST}get myRaycastResults(){return this._myRaycastResults}set myRaycastResults(t){this._myRaycastResults.copy(t)}copy(t){}};PP.VisualRaycast=class{constructor(t=new PP.VisualRaycastParams){this._myParams=t,this._myVisible=!1,this._myAutoRefresh=!0,this._myDirty=!1,this._myVisualRaycast=new PP.VisualArrow,this._myVisualRaycast.setAutoRefresh(!1),this._myVisualRaycastHitList=[],this._addVisualRaycastHit(),this.forceRefresh(),this.setVisible(!0)}setVisible(t){if(this._myVisible!=t)if(this._myVisible=t,this._myVisible){if(this._myParams.myRaycastResults.myRaycastSetup!=null&&this._myVisualRaycast.setVisible(!0),this._myParams.myRaycastResults.myHits.length>0){let i=Math.min(this._myParams.myRaycastResults.myHits.length,this._myVisualRaycastHitList.length);for(let s=0;s<i;s++)this._myVisualRaycastHitList[s].setVisible(!0)}}else{this._myVisualRaycast.setVisible(!1);for(let i of this._myVisualRaycastHitList)i.setVisible(!1)}}setAutoRefresh(t){this._myAutoRefresh=t}getParams(){return this._myParams}setParams(t){this._myParams=t,this._markDirty()}copyParams(t){this._myParams.copy(t),this._markDirty()}paramsUpdated(){this._markDirty()}refresh(){this.update(0)}forceRefresh(){if(this._refresh(),this._myVisualRaycast.forceRefresh(),this._myParams.myRaycastResults.myHits.length>0){let t=Math.min(this._myParams.myRaycastResults.myHits.length,this._myVisualRaycastHitList.length);for(let i=0;i<t;i++)this._myVisualRaycastHitList[i].forceRefresh()}}update(t){this._myDirty&&(this._refresh(),this._myDirty=!1),this._myVisualRaycast.update(t);for(let i of this._myVisualRaycastHitList)i.update(t)}_refresh(){for(let t of this._myVisualRaycastHitList)t.setVisible(!1);if(this._myParams.myRaycastResults.myHits.length>0){let t=this._myParams.myShowOnlyFirstHit?this._myParams.myRaycastResults.myHits.pp_first().myDistance:this._myParams.myRaycastResults.myHits.pp_last().myDistance;{let s=this._myVisualRaycast.getParams();s.myStart.vec3_copy(this._myParams.myRaycastResults.myRaycastSetup.myOrigin),s.myDirection.vec3_copy(this._myParams.myRaycastResults.myRaycastSetup.myDirection),s.myLength=t,s.myThickness=this._myParams.myThickness,this._myParams.myRayMaterial==null?s.myMaterial=PP.myVisualData.myDefaultMaterials.myDefaultRayMaterial:s.myMaterial=this._myParams.myRayMaterial,s.myParent=this._myParams.myParent,s.myIsLocal=this._myParams.myIsLocal,this._myVisualRaycast.paramsUpdated(),this._myVisualRaycast.setVisible(this._myVisible)}let i=this._myParams.myShowOnlyFirstHit?1:this._myParams.myRaycastResults.myHits.length;for(;i>this._myVisualRaycastHitList.length;)this._addVisualRaycastHit();for(let s=0;s<i;s++){let n=this._myVisualRaycastHitList[s];{let o=n.getParams();o.myStart.vec3_copy(this._myParams.myRaycastResults.myHits[s].myPosition),o.myDirection.vec3_copy(this._myParams.myRaycastResults.myHits[s].myNormal),o.myLength=this._myParams.myHitNormalLength,o.myThickness=this._myParams.myThickness,this._myParams.myHitNormalMaterial==null?o.myMaterial=PP.myVisualData.myDefaultMaterials.myDefaultHitNormalMaterial:o.myMaterial=this._myParams.myHitNormalMaterial,o.myParent=this._myParams.myParent,o.myIsLocal=this._myParams.myIsLocal,n.paramsUpdated(),n.setVisible(this._myVisible)}}}else if(this._myParams.myRaycastResults.myRaycastSetup!=null){let t=this._myVisualRaycast.getParams();t.myStart.vec3_copy(this._myParams.myRaycastResults.myRaycastSetup.myOrigin),t.myDirection.vec3_copy(this._myParams.myRaycastResults.myRaycastSetup.myDirection),t.myLength=this._myParams.myRaycastResults.myRaycastSetup.myDistance,t.myThickness=this._myParams.myThickness,this._myParams.myRayMaterial==null?t.myMaterial=PP.myVisualData.myDefaultMaterials.myDefaultRayMaterial:t.myMaterial=this._myParams.myRayMaterial,t.myParent=this._myParams.myParent,t.myIsLocal=this._myParams.myIsLocal,this._myVisualRaycast.paramsUpdated(),this._myVisualRaycast.setVisible(this._myVisible)}else this._myVisualRaycast.setVisible(!1)}_markDirty(){this._myDirty=!0,this._myAutoRefresh&&this.update(0)}clone(){let t=new PP.VisualRaycastParams;t.copy(this._myParams);let i=new PP.VisualRaycast(t);return i.setAutoRefresh(this._myAutoRefresh),i.setVisible(this._myVisible),i._myDirty=this._myDirty,i}_addVisualRaycastHit(){let t=new PP.VisualArrow;t.setAutoRefresh(!1),t.setVisible(!1),this._myVisualRaycastHitList.push(t)}};PP.VisualRaycastParams.prototype.copy=function(t){this.myRaycastResults=t.myRaycastResults,this.myHitNormalLength=t.myHitNormalLength,this.myThickness=t.myThickness,this.myShowOnlyFirstHit=t.myShowOnlyFirstHit,t.myRayMaterial!=null?this.myRayMaterial=t.myRayMaterial.clone():this.myRayMaterial=null,t.myHitNormalMaterial!=null?this.myHitNormalMaterial=t.myHitNormalMaterial.clone():this.myHitNormalMaterial=null,this.myParent=t.myParent,this.myIsLocal=t.myIsLocal,this.myType=t.myType};Object.defineProperty(PP.VisualRaycastParams.prototype,"copy",{enumerable:!1})});var as=f(()=>{PP.VisualTorusParams=class{constructor(){this.myTransform=PP.mat4_create(),this.myRadius=0,this.mySegmentsAmount=12,this.mySegmentThickness=.05,this.mySegmentMesh=null,this.myMaterial=null,this.myColor=null,this.myParent=PP.myVisualData.myRootObject,this.myIsLocal=!1,this.myType=PP.VisualElementType.TORUS}copy(t){}};PP.VisualTorus=class{constructor(t=new PP.VisualTorusParams){this._myParams=t,this._myVisible=!1,this._myAutoRefresh=!0,this._myDirty=!1,this._myTorusRootObject=null,this._myVisualSegmentList=[],this._myFlatOpaqueMaterial=null,this._build(),this.forceRefresh(),this.setVisible(!0)}setVisible(t){if(this._myVisible!=t)if(this._myVisible=t,this._myVisible){let i=Math.min(this._myParams.mySegmentsAmount,this._myVisualSegmentList.length);for(let s=0;s<i;s++)this._myVisualSegmentList[s].setVisible(!0)}else for(let i of this._myVisualSegmentList)i.setVisible(!1)}setAutoRefresh(t){this._myAutoRefresh=t}getParams(){return this._myParams}setParams(t){this._myParams=t,this._markDirty()}copyParams(t){this._myParams.copy(t),this._markDirty()}paramsUpdated(){this._markDirty()}refresh(){this.update(0)}forceRefresh(){this._refresh();let t=Math.min(this._myParams.mySegmentsAmount,this._myVisualSegmentList.length);for(let i=0;i<t;i++)this._myVisualSegmentList[i].forceRefresh()}update(t){this._myDirty&&(this._refresh(),this._myDirty=!1);for(let i of this._myVisualSegmentList)i.update(t)}_build(){this._myTorusRootObject=WL.scene.addObject(null),this._fillSegmentList()}_markDirty(){this._myDirty=!0,this._myAutoRefresh&&this.update(0)}_fillSegmentList(){for(;this._myVisualSegmentList.length<this._myParams.mySegmentsAmount;){let t=new PP.VisualLine;t.setAutoRefresh(!1),t.setVisible(!1),t.getParams().myParent=this._myTorusRootObject,t.getParams().myIsLocal=!0,this._myVisualSegmentList.push(t)}}clone(){let t=new PP.VisualTorusParams;t.copy(this._myParams);let i=new PP.VisualTorus(t);return i.setAutoRefresh(this._myAutoRefresh),i.setVisible(this._myVisible),i._myDirty=this._myDirty,i}};PP.VisualTorus.prototype._refresh=function(){let e=PP.vec3_create(),t=PP.vec3_create(),i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create(),o=PP.vec3_create(0,1,0);return function(){this._fillSegmentList();for(let u of this._myVisualSegmentList)u.setVisible(!1);this._myTorusRootObject.pp_setParent(this._myParams.myParent,!1),this._myParams.myIsLocal?this._myTorusRootObject.pp_setTransformLocal(this._myParams.myTransform):this._myTorusRootObject.pp_setTransform(this._myParams.myTransform);let l=2*Math.PI/this._myParams.mySegmentsAmount;e.vec3_set(this._myParams.myRadius,0,0);for(let u=0;u<this._myParams.mySegmentsAmount;u++){t=e.vec3_rotateAxisRadians(l,o,t),i=t.vec3_sub(e,i).vec3_normalize(i);let y=Math.tan(l/2)*this._myParams.mySegmentThickness/2;s=e.vec3_sub(i.vec3_scale(y,s),s),n=t.vec3_add(i.vec3_scale(y,n),n);let r=this._myVisualSegmentList[u],m=r.getParams();m.setStartEnd(s,n),m.myThickness=this._myParams.mySegmentThickness,m.myMesh=this._myParams.mySegmentMesh,this._myParams.myMaterial==null?this._myParams.myColor==null?m.myMaterial=PP.myVisualData.myDefaultMaterials.myDefaultMeshMaterial:(this._myFlatOpaqueMaterial==null&&(this._myFlatOpaqueMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone()),m.myMaterial=this._myFlatOpaqueMaterial,this._myFlatOpaqueMaterial.color=this._myParams.myColor):m.myMaterial=this._myParams.myMaterial,r.paramsUpdated(),r.setVisible(this._myVisible),e.vec3_copy(t)}}}();PP.VisualTorusParams.prototype.copy=function(t){this.myRadius=t.myRadius,this.mySegmentsAmount=t.mySegmentsAmount,this.mySegmentThickness=t.mySegmentThickness,this.myTransform.mat4_copy(t.myTransform),this.mySegmentMesh=t.mySegmentMesh,t.myMaterial!=null?this.myMaterial=t.myMaterial.clone():this.myMaterial=null,t.myColor!=null?this.myColor.vec4_copy(t.myColor):this.myColor=null,this.myParent=t.myParent,this.myIsLocal=t.myIsLocal,this.myType=t.myType};Object.defineProperty(PP.VisualTorus.prototype,"_refresh",{enumerable:!1});Object.defineProperty(PP.VisualTorusParams.prototype,"copy",{enumerable:!1})});var rs=f(()=>{WL.registerComponent("pp-visual-manager",{},{init:function(){this.active&&(PP.myVisualData.myRootObject=WL.scene.addObject(null),PP.myVisualManager=new PP.VisualManager)},start(){PP.myVisualData.myDefaultMaterials.myDefaultMeshMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),PP.myVisualData.myDefaultMaterials.myDefaultTextMaterial=PP.myDefaultResources.myMaterials.myText.clone(),PP.myVisualData.myDefaultMaterials.myDefaultRightMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),PP.myVisualData.myDefaultMaterials.myDefaultRightMaterial.color=PP.vec4_create(1,0,0,1),PP.myVisualData.myDefaultMaterials.myDefaultUpMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),PP.myVisualData.myDefaultMaterials.myDefaultUpMaterial.color=PP.vec4_create(0,1,0,1),PP.myVisualData.myDefaultMaterials.myDefaultForwardMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),PP.myVisualData.myDefaultMaterials.myDefaultForwardMaterial.color=PP.vec4_create(0,0,1,1),PP.myVisualData.myDefaultMaterials.myDefaultRayMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),PP.myVisualData.myDefaultMaterials.myDefaultRayMaterial.color=PP.vec4_create(0,1,0,1),PP.myVisualData.myDefaultMaterials.myDefaultHitNormalMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),PP.myVisualData.myDefaultMaterials.myDefaultHitNormalMaterial.color=PP.vec4_create(1,0,0,1),PP.myVisualManager.start()},update(e){PP.myVisualManager.update(e)}});PP.myVisualManager=null;PP.myVisualData={myRootObject:null,myDefaultMaterials:{myDefaultMeshMaterial:null,myDefaultTextMaterial:null,myDefaultRightMaterial:null,myDefaultUpMaterial:null,myDefaultForwardMaterial:null,myDefaultRayMaterial:null,myDefaultHitNormalMaterial:null}}});var ls=f(()=>{PP.DebugManager=class{constructor(){this._myDebugVisualManager=new PP.DebugVisualManager}getDebugVisualManager(){return this._myDebugVisualManager}start(){this._myDebugVisualManager.start()}update(t){this._myDebugVisualManager.update(t)}}});var ms=f(()=>{PP.DebugVisualManager=class extends PP.VisualManager{drawLine(t,i,s,n,o=PP.vec4_create(0,1,0,1),a=.005){let l=new PP.VisualLineParams;l.myStart.vec3_copy(i),l.myDirection.vec3_copy(s),l.myLength=n,l.myThickness=a,l.myColor=PP.vec4_create(),l.myColor.vec4_copy(o),this.draw(l,t)}drawLineEnd(t,i,s,n=PP.vec4_create(0,1,0,1),o=.005){}drawArrow(t,i,s,n,o=PP.vec4_create(0,1,0,1),a=.005){let l=new PP.VisualArrowParams;l.myStart.vec3_copy(i),l.myDirection.vec3_copy(s),l.myLength=n,l.myThickness=a,l.myColor=PP.vec4_create(),l.myColor.vec4_copy(o),this.draw(l,t)}drawArrowEnd(t,i,s,n=PP.vec4_create(0,1,0,1),o=.005){}drawPoint(t,i,s=PP.vec4_create(0,1,0,1),n=.005){let o=new PP.VisualPointParams;o.myPosition.vec3_copy(i),o.myRadius=n,o.myColor=PP.vec4_create(),o.myColor.vec4_copy(s),this.draw(o,t)}drawText(t,i,s,n=PP.vec4_create(0,1,0,1),o=WL.Alignment.Center,a=WL.Justification.Middle){let l=new PP.VisualTextParams;l.myText=i,l.myAlignment=o,l.myJustification=a,l.myTransform.mat4_copy(s),l.myColor=PP.vec4_create(),l.myColor.vec4_copy(n),this.draw(l,t)}drawRaycast(t,i,s=!0,n=.2,o=.005){let a=new PP.VisualRaycastParams;a.myRaycastResults=i,a.myShowOnlyFirstHit=s,a.myHitNormalLength=n,a.myThickness=o,this.draw(a,t)}drawTransform(t,i,s=.2,n=.005){let o=new PP.VisualTransformParams;o.myTransform.mat4_copy(i),o.myLength=s,o.myThickness=n,this.draw(o,t)}};PP.DebugVisualManager.prototype.drawLineEnd=function(){let e=PP.vec3_create();return function(i,s,n,o=PP.vec4_create(0,1,0,1),a=.005){e=n.vec3_sub(s,e),length=e.vec3_length(),e.vec3_normalize(e),this.drawLine(i,s,e,length,o,a)}}();PP.DebugVisualManager.prototype.drawArrowEnd=function(){let e=PP.vec3_create();return function(i,s,n,o=PP.vec4_create(0,1,0,1),a=.005){e=n.vec3_sub(s,e),length=e.vec3_length(),e.vec3_normalize(e),this.drawArrow(i,s,e,length,o,a)}}();Object.defineProperty(PP.DebugVisualManager.prototype,"drawLineEnd",{enumerable:!1});Object.defineProperty(PP.DebugVisualManager.prototype,"drawArrowEnd",{enumerable:!1})});var us=f(()=>{WL.registerComponent("pp-debug-transform",{_myLength:{type:WL.Type.Float,default:.1},_myThickness:{type:WL.Type.Float,default:.005}},{init:function(){},start:function(){this._myDebugTransformParams=new PP.VisualTransformParams,this._myDebugTransformParams.myLength=this._myLength,this._myDebugTransformParams.myThickness=this._myThickness,this._myDebugVisualTransform=new PP.VisualTransform(this._myDebugTransformParams)},update:function(e){this.object.pp_getTransform(this._myDebugTransformParams.myTransform),this._myDebugVisualTransform.paramsUpdated()}})});var cs=f(()=>{WL.registerComponent("pp-debug-manager",{},{init:function(){this.active&&(PP.myDebugManager=new PP.DebugManager,PP.myDebugVisualManager=PP.myDebugManager.getDebugVisualManager())},start(){PP.myDebugManager.start()},update(e){PP.myDebugManager.update(e)}});PP.myDebugManager=null;PP.myDebugVisualManager=null});var ys=f(()=>{PP.DebugFunctionCallsCounterParams=class{constructor(){this.myObjectsByReference=[],this.myObjectsByPath=[],this.myClassesByReference=[],this.myClassesByPath=[],this.myFunctionsByPath=[],this.myExcludeConstructors=!1,this.myExcludeJavascriptObjectFunctions=!1,this.myAddPathPrefix=!0,this.myFunctionNamesToInclude=[],this.myFunctionNamesToExclude=[],this.myFunctionPathsToInclude=[],this.myFunctionPathsToExclude=[],this.myObjectRecursionDepthLevelforObjects=0,this.myObjectRecursionDepthLevelforClasses=0,this.myObjectNamesToInclude=[],this.myObjectNamesToExclude=[],this.myClassNamesToInclude=[],this.myClassNamesToExclude=[],this.myObjectPathsToInclude=[],this.myObjectPathsToExclude=[],this.myClassPathsToInclude=[],this.myClassPathsToExclude=[]}};PP.DebugFunctionCallsCounter=class{constructor(t=new PP.DebugFunctionCallsCounterParams){this._myFunctionsCallsCount=new Map,this._myMaxFunctionsCallsCount=new Map,this._myPropertiesAlreadyCounted=new Map,this._myFunctionsToSkip=[],this._myParams=t,this._myResetOnce=!1;let i=this._getReferencesAndParents(this._myParams.myClassesByReference,this._myParams.myClassesByPath,!0,!1),s=this._getReferencesAndParents(this._myParams.myObjectsByReference,this._myParams.myObjectsByPath,!1,!1),n=this._getReferencesAndParents([],this._myParams.myFunctionsByPath,!1,!0);this._objectRecursion(s,i);for(let o of i){let a=o[0],l=o[1],u=o[2],y=o[3],r=o[4];this._addCallsCounter(a,l,u,!0,y,r)}for(let o of s){let a=o[0],l=o[1],u=o[2],y=o[3],r=o[4];this._addCallsCounter(a,l,u,!1,y,r)}for(let o of n){let a=o[0],l=o[1],u=o[2],y=o[3];this._addFunctionCallsCounter(l,u,null,null,"function",!1,!0,y)}this.resetCallsCount(),this.resetMaxCallsCount()}resetCallsCount(){this._myResetOnce=!0;for(let t of this._myFunctionsCallsCount.keys())this._myMaxFunctionsCallsCount.has(t)?this._myMaxFunctionsCallsCount.set(t,Math.max(this._myMaxFunctionsCallsCount.get(t),this._myFunctionsCallsCount.get(t))):this._myMaxFunctionsCallsCount.set(t,this._myFunctionsCallsCount.get(t)),this._myFunctionsCallsCount.set(t,0)}resetMaxCallsCount(){for(let t of this._myMaxFunctionsCallsCount.keys())this._myMaxFunctionsCallsCount.set(t,0)}getCallsCount(t=!1){let i=this._myFunctionsCallsCount;return t&&(i=new Map([...i.entries()].sort(function(s,n){return-(s[1]-n[1])}))),i}getMaxCallsCount(t=!1){if(!this._myResetOnce)return this.getCallsCount(t);let i=this._myMaxFunctionsCallsCount;return t&&(i=new Map([...i.entries()].sort(function(s,n){return-(s[1]-n[1])}))),i}_getReferenceFromPath(t){let i=t.split("."),s=window;for(let n=0;n<i.length-1;n++)s=s[i[n]];return s[i[i.length-1]]}_getReferenceNameFromPath(t){if(t==null)return null;let i=t.split(".");return i.length>0?i[i.length-1]:""}_getParentReferenceFromPath(t){let i=t.split("."),s=window;for(let n=0;n<i.length-1;n++)s=s[i[n]];return s}_addCallsCounter(t,i,s,n,o,a){let l=this._myParams.myObjectPathsToInclude,u=this._myParams.myObjectPathsToExclude,y=this._myParams.myObjectNamesToInclude,r=this._myParams.myObjectNamesToExclude;n&&(l=this._myParams.myClassPathsToInclude,u=this._myParams.myClassPathsToExclude,y=this._myParams.myClassNamesToInclude,r=this._myParams.myClassNamesToExclude);let m=this._filterName(o,l,u),c=this._filterName(a,y,r);if(m&&c){let h=null;n?h=t.prototype:h=t;let _=this._getAllPropertyNames(t);for(let d of _)this._addFunctionCallsCounter(h,d,t,i,s,n,!1,o)}}_addFunctionCallsCounter(t,i,s,n,o,a,l,u){if(this._isFunction(t,i)&&!this._myFunctionsToSkip.pp_hasEqual(t[i])){let y=this._filterName(i,this._myParams.myFunctionNamesToInclude,this._myParams.myFunctionNamesToExclude),r=this._filterName((u!=null?u+".":"")+i,this._myParams.myFunctionPathsToInclude,this._myParams.myFunctionPathsToExclude);if(y&&r&&(this._myPropertiesAlreadyCounted.has(i)||this._myPropertiesAlreadyCounted.set(i,[]),!this._myPropertiesAlreadyCounted.get(i).pp_hasEqual(t))){let c=i;if(u!=null&&this._myParams.myAddPathPrefix&&(l?c=u:c=u+"."+c),i!="constructor"){let h=this._myFunctionsCallsCount.has(c);this._myFunctionsCallsCount.set(c,0);try{let _=this._myFunctionsCallsCount,d=t[i],p=t.propertyIsEnumerable(i),P=function(){return _.set(c,_.get(c)+1),d.bind(this)(...arguments)},T=Object.getOwnPropertyNames(d);for(let g of T)try{Object.defineProperty(P,g,{value:d[g]})}catch{}Object.defineProperty(t,i,{value:P,enumerable:p})}catch{h||this._myFunctionsCallsCount.delete(c)}}else if(!this._myParams.myExcludeConstructors&&a&&n!=null&&n[o]!=null&&n[o].prototype!=null){let h=this._myFunctionsCallsCount.has(c);this._myFunctionsCallsCount.set(c,0);try{let _=this._myFunctionsCallsCount,d=n[o],p=function(){return _.set(c,_.get(c)+1),new s(...arguments)};Object.defineProperty(p,"toString",{value:function(){return d.toString()},enumerable:d.propertyIsEnumerable("toString")}),Object.defineProperty(p,"toLocaleString",{value:function(){return d.toLocaleString()},enumerable:d.propertyIsEnumerable("toLocaleString")}),this._setClassConstructor(o,n,p)}catch{h||this._myFunctionsCallsCount.delete(c)}this._myFunctionsToSkip.push(n[o])}this._myPropertiesAlreadyCounted.get(i).push(t)}}}_getReferencesAndParents(t,i,s){let n=(a,l)=>a[0]==l[0],o=[];for(let a of i){let l=a,u="",y=a,r="";a!=null&&Array.isArray(a)&&a.length!=null&&a.length==2&&typeof a[1]=="string"&&(l=a[0],y=a[1]),u=this._getReferenceNameFromPath(l),r=this._getReferenceNameFromPath(y);let m=this._getReferenceFromPath(l),c=this._getParentReferenceFromPath(l);m!=null&&o.pp_pushUnique([m,c,u,y,r],n)}for(let a of t){let l=a,u="",y="",r="";a!=null&&a.length!=null&&a.length==2&&typeof a[1]=="string"?(l=a[0],y=a[1],r=this._getReferenceNameFromPath(y)):(y=s?l.name:null,r=s?l.name:null),s?u=l.name:u=this._getReferenceNameFromPath(y),l!=null&&o.pp_pushUnique([l,null,u,y,r],n)}return o}_isFunction(t,i){let s=!1;try{s=typeof t[i]=="function"&&!this._isClass(t,i)}catch{}return s}_isClass(t,i){let s=!1;try{s=typeof t[i]=="function"&&i!="constructor"&&t[i].prototype!=null&&typeof t[i].prototype.constructor=="function"&&/^class/.test(t[i].toString())}catch{}return s}_isObject(t,i){return typeof t[i]=="object"}_getAllPropertyNames(t){let i=Object.getOwnPropertyNames(t),s=t.prototype;if(s==null&&(s=Object.getPrototypeOf(t)),s!=null&&(!this._myParams.myExcludeJavascriptObjectFunctions||s!=Object.prototype)){let n=this._getAllPropertyNames(s);for(let o of n)i.pp_pushUnique(o)}return i}_objectRecursion(t,i){let s=(o,a)=>o[0]==a[0],n=[];for(let o of t)n.pp_pushUnique([o[0],0,o[3]],s);for(;n.length>0;){let o=n.shift(),a=o[0],l=o[1],u=o[2];if(l+1<=this._myParams.myObjectRecursionDepthLevelforObjects||this._myParams.myObjectRecursionDepthLevelforObjects==-1||l+1<=this._myParams.myObjectRecursionDepthLevelforClasses||this._myParams.myObjectRecursionDepthLevelforClasses==-1){let y=this._getAllPropertyNames(a);for(let r of y){try{if(a[r]==null)continue}catch{continue}let m="",c="";u!=null?u=="_WL._components"&&a[r]._type!=null?(c="["+r+']{"'+a[r]._type+'"}',m=u+c):u=="_WL._componentTypes"&&a[r].TypeName!=null?(c=a[r].TypeName,m=u+'["'+c+'"]'):(c=r,m=u+"."+c):(c=r,m=c);let h=this._isClass(a,r),_=this._isObject(a,r),d=this._myParams.myObjectPathsToInclude,p=this._myParams.myObjectPathsToExclude,P=this._myParams.myObjectNamesToInclude,T=this._myParams.myObjectNamesToExclude;h&&(d=this._myParams.myClassPathsToInclude,p=this._myParams.myClassPathsToExclude,P=this._myParams.myClassNamesToInclude,T=this._myParams.myClassNamesToExclude);let g=this._filterName(m,d,p),b=this._filterName(r,P,T);g&&b&&(_&&(l+1<=this._myParams.myObjectRecursionDepthLevelforObjects||this._myParams.myObjectRecursionDepthLevelforObjects==-1)&&t.pp_pushUnique([a[r],a,r,m,c],s),h&&(l+1<=this._myParams.myObjectRecursionDepthLevelforClasses||this._myParams.myObjectRecursionDepthLevelforClasses==-1)&&i.pp_pushUnique([a[r],a,r,m,c],s),_&&n.pp_pushUnique([a[r],l+1,m],s))}}}}_filterName(t,i,s){let n=i.length==0;for(let o of i)if(t.match(new RegExp(o))!=null){n=!0;break}if(n){for(let o of s)if(t.match(new RegExp(o))!=null){n=!1;break}}return n}_setClassConstructor(t,i,s){let n=i[t],o=Object.getOwnPropertyNames(n);for(let a of o)try{Object.defineProperty(s,a,{value:n[a],enumerable:n.propertyIsEnumerable(a)})}catch{}i[t]=s}}});var hs=f(()=>{PP.DebugFunctionCallsCountLoggerParams=class{constructor(){this.myCallsCounter=null,this.myLogTitle="Function Calls Count",this.myLogDelay=1,this.myLogFunction="log",this.myLogCollapsed=!1,this.myLogFunctionsMaxAmount=null,this.myLogFunctionsWithCallsCounterAbove=null,this.myLogSorted=!0,this.myLogMaxFunctionCalls=!1}};PP.DebugFunctionCallsCountLogger=class{constructor(t){this._myParams=t,this._myLogTimer=new PP.Timer(this._myParams.myLogDelay)}update(t){if(this._myParams.myCallsCounter!=null&&(this._myLogTimer.update(t),this._myLogTimer.isDone())){this._myLogTimer.start();let i=null;if(this._myParams.myLogMaxFunctionCalls?i=this._myParams.myCallsCounter.getMaxCallsCount(this._myParams.myLogSorted):i=this._myParams.myCallsCounter.getCallsCount(this._myParams.myLogSorted),this._myParams.myLogFunctionsWithCallsCounterAbove!=null){let s=new Map(i);i=new Map;let n=[...s.keys()];for(let o=0;o<n.length;o++){let a=s.get(n[o]);a>this._myParams.myLogFunctionsWithCallsCounterAbove&&i.set(n[o],a)}}if(this._myParams.myLogFunctionsMaxAmount!=null){let s=new Map(i);i=new Map;let n=[...s.keys()];for(let o=0;o<this._myParams.myLogFunctionsMaxAmount&&o<n.length;o++){let a=s.get(n[o]);i.set(n[o],a)}}if(this._myParams.myLogCollapsed)console[this._myParams.myLogFunction](this._myParams.myLogTitle,`
`,i);else{let s="";for(let n of i.entries())s+=`
`+n[0]+": "+n[1];console[this._myParams.myLogFunction](this._myParams.myLogTitle,s)}}}}});var ps=f(()=>{WL.registerComponent("pp-debug-pp-array-creation-calls-counter",{_myDelayStart:{type:WL.Type.Float,default:0},_myLogFunction:{type:WL.Type.Enum,values:["log","error","warn","debug"],default:"log"},_myLogDelay:{type:WL.Type.Float,default:1},_myLogCollapsed:{type:WL.Type.Bool,default:!1},_myLogMaxFunctionCalls:{type:WL.Type.Bool,default:!1}},{init:function(){!this.active||(this._mySkipFirstUpdate=!0,this._myStartTimer=new PP.Timer(this._myDelayStart),this._myDelayStart==0&&(this._myStartTimer.end(),this._mySkipFirstUpdate=!1,this._start()))},start:function(){},update:function(e){if(this._mySkipFirstUpdate){this._mySkipFirstUpdate=!1;return}this._myStartTimer.isRunning()?(this._myStartTimer.update(e),this._myStartTimer.isDone()&&this._start()):(this._myFunctionCallsCountLogger.update(e),this._myFunctionCallsCounter.resetCallsCount())},_start:function(){let e=["vec2_create","vec3_create","vec4_create","quat_create","quat2_create","mat3_create","mat4_create"],t=new PP.DebugFunctionCallsCounterParams;t.myObjectsByPath=["PP"],t.myExcludeConstructors=!1,t.myExcludeJavascriptObjectFunctions=!0,t.myAddPathPrefix=!0,t.myFunctionNamesToInclude.push(...e),this._myFunctionCallsCounter=new PP.DebugFunctionCallsCounter(t);let i=new PP.DebugFunctionCallsCountLoggerParams;i.myCallsCounter=this._myFunctionCallsCounter,i.myLogTitle="Array Creation Calls Count",i.myLogDelay=this._myLogDelay,i.myLogFunction=["log","error","warn","debug"][this._myLogFunction],i.myLogCollapsed=this._myLogCollapsed,i.myLogMaxFunctionCalls=this._myLogMaxFunctionCalls,this._myFunctionCallsCountLogger=new PP.DebugFunctionCallsCountLogger(i)}})});var _s=f(()=>{WL.registerComponent("pp-debug-array-function-calls-counter",{_myIncludeOnlyArrayExtensionFunctions:{type:WL.Type.Bool,default:!1},_myDelayStart:{type:WL.Type.Float,default:0},_myLogFunction:{type:WL.Type.Enum,values:["log","error","warn","debug"],default:"log"},_myLogDelay:{type:WL.Type.Float,default:1},_myLogCollapsed:{type:WL.Type.Bool,default:!1},_myLogMaxFunctionCalls:{type:WL.Type.Bool,default:!1},_myLogFunctionsMaxAmount:{type:WL.Type.Int,default:-1},_myLogFunctionsWithCallsCounterAbove:{type:WL.Type.Int,default:-1},_myFunctionNamesToInclude:{type:WL.Type.String,default:""},_myFunctionNamesToExclude:{type:WL.Type.String,default:""}},{init:function(){!this.active||(this._mySkipFirstUpdate=!0,this._myStartTimer=new PP.Timer(this._myDelayStart),this._myDelayStart==0&&(this._myStartTimer.end(),this._mySkipFirstUpdate=!1,this._start()))},start:function(){},update:function(e){if(this._mySkipFirstUpdate){this._mySkipFirstUpdate=!1;return}this._myStartTimer.isRunning()?(this._myStartTimer.update(e),this._myStartTimer.isDone()&&this._start()):(this._myFunctionCallsCountLogger.update(e),this._myFunctionCallsCounter.resetCallsCount())},_start(){let e=new PP.DebugFunctionCallsCounterParams;if(e.myClassesByPath=["Array","Uint8ClampedArray","Uint8Array","Uint16Array","Uint32Array","Int8Array","Int16Array","Int32Array","Float32Array","Float64Array"],e.myExcludeConstructors=!1,e.myExcludeJavascriptObjectFunctions=!0,e.myAddPathPrefix=!0,this._myIncludeOnlyArrayExtensionFunctions){let i=["pp_","vec_","vec2_","vec3_","vec4_","quat_","quat2_","mat3_","mat4_","_pp_","_vec_","_quat_"];e.myFunctionNamesToInclude.push(...i)}if(this._myFunctionNamesToInclude.length>0){let i=[...this._myFunctionNamesToInclude.split(",")];for(let s=0;s<i.length;s++)i[s]=i[s].trim();e.myFunctionNamesToInclude.push(...i)}if(this._myFunctionNamesToExclude.length>0){let i=[...this._myFunctionNamesToExclude.split(",")];for(let s=0;s<i.length;s++)i[s]=i[s].trim();e.myFunctionNamesToExclude.push(...i)}this._myFunctionCallsCounter=new PP.DebugFunctionCallsCounter(e);let t=new PP.DebugFunctionCallsCountLoggerParams;t.myCallsCounter=this._myFunctionCallsCounter,t.myLogTitle="Array "+t.myLogTitle,t.myLogDelay=this._myLogDelay,t.myLogFunction=["log","error","warn","debug"][this._myLogFunction],t.myLogCollapsed=this._myLogCollapsed,t.myLogFunctionsMaxAmount=this._myLogFunctionsMaxAmount>=0?this._myLogFunctionsMaxAmount:null,t.myLogFunctionsWithCallsCounterAbove=this._myLogFunctionsWithCallsCounterAbove>=0?this._myLogFunctionsWithCallsCounterAbove:null,t.myLogMaxFunctionCalls=this._myLogMaxFunctionCalls,this._myFunctionCallsCountLogger=new PP.DebugFunctionCallsCountLogger(t)}})});var ds=f(()=>{WL.registerComponent("pp-debug-pp-function-calls-counter",{_myCountCallsOnPPGlobalObjects:{type:WL.Type.Bool,default:!1},_myDelayStart:{type:WL.Type.Float,default:0},_myLogFunction:{type:WL.Type.Enum,values:["log","error","warn","debug"],default:"log"},_myLogDelay:{type:WL.Type.Float,default:1},_myLogCollapsed:{type:WL.Type.Bool,default:!1},_myLogMaxFunctionCalls:{type:WL.Type.Bool,default:!1},_myLogFunctionsMaxAmount:{type:WL.Type.Int,default:-1},_myLogFunctionsWithCallsCounterAbove:{type:WL.Type.Int,default:-1},_myFunctionNamesToInclude:{type:WL.Type.String,default:""},_myFunctionNamesToExclude:{type:WL.Type.String,default:""}},{init:function(){!this.active||(this._mySkipFirstUpdate=!0,this._myStartTimer=new PP.Timer(this._myDelayStart),this._myDelayStart==0&&!this._myCountCallsOnPPGlobalObjects&&(this._myStartTimer.end(),this._mySkipFirstUpdate=!1,this._start()))},start:function(){},update:function(e){if(this._mySkipFirstUpdate){this._mySkipFirstUpdate=!1;return}this._myStartTimer.isRunning()?(this._myStartTimer.update(e),this._myStartTimer.isDone()&&this._start()):(this._myFunctionCallsCountLogger.update(e),this._myFunctionCallsCounter.resetCallsCount())},_start(){let e=new PP.DebugFunctionCallsCounterParams;if(e.myObjectsByPath=["PP"],e.myExcludeConstructors=!1,e.myExcludeJavascriptObjectFunctions=!0,e.myAddPathPrefix=!0,this._myCountCallsOnPPGlobalObjects&&(e.myObjectRecursionDepthLevelforObjects=1),e.myObjectRecursionDepthLevelforClasses=3,this._myFunctionNamesToInclude.length>0){let i=[...this._myFunctionNamesToInclude.split(",")];for(let s=0;s<i.length;s++)i[s]=i[s].trim();e.myFunctionNamesToInclude.push(...i)}if(this._myFunctionNamesToExclude.length>0){let i=[...this._myFunctionNamesToExclude.split(",")];for(let s=0;s<i.length;s++)i[s]=i[s].trim();e.myFunctionNamesToExclude.push(...i)}this._myFunctionCallsCounter=new PP.DebugFunctionCallsCounter(e);let t=new PP.DebugFunctionCallsCountLoggerParams;t.myCallsCounter=this._myFunctionCallsCounter,t.myLogTitle="PP "+t.myLogTitle,t.myLogDelay=this._myLogDelay,t.myLogFunction=["log","error","warn","debug"][this._myLogFunction],t.myLogCollapsed=this._myLogCollapsed,t.myLogFunctionsMaxAmount=this._myLogFunctionsMaxAmount>=0?this._myLogFunctionsMaxAmount:null,t.myLogFunctionsWithCallsCounterAbove=this._myLogFunctionsWithCallsCounterAbove>=0?this._myLogFunctionsWithCallsCounterAbove:null,t.myLogMaxFunctionCalls=this._myLogMaxFunctionCalls,this._myFunctionCallsCountLogger=new PP.DebugFunctionCallsCountLogger(t)}})});var Ps=f(()=>{WL.registerComponent("pp-debug-function-calls-counter",{_myObjectsByPath:{type:WL.Type.String,default:""},_myClassesByPath:{type:WL.Type.String,default:""},_myDelayStart:{type:WL.Type.Float,default:0},_myLogTitle:{type:WL.Type.String,default:"Function Calls Count"},_myLogFunction:{type:WL.Type.Enum,values:["log","error","warn","debug"],default:"log"},_myLogDelay:{type:WL.Type.Float,default:1},_myLogCollapsed:{type:WL.Type.Bool,default:!1},_myLogMaxFunctionCalls:{type:WL.Type.Bool,default:!1},_myLogFunctionsMaxAmount:{type:WL.Type.Int,default:-1},_myLogFunctionsWithCallsCounterAbove:{type:WL.Type.Int,default:-1},_myFunctionNamesToInclude:{type:WL.Type.String,default:""},_myFunctionNamesToExclude:{type:WL.Type.String,default:""},_myExcludeConstructors:{type:WL.Type.Bool,default:!1},_myExcludeJavascriptObjectFunctions:{type:WL.Type.Bool,default:!0},_myAddPathPrefix:{type:WL.Type.Bool,default:!0},_myObjectRecursionDepthLevelforObjects:{type:WL.Type.Int,default:0},_myObjectRecursionDepthLevelforClasses:{type:WL.Type.Int,default:0}},{init:function(){!this.active||(this._mySkipFirstUpdate=!0,this._myStartTimer=new PP.Timer(this._myDelayStart),this._myDelayStart==0&&(this._myStartTimer.end(),this._mySkipFirstUpdate=!1,this._start()))},start:function(){},update:function(e){if(this._mySkipFirstUpdate){this._mySkipFirstUpdate=!1;return}this._myStartTimer.isRunning()?(this._myStartTimer.update(e),this._myStartTimer.isDone()&&this._start()):(this._myFunctionCallsCountLogger.update(e),this._myFunctionCallsCounter.resetCallsCount())},_start:function(){let e=new PP.DebugFunctionCallsCounterParams;if(this._myObjectsByPath.length>0){let i=[...this._myObjectsByPath.split(",")];for(let s=0;s<i.length;s++)i[s]=i[s].trim();e.myObjectsByPath.push(...i)}if(this._myClassesByPath.length>0){let i=[...this._myClassesByPath.split(",")];for(let s=0;s<i.length;s++)i[s]=i[s].trim();e.myClassesByPath.push(...i)}if(e.myExcludeConstructors=this._myExcludeConstructors,e.myExcludeJavascriptObjectFunctions=this._myExcludeJavascriptObjectFunctions,e.myAddPathPrefix=this._myAddPathPrefix,this._myFunctionNamesToInclude.length>0){let i=[...this._myFunctionNamesToInclude.split(",")];for(let s=0;s<i.length;s++)i[s]=i[s].trim();e.myFunctionNamesToInclude.push(...i)}if(this._myFunctionNamesToExclude.length>0){let i=[...this._myFunctionNamesToExclude.split(",")];for(let s=0;s<i.length;s++)i[s]=i[s].trim();e.myFunctionNamesToExclude.push(...i)}e.myObjectRecursionDepthLevelforObjects=this._myObjectRecursionDepthLevelforObjects,e.myObjectRecursionDepthLevelforClasses=this._myObjectRecursionDepthLevelforClasses,this._myFunctionCallsCounter=new PP.DebugFunctionCallsCounter(e);let t=new PP.DebugFunctionCallsCountLoggerParams;t.myCallsCounter=this._myFunctionCallsCounter,t.myLogTitle=this._myLogTitle,t.myLogDelay=this._myLogDelay,t.myLogFunction=["log","error","warn","debug"][this._myLogFunction],t.myLogCollapsed=this._myLogCollapsed,t.myLogMaxFunctionCalls=this._myLogMaxFunctionCalls,this._myFunctionCallsCountLogger=new PP.DebugFunctionCallsCountLogger(t)}})});var fs=f(()=>{WL.registerComponent("pp-debug-wl-function-calls-counter",{_myDelayStart:{type:WL.Type.Float,default:0},_myLogFunction:{type:WL.Type.Enum,values:["log","error","warn","debug"],default:"log"},_myLogDelay:{type:WL.Type.Float,default:1},_myLogCollapsed:{type:WL.Type.Bool,default:!1},_myLogMaxFunctionCalls:{type:WL.Type.Bool,default:!1},_myLogFunctionsMaxAmount:{type:WL.Type.Int,default:-1},_myLogFunctionsWithCallsCounterAbove:{type:WL.Type.Int,default:-1},_myFunctionNamesToInclude:{type:WL.Type.String,default:""},_myFunctionNamesToExclude:{type:WL.Type.String,default:""}},{init:function(){!this.active||(this._mySkipFirstUpdate=!0,this._myStartTimer=new PP.Timer(this._myDelayStart),this._myDelayStart==0&&!this._myCountCallsOnPPGlobalObjects&&(this._myStartTimer.end(),this._mySkipFirstUpdate=!1,this._start()))},start:function(){},update:function(e){if(this._mySkipFirstUpdate){this._mySkipFirstUpdate=!1;return}this._myStartTimer.isRunning()?(this._myStartTimer.update(e),this._myStartTimer.isDone()&&this._start()):(this._myFunctionCallsCountLogger.update(e),this._myFunctionCallsCounter.resetCallsCount())},_start(){let e=new PP.DebugFunctionCallsCounterParams;if(e.myObjectsByPath=["WL"],e.myExcludeConstructors=!1,e.myExcludeJavascriptObjectFunctions=!0,e.myAddPathPrefix=!0,e.myObjectRecursionDepthLevelforObjects=1,e.myObjectRecursionDepthLevelforClasses=3,this._myFunctionNamesToInclude.length>0){let i=[...this._myFunctionNamesToInclude.split(",")];for(let s=0;s<i.length;s++)i[s]=i[s].trim();e.myFunctionNamesToInclude.push(...i)}if(this._myFunctionNamesToExclude.length>0){let i=[...this._myFunctionNamesToExclude.split(",")];for(let s=0;s<i.length;s++)i[s]=i[s].trim();e.myFunctionNamesToExclude.push(...i)}this._myFunctionCallsCounter=new PP.DebugFunctionCallsCounter(e);let t=new PP.DebugFunctionCallsCountLoggerParams;t.myCallsCounter=this._myFunctionCallsCounter,t.myLogTitle="WL "+t.myLogTitle,t.myLogDelay=this._myLogDelay,t.myLogFunction=["log","error","warn","debug"][this._myLogFunction],t.myLogCollapsed=this._myLogCollapsed,t.myLogFunctionsMaxAmount=this._myLogFunctionsMaxAmount>=0?this._myLogFunctionsMaxAmount:null,t.myLogFunctionsWithCallsCounterAbove=this._myLogFunctionsWithCallsCounterAbove>=0?this._myLogFunctionsWithCallsCounterAbove:null,t.myLogMaxFunctionCalls=this._myLogMaxFunctionCalls,this._myFunctionCallsCountLogger=new PP.DebugFunctionCallsCountLogger(t)}})});var gs=f(()=>{PP.Direction2DTo3DConverterParams=class{constructor(){this.myStartFlyingForward=!1,this.myStartFlyingRight=!1,this.myAutoUpdateFlyForward=!1,this.myAutoUpdateFlyRight=!1,this.myResetFlyForwardWhenZero=!1,this.myResetFlyRightWhenZero=!1,this.myMinAngleToFlyForwardUp=90,this.myMinAngleToFlyForwardDown=90,this.myMinAngleToFlyRightUp=90,this.myMinAngleToFlyRightDown=90}};PP.Direction2DTo3DConverter=class{constructor(t=new PP.Direction2DTo3DConverterParams){this._myParams=t,this._myIsFlyingForward=this._myParams.myStartFlyingForward,this._myIsFlyingRight=this._myParams.myStartFlyingRight,this._myLastValidFlatForward=PP.vec3_create(),this._myLastValidFlatRight=PP.vec3_create(),this._myMinAngleToBeValid=5}convert(t,i,s=null,n=PP.vec3_create()){return this.convertTransform(t,i,s,n)}isFlying(){return this._myIsFlyingForward||this._myIsFlyingRight}isFlyingForward(){return this._myIsFlyingForward}isFlyingRight(){return this._myIsFlyingRight}startFlying(){this._myIsFlyingForward=!0,this._myIsFlyingRight=!0}startFlyingForward(){this._myIsFlyingForward=!0}startFlyingRight(){this._myIsFlyingRight=!0}stopFlying(){this._myIsFlyingForward=!1,this._myIsFlyingRight=!1}stopFlyingForward(){this._myIsFlyingForward=!1}stopFlyingRight(){this._myIsFlyingRight=!1}resetFly(){this.resetFlyForward(),this.resetFlyRight()}resetFlyForward(){this._myParams.myStartFlyingForward?this.startFlyingForward():this.stopFlyingForward(),this._myLastValidFlatForward.vec3_zero()}resetFlyRight(){this._myParams.myStartFlyingRight?this.startFlyingRight():this.stopFlyingRight(),this._myLastValidFlatRight.vec3_zero()}convertForward(t,i,s=null,n=PP.vec3_create()){}convertTransform(t,i,s=null,n=PP.vec3_create()){return this.convertTransformMatrix(t,i,s,n)}convertTransformMatrix(t,i,s=null,n=PP.vec3_create()){}convertTransformQuat(t,i,s=null,n=PP.vec3_create()){}convertRotationQuat(t,i,s=null,n=PP.vec3_create()){}};PP.Direction2DTo3DConverter.prototype.convertForward=function(){let e=PP.quat_create();return function(i,s,n=null,o=PP.vec3_create()){return e.quat_identity(),e.quat_setForward(s,n),this.convertRotationQuat(i,e,n,o)}}();PP.Direction2DTo3DConverter.prototype.convertTransformMatrix=function(){let e=PP.quat_create();return function(i,s,n=null,o=PP.vec3_create()){return e=s.mat4_getRotationQuat(e),this.convertRotationQuat(i,e,n,o)}}();PP.Direction2DTo3DConverter.prototype.convertTransformQuat=function(){let e=PP.quat_create();return function(i,s,n=null,o=PP.vec3_create()){return e=s.quat2_getRotationQuat(e),this.convertRotationQuat(i,e,n,o)}}();PP.Direction2DTo3DConverter.prototype.convertRotationQuat=function(){let e=PP.vec3_create(),t=PP.vec3_create(),i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create();return function(a,l,u=null,y=PP.vec3_create()){if(a.vec2_isZero())return this._myParams.myAutoUpdateFlyForward&&this._myParams.myResetFlyForwardWhenZero&&this.resetFlyForward(),this._myParams.myAutoUpdateFlyRight&&this._myParams.myResetFlyRightWhenZero&&this.resetFlyRight(),y.vec3_zero(),y;if(a[0]==0&&this._myLastValidFlatRight.vec3_zero(),a[1]==0&&this._myLastValidFlatForward.vec3_zero(),e=l.quat_getForward(e),t=l.quat_getRight(t),u!=null){if(i=u.vec3_negate(i),this._myParams.myAutoUpdateFlyForward){let r=e.vec3_angle(u);this._myIsFlyingForward=this._myIsFlyingForward||r<90-this._myParams.myMinAngleToFlyForwardUp||r>90+this._myParams.myMinAngleToFlyForwardDown}if(this._myParams.myAutoUpdateFlyRight){let r=t.vec3_angle(u);this._myIsFlyingRight=this._myIsFlyingRight||r<90-this._myParams.myMinAngleToFlyRightUp||r>90+this._myParams.myMinAngleToFlyRightDown}this._myIsFlyingForward||(!this._myLastValidFlatForward.vec3_isZero(1e-6)&&(e.vec3_angle(u)<this._myMinAngleToBeValid||e.vec3_angle(i)<this._myMinAngleToBeValid)&&(e.vec3_isConcordant(this._myLastValidFlatForward)?e.pp_copy(this._myLastValidFlatForward):e=this._myLastValidFlatForward.vec3_negate(e)),e=e.vec3_removeComponentAlongAxis(u,e),e.vec3_normalize(e)),this._myIsFlyingRight||(!this._myLastValidFlatRight.vec3_isZero(1e-6)&&(t.vec3_angle(u)<this._myMinAngleToBeValid||t.vec3_angle(i)<this._myMinAngleToBeValid)&&(t.vec3_isConcordant(this._myLastValidFlatRight)?t.pp_copy(this._myLastValidFlatRight):t=this._myLastValidFlatRight.vec3_negate(t)),t=t.vec3_removeComponentAlongAxis(u,t),t.vec3_normalize(t)),(e.vec3_angle(u)>this._myMinAngleToBeValid&&e.vec3_angle(i)>this._myMinAngleToBeValid||a[1]!=0&&this._myLastValidFlatForward.vec3_isZero(1e-6))&&(this._myLastValidFlatForward=e.vec3_removeComponentAlongAxis(u,this._myLastValidFlatForward),this._myLastValidFlatForward.vec3_normalize(this._myLastValidFlatForward)),(t.vec3_angle(u)>this._myMinAngleToBeValid&&t.vec3_angle(i)>this._myMinAngleToBeValid||a[0]!=0&&this._myLastValidFlatRight.vec3_isZero(1e-6))&&(this._myLastValidFlatRight=t.vec3_removeComponentAlongAxis(u,this._myLastValidFlatRight),this._myLastValidFlatRight.vec3_normalize(this._myLastValidFlatRight))}return y=t.vec3_scale(a[0],n).vec3_add(e.vec3_scale(a[1],s),y),u!=null&&!this._myIsFlyingForward&&!this._myIsFlyingRight&&(y=y.vec3_removeComponentAlongAxis(u,y)),y.vec3_normalize(y),y}}()});var Ts=f(()=>{Number.prototype.get=function(){return this.valueOf()};Object.defineProperty(Number.prototype,"get",{enumerable:!1});PP.NumberOverValue=class{constructor(t,i=null,s=0,n=0,o=PP.EasingFunction.linear,a=null){i==null&&(i=t),this._myStartNumber=t,this._myEndNumber=i,this._myStartInterpolationValue=s,this._myEndInterpolationValue=n,this._myEasingFunction=o,this._myRoundingFunction=a}get(t){let i=this._myEasingFunction(Math.pp_mapToRange(t,this._myStartInterpolationValue,this._myEndInterpolationValue,0,1)),s=Math.pp_lerp(this._myStartNumber,this._myEndNumber,i);return this._myRoundingFunction&&(s=this._myRoundingFunction(s,this._myStartNumber,this._myEndNumber)),s}getAverage(t){return this.get(t)}getRange(t){let i=this.get(t);return[i,i]}getMax(t){return this.get(t)}getMin(t){return this.get(t)}isInside(t,i){return this.get(i)==t}isInsideAngleRange(t,i){return this.isInsideAngleRangeDegrees(t,i)}isInsideAngleRangeDegrees(t,i){let s=this.get(i),n=Math.pp_angleClampDegrees(t),o=Math.pp_angleClampDegrees(s);return n==o}isInsideAngleRangeRadians(t,i){let s=this.get(i),n=Math.pp_angleClampRadians(t),o=Math.pp_angleClampRadians(s);return n==o}};PP.IntOverValue=class extends PP.NumberOverValue{constructor(t,i,s,n,o=PP.EasingFunction.linear,a=null){a==null&&(a=function(l,u,y){let r=null;return u<=y?r=Math.floor(l):r=Math.ceil(l),r}),super(t,i,s,n,o,a)}};PP.NumberRangeOverValue=class{constructor(t,i=null,s=0,n=0,o=PP.EasingFunction.linear,a=null){i==null&&(i=t),this._myStartNumberOverValue=new PP.NumberOverValue(t[0],i[0],s,n,o,a),this._myEndNumberOverValue=new PP.NumberOverValue(t[1],i[1],s,n,o,a),this._myRoundingFunction=a}get(t){let i=this._myStartNumberOverValue.get(t),s=this._myEndNumberOverValue.get(t),n=null;return this._myRoundingFunction?n=Math.pp_randomInt(i,s):n=Math.pp_random(i,s),n}getAverage(t){let i=this._myStartNumberOverValue.get(t),s=this._myEndNumberOverValue.get(t),n=(i+s)/2;return this._myRoundingFunction&&(n=this._myRoundingFunction(n,i,s)),n}getRange(t){let i=this._myStartNumberOverValue.get(t),s=this._myEndNumberOverValue.get(t);return[i,s]}getMax(t){let i=this._myStartNumberOverValue.get(t),s=this._myEndNumberOverValue.get(t);return Math.max(i,s)}getMin(t){let i=this._myStartNumberOverValue.get(t),s=this._myEndNumberOverValue.get(t);return Math.min(i,s)}isInside(t,i){let s=this._myStartNumberOverValue.get(i),n=this._myEndNumberOverValue.get(i),o=Math.min(s,n),a=Math.max(s,n);return t>=o&&t<=a}isInsideAngleRange(t,i){return this.isInsideAngleRangeDegrees(t,i)}isInsideAngleRangeDegrees(t,i){let s=this._myStartNumberOverValue.get(i),n=this._myEndNumberOverValue.get(i);return Math.pp_isInsideAngleRangeDegrees(t,s,n)}isInsideAngleRangeRadians(t,i){let s=this._myStartNumberOverValue.get(i),n=this._myEndNumberOverValue.get(i);return Math.pp_isInsideAngleRangeRadians(t,s,n)}};PP.IntRangeOverValue=class extends PP.NumberRangeOverValue{constructor(t,i,s,n,o=PP.EasingFunction.linear,a=null){a==null&&(a=function(l,u,y){let r=null;return u<=y?r=Math.floor(l):r=Math.ceil(l),r}),super(t,i,s,n,o,a)}}});var bs=f(()=>{WL.registerComponent("pp-grabbable",{_myThrowLinearVelocityMultiplier:{type:WL.Type.Float,default:1},_myThrowAngularVelocityMultiplier:{type:WL.Type.Float,default:1},_myKinematicValueOnRelease:{type:WL.Type.Enum,values:["true","false","own"],default:"false"},_myParentOnRelease:{type:WL.Type.Enum,values:["null","own"],default:"own"}},{init:function(){this._myIsGrabbed=!1,this._myGrabber=null,this._myGrabCallbacks=new Map,this._myThrowCallbacks=new Map,this._myReleaseCallbacks=new Map},start:function(){this._myOldParent=this.object.parent,this._myPhysX=this.object.pp_getComponent("physx"),this._myOldKinematicValue=null},onDeactivate:function(){this.release()},grab:function(e){this.isGrabbed()||(this._myOldKinematicValue=this._myPhysX.kinematic),this.release(),this._myPhysX.kinematic=!0,this._myOldParent=this.object.parent,this.object.pp_setParent(e),this._myIsGrabbed=!0,this._myGrabCallbacks.forEach(function(t){t(e,this)}.bind(this))},throw:function(e,t){if(this._myIsGrabbed){let i=this._myGrabber;this._release(),this._myPhysX.linearVelocity=e.vec3_scale(this._myThrowLinearVelocityMultiplier),this._myPhysX.angularVelocity=t.vec3_scale(this._myThrowAngularVelocityMultiplier),this._myThrowCallbacks.forEach(function(s){s(i,this)}.bind(this)),this._myReleaseCallbacks.forEach(function(s){s(i,this,!0)}.bind(this))}},release(){if(this._myIsGrabbed){let e=this._myGrabber;this._release(),this._myReleaseCallbacks.forEach(function(t){t(e,this,!1)}.bind(this))}},getLinearVelocity(){let e=PP.vec3_create();return this._myPhysX.linearVelocity.vec3_clone(e),e},getAngularVelocity(){return this.getAngularVelocityDegrees()},getAngularVelocityDegrees(){let e=PP.vec3_create();return this._myPhysX.angularVelocity.vec3_toDegrees(e),e},getAngularVelocityRadians(){let e=PP.vec3_create();return this._myPhysX.angularVelocity.vec3_clone(e),e},isGrabbed(){return this._myIsGrabbed},getGrabber(){return this._myGrabber},registerGrabEventListener(e,t){this._myGrabCallbacks.set(e,t)},unregisterGrabEventListener(e){this._myGrabCallbacks.delete(e)},registerThrowEventListener(e,t){this._myThrowCallbacks.set(e,t)},unregisterThrowEventListener(e){this._myThrowCallbacks.delete(e)},registerReleaseEventListener(e,t){this._myReleaseCallbacks.set(e,t)},unregisterReleaseEventListener(e){this._myReleaseCallbacks.delete(e)},_release(){this._myParentOnRelease==0?this.object.pp_setParent(null):this.object.pp_setParent(this._myOldParent),this._myIsGrabbed=!1,this._myGrabber=null,this._myKinematicValueOnRelease==0?this._myPhysX.kinematic=!0:this._myKinematicValueOnRelease==1?this._myPhysX.kinematic=!1:this._myOldKinematicValue!=null&&(this._myPhysX.kinematic=this._myOldKinematicValue),this._myPhysX.kinematic&&(this._myPhysX.linearVelocity=PP.vec3_create(),this._myPhysX.angularVelocity=PP.vec3_create())},pp_clone(e){let t=e.pp_addComponent(this.type);return t._myThrowLinearVelocityMultiplier=this._myThrowLinearVelocityMultiplier,t._myThrowAngularVelocityMultiplier=this._myThrowAngularVelocityMultiplier,t._myKinematicValueOnRelease=this._myKinematicValueOnRelease,t},pp_clonePostProcess(){this.start()}})});var Cs=f(()=>{WL.registerComponent("pp-grabber-hand",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myGrabButton:{type:WL.Type.Enum,values:["select","squeeze","both","both_exclusive"],default:"squeeze"},_mySnapOnPivot:{type:WL.Type.Bool,default:!1},_myMaxNumberOfObjects:{type:WL.Type.Int,default:1},_myThrowVelocitySource:{type:WL.Type.Enum,values:["hand","grabbable"],default:"hand"},_myThrowLinearVelocityMultiplier:{type:WL.Type.Float,default:1},_myThrowMaxLinearSpeed:{type:WL.Type.Float,default:15},_myThrowAngularVelocityMultiplier:{type:WL.Type.Float,default:.5},_myThrowMaxAngularSpeed:{type:WL.Type.Float,default:1080},_myThrowLinearVelocityBoost:{type:WL.Type.Float,default:1.75},_myThrowLinearVelocityBoostMinSpeedThreshold:{type:WL.Type.Float,default:.6},_myThrowLinearVelocityBoostMaxSpeedThreshold:{type:WL.Type.Float,default:2.5}},{init:function(){this._myGrabbables=[],this._myGamepad=null,this._myActiveGrabButton=null,this._myLinearVelocityHistorySize=5,this._myLinearVelocityHistorySpeedAverageSamplesFromStart=1,this._myLinearVelocityHistoryDirectionAverageSamplesFromStart=3,this._myLinearVelocityHistoryDirectionAverageSkipFromStart=0,this._myHandLinearVelocityHistory=new Array(this._myLinearVelocityHistorySize),this._myHandLinearVelocityHistory.fill(PP.vec3_create()),this._myAngularVelocityHistorySize=1,this._myHandAngularVelocityHistory=new Array(this._myAngularVelocityHistorySize),this._myHandAngularVelocityHistory.fill(PP.vec3_create()),this._myThrowMaxAngularSpeedRadians=Math.pp_toRadians(this._myThrowMaxAngularSpeed),this._myGrabCallbacks=new Map,this._myThrowCallbacks=new Map,this._myDebugActive=!1},start:function(){this._myHandedness==PP.HandednessIndex.LEFT?this._myGamepad=PP.myLeftGamepad:this._myGamepad=PP.myRightGamepad,this._myPhysX=this.object.pp_getComponent("physx"),this._myCollisionsCollector=new PP.PhysicsCollisionCollector(this._myPhysX,!0)},update:function(e){this._myCollisionsCollector.update(e),this._myGrabbables.length>0&&(this._updateLinearVelocityHistory(),this._updateAngularVelocityHistory())},grab:function(e=null){this._grab(e)},throw:function(e=null){this._throw(e)},registerGrabEventListener(e,t){this._myGrabCallbacks.set(e,t)},unregisterGrabEventListener(e){this._myGrabCallbacks.delete(e)},registerThrowEventListener(e,t){this._myThrowCallbacks.set(e,t)},unregisterThrowEventListener(e){this._myThrowCallbacks.delete(e)},onActivate(){this._myGamepad!=null&&(this._myGrabButton==0?(this._myGamepad.registerButtonEventListener(PP.GamepadButtonID.SELECT,PP.GamepadButtonEvent.PRESS_START,this,this._grab.bind(this,PP.GamepadButtonID.SELECT)),this._myGamepad.registerButtonEventListener(PP.GamepadButtonID.SELECT,PP.GamepadButtonEvent.PRESS_END,this,this._throw.bind(this,PP.GamepadButtonID.SELECT))):this._myGrabButton==1?(this._myGamepad.registerButtonEventListener(PP.GamepadButtonID.SQUEEZE,PP.GamepadButtonEvent.PRESS_START,this,this._grab.bind(this,PP.GamepadButtonID.SQUEEZE)),this._myGamepad.registerButtonEventListener(PP.GamepadButtonID.SQUEEZE,PP.GamepadButtonEvent.PRESS_END,this,this._throw.bind(this,PP.GamepadButtonID.SQUEEZE))):(this._myGamepad.registerButtonEventListener(PP.GamepadButtonID.SQUEEZE,PP.GamepadButtonEvent.PRESS_START,this,this._grab.bind(this,PP.GamepadButtonID.SQUEEZE)),this._myGamepad.registerButtonEventListener(PP.GamepadButtonID.SQUEEZE,PP.GamepadButtonEvent.PRESS_END,this,this._throw.bind(this,PP.GamepadButtonID.SQUEEZE)),this._myGamepad.registerButtonEventListener(PP.GamepadButtonID.SELECT,PP.GamepadButtonEvent.PRESS_START,this,this._grab.bind(this,PP.GamepadButtonID.SELECT)),this._myGamepad.registerButtonEventListener(PP.GamepadButtonID.SELECT,PP.GamepadButtonEvent.PRESS_END,this,this._throw.bind(this,PP.GamepadButtonID.SELECT))))},onDeactivate(){this._myGamepad!=null&&(this._myGrabButton==0?(this._myGamepad.unregisterButtonEventListener(PP.GamepadButtonID.SELECT,PP.GamepadButtonEvent.PRESS_START,this),this._myGamepad.unregisterButtonEventListener(PP.GamepadButtonID.SELECT,PP.GamepadButtonEvent.PRESS_END,this)):this._myGrabButton==1?(this._myGamepad.unregisterButtonEventListener(PP.GamepadButtonID.SQUEEZE,PP.GamepadButtonEvent.PRESS_START,this),this._myGamepad.unregisterButtonEventListener(PP.GamepadButtonID.SQUEEZE,PP.GamepadButtonEvent.PRESS_END,this)):(this._myGamepad.unregisterButtonEventListener(PP.GamepadButtonID.SQUEEZE,PP.GamepadButtonEvent.PRESS_START,this),this._myGamepad.unregisterButtonEventListener(PP.GamepadButtonID.SQUEEZE,PP.GamepadButtonEvent.PRESS_END,this),this._myGamepad.unregisterButtonEventListener(PP.GamepadButtonID.SELECT,PP.GamepadButtonEvent.PRESS_START,this),this._myGamepad.unregisterButtonEventListener(PP.GamepadButtonID.SELECT,PP.GamepadButtonEvent.PRESS_END,this)))},_grab:function(e){if(!(this._myGrabbables.length>=this._myMaxNumberOfObjects)&&(this._myGrabButton==2||this._myActiveGrabButton==null||this._myActiveGrabButton==e||e==null)){let t=[],i=this._myCollisionsCollector.getCollisions();for(let n=0;n<i.length;n++){let o=i[n].getComponent("pp-grabbable");o&&o.active&&t.push(o)}let s=this.object.pp_getPosition();t.sort(function(n,o){let a=n.object.pp_getPosition(),l=o.object.pp_getPosition(),u=a.vec3_distance(s),y=l.vec3_distance(s);return Math.pp_sign(u-y,0)});for(let n of t){if(!this._isAlreadyGrabbed(n)){let o=new PP.GrabberHandGrabbableData(n,this._myThrowVelocitySource==1,this._myLinearVelocityHistorySize,this._myAngularVelocityHistorySize);this._myGrabbables.push(o),n.grab(this.object),n.registerReleaseEventListener(this,this._onRelease.bind(this)),this._mySnapOnPivot&&n.object.resetTranslation(),this._myGrabCallbacks.forEach(function(a){a(this,n)}.bind(this))}if(this._myGrabbables.length>=this._myMaxNumberOfObjects)break}this._myGrabbables.length>0&&this._myActiveGrabButton==null&&(this._myActiveGrabButton=e)}},_throw:function(e){if(this._myGrabButton==2||this._myActiveGrabButton==null||this._myActiveGrabButton==e||e==null){if(this._myGrabbables.length>0){let t=null,i=null;this._myThrowVelocitySource==0&&(t=this._computeReleaseLinearVelocity(this._myHandLinearVelocityHistory),i=this._computeReleaseAngularVelocity(this._myHandAngularVelocityHistory));for(let s of this._myGrabbables){let n=s.getGrabbable();n.unregisterReleaseEventListener(this),this._myThrowVelocitySource==1&&(t=this._computeReleaseLinearVelocity(s.getLinearVelocityHistory()),i=this._computeReleaseAngularVelocity(s.getAngularVelocityHistory())),n.throw(t,i),this._myThrowCallbacks.forEach(function(o){o(this,n)}.bind(this))}this._myGrabbables=[]}this._myActiveGrabButton=null}},_onRelease(e,t){t.unregisterReleaseEventListener(this),this._myGrabbables.pp_remove(i=>i.getGrabbable()==t),this._myGrabbables.length<=0&&(this._myActiveGrabButton=null)},_updateLinearVelocityHistory(){let e=this._myGamepad.getHandPose();this._myHandLinearVelocityHistory.unshift(e.getLinearVelocity().pp_clone()),this._myHandLinearVelocityHistory.pop();for(let t of this._myGrabbables)t.updateLinearVelocityHistory()},_updateAngularVelocityHistory(){let e=this._myGamepad.getHandPose();this._myHandAngularVelocityHistory.unshift(e.getAngularVelocityRadians().pp_clone()),this._myHandAngularVelocityHistory.pop();for(let t of this._myGrabbables)t.updateAngularVelocityHistory()},_computeReleaseLinearVelocity(e){let t=e[0].vec3_length();for(let l=1;l<this._myLinearVelocityHistorySpeedAverageSamplesFromStart;l++)t+=e[l].vec3_length();t/=this._myLinearVelocityHistorySpeedAverageSamplesFromStart;let i=Math.pp_mapToRange(t,this._myThrowLinearVelocityBoostMinSpeedThreshold,this._myThrowLinearVelocityBoostMaxSpeedThreshold,0,1);i=PP.EasingFunction.easeIn(i),t+=t*(i*this._myThrowLinearVelocityBoost),t*=this._myThrowLinearVelocityMultiplier,t=Math.pp_clamp(t,0,this._myThrowMaxLinearSpeed),this._myDebugActive&&this._debugDirectionLines(e);let n=this._myLinearVelocityHistoryDirectionAverageSamplesFromStart,o=this._myLinearVelocityHistoryDirectionAverageSkipFromStart+this._myLinearVelocityHistoryDirectionAverageSamplesFromStart,a=PP.vec3_create();for(let l=this._myLinearVelocityHistoryDirectionAverageSkipFromStart;l<o;l++){let u=e[l];u.vec3_scale(n,u),a.vec3_add(u,a),n--}return a.vec3_normalize(a),a.vec3_scale(t,a),a},_computeReleaseAngularVelocity(e){let t=e[0],i=t.vec3_length();i=Math.pp_clamp(i*this._myThrowAngularVelocityMultiplier,0,this._myThrowMaxAngularSpeedRadians);let s=t;return s.vec3_normalize(s),s.vec3_scale(i,s),s},_debugDirectionLines(e){for(let t=this._myLinearVelocityHistoryDirectionAverageSkipFromStart+this._myLinearVelocityHistoryDirectionAverageSamplesFromStart;t>this._myLinearVelocityHistoryDirectionAverageSkipFromStart;t--){let i=t-this._myLinearVelocityHistoryDirectionAverageSkipFromStart,s=t-this._myLinearVelocityHistoryDirectionAverageSkipFromStart,n=PP.vec3_create();for(let a=this._myLinearVelocityHistoryDirectionAverageSkipFromStart;a<s;a++){let l=e[a].pp_clone();l.vec3_scale(i,l),n.vec3_add(l,n),i--}n.vec3_normalize(n);let o=1/t;PP.myDebugVisualManager.drawLine(5,this.object.pp_getPosition(),n,.2,PP.vec4_create(olor,o,o,1))}},_isAlreadyGrabbed(e){return this._myGrabbables.pp_find(i=>i.getGrabbable()==e)!=null}});PP.GrabberHandGrabbableData=class{constructor(t,i,s,n){this._myGrabbable=t,this._myUseGrabbableAsVelocitySource=i,this._myUseGrabbableAsVelocitySource&&(this._myLinearVelocityHistory=new Array(s),this._myLinearVelocityHistory.fill(PP.vec3_create()),this._myAngularVelocityHistory=new Array(n),this._myAngularVelocityHistory.fill(PP.vec3_create()))}getGrabbable(){return this._myGrabbable}getLinearVelocityHistory(){return this._myLinearVelocityHistory}getAngularVelocityHistory(){return this._myAngularVelocityHistory}updateLinearVelocityHistory(){this._myUseGrabbableAsVelocitySource&&(this._myLinearVelocityHistory.unshift(this._myGrabbable.getLinearVelocity()),this._myLinearVelocityHistory.pop())}updateAngularVelocityHistory(){this._myUseGrabbableAsVelocitySource&&(this._myAngularVelocityHistory.unshift(this._myGrabbable.getAngularVelocityRadians()),this._myAngularVelocityHistory.pop())}}});var Ss=f(()=>{PP.CAUtils={_myDummyServer:null,_myUseDummyServerOnSDKMissing:!1,_myUseDummyServerOnError:!1,setUseDummyServerOnSDKMissing:function(e){PP.CAUtils._myUseDummyServerOnSDKMissing=e},setUseDummyServerOnError:function(e){PP.CAUtils._myUseDummyServerOnError=e},setDummyServer:function(e){PP.CAUtils._myDummyServer=e},isUseDummyServerOnSDKMissing:function(){return PP.CAUtils._myUseDummyServerOnSDKMissing},isUseDummyServerOnError:function(){return PP.CAUtils._myUseDummyServerOnError},getDummyServer:function(){return PP.CAUtils._myDummyServer},isSDKAvailable:function(){return"casdk"in window},getLeaderboard:function(e,t,i,s,n,o,a=null){if(PP.CAUtils.isSDKAvailable())i?PP.CAUtils.getUser(function(l){let u=l.displayName;casdk.getLeaderboard(e,t,i,s).then(function(y){if(y.leaderboard){let r=!1;for(let m of y.leaderboard)if(m.displayName==u&&m.score!=0){r=!0;break}if(r)n&&n(y.leaderboard);else if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.getLeaderboard!=null&&PP.CAUtils._myUseDummyServerOnError&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,s,n,o);else if(o){let m={};m.reason="Searching for around player but the user has not submitted a score yet",m.type=PP.CAUtils.ErrorType.USER_HAS_NO_SCORE,o(m,y)}}else if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.getLeaderboard!=null&&PP.CAUtils._myUseDummyServerOnError&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,s,n,o);else if(o){let r={};r.reason="Get leaderboard failed",r.type=PP.CAUtils.ErrorType.GET_LEADERBOARD_FAILED,o(r,y)}}).catch(function(y){if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.getLeaderboard!=null&&PP.CAUtils._myUseDummyServerOnError&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,s,n,o);else if(o){let r={};r.reason="Get leaderboard failed",r.type=PP.CAUtils.ErrorType.GET_LEADERBOARD_FAILED,o(r,y)}})},function(){if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.getLeaderboard!=null&&PP.CAUtils._myUseDummyServerOnError&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,s,n,o);else if(o){let l={};l.reason="Searching for around player but the user can't be retrieved",l.type=PP.CAUtils.ErrorType.GET_USER_FAILED,o(l,result)}},!1):casdk.getLeaderboard(e,t,i,s).then(function(l){if(l.leaderboard)n&&n(l.leaderboard);else if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.getLeaderboard!=null&&PP.CAUtils._myUseDummyServerOnError&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,s,n,o);else if(o){let u={};u.reason="Get leaderboard failed",u.type=PP.CAUtils.ErrorType.GET_LEADERBOARD_FAILED,o(u,l)}}).catch(function(l){if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.getLeaderboard!=null&&PP.CAUtils._myUseDummyServerOnError&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,s,n,o);else if(o){let u={};u.reason="Get leaderboard failed",u.type=PP.CAUtils.ErrorType.GET_LEADERBOARD_FAILED,o(u,l)}});else if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.getLeaderboard!=null&&PP.CAUtils._myUseDummyServerOnSDKMissing&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,s,n,o);else if(o){let l={};l.reason="Construct Arcade SDK missing",l.type=PP.CAUtils.ErrorType.CA_SDK_MISSING,o(l,null)}},getLeaderboardDummy(e,t,i,s,n,o){if(PP.CAUtils._myDummyServer)PP.CAUtils._myDummyServer.getLeaderboard(e,t,i,s,n,o);else if(o){let a={};a.reason="Dummy server not initialized",a.type=PP.CAUtils.ErrorType.DUMMY_NOT_INITIALIZED,o(a)}},submitScore:function(e,t,i,s,n=null){if(PP.CAUtils.isSDKAvailable())casdk.submitScore(e,t).then(function(o){if(o.error){if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.submitScore!=null&&PP.CAUtils._myUseDummyServerOnError&&n==null||n!=null&&n)PP.CAUtils.submitScoreDummy(e,t,i,s);else if(s){let a={};a.reason="Submit score failed",a.type=PP.CAUtils.ErrorType.SUBMIT_SCORE_FAILED,s(a,o)}}else i()}).catch(function(o){if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.submitScore!=null&&PP.CAUtils._myUseDummyServerOnError&&n==null||n!=null&&n)PP.CAUtils.submitScoreDummy(e,t,i,s);else if(s){let a={};a.reason="Submit score failed",a.type=PP.CAUtils.ErrorType.SUBMIT_SCORE_FAILED,s(a,o)}});else if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.submitScore!=null&&PP.CAUtils._myUseDummyServerOnSDKMissing&&n==null||n!=null&&n)PP.CAUtils.submitScoreDummy(e,t,i,s);else if(s){let o={};o.reason="Construct Arcade SDK missing",o.type=PP.CAUtils.ErrorType.CA_SDK_MISSING,s(o,null)}},submitScoreDummy(e,t,i,s){if(PP.CAUtils._myDummyServer)PP.CAUtils._myDummyServer.submitScore(e,t,i,s);else if(s){let n={};n.reason="Dummy server not initialized",n.type=PP.CAUtils.ErrorType.DUMMY_NOT_INITIALIZED,s(n)}},getUser:function(e,t,i=null){if(PP.CAUtils.isSDKAvailable())casdk.getUser().then(function(s){if(s.user)e&&e(s.user);else if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.getUser!=null&&PP.CAUtils._myUseDummyServerOnError&&i==null||i!=null&&i)PP.CAUtils.getUserDummy(e,t);else if(t){let n={};n.reason="Get user failed",n.type=PP.CAUtils.ErrorType.GET_USER_FAILED,t(n,s)}}).catch(function(s){if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.getUser!=null&&PP.CAUtils._myUseDummyServerOnError&&i==null||i!=null&&i)PP.CAUtils.getUserDummy(e,t);else if(t){let n={};n.reason="Get user failed",n.type=PP.CAUtils.ErrorType.GET_USER_FAILED,t(n,s)}});else if(PP.CAUtils._myDummyServer!=null&&PP.CAUtils._myDummyServer.getUser!=null&&PP.CAUtils._myUseDummyServerOnSDKMissing&&i==null||i!=null&&i)PP.CAUtils.getUserDummy(e,t);else if(t){let s={};s.reason="Construct Arcade SDK missing",s.type=PP.CAUtils.ErrorType.CA_SDK_MISSING,t(s,null)}},getUserDummy(e,t){if(PP.CAUtils._myDummyServer)PP.CAUtils._myDummyServer.getUser(e,t);else if(t){let i={};i.reason="Dummy server not initialized",i.type=PP.CAUtils.ErrorType.DUMMY_NOT_INITIALIZED,t(i)}},ErrorType:{DUMMY_NOT_INITIALIZED:0,CA_SDK_MISSING:1,SUBMIT_SCORE_FAILED:2,GET_LEADERBOARD_FAILED:3,GET_USER_FAILED:4,USER_HAS_NO_SCORE:5}};PP.CADummyServer=class{constructor(){}getLeaderboard(t,i,s,n,o,a){let l=null;for(PP.CAUtils.isSDKAvailable()?l=[{rank:0,displayName:"An",score:0},{rank:1,displayName:"Error",score:0},{rank:2,displayName:"Has",score:0},{rank:3,displayName:"Occurred",score:0},{rank:4,displayName:"While",score:0},{rank:5,displayName:"Trying",score:0},{rank:6,displayName:"To",score:0},{rank:7,displayName:"Retrieve",score:0},{rank:8,displayName:"The",score:0},{rank:9,displayName:"Leaderboard",score:0}]:s?l=[{rank:0,displayName:"Sign In",score:0},{rank:1,displayName:"And",score:0},{rank:2,displayName:"Play",score:0},{rank:3,displayName:"On",score:0},{rank:4,displayName:"HeyVR",score:0},{rank:5,displayName:"To",score:0},{rank:6,displayName:"Submit",score:0},{rank:7,displayName:"Your",score:0},{rank:8,displayName:"Own",score:0},{rank:9,displayName:"Score",score:0}]:l=[{rank:0,displayName:"The",score:0},{rank:1,displayName:"Top 10",score:0},{rank:2,displayName:"Leaderboard",score:0},{rank:3,displayName:"Is",score:0},{rank:4,displayName:"Available",score:0},{rank:5,displayName:"Only",score:0},{rank:5,displayName:"When",score:0},{rank:7,displayName:"Playing",score:0},{rank:8,displayName:"On",score:0},{rank:9,displayName:"HeyVR",score:0}];l.length>n;)l.pop();o&&o(l)}submitScore(t,i,s,n){s&&s()}getUser(t,i){let s={};s.displayName="Jonathan",t&&t(s)}}});var vs=f(()=>{WL.registerComponent("pp-ca-display-leaderboard",{_myLeaderboardID:{type:WL.Type.String,default:""},_myIsLocal:{type:WL.Type.Bool,default:!1},_myIsAscending:{type:WL.Type.Bool,default:!1},_myScoresAmount:{type:WL.Type.Int,default:10},_myScoreFormat:{type:WL.Type.Enum,values:["value","hours:minutes:seconds","minutes:seconds","seconds","hours:minutes","minutes"],default:"value"},_myPositionAndUsernameSeparator:{type:WL.Type.String,default:" - "},_myNumberOfLinesBetweenScores:{type:WL.Type.Int,default:1}},{init:function(){},start:function(){this._myNamesTextComponent=null,this._myScoresTextComponent=null,this._myStarted=!1,PP.CAUtils.setDummyServer(new PP.CADummyServer),PP.CAUtils.setUseDummyServerOnSDKMissing(!0),PP.CAUtils.setUseDummyServerOnError(!0)},update:function(e){if(!this._myStarted){this._myStarted=!0;let t=this.object.pp_getObjectByName("Names"),i=this.object.pp_getObjectByName("Scores");t!=null&&i!=null&&(this._myNamesTextComponent=t.pp_getComponent("text"),this._myScoresTextComponent=i.pp_getComponent("text")),this.updateLeaderboard()}},updateLeaderboard:function(){PP.CAUtils.getLeaderboard(this._myLeaderboardID,this._myIsAscending,this._myIsLocal,this._myScoresAmount,this._onLeaderboardRetrieved.bind(this))},_onLeaderboardRetrieved(e){let t="",i="",s=0;for(let n of e){let o=n.rank+1;o.toFixed(0).length>s&&(s=o.toFixed(0).length)}for(let n of e){let a=(n.rank+1).toFixed(0);for(;a.length<s;)a="0".concat(a);let l=`
`;for(let y=0;y<this._myNumberOfLinesBetweenScores;y++)l=l+`
`;t=t.concat(a,this._myPositionAndUsernameSeparator,n.displayName,l);let u=this._formatScore(n.score);i=i.concat(u,l)}this._myNamesTextComponent!=null&&this._myScoresTextComponent!=null&&(this._myNamesTextComponent.text=t,this._myScoresTextComponent.text=i)},_formatScore(e){let t=e.toString();return this._myScoreFormat==1?t=this._formatTime(e,!0,!0,!0):this._myScoreFormat==2?t=this._formatTime(e,!1,!0,!0):this._myScoreFormat==3?t=this._formatTime(e,!1,!1,!0):this._myScoreFormat==4?t=this._formatTime(e,!0,!0,!1):this._myScoreFormat==5&&(t=this._formatTime(e,!1,!0,!1)),t},_formatTime(e,t,i,s){let n=Math.floor(e/1e3),o=0;t&&(o=Math.floor(n/3600),n-=o*3600);let a=0;i&&(a=Math.floor(n/60),n-=a*60);let l=0;s&&(l=Math.floor(n));let u="";return s&&(u=l.toFixed(0).length<2&&(i||t)?"0".concat(l.toFixed(0)):l.toFixed(0)),i&&(u=(a.toFixed(0).length<2&&(s||t)?"0".concat(a.toFixed(0)):a.toFixed(0))+(s?":"+u:"")),t&&(u=(o.toFixed(0).length<2&&(s||i)?"0".concat(o.toFixed(0)):o.toFixed(0))+(i?":"+u:"")),u},pp_clone(e){let t=e.pp_addComponent(this.type);return t._myLeaderboardID=this._myLeaderboardID,t._myIsLocal=this._myIsLocal,t._myPositionAndUsernameSeparator=this._myPositionAndUsernameSeparator,t._myNumberOfLinesBetweenScores=this._myNumberOfLinesBetweenScores,t}})});var xs=f(()=>{WL.registerComponent("pp-finger-cursor",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myEnableMultipleClicks:{type:WL.Type.Bool,default:!0},_myCollisionGroup:{type:WL.Type.Int,default:1},_myCollisionSize:{type:WL.Type.Float,default:.0125},_myCursorObject:{type:WL.Type.Object,default:null}},{init:function(){this._myLastTarget=null,this._myReferenceSpace=null,this._myHandInputSource=null,this._myHandednessString=["left","right"][this._myHandedness],this._myDoubleClickTimer=0,this._myTripleClickTimer=0,this._myMultipleClickObject=null,this._myMultipleClickDelay=.3},start:function(){this._myCursorObjectRoot=WL.scene.addObject(this.object),this._myCursorObject==null?this._myCursorObject=this._myCursorObjectRoot.pp_addObject():this._myCursorObject.pp_setParent(this._myCursorObjectRoot),this._myCollisionComponent=this._myCursorObject.addComponent("collision"),this._myCollisionComponent.collider=WL.Collider.Sphere,this._myCollisionComponent.group=1<<this._myCollisionGroup,this._myCollisionComponent.extents=PP.vec3_create(this._myCollisionSize,this._myCollisionSize,this._myCollisionSize),WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))},update:function(e){if(this._myDoubleClickTimer>0&&(this._myDoubleClickTimer-=e),this._myTripleClickTimer>0&&(this._myTripleClickTimer-=e),this._myCursorObjectRoot.pp_setTransformQuat(PP.myPlayerObjects.myPlayerPivot.pp_getTransformQuat()),this._updateHand(),this._myHandInputSource){let t=this._myCollisionComponent.queryOverlaps(),i=null;for(let s=0;s<t.length;++s){let o=t[s].object.getComponent("cursor-target");if(o&&(i==null||!o.isSurface)&&(i=o,!o.isSurface))break}i?i.equals(this._myLastTarget)||(this._targetTouchEnd(),this._myLastTarget=i,this._targetTouchStart()):this._targetTouchEnd()}else this._targetTouchEnd()},_targetTouchStart:function(){this._myLastTarget.onHover(this._myLastTarget.object,this),this._myLastTarget.onDown(this._myLastTarget.object,this)},_targetTouchEnd:function(){this._myLastTarget&&(this._myEnableMultipleClicks&&this._myTripleClickTimer>0&&this._myMultipleClickObject&&this._myMultipleClickObject.equals(this._myLastTarget.object)?(this._myLastTarget.onTripleClick(this._myLastTarget.object,this),this._myTripleClickTimer=0):this._myEnableMultipleClicks&&this._myDoubleClickTimer>0&&this._myMultipleClickObject&&this._myMultipleClickObject.equals(this._myLastTarget.object)?(this._myLastTarget.onDoubleClick(this._myLastTarget.object,this),this._myTripleClickTimer=this._myMultipleClickDelay,this._myDoubleClickTimer=0):(this._myLastTarget.onClick(this._myLastTarget.object,this),this._myTripleClickTimer=0,this._myDoubleClickTimer=this._myMultipleClickDelay,this._myMultipleClickObject=this._myLastTarget.object),this._myLastTarget.onUp(this._myLastTarget.object,this),this._myLastTarget.onUnhover(this._myLastTarget.object,this),this._myLastTarget=null)},onActivate:function(){this._myCursorObjectRoot.pp_setActive(!0)},onDeactivate:function(){this._myCursorObjectRoot.pp_setActive(!1)},_updateHand(){if(this._myHandInputSource=PP.InputUtils.getInputSource(this._myHandednessString,PP.InputSourceType.TRACKED_HAND),this._myHandInputSource){let e=Module.webxr_frame.getJointPose(this._myHandInputSource.hand.get("index-finger-tip"),this._myReferenceSpace);e&&(this._myCursorObject.pp_setRotationLocalQuat([e.transform.orientation.x,e.transform.orientation.y,e.transform.orientation.z,e.transform.orientation.w]),this._myCursorObject.pp_setPositionLocal([e.transform.position.x,e.transform.position.y,e.transform.position.z]))}},_onXRSessionStart:function(e){e.requestReferenceSpace(WebXR.refSpace).then(function(t){this._myReferenceSpace=t}.bind(this))},_onXRSessionEnd:function(e){this._myReferenceSpace=null}})});var Bs=f(()=>{PP.Handedness={LEFT:"left",RIGHT:"right"};PP.HandednessIndex={LEFT:0,RIGHT:1};PP.InputSourceType={GAMEPAD:0,TRACKED_HAND:1};PP.TrackedHandJointID={WRIST:"wrist",THUMB_METACARPAL:"thumb-metacarpal",THUMB_PHALANX_PROXIMAL:"thumb-phalanx-proximal",THUMB_PHALANX_DISTAL:"thumb-phalanx-distal",THUMB_TIP:"thumb-tip",INDEX_FINGER_METACARPAL:"index-finger-metacarpal",INDEX_FINGER_PHALANX_PROXIMAL:"index-finger-phalanx-proximal",INDEX_FINGER_PHALANX_INTERMEDIATE:"index-finger-phalanx-intermediate",INDEX_FINGER_PHALANX_DISTAL:"index-finger-phalanx-distal",INDEX_FINGER_TIP:"index-finger-tip",MIDDLE_FINGER_METACARPAL:"middle-finger-metacarpal",MIDDLE_FINGER_PHALANX_PROXIMAL:"middle-finger-phalanx-proximal",MIDDLE_FINGER_PHALANX_INTERMEDIATE:"middle-finger-phalanx-intermediate",MIDDLE_FINGER_PHALANX_DISTAL:"middle-finger-phalanx-distal",MIDDLE_FINGER_TIP:"middle-finger-tip",RING_FINGER_METACARPAL:"ring-finger-metacarpal",RING_FINGER_PHALANX_PROXIMAL:"ring-finger-phalanx-proximal",RING_FINGER_PHALANX_INTERMEDIATE:"ring-finger-phalanx-intermediate",RING_FINGER_PHALANX_DISTAL:"ring-finger-phalanx-distal",RING_FINGER_TIP:"ring-finger-tip",PINKY_FINGER_METACARPAL:"pinky-finger-metacarpal",PINKY_FINGER_PHALANX_PROXIMAL:"pinky-finger-phalanx-proximal",PINKY_FINGER_PHALANX_INTERMEDIATE:"pinky-finger-phalanx-intermediate",PINKY_FINGER_PHALANX_DISTAL:"pinky-finger-phalanx-distal",PINKY_FINGER_TIP:"pinky-finger-tip"};PP.TrackedHandJointIDIndex={WRIST:0,THUMB_METACARPAL:1,THUMB_PHALANX_PROXIMAL:2,THUMB_PHALANX_DISTAL:3,THUMB_TIP:4,INDEX_FINGER_METACARPAL:5,INDEX_FINGER_PHALANX_PROXIMAL:6,INDEX_FINGER_PHALANX_INTERMEDIATE:7,INDEX_FINGER_PHALANX_DISTAL:8,INDEX_FINGER_TIP:9,MIDDLE_FINGER_METACARPAL:10,MIDDLE_FINGER_PHALANX_PROXIMAL:11,MIDDLE_FINGER_PHALANX_INTERMEDIATE:12,MIDDLE_FINGER_PHALANX_DISTAL:13,MIDDLE_FINGER_TIP:14,RING_FINGER_METACARPAL:15,RING_FINGER_PHALANX_PROXIMAL:16,RING_FINGER_PHALANX_INTERMEDIATE:17,RING_FINGER_PHALANX_DISTAL:18,RING_FINGER_TIP:19,PINKY_FINGER_METACARPAL:20,PINKY_FINGER_PHALANX_PROXIMAL:21,PINKY_FINGER_PHALANX_INTERMEDIATE:22,PINKY_FINGER_PHALANX_DISTAL:23,PINKY_FINGER_TIP:24}});var Ls=f(()=>{PP.InputUtils={getHandednessByIndex:function(e){let t=null;switch(e){case PP.HandednessIndex.LEFT:t=PP.Handedness.LEFT;break;case PP.HandednessIndex.RIGHT:t=PP.Handedness.RIGHT;break}return t},getInputSource:function(e,t){let i=null;if(WL.xrSession&&WL.xrSession.inputSources)for(let s=0;s<WL.xrSession.inputSources.length;s++){let n=WL.xrSession.inputSources[s];if((!t||t==PP.InputSourceType.GAMEPAD&&!n.hand||t==PP.InputSourceType.TRACKED_HAND&&n.hand)&&n.handedness==e){i=n;break}}return i},getInputSourceTypeByHandedness:function(e){let t=PP.InputUtils.getInputSource(e);return PP.InputUtils.getInputSourceType(t)},getInputSourceType:function(e){let t=null;return e&&(e.hand?t=PP.InputSourceType.TRACKED_HAND:t=PP.InputSourceType.GAMEPAD),t},getOppositeHandedness:function(e){let t=null;switch(e){case PP.Handedness.LEFT:t=PP.Handedness.RIGHT;break;case PP.Handedness.RIGHT:t=PP.Handedness.LEFT;break}return t},getJointIDByIndex:function(e){let t=null,i=null;for(let s in PP.TrackedHandJointIDIndex)if(PP.TrackedHandJointIDIndex[s]==e){i=s;break}return i!=null&&(t=PP.TrackedHandJointID[i]),t}}});var Is=f(()=>{PP.KeyID={_0:"0",_1:"1",_2:"2",_3:"3",_4:"4",_5:"5",_6:"6",_7:"7",_8:"8",_9:"9",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"J",K:"K",L:"L",M:"M",N:"N",O:"O",P:"P",Q:"Q",R:"R",S:"S",T:"T",U:"U",V:"V",W:"W",X:"X",Y:"Y",Z:"Z",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SPACE:" ",ENTER:"Enter",BACKSPACE:"Backspace",ESC:"Escape",SHIFT_LEFT:"ShiftLeft",SHIFT_RIGHT:"ShiftRight",CONTROL_LEFT:"ControlLeft",CONTROL_RIGHT:"ControlRight",ALT_LEFT:"AltLeft",ALT_RIGHT:"AltRight"};PP.Keyboard=class{constructor(){this._myKeyInfos=new Map;for(let t in PP.KeyID)this.addKey(PP.KeyID[t])}isKeyPressed(t){let i=!1;return this._myKeyInfos.has(t)&&(i=this._myKeyInfos.get(t).myIsPressed),i}isKeyPressStart(t){let i=!1;return this._myKeyInfos.has(t)&&(i=this._myKeyInfos.get(t).myIsPressStart),i}isKeyPressEnd(t){let i=!1;return this._myKeyInfos.has(t)&&(i=this._myKeyInfos.get(t).myIsPressEnd),i}addKey(t){this._myKeyInfos.set(t,this._createKeyInfo())}start(){window.addEventListener("keydown",this._keyDown.bind(this)),window.addEventListener("keyup",this._keyUp.bind(this))}update(t){if(!document.hasFocus())for(let i of this._myKeyInfos.values())i.myIsPressed&&(i.myIsPressed=!1,i.myIsPressEndToProcess=!0);for(let i of this._myKeyInfos.values())i.myIsPressStart=i.myIsPressStartToProcess,i.myIsPressEnd=i.myIsPressEndToProcess,i.myIsPressStartToProcess=!1,i.myIsPressEndToProcess=!1}_keyDown(t){this._keyPressedChanged(t.key,!0),t.key!=t.code&&this._keyPressedChanged(t.code,!0)}_keyUp(t){this._keyPressedChanged(t.key,!1),t.key!=t.code&&this._keyPressedChanged(t.code,!1)}_keyPressedChanged(t,i){if(this._myKeyInfos.has(t)){let s=this._myKeyInfos.get(t);i?(s.myIsPressed=!0,s.myIsPressStartToProcess=!0):(s.myIsPressed=!1,s.myIsPressEndToProcess=!0)}}_createKeyInfo(){return{myIsPressed:!1,myIsPressStart:!1,myIsPressStartToProcess:!1,myIsPressEnd:!1,myIsPressEndToProcess:!1}}}});var As=f(()=>{PP.MouseButtonID={LEFT:0,MIDDLE:1,RIGHT:2};PP.Mouse=class{constructor(){this._myButtonInfos=new Map;for(let t in PP.MouseButtonID)this._myButtonInfos.set(PP.MouseButtonID[t],this._createButtonInfo());this._myPreventContextMenuCallback=this._preventContextMenu.bind(this),this._myPreventMiddleButtonScrollCallback=this._preventMiddleButtonScroll.bind(this),this._myInternalMousePosition=PP.vec2_create(),this._myScreenSize=PP.vec2_create(),this._updateScreenSize(),this._myResetMovingDelay=.15,this._myResetMovingTimer=new PP.Timer(this._myResetMovingDelay,!1),this._myIsMoving=!1,this._myIsInsideView=!1,this._myIsValid=!1,this._myPointerUpOnPointerLeave=!0,this._myContextMenuActive=!0,this._myMiddleButtonScrollActive=!0,this._myPointerID=null,this._myLastValidPointerEvent=null,this._myPointerEventValidCallbacks=new Map,this._myProjectionMatrixInverse=PP.mat4_create(),this._myRotationQuat=PP.quat_create(),this._myOriginWorld=PP.vec3_create(),this._myDirectionWorld=PP.vec3_create()}start(){this._myOnPointerMoveCallback=this._onPointerAction.bind(this,this._onPointerMove.bind(this)),document.body.addEventListener("pointermove",this._myOnPointerMoveCallback),this._myOnPointerDownCallback=this._onPointerAction.bind(this,this._onPointerDown.bind(this)),document.body.addEventListener("pointerdown",this._myOnPointerDownCallback),this._myOnPointerUpCallback=this._onPointerAction.bind(this,this._onPointerUp.bind(this)),document.body.addEventListener("pointerup",this._myOnPointerUpCallback),this._myOnPointerLeaveCallback=this._onPointerLeave.bind(this),document.body.addEventListener("pointerleave",this._myOnPointerLeaveCallback),this._myOnPointerEnterCallback=this._onPointerEnter.bind(this),document.body.addEventListener("pointerenter",this._myOnPointerEnterCallback),this._myOnMouseDownCallback=this._onMouseAction.bind(this,this._onPointerDown.bind(this)),document.body.addEventListener("mousedown",this._myOnMouseDownCallback),this._myOnMouseUpCallback=this._onMouseAction.bind(this,this._onPointerUp.bind(this)),document.body.addEventListener("mouseup",this._myOnMouseUpCallback)}update(t){this._myResetMovingTimer.isRunning()&&(this._myResetMovingTimer.update(t),this._myResetMovingTimer.isDone()&&(this._myResetMovingTimer.reset(),this._myIsMoving=!1));for(let i of this._myButtonInfos.values())i.myIsPressStart=i.myIsPressStartToProcess,i.myIsPressEnd=i.myIsPressEndToProcess,i.myIsPressStartToProcess=!1,i.myIsPressEndToProcess=!1;this._updateScreenSize(),!this.isAnyButtonPressed()&&!this._myIsMoving&&(this._myPointerID=null),this._myLastValidPointerEvent!=null&&(this._isPointerEventValid(this._myLastValidPointerEvent)||(this._myIsInsideView&&this._onPointerLeave(this._myLastValidPointerEvent),this._myLastValidPointerEvent=null))}destroy(){document.body.removeEventListener("pointermove",this._myOnPointerMoveCallback),document.body.removeEventListener("pointerdown",this._myOnPointerDownCallback),document.body.removeEventListener("pointerup",this._myOnPointerUpCallback),document.body.removeEventListener("pointerleave",this._myOnPointerLeaveCallback),document.body.removeEventListener("pointerenter",this._myOnPointerEnterCallback),document.body.removeEventListener("mousedown",this._myOnMouseDownCallback),document.body.removeEventListener("mouseup",this._myOnMouseUpCallback),document.body.removeEventListener("contextmenu",this._myPreventContextMenuCallback),document.body.removeEventListener("mousedown",this._myPreventMiddleButtonScrollCallback)}isValid(){return this._myIsValid}isButtonPressed(t){let i=!1;return this._myButtonInfos.has(t)&&(i=this._myButtonInfos.get(t).myIsPressed),i}isAnyButtonPressed(){let t=!1;for(let i of this._myButtonInfos.values())if(i.myIsPressed){t=!0;break}return t}isButtonPressStart(t){let i=!1;return this._myButtonInfos.has(t)&&(i=this._myButtonInfos.get(t).myIsPressStart),i}isButtonPressEnd(t=null){let i=!1;return this._myButtonInfos.has(t)&&(i=this._myButtonInfos.get(t).myIsPressEnd),i}isMoving(){return this._myIsMoving}isInsideView(){return this._myIsInsideView}isTargetingRenderCanvas(){return this.isInsideView()&&this._myLastValidPointerEvent!=null&&this._myLastValidPointerEvent.target==WL.canvas}raycastWorld(t,i=new PP.RaycastResults){return this.getOriginWorld(t.myOrigin),this.getDirectionWorld(t.myDirection),i=PP.PhysicsUtils.raycast(t,i),i}getPositionScreen(t=PP.vec2_create()){let i=t;return i[0]=this._myInternalMousePosition[0],i[1]=this._myScreenSize[1]-1-this._myInternalMousePosition[1],i}getPositionScreenNormalized(t=PP.vec2_create()){let i=t;return i[0]=this._myScreenSize[0]==0?0:this._myInternalMousePosition[0]/this._myScreenSize[0]*2-1,i[1]=this._myScreenSize[1]==0?0:(this._myScreenSize[1]-1-this._myInternalMousePosition[1])/this._myScreenSize[1]*2-1,i}getScreenSize(){return this._myScreenSize}getPositionWorld(t,i=PP.vec3_create()){let s=this.getOriginWorld(this._myOriginWorld),n=this.getDirectionWorld(this._myDirectionWorld);return i=s.vec3_add(n.vec3_scale(t,i),i),i}getOriginWorld(t=PP.vec3_create()){return PP.XRUtils.isSessionActive()?PP.myPlayerObjects.myEyeLeft.pp_getPosition(t):PP.myPlayerObjects.myNonVRCamera.pp_getPosition(t),t}getDirectionWorld(t=PP.vec3_create()){let i=this._myInternalMousePosition[0]/this._myScreenSize[0],s=this._myInternalMousePosition[1]/this._myScreenSize[1],n=t;n.vec3_set(i*2-1,-s*2+1,-1);let o=this._myProjectionMatrixInverse;PP.XRUtils.isSessionActive()?o=PP.myPlayerObjects.myEyeLeft.pp_getComponentHierarchy("view").projectionMatrix.mat4_invert(o):o=PP.myPlayerObjects.myNonVRCamera.pp_getComponentHierarchy("view").projectionMatrix.mat4_invert(o),n.vec3_transformMat4(o,n),n.vec3_normalize(n);let a=n;return PP.XRUtils.isSessionActive()?a=n.vec3_transformQuat(PP.myPlayerObjects.myEyeLeft.pp_getRotationQuat(this._myRotationQuat),n):a=n.vec3_transformQuat(PP.myPlayerObjects.myNonVRCamera.pp_getRotationQuat(this._myRotationQuat),n),a.vec3_normalize(a),t}setTouchValid(t){let i="internal_touch_valid_callback";t?this.removePointerEventValidCallback(i):this.addPointerEventValidCallback(i,function(s){return s.pointerType=="mouse"})}setTargetOnlyRenderCanvas(t){let i="internal_target_only_render_canvas_callback";t?this.addPointerEventValidCallback(i,function(s){return s.target==WL.canvas}):this.removePointerEventValidCallback(i)}getLastValidPointerEvent(){return this._myLastValidPointerEvent}addPointerEventValidCallback(t,i){this._myPointerEventValidCallbacks.set(t,i)}removePointerEventValidCallback(t){this._myPointerEventValidCallbacks.delete(t)}isPointerUpOnPointerLeave(){return this._myPointerUpOnPointerLeave}setPointerUpOnPointerLeave(t){this._myPointerUpOnPointerLeave=t}isContextMenuActive(){return this._myContextMenuActive}setContextMenuActive(t){this._myContextMenuActive!=t&&(t?document.body.removeEventListener("contextmenu",this._myPreventContextMenuCallback):document.body.addEventListener("contextmenu",this._myPreventContextMenuCallback,!1),this._myContextMenuActive=t)}isMiddleButtonScrollActive(){return this._myMiddleButtonScrollActive}setMiddleButtonScrollActive(t){this._myMiddleButtonScrollActive!=t&&(t?document.body.removeEventListener("mousedown",this._myPreventMiddleButtonScrollCallback):document.body.addEventListener("mousedown",this._myPreventMiddleButtonScrollCallback,!1),this._myMiddleButtonScrollActive=t)}setResetMovingDelay(t){this._myResetMovingDelay=t}getResetMovingDelay(){return this._myResetMovingDelay}_onPointerAction(t,i){if(!!this._isPointerEventIDValid(i)){if(!this._isPointerEventValid(i)){this._myIsInsideView&&this._onPointerLeave(i);return}this._myIsInsideView||this._onPointerEnter(i),t(i),this._updatePositionAndScreen(i),this._updatePointerData(i)}}_onMouseAction(t,i){!this._myIsInsideView||!this._isMouseAllowed()||!this._isPointerEventIDValid(this._myLastValidPointerEvent)||!this._isPointerEventValid(this._myLastValidPointerEvent)||t(i)}_onPointerMove(t){this._myResetMovingTimer.start(this._myResetMovingDelay),this._myIsMoving=!0}_onPointerDown(t){let i=this._myButtonInfos.get(t.button);i.myIsPressed||(i.myIsPressed=!0,i.myIsPressStartToProcess=!0)}_onPointerUp(t){let i=this._myButtonInfos.get(t.button);i.myIsPressed&&(i.myIsPressed=!1,i.myIsPressEndToProcess=!0)}_onPointerLeave(t){if(!(!this._myIsInsideView||this._myLastValidPointerEvent==null||t.pointerId!=this._myLastValidPointerEvent.pointerId)){if(this._myIsInsideView=!1,this._myIsMoving=!1,this._myPointerUpOnPointerLeave)for(let i of this._myButtonInfos.values())i.myIsPressed&&(i.myIsPressed=!1,i.myIsPressEndToProcess=!0);this._myPointerID=null}}_onPointerEnter(t){this._myIsInsideView&&this._myPointerID!=null||!this._isPointerEventIDValid(t)||!this._isPointerEventValid(t)||(this._myIsInsideView=!0,this._updatePositionAndScreen(t),this._updatePointerData(t))}_preventContextMenu(t){!this._isPointerEventIDValid(t)||!this._isPointerEventValid(t)||t.preventDefault()}_preventMiddleButtonScroll(t){if(!(!this._isPointerEventIDValid(t)||!this._isPointerEventValid(t))&&t.button==1)return t.preventDefault(),!1}_updatePositionAndScreen(t){this._updateScreenSize(),this._myInternalMousePosition[0]=t.clientX,this._myInternalMousePosition[1]=t.clientY,this._myIsValid=!0}_updateScreenSize(){let t=document.body.getBoundingClientRect();this._myScreenSize[0]=t.width,this._myScreenSize[1]=t.height}_updatePointerData(t){this._myPointerID=t.pointerId,this._myLastValidPointerEvent=t}_isPointerEventIDValid(t){return t==null?!1:this._myPointerID==null||this._myPointerID==t.pointerId}_isPointerEventValid(t){if(t==null)return!1;let i=!0;for(let s of this._myPointerEventValidCallbacks.values())if(!s(t)){i=!1;break}return i}_isMouseAllowed(){return this._myLastValidPointerEvent!=null&&this._myLastValidPointerEvent.pointerId==1}_createButtonInfo(){return{myIsPressed:!1,myIsPressStart:!1,myIsPressStartToProcess:!1,myIsPressEnd:!1,myIsPressEndToProcess:!1}}}});var Ms=f(()=>{PP.InputManager=class{constructor(){this._myMouse=new PP.Mouse,this._myKeyboard=new PP.Keyboard,this._myGamepadManager=new PP.GamepadManager}start(){this._myMouse.start(),this._myKeyboard.start(),this._myGamepadManager.start()}update(t){this._myMouse.update(t),this._myKeyboard.update(t),this._myGamepadManager.update(t)}getMouse(){return this._myMouse}getKeyboard(){return this._myKeyboard}getGamepadManager(){return this._myGamepadManager}}});var Vs=f(()=>{WL.registerComponent("pp-input-manager",{_myGamepadFixForward:{type:WL.Type.Bool,default:!0},_myMousePreventContextMenu:{type:WL.Type.Bool,default:!0},_myMousePreventMiddleButtonScroll:{type:WL.Type.Bool,default:!0}},{init(){this._myInputManager=new PP.InputManager,PP.myInputManager=this._myInputManager,PP.myMouse=this._myInputManager.getMouse(),PP.myKeyboard=this._myInputManager.getKeyboard(),PP.myGamepadManager=this._myInputManager.getGamepadManager(),PP.myGamepads=PP.myGamepadManager.getGamepads(),PP.myLeftGamepad=PP.myGamepadManager.getLeftGamepad(),PP.myRightGamepad=PP.myGamepadManager.getRightGamepad()},start(){this._myInputManager.start(),this._setupMousePrevent(),this._addGamepadCores()},update(e){this._myInputManager.update(e)},_setupMousePrevent(){this._myMousePreventContextMenu&&PP.myMouse.setContextMenuActive(!1),this._myMousePreventMiddleButtonScroll&&PP.myMouse.setMiddleButtonScrollActive(!1)},_addGamepadCores(){let e=new PP.HandPoseParams;e.myReferenceObject=PP.myPlayerObjects.myPlayerPivot,e.myFixForward=this._myFixForward,e.myForceEmulatedVelocities=!1;let t=new PP.XRGamepadCore(PP.Handedness.LEFT,e),i=new PP.XRGamepadCore(PP.Handedness.RIGHT,e);PP.myLeftGamepad.addGamepadCore("left_xr_gamepad",t),PP.myRightGamepad.addGamepadCore("right_xr_gamepad",i);let s=new PP.KeyboardGamepadCore(PP.Handedness.LEFT,t.getHandPose()),n=new PP.KeyboardGamepadCore(PP.Handedness.RIGHT,i.getHandPose());PP.myLeftGamepad.addGamepadCore("left_keyboard_gamepad",s),PP.myRightGamepad.addGamepadCore("right_keyboard_gamepad",n)}});PP.myInputManager=null;PP.myMouse=null;PP.myKeyboard=null;PP.myGamepadManager=null;PP.myGamepads=null;PP.myLeftGamepad=null;PP.myRightGamepad=null});var Ds=f(()=>{WL.registerComponent("pp-switch-hand-object",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myGamepad:{type:WL.Type.Object},_myTrackedHand:{type:WL.Type.Object}},{init:function(){},start:function(){this._myHandednessType=PP.InputUtils.getHandednessByIndex(this._myHandedness),this._myFirstUpdate=!0,this._myCurrentInputSourceType=null},onActivate(){this._myFirstUpdate=!0},update:function(e){this._myFirstUpdate&&(this._myFirstUpdate=!1,this._start());let t=PP.InputUtils.getInputSourceTypeByHandedness(this._myHandednessType);t!=null&&this._myCurrentInputSourceType!=t&&(this._myCurrentInputSourceType=t,t==PP.InputSourceType.TRACKED_HAND?(this._myGamepad!=null&&this._myGamepad.pp_setActive(!1),this._myTrackedHand!=null&&this._myTrackedHand.pp_setActive(!0)):t==PP.InputSourceType.GAMEPAD&&(this._myTrackedHand!=null&&this._myTrackedHand.pp_setActive(!1),this._myGamepad!=null&&this._myGamepad.pp_setActive(!0)))},_start(){this._myGamepad!=null&&this._myGamepad.pp_setActive(!1),this._myTrackedHand!=null&&this._myTrackedHand.pp_setActive(!1),this._myCurrentInputSourceType=null}})});var Rs=f(()=>{WL.registerComponent("pp-tracked-hand-draw-joint",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myFixForward:{type:WL.Type.Bool,default:!0},_myJointID:{type:WL.Type.Enum,values:["Wrist","Thumb Metacarpal","Thumb Phalanx Proximal","Thumb Phalanx Distal","Thumb Tip","Index Metacarpal","Index Phalanx Proximal","Index Phalanx Intermediate","Index Phalanx Distal","Index Tip","Middle Metacarpal","Middle Phalanx Proximal","Middle Phalanx Intermediate","Middle Phalanx Distal","Middle Tip","Ring Metacarpal","Ring Phalanx Proximal","Ring Phalanx Intermediate","Ring Phalanx Distal","Ring Tip","Pinky Metacarpal","Pinky Phalanx Proximal","Pinky Phalanx Intermediate","Pinky Phalanx Distal","Pinky Tip"],default:"Wrist"},_myJointMesh:{type:WL.Type.Mesh},_myJointMaterial:{type:WL.Type.Material}},{init:function(){this._myHandednessInternal=PP.InputUtils.getHandednessByIndex(this._myHandedness),this._myJointIDInternal=PP.InputUtils.getJointIDByIndex(this._myJointID),this._myTrackedHandJointPose=new PP.TrackedHandJointPose(this._myHandednessInternal,this._myJointIDInternal),this._myTrackedHandJointPose.setFixForward(this._myFixForward)},start:function(){this._myTrackedHandJointPose.start(),this._buildTrackedHandHierarchy()},update:function(e){this._myTrackedHandJointPose.update(e),this._myJointMeshObject.pp_setTransformLocalQuat(this._myTrackedHandJointPose.getTransformQuat()),this._myJointMeshObject.pp_setScaleLocal(this._myTrackedHandJointPose.getJointRadius())},_buildTrackedHandHierarchy(){this._myJointMeshObject=this.object.pp_addObject();let e=this._myJointMeshObject.pp_addComponent("mesh");e.mesh=this._myJointMesh,e.material=this._myJointMaterial,this._myJointMeshObject.pp_setScaleLocal(0)}})});var Es=f(()=>{WL.registerComponent("pp-tracked-hand-draw-all-joints",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myFixForward:{type:WL.Type.Bool,default:!0},_myHideMetacarpals:{type:WL.Type.Bool,default:!0},_myJointMesh:{type:WL.Type.Mesh},_myJointMaterial:{type:WL.Type.Material}},{init:function(){},start:function(){this._buildTrackedHandHierarchy()},update:function(e){},_buildTrackedHandHierarchy(){this._myTrackedHandMeshObject=this.object.pp_addObject(),this._myJointMeshObjectList=[];for(let e in PP.TrackedHandJointID){let t=PP.TrackedHandJointID[e];if(!this._myHideMetacarpals||t!=PP.TrackedHandJointID.THUMB_METACARPAL&&t!=PP.TrackedHandJointID.INDEX_FINGER_METACARPAL&&t!=PP.TrackedHandJointID.MIDDLE_FINGER_METACARPAL&&t!=PP.TrackedHandJointID.RING_FINGER_METACARPAL&&t!=PP.TrackedHandJointID.PINKY_FINGER_METACARPAL){let i=this._myTrackedHandMeshObject.pp_addObject();this._myJointMeshObjectList[t]=i,i.pp_addComponent("pp-tracked-hand-draw-joint",{_myHandedness:this._myHandedness,_myFixForward:this._myFixForward,_myJointID:PP.TrackedHandJointIDIndex[e],_myJointMesh:this._myJointMesh,_myJointMaterial:this._myJointMaterial})}}}})});var Os=f(()=>{WL.registerComponent("pp-tracked-hand-draw-skin",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myFixForward:{type:WL.Type.Bool,default:!0},_myHandSkin:{type:WL.Type.Skin,default:null}},{init:function(){this._myHandednessInternal=PP.InputUtils.getHandednessByIndex(this._myHandedness),this._myTrackedHandPose=new PP.TrackedHandPose(this._myHandednessInternal),this._myTrackedHandPose.setFixForward(this._myFixForward)},start:function(){this._myTrackedHandPose.start(),this._prepareJoints()},update:function(t){this._myTrackedHandPose.update(t);for(let i=0;i<this._myJoints.length;i++){let s=this._myJoints[i],n=s.name,o=this._myTrackedHandPose.getJointPose(n);s.pp_setTransformLocalQuat(o.getTransformQuat())}},_prepareJoints(){this._myJoints=[];let e=this._myHandSkin.jointIds;for(let t=0;t<e.length;t++)this._myJoints[t]=new WL.Object(e[t])}})});var Ws=f(()=>{PP.GamepadButtonID={SELECT:0,SQUEEZE:1,TOUCHPAD:2,THUMBSTICK:3,BOTTOM_BUTTON:4,TOP_BUTTON:5,THUMB_REST:6};PP.GamepadButtonEvent={PRESS_START:0,PRESS_END:1,PRESSED:2,NOT_PRESSED:3,TOUCH_START:4,TOUCH_END:5,TOUCHED:6,NOT_TOUCHED:7,VALUE_CHANGED:8,ALWAYS:9};PP.GamepadAxesEvent={X_CHANGED:0,Y_CHANGED:1,AXES_CHANGED:2,ALWAYS:3};PP.GamepadButtonInfo=class{constructor(t,i){this.myID=t,this.myHandedness=i,this.myIsPressed=!1,this.myPrevIsPressed=!1,this.myIsTouched=!1,this.myPrevIsTouched=!1,this.myValue=0,this.myPrevValue=0,this.myTimePressed=0,this.myPrevTimePressed=0,this.myTimeNotPressed=0,this.myPrevTimeNotPressed=0,this.myTimeTouched=0,this.myPrevTimeTouched=0,this.myTimeNotTouched=0,this.myPrevTimeNotTouched=0,this.myMultiplePressStartCount=0,this.myPrevMultiplePressStartCount=0,this.myMultiplePressEndCount=0,this.myPrevMultiplePressEndCount=0,this.myMultipleTouchStartCount=0,this.myPrevMultipleTouchStartCount=0,this.myMultipleTouchEndCount=0,this.myPrevMultipleTouchEndCount=0}getID(){return this.myID}getHandedness(){return this.myHandedness}getValue(){return this.myValue}isPressed(){return this.myIsPressed}isTouched(){return this.myIsTouched}isPressStart(t=null){return this.myIsPressed&&!this.myPrevIsPressed&&(t==null||this.myMultiplePressStartCount==t)}isPressEnd(t=null){return!this.myIsPressed&&this.myPrevIsPressed&&(t==null||this.myMultiplePressEndCount==t)}isTouchStart(t=null){return this.myIsTouched&&!this.myPrevIsTouched&&(t==null||this.myMultipleTouchStartCount==t)}isTouchEnd(t=null){return!this.myIsTouched&&this.myPrevIsTouched&&(t==null||this.myMultipleTouchEndCount==t)}clone(){let t=new PP.GamepadButtonInfo(this.myID,this.myHandedness);return t.myIsPressed=this.myIsPressed,t.myPrevIsPressed=this.myPrevIsPressed,t.myIsTouched=this.myIsTouched,t.myPrevIsTouched=this.myPrevIsTouched,t.myValue=this.myValue,t.myPrevValue=this.myPrevValue,t.myTimePressed=this.myTimePressed,t.myPrevTimePressed=this.myPrevTimePressed,t.myTimeNotPressed=this.myTimeNotPressed,t.myPrevTimeNotPressed=this.myPrevTimeNotPressed,t.myTimeTouched=this.myTimeTouched,t.myPrevTimeTouched=this.myPrevTimeTouched,t.myTimeNotTouched=this.myTimeNotTouched,t.myPrevTimeNotTouched=this.myPrevTimeNotTouched,t.myMultiplePressStartCount=this.myMultiplePressStartCount,t.myPrevMultiplePressStartCount=this.myPrevMultiplePressStartCount,t.myMultiplePressEndCount=this.myMultiplePressEndCount,t.myPrevMultiplePressEndCount=this.myPrevMultiplePressEndCount,t.myMultipleTouchStartCount=this.myMultipleTouchStartCount,t.myPrevMultipleTouchStartCount=this.myPrevMultipleTouchStartCount,t.myMultipleTouchEndCount=this.myMultipleTouchEndCount,t.myPrevMultipleTouchEndCount=this.myPrevMultipleTouchEndCount,t}};PP.GamepadAxesInfo=class{constructor(t){this.myHandedness=t,this.myAxes=PP.vec2_create(0,0),this.myPrevAxes=PP.vec2_create(0,0)}getAxes(){return this.myAxes}getHandedness(){return this.myHandedness}clone(){let t=new PP.GamepadAxesInfo(this.myHandedness);return t.myAxes.vec2_copy(this.myAxes),t.myPrevAxes.vec2_copy(this.myPrevAxes),t}};PP.GamepadPulseInfo=class{constructor(){this.myIntensity=0,this.myDuration=0,this.myIsDevicePulsing=!1}clone(){let t=new PP.GamepadPulseInfo;return t.myIntensity=this.myIntensity,t.myDuration=this.myDuration,t.myIsDevicePulsing=this.myIsDevicePulsing,t}}});var ws=f(()=>{PP.BaseGamepad=class{constructor(t){this._myHandedness=t,this._myButtonInfos=[];for(let i in PP.GamepadButtonID)this._myButtonInfos[PP.GamepadButtonID[i]]=new PP.GamepadButtonInfo(PP.GamepadButtonID[i],this._myHandedness);this._myAxesInfo=new PP.GamepadAxesInfo(this._myHandedness),this._myButtonCallbacks=[];for(let i in PP.GamepadButtonID){this._myButtonCallbacks[PP.GamepadButtonID[i]]=[];for(let s in PP.GamepadButtonEvent)this._myButtonCallbacks[PP.GamepadButtonID[i]][PP.GamepadButtonEvent[s]]=new Map}this._myAxesCallbacks=[];for(let i in PP.GamepadAxesEvent)this._myAxesCallbacks[PP.GamepadAxesEvent[i]]=new Map;this._myPulseInfo=new PP.GamepadPulseInfo,this._myMultiplePressMaxDelay=.4,this._myMultipleTouchMaxDelay=.4}getHandedness(){return this._myHandedness}getButtonInfo(t){return this._myButtonInfos[t]}registerButtonEventListener(t,i,s,n){this._myButtonCallbacks[t][i].set(s,n)}unregisterButtonEventListener(t,i,s){this._myButtonCallbacks[t][i].delete(s)}getAxesInfo(){return this._myAxesInfo}registerAxesEventListener(t,i,s){this._myAxesCallbacks[t].set(i,s)}unregisterAxesEventListener(t,i){this._myAxesCallbacks[t].delete(i)}pulse(t,i=0){this._myPulseInfo.myIntensity=Math.min(Math.max(t,0),1),this._myPulseInfo.myDuration=Math.max(i,0)}stopPulse(){this._myPulseInfo.myIntensity=0,this._myPulseInfo.myDuration=0}isPulsing(){return this._myPulseInfo.myIntensity>0||this._myPulseInfo.myDuration>0}getPulseInfo(){return this._myPulseInfo}getMultiplePressMaxDelay(){return this._myMultiplePressMaxDelay}setMultiplePressMaxDelay(t){this._myMultiplePressMaxDelay=t}getMultipleTouchMaxDelay(){return this._myMultipleTouchMaxDelay}setMultipleTouchMaxDelay(t){this._myMultipleTouchMaxDelay=t}getHandPose(){return null}_start(){}_preUpdate(t){}_postUpdate(t){}_getButtonData(t){return this._createButtonData()}_getAxesData(){return this._createAxesData()}_getHapticActuators(){return[]}start(){this._start()}update(t){this._preUpdate(t),this._preUpdateButtonInfos(),this._updateButtonInfos(),this._postUpdateButtonInfos(t),this._preUpdateAxesInfos(),this._updateAxesInfos(),this._postUpdateAxesInfos(),this._updatePulse(t),this._postUpdate(t)}_preUpdateButtonInfos(){this._myButtonInfos.forEach(function(t){t.myPrevIsPressed=t.myIsPressed,t.myPrevIsTouched=t.myIsTouched,t.myPrevValue=t.myValue})}_updateButtonInfos(){this._updateSingleButtonInfo(PP.GamepadButtonID.SELECT),this._updateSingleButtonInfo(PP.GamepadButtonID.SQUEEZE),this._updateSingleButtonInfo(PP.GamepadButtonID.TOUCHPAD),this._updateSingleButtonInfo(PP.GamepadButtonID.THUMBSTICK),this._updateSingleButtonInfo(PP.GamepadButtonID.BOTTOM_BUTTON),this._updateSingleButtonInfo(PP.GamepadButtonID.TOP_BUTTON),this._updateSingleButtonInfo(PP.GamepadButtonID.THUMB_REST)}_updateSingleButtonInfo(t){let i=this._myButtonInfos[t],s=this._getButtonData(t);i.myIsPressed=s.myIsPressed,i.myIsTouched=s.myIsTouched,i.myValue=s.myValue}_postUpdateButtonInfos(t){this._myButtonInfos.forEach(function(i){i.myIsPressed?(i.myTimePressed+=t,i.myPrevIsPressed||(i.myMultiplePressStartCount+=1,i.myPrevTimeNotPressed=i.myTimeNotPressed,i.myTimeNotPressed=0),i.myPrevTimeNotPressed+i.myTimePressed>this._myMultiplePressMaxDelay&&i.myMultiplePressEndCount>0&&(i.myPrevMultiplePressEndCount=i.myMultiplePressEndCount,i.myMultiplePressEndCount=0),i.myTimePressed>this._myMultiplePressMaxDelay&&i.myMultiplePressStartCount>0&&(i.myPrevMultiplePressStartCount=i.myMultiplePressStartCount,i.myMultiplePressStartCount=0)):(i.myTimeNotPressed+=t,i.myPrevIsPressed&&(i.myMultiplePressEndCount+=1,i.myPrevTimePressed=i.myTimePressed,i.myTimePressed=0),i.myPrevTimePressed+i.myTimeNotPressed>this._myMultiplePressMaxDelay&&i.myMultiplePressStartCount>0&&(i.myPrevMultiplePressStartCount=i.myMultiplePressStartCount,i.myMultiplePressStartCount=0),i.myTimeNotPressed>this._myMultiplePressMaxDelay&&i.myMultiplePressEndCount>0&&(i.myPrevMultiplePressEndCount=i.myMultiplePressEndCount,i.myMultiplePressEndCount=0)),i.myIsTouched?(i.myTimeTouched+=t,i.myPrevIsTouched||(i.myMultipleTouchStartCount+=1,i.myPrevTimeNotTouched=i.myTimeNotTouched,i.myTimeNotTouched=0),i.myPrevTimeNotTouched+i.myTimeTouched>this._myMultipleTouchMaxDelay&&i.myMultipleTouchEndCount>0&&(i.myPrevMultipleTouchEndCount=i.myMultipleTouchEndCount,i.myMultipleTouchEndCount=0),i.myTimeTouched>this._myMultipleTouchMaxDelay&&i.myMultipleTouchStartCount>0&&(i.myPrevMultipleTouchStartCount=i.myMultipleTouchStartCount,i.myMultipleTouchStartCount=0)):(i.myTimeNotTouched+=t,i.myPrevIsTouched&&(i.myMultipleTouchEndCount+=1,i.myPrevTimeTouched=i.myTimeTouched,i.myTimeTouched=0),i.myPrevTimeTouched+i.myTimeNotTouched>this._myMultipleTouchMaxDelay&&i.myMultipleTouchStartCount>0&&(i.myPrevMultipleTouchStartCount=i.myMultipleTouchStartCount,i.myMultipleTouchStartCount=0),i.myTimeNotTouched>this._myMultipleTouchMaxDelay&&i.myMultipleTouchEndCount>0&&(i.myPrevMultipleTouchEndCount=i.myMultipleTouchEndCount,i.myMultipleTouchEndCount=0))}.bind(this));for(let i in PP.GamepadButtonID){let s=this._myButtonInfos[PP.GamepadButtonID[i]],n=this._myButtonCallbacks[PP.GamepadButtonID[i]];if(s.myIsPressed&&!s.myPrevIsPressed){let a=n[PP.GamepadButtonEvent.PRESS_START];this._triggerCallbacks(a,s)}if(!s.myIsPressed&&s.myPrevIsPressed){let a=n[PP.GamepadButtonEvent.PRESS_END];this._triggerCallbacks(a,s)}if(s.myIsPressed){let a=n[PP.GamepadButtonEvent.PRESSED];this._triggerCallbacks(a,s)}else{let a=n[PP.GamepadButtonEvent.NOT_PRESSED];this._triggerCallbacks(a,s)}if(s.myIsTouched&&!s.myPrevIsTouched){let a=n[PP.GamepadButtonEvent.TOUCH_START];this._triggerCallbacks(a,s)}if(!s.myIsTouched&&s.myPrevIsTouched){let a=n[PP.GamepadButtonEvent.TOUCH_END];this._triggerCallbacks(a,s)}if(s.myIsTouched){let a=n[PP.GamepadButtonEvent.TOUCHED];this._triggerCallbacks(a,s)}else{let a=n[PP.GamepadButtonEvent.NOT_TOUCHED];this._triggerCallbacks(a,s)}if(s.myValue!=s.myPrevValue){let a=n[PP.GamepadButtonEvent.VALUE_CHANGED];this._triggerCallbacks(a,s)}let o=n[PP.GamepadButtonEvent.ALWAYS];this._triggerCallbacks(o,s)}this._mySelectStart=!1,this._mySelectEnd=!1,this._mySqueezeStart=!1,this._mySqueezeEnd=!1}_preUpdateAxesInfos(){this._myAxesInfo.myPrevAxes[0]=this._myAxesInfo.myAxes[0],this._myAxesInfo.myPrevAxes[1]=this._myAxesInfo.myAxes[1]}_updateAxesInfos(){let t=this._getAxesData();this._myAxesInfo.myAxes[0]=t[0],this._myAxesInfo.myAxes[1]=t[1]}_postUpdateAxesInfos(){if(this._myAxesInfo.myAxes[0]!=this._myAxesInfo.myPrevAxes[0]){let i=this._myAxesCallbacks[PP.GamepadAxesEvent.X_CHANGED];this._triggerCallbacks(i,this._myAxesInfo)}if(this._myAxesInfo.myAxes[1]!=this._myAxesInfo.myPrevAxes[1]){let i=this._myAxesCallbacks[PP.GamepadAxesEvent.Y_CHANGED];this._triggerCallbacks(i,this._myAxesInfo)}if(this._myAxesInfo.myAxes[0]!=this._myAxesInfo.myPrevAxes[0]||this._myAxesInfo.myAxes[1]!=this._myAxesInfo.myPrevAxes[1]){let i=this._myAxesCallbacks[PP.GamepadAxesEvent.AXES_CHANGED];this._triggerCallbacks(i,this._myAxesInfo)}let t=this._myAxesCallbacks[PP.GamepadAxesEvent.ALWAYS];this._triggerCallbacks(t,this._myAxesInfo)}_updatePulse(t){if(this._myPulseInfo.myIsDevicePulsing||this._myPulseInfo.myIntensity>0){let i=this._getHapticActuators();if(i.length>0){if(this._myPulseInfo.myIntensity>0){for(let s of i)s.pulse(this._myPulseInfo.myIntensity,1e3);this._myPulseInfo.myIsDevicePulsing=!0}else if(this._myPulseInfo.myIsDevicePulsing){for(let s of i)s.reset();this._myPulseInfo.myIsDevicePulsing=!1}}else this._myPulseInfo.myIsDevicePulsing=!1}this._myPulseInfo.myDuration-=t,this._myPulseInfo.myDuration<=0&&(this._myPulseInfo.myIntensity=0,this._myPulseInfo.myDuration=0)}_triggerCallbacks(t,i){for(let s of t.values())s(i,this)}_createButtonData(){return{myIsPressed:!1,myIsTouched:!1,myValue:0}}_createAxesData(){return PP.vec2_create(0,0)}}});var Fs=f(()=>{PP.UniversalGamepad=class extends PP.BaseGamepad{constructor(t){super(t),this._myGamepadCores=new Map,this._myStarted=!1,this._myButtonData=this._createButtonData(),this._myAxesData=this._createAxesData(),this._myHapticActuators=[]}addGamepadCore(t,i){i.getHandedness()==this.getHandedness()&&(this._myGamepadCores.set(t,i),this._myStarted&&i.start())}getGamepadCore(t){return this._myGamepadCores.get(t)}removeGamepadCore(t){this._myGamepadCores.get(t)&&this._myGamepadCores.delete(t)}removeAllGamepadCores(){for(let t of this._myGamepadCores.keys())this.removeGamepadCore(t)}getHandPose(){let t=null;for(let i of this._myGamepadCores.values()){if(i.isGamepadCoreActive()){let s=i.getHandPose();(t==null||s!=null&&s.isValid())&&(t=s)}if(t!=null&&t.isValid())break}return t}_start(){for(let t of this._myGamepadCores.values())t.start();this._myStarted=!0}_preUpdate(t){for(let i of this._myGamepadCores.values())i.preUpdate(t)}_postUpdate(t){for(let i of this._myGamepadCores.values())i.postUpdate(t)}_getButtonData(t){this._myButtonData.myIsPressed=!1,this._myButtonData.myIsTouched=!1,this._myButtonData.myValue=0;for(let i of this._myGamepadCores.values())if(i.isGamepadCoreActive()){let s=i.getButtonData(t);this._myButtonData.myIsPressed=this._myButtonData.myIsPressed||s.myIsPressed,this._myButtonData.myIsTouched=this._myButtonData.myIsTouched||s.myIsTouched,Math.abs(s.myValue)>Math.abs(this._myButtonData.myValue)&&(this._myButtonData.myValue=s.myValue)}return this._myButtonData}_getAxesData(){this._myAxesData.vec2_zero();for(let t of this._myGamepadCores.values())if(t.isGamepadCoreActive()){let i=t.getAxesData();Math.abs(i[0])>Math.abs(this._myAxesData[0])&&(this._myAxesData[0]=i[0]),Math.abs(i[1])>Math.abs(this._myAxesData[1])&&(this._myAxesData[1]=i[1])}return this._myAxesData}_getHapticActuators(){this._myHapticActuators.pp_clear();for(let t of this._myGamepadCores.values())t.isGamepadCoreActive()&&this._myHapticActuators.push(...t.getHapticActuators());return this._myHapticActuators}}});var js=f(()=>{PP.GamepadCore=class{constructor(t,i){this._myHandedness=t,this._myHandPose=i}getHandedness(){return this._myHandedness}getHandPose(){return this._myHandPose}isGamepadCoreActive(){return!0}start(){}preUpdate(t){}postUpdate(t){}getButtonData(t){return this._createButtonData()}getAxesData(){return this._createAxesData()}getHapticActuators(){return[]}_createButtonData(){return{myIsPressed:!1,myIsTouched:!1,myValue:0}}_createAxesData(){return PP.vec2_create(0,0)}}});var ks=f(()=>{PP.XRGamepadCore=class extends PP.GamepadCore{constructor(t,i=new PP.HandPoseParams){super(t,new PP.HandPose(t,i)),this._mySelectPressed=!1,this._mySqueezePressed=!1,this._myIsXRSessionActive=!1,this._myInputSource=null,this._myGamepad=null,this._myButtonData=this._createButtonData(),this._myAxesData=this._createAxesData(),this._myHapticActuators=[]}isGamepadCoreActive(){return this._myIsXRSessionActive&&this._myGamepad!=null&&(this._myGamepad.connected==null||this._myGamepad.connected)}start(){this._myHandPose.start(),WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))}preUpdate(t){this._updateHandPose(t)}getButtonData(t){if(this._myButtonData.myIsPressed=!1,this._myButtonData.myIsTouched=!1,this._myButtonData.myValue=0,this.isGamepadCoreActive()){if(t<this._myGamepad.buttons.length){let i=this._myGamepad.buttons[t];t!=PP.GamepadButtonID.SELECT&&t!=PP.GamepadButtonID.SQUEEZE?this._myButtonData.myIsPressed=i.pressed:this._myButtonData.myIsPressed=this._getSpecialButtonPressed(t),this._myButtonData.myIsTouched=i.touched,this._myButtonData.myValue=i.value}else if(t==PP.GamepadButtonID.TOP_BUTTON&&this._myGamepad.buttons.length>=3){let i=this._myGamepad.buttons[2];this._myButtonData.myIsPressed=i.pressed,this._myButtonData.myIsTouched=i.touched,this._myButtonData.myValue=i.value}}return this._myButtonData}getAxesData(){if(this._myAxesData.vec2_zero(),this.isGamepadCoreActive()){let t=this._myGamepad.axes;t.length==4?(Math.abs(t[0])>Math.abs(t[2])?this._myAxesData[0]=t[0]:this._myAxesData[0]=t[2],Math.abs(t[1])>Math.abs(t[3])?this._myAxesData[1]=t[1]:this._myAxesData[1]=t[3]):t.length==2&&(this._myAxesData[0]=t[0],this._myAxesData[1]=t[1]),this._myAxesData[1]=-this._myAxesData[1]}return this._myAxesData}getHapticActuators(){return this._myHapticActuators.pp_clear(),this.isGamepadCoreActive()&&(this._myGamepad.hapticActuators!=null&&this._myGamepad.hapticActuators.length>0&&this._myHapticActuators.push(...this._myGamepad.hapticActuators),this._myGamepad.vibrationActuator!=null&&this._myHapticActuators.push(this._myGamepad.vibrationActuator)),this._myHapticActuators}_updateHandPose(t){this._myHandPose.update(t),this._myInputSource=this._myHandPose.getInputSource(),this._myInputSource!=null?this._myGamepad=this._myInputSource.gamepad:this._myGamepad=null}_getSpecialButtonPressed(t){let i=!1;return this.isGamepadCoreActive()&&(t==PP.GamepadButtonID.SELECT?i=this._mySelectPressed:t==PP.GamepadButtonID.SQUEEZE&&(i=this._mySqueezePressed)),i}_onXRSessionStart(t){t.addEventListener("selectstart",this._selectStart.bind(this)),t.addEventListener("selectend",this._selectEnd.bind(this)),t.addEventListener("squeezestart",this._squeezeStart.bind(this)),t.addEventListener("squeezeend",this._squeezeEnd.bind(this)),this._myIsXRSessionActive=!0}_onXRSessionEnd(t){this._myIsXRSessionActive=!1}_selectStart(t){this._myInputSource!=null&&this._myInputSource==t.inputSource&&(this._mySelectPressed=!0)}_selectEnd(t){this._myInputSource!=null&&this._myInputSource==t.inputSource&&(this._mySelectPressed=!1)}_squeezeStart(t){this._myInputSource!=null&&this._myInputSource==t.inputSource&&(this._mySqueezePressed=!0)}_squeezeEnd(t){this._myInputSource!=null&&this._myInputSource==t.inputSource&&(this._mySqueezePressed=!1)}}});var Hs=f(()=>{PP.KeyboardGamepadCore=class extends PP.GamepadCore{constructor(t,i=null){super(t,i),this._myHandPoseUpdateActive=!1,this._myButtonData=this._createButtonData(),this._myAxesData=this._createAxesData(),this._myHapticActuators=[]}setHandPoseUpdateActive(t){this._myHandPoseUpdateActive=t}isHandPoseUpdateActive(){return this._myHandPoseUpdateActive}isGamepadCoreActive(){return!PP.XRUtils.isSessionActive()}start(){this._myHandPose&&this._myHandPoseUpdateActive&&this._myHandPose.start()}preUpdate(t){this._myHandPose&&this._myHandPoseUpdateActive&&this._myHandPose.update(t)}getButtonData(t){if(this._myButtonData.myIsPressed=!1,this._myButtonData.myIsTouched=!1,this._myButtonData.myValue=0,this.isGamepadCoreActive())if(this.getHandedness()==PP.Handedness.LEFT)switch(t){case PP.GamepadButtonID.SELECT:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.E)||PP.myKeyboard.isKeyPressed(PP.KeyID.e);break;case PP.GamepadButtonID.SQUEEZE:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.Q)||PP.myKeyboard.isKeyPressed(PP.KeyID.q);break;case PP.GamepadButtonID.TOUCHPAD:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.X)||PP.myKeyboard.isKeyPressed(PP.KeyID.x);break;case PP.GamepadButtonID.THUMBSTICK:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.R)||PP.myKeyboard.isKeyPressed(PP.KeyID.r);break;case PP.GamepadButtonID.BOTTOM_BUTTON:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.C)||PP.myKeyboard.isKeyPressed(PP.KeyID.c);break;case PP.GamepadButtonID.TOP_BUTTON:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.F)||PP.myKeyboard.isKeyPressed(PP.KeyID.f);break;case PP.GamepadButtonID.THUMB_REST:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.V)||PP.myKeyboard.isKeyPressed(PP.KeyID.v);break}else switch(t){case PP.GamepadButtonID.SELECT:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.U)||PP.myKeyboard.isKeyPressed(PP.KeyID.u);break;case PP.GamepadButtonID.SQUEEZE:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.O)||PP.myKeyboard.isKeyPressed(PP.KeyID.o);break;case PP.GamepadButtonID.TOUCHPAD:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.M)||PP.myKeyboard.isKeyPressed(PP.KeyID.m);break;case PP.GamepadButtonID.THUMBSTICK:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.Y)||PP.myKeyboard.isKeyPressed(PP.KeyID.y);break;case PP.GamepadButtonID.BOTTOM_BUTTON:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.N)||PP.myKeyboard.isKeyPressed(PP.KeyID.n);break;case PP.GamepadButtonID.TOP_BUTTON:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.H)||PP.myKeyboard.isKeyPressed(PP.KeyID.h);break;case PP.GamepadButtonID.THUMB_REST:this._myButtonData.myIsPressed=PP.myKeyboard.isKeyPressed(PP.KeyID.B)||PP.myKeyboard.isKeyPressed(PP.KeyID.b);break}return this._myButtonData.myIsPressed&&(this._myButtonData.myIsTouched=!0,this._myButtonData.myValue=1),this._myButtonData}getAxesData(){return this._myAxesData.vec2_zero(),this.isGamepadCoreActive()&&(this.getHandedness()==PP.Handedness.LEFT?((PP.myKeyboard.isKeyPressed(PP.KeyID.W)||PP.myKeyboard.isKeyPressed(PP.KeyID.w))&&(this._myAxesData[1]+=1),(PP.myKeyboard.isKeyPressed(PP.KeyID.S)||PP.myKeyboard.isKeyPressed(PP.KeyID.s))&&(this._myAxesData[1]+=-1),(PP.myKeyboard.isKeyPressed(PP.KeyID.D)||PP.myKeyboard.isKeyPressed(PP.KeyID.d))&&(this._myAxesData[0]+=1),(PP.myKeyboard.isKeyPressed(PP.KeyID.A)||PP.myKeyboard.isKeyPressed(PP.KeyID.a))&&(this._myAxesData[0]+=-1)):((PP.myKeyboard.isKeyPressed(PP.KeyID.I)||PP.myKeyboard.isKeyPressed(PP.KeyID.i)||PP.myKeyboard.isKeyPressed(PP.KeyID.UP))&&(this._myAxesData[1]+=1),(PP.myKeyboard.isKeyPressed(PP.KeyID.K)||PP.myKeyboard.isKeyPressed(PP.KeyID.k)||PP.myKeyboard.isKeyPressed(PP.KeyID.DOWN))&&(this._myAxesData[1]+=-1),(PP.myKeyboard.isKeyPressed(PP.KeyID.L)||PP.myKeyboard.isKeyPressed(PP.KeyID.l)||PP.myKeyboard.isKeyPressed(PP.KeyID.RIGHT))&&(this._myAxesData[0]+=1),(PP.myKeyboard.isKeyPressed(PP.KeyID.J)||PP.myKeyboard.isKeyPressed(PP.KeyID.j)||PP.myKeyboard.isKeyPressed(PP.KeyID.LEFT))&&(this._myAxesData[0]+=-1))),this._myAxesData}getHapticActuators(){return this._myHapticActuators}}});var Ns=f(()=>{PP.VirtualGamepadGamepadCore=class extends PP.GamepadCore{constructor(t,i,s=null){super(i,s),this._myHandPoseUpdateActive=!1,this._myVirtualGamepad=t,this._myButtonData=this._createButtonData(),this._myAxesData=this._createAxesData(),this._myHapticActuators=[]}setHandPoseUpdateActive(t){this._myHandPoseUpdateActive=t}isHandPoseUpdateActive(){return this._myHandPoseUpdateActive}isGamepadCoreActive(){return this._myVirtualGamepad.isVisible()}start(){this._myHandPose&&this._myHandPoseUpdateActive&&this._myHandPose.start()}preUpdate(t){this._myHandPose&&this._myHandPoseUpdateActive&&this._myHandPose.update(t)}getButtonData(t){return this._myButtonData.myIsPressed=!1,this._myButtonData.myIsTouched=!1,this._myButtonData.myValue=0,this.isGamepadCoreActive()&&this._myVirtualGamepad.isButtonPressed(this._myHandedness,t)&&(this._myButtonData.myIsPressed=!0,this._myButtonData.myIsTouched=!0,this._myButtonData.myValue=1),this._myButtonData}getAxesData(){return this._myAxesData.vec2_zero(),this.isGamepadCoreActive()&&this._myVirtualGamepad.getAxes(this._myHandedness,this._myAxesData),this._myAxesData}getHapticActuators(){return this._myHapticActuators}}});var Us=f(()=>{WL.registerComponent("pp-gamepad-mesh-animator",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_mySelect:{type:WL.Type.Object,default:null},_mySqueeze:{type:WL.Type.Object,default:null},_myThumbstick:{type:WL.Type.Object,default:null},_myTopButton:{type:WL.Type.Object,default:null},_myBottomButton:{type:WL.Type.Object,default:null},_mySelectRotateAngle:{type:WL.Type.Float,default:15},_mySqueezeRotateAngle:{type:WL.Type.Float,default:11},_myThumbstickRotateAngle:{type:WL.Type.Float,default:15},_myThumbstickPressOffset:{type:WL.Type.Float,default:625e-6},_myTopButtonPressOffset:{type:WL.Type.Float,default:.0015},_myBottomButtonPressOffset:{type:WL.Type.Float,default:.0015},_myUsePressForSqueeze:{type:WL.Type.Bool,default:!1},_mySqueezePressOffset:{type:WL.Type.Float,default:.0015}},{start:function(){let e=null;this._myHandedness==0?e=PP.myLeftGamepad:e=PP.myRightGamepad,this._mySelect!=null&&(this._mySelectOriginalRotation=this._mySelect.pp_getRotationLocalQuat(),this._mySelectOriginalLeft=this._mySelect.pp_getLeftLocal()),this._mySqueeze!=null&&(this._mySqueezeOriginalPosition=this._mySqueeze.pp_getPositionLocal(),this._mySqueezeOriginalRotation=this._mySqueeze.pp_getRotationLocalQuat(),this._mySqueezeOriginalLeft=this._mySqueeze.pp_getLeftLocal(),this._mySqueezeOriginalForward=this._mySqueeze.pp_getForwardLocal()),this._myThumbstick!=null&&(this._myThumbstickOriginalPosition=this._myThumbstick.pp_getPositionLocal(),this._myThumbstickOriginalRotation=this._myThumbstick.pp_getRotationLocalQuat(),this._myThumbstickOriginalLeft=this._myThumbstick.pp_getLeftLocal(),this._myThumbstickOriginalUp=this._myThumbstick.pp_getUpLocal(),this._myThumbstickOriginalForward=this._myThumbstick.pp_getForwardLocal()),this._myTopButton!=null&&(this._myTopButtonOriginalPosition=this._myTopButton.pp_getPositionLocal(),this._myTopButtonOriginalUp=this._myTopButton.pp_getUpLocal()),this._myBottomButton!=null&&(this._myBottomButtonOriginalPosition=this._myBottomButton.pp_getPositionLocal(),this._myBottomButtonOriginalUp=this._myBottomButton.pp_getUpLocal()),this._myThumbstick!=null&&(e.registerButtonEventListener(PP.GamepadButtonID.THUMBSTICK,PP.GamepadButtonEvent.PRESS_START,this,this._thumbstickPressedStart.bind(this)),e.registerButtonEventListener(PP.GamepadButtonID.THUMBSTICK,PP.GamepadButtonEvent.PRESS_END,this,this._thumbstickPressedEnd.bind(this))),this._myTopButton!=null&&(e.registerButtonEventListener(PP.GamepadButtonID.TOP_BUTTON,PP.GamepadButtonEvent.PRESS_START,this,this._topButtonPressedStart.bind(this)),e.registerButtonEventListener(PP.GamepadButtonID.TOP_BUTTON,PP.GamepadButtonEvent.PRESS_END,this,this._topButtonPressedEnd.bind(this))),this._myBottomButton!=null&&(e.registerButtonEventListener(PP.GamepadButtonID.BOTTOM_BUTTON,PP.GamepadButtonEvent.PRESS_START,this,this._bottomButtonPressedStart.bind(this)),e.registerButtonEventListener(PP.GamepadButtonID.BOTTOM_BUTTON,PP.GamepadButtonEvent.PRESS_END,this,this._bottomButtonPressedEnd.bind(this))),this._mySelect!=null&&e.registerButtonEventListener(PP.GamepadButtonID.SELECT,PP.GamepadButtonEvent.VALUE_CHANGED,this,this._selectValueChanged.bind(this)),this._mySqueeze!=null&&e.registerButtonEventListener(PP.GamepadButtonID.SQUEEZE,PP.GamepadButtonEvent.VALUE_CHANGED,this,this._squeezeValueChanged.bind(this)),this._myThumbstick!=null&&e.registerAxesEventListener(PP.GamepadAxesEvent.AXES_CHANGED,this,this._thumbstickValueChanged.bind(this))},_thumbstickPressedStart:function(){let e=PP.vec3_create();return function(i,s){this._myThumbstickOriginalUp.vec3_scale(-this._myThumbstickPressOffset,e),this._myThumbstick.pp_translateLocal(e)}}(),_thumbstickPressedEnd:function(t,i){this._myThumbstick.pp_setPositionLocal(this._myThumbstickOriginalPosition)},_topButtonPressedStart:function(e,t){this._myTopButton.pp_translateAxisLocal(-this._myTopButtonPressOffset,this._myTopButtonOriginalUp)},_topButtonPressedEnd:function(e,t){this._myTopButton.pp_setPositionLocal(this._myTopButtonOriginalPosition)},_bottomButtonPressedStart:function(e,t){this._myBottomButton.pp_translateAxisLocal(-this._myBottomButtonPressOffset,this._myBottomButtonOriginalUp)},_bottomButtonPressedEnd:function(e,t){this._myBottomButton.pp_setPositionLocal(this._myBottomButtonOriginalPosition)},_selectValueChanged:function(e,t){this._mySelect.pp_setRotationLocalQuat(this._mySelectOriginalRotation),e.myValue>1e-5&&this._mySelect.pp_rotateAxisLocal(this._mySelectRotateAngle*e.myValue,this._mySelectOriginalLeft)},_squeezeValueChanged:function(e,t){if(this._mySqueeze.pp_setPositionLocal(this._mySqueezeOriginalPosition),this._mySqueeze.pp_setRotationLocalQuat(this._mySqueezeOriginalRotation),e.myValue>1e-5)if(this._myUsePressForSqueeze){let i=this._mySqueezePressOffset;this._myHandedness==1&&(i*=-1),this._mySqueeze.pp_translateAxisLocal(i*e.myValue,this._mySqueezeOriginalLeft)}else{let i=-this._mySqueezeRotateAngle;this._myHandedness==1&&(i*=-1),this._mySqueeze.pp_rotateAxisLocal(i*e.myValue,this._mySqueezeOriginalForward)}},_thumbstickValueChanged:function(e,t){this._myThumbstick.pp_setRotationLocalQuat(this._myThumbstickOriginalRotation);let i=this._myThumbstickRotateAngle*e.myAxes[1],s=this._myThumbstickRotateAngle*e.myAxes[0];Math.abs(i)>1e-4&&this._myThumbstick.pp_rotateAxisLocal(i,this._myThumbstickOriginalLeft),Math.abs(s)>1e-4&&this._myThumbstick.pp_rotateAxisLocal(s,this._myThumbstickOriginalForward)}})});var qs=f(()=>{PP.GamepadManager=class{constructor(){this._myLeftGamepad=new PP.UniversalGamepad(PP.Handedness.LEFT),this._myRightGamepad=new PP.UniversalGamepad(PP.Handedness.RIGHT)}start(){this._myLeftGamepad.start(),this._myRightGamepad.start()}update(t){this._myLeftGamepad.update(t),this._myRightGamepad.update(t)}getLeftGamepad(){return this._myLeftGamepad}getRightGamepad(){return this._myRightGamepad}getGamepad(t){let i=null;switch(t){case PP.Handedness.LEFT:i=this._myLeftGamepad;break;case PP.Handedness.RIGHT:i=this._myRightGamepad;break;default:i=null}return i}getGamepads(){let t=[];return t[PP.Handedness.LEFT]=this._myLeftGamepad,t[PP.Handedness.RIGHT]=this._myRightGamepad,t}}});var Gs=f(()=>{PP.GamepadUtils={_mySimultaneousPressMaxDelay:.15,_mySimultaneousTouchMaxDelay:.15,setSimultaneousPressMaxDelay:function(e){PP.GamepadUtils._mySimultaneousPressMaxDelay=e},setSimultaneousTouchMaxDelay:function(e){PP.GamepadUtils._mySimultaneousTouchMaxDelay=e},getSimultaneousPressMaxDelay:function(){return PP.GamepadUtils._mySimultaneousPressMaxDelay},getSimultaneousTouchMaxDelay:function(){return PP.GamepadUtils._mySimultaneousTouchMaxDelay},isAnyButtonPressStart:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let n of i)if(n.length==1)for(let o in PP.GamepadButtonID)n.push(PP.GamepadButtonID[o]);let s=!1;for(let n of i){let o=n[0];for(let a=1;a<n.length;a++){let l=n[a];if(o.getButtonInfo(l).isPressStart(t)){s=!0;break}}if(s)break}return s},areButtonsPressStart:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let o of i)if(o.length==1)for(let a in PP.GamepadButtonID)o.push(PP.GamepadButtonID[a]);let s=!0,n=!1;for(let o of i){let a=o[0];for(let l=1;l<o.length;l++){let u=o[l],y=a.getButtonInfo(u);if(!(y.myIsPressed&&(t==null||y.myMultiplePressStartCount==t)&&y.myTimePressed<PP.GamepadUtils._mySimultaneousPressMaxDelay)){s=!1;break}y.isPressStart(t)&&(n=!0)}if(!s)break}return s&&n},isAnyButtonPressEnd:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let n of i)if(n.length==1)for(let o in PP.GamepadButtonID)n.push(PP.GamepadButtonID[o]);let s=!1;for(let n of i){let o=n[0];for(let a=1;a<n.length;a++){let l=n[a];if(o.getButtonInfo(l).isPressEnd(t)){s=!0;break}}if(s)break}return s},areButtonsPressEnd:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let o of i)if(o.length==1)for(let a in PP.GamepadButtonID)o.push(PP.GamepadButtonID[a]);let s=!0,n=!1;for(let o of i){let a=o[0];for(let l=1;l<o.length;l++){let u=o[l],y=a.getButtonInfo(u);if(!(!y.myIsPressed&&(t==null||y.myMultiplePressEndCount==t)&&y.myTimeNotPressed<PP.GamepadUtils._mySimultaneousPressMaxDelay)){s=!1;break}y.isPressEnd(t)&&(n=!0)}if(!s)break}return s&&n},isAnyButtonTouchStart:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let n of i)if(n.length==1)for(let o in PP.GamepadButtonID)n.push(PP.GamepadButtonID[o]);let s=!1;for(let n of i){let o=n[0];for(let a=1;a<n.length;a++){let l=n[a];if(o.getButtonInfo(l).isTouchStart(t)){s=!0;break}}if(s)break}return s},areButtonsTouchStart:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let o of i)if(o.length==1)for(let a in PP.GamepadButtonID)o.push(PP.GamepadButtonID[a]);let s=!0,n=!1;for(let o of i){let a=o[0];for(let l=1;l<o.length;l++){let u=o[l],y=a.getButtonInfo(u);if(!(y.myIsTouched&&(t==null||y.myMultipleTouchStartCount==t)&&y.myTimeTouched<PP.GamepadUtils._mySimultaneousTouchMaxDelay)){s=!1;break}y.isTouchStart(t)&&(n=!0)}if(!s)break}return s&&n},isAnyButtonTouchEnd:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let n of i)if(n.length==1)for(let o in PP.GamepadButtonID)n.push(PP.GamepadButtonID[o]);let s=!1;for(let n of i){let o=n[0];for(let a=1;a<n.length;a++){let l=n[a];if(o.getButtonInfo(l).isTouchEnd(t)){s=!0;break}}if(s)break}return s},areButtonsTouchEnd:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let o of i)if(o.length==1)for(let a in PP.GamepadButtonID)o.push(PP.GamepadButtonID[a]);let s=!0,n=!1;for(let o of i){let a=o[0];for(let l=1;l<o.length;l++){let u=o[l],y=a.getButtonInfo(u);if(!(!y.myIsTouched&&(t==null||y.myMultipleTouchEndCount==t)&&y.myTimeNotTouched<PP.GamepadUtils._mySimultaneousTouchMaxDelay)){s=!1;break}y.isTouchEnd(t)&&(n=!0)}if(!s)break}return s&&n}}});var zs=f(()=>{WL.registerComponent("pp-gamepad-control-scheme",{_myShowOnStart:{type:WL.Type.Bool,default:!0},_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_mySelectText:{type:WL.Type.String,default:""},_mySqueezeText:{type:WL.Type.String,default:""},_myThumbstickText:{type:WL.Type.String,default:""},_myBottomButtonText:{type:WL.Type.String,default:""},_myTopButtonText:{type:WL.Type.String,default:""},_mySelect:{type:WL.Type.Object,default:null},_mySqueeze:{type:WL.Type.Object,default:null},_myThumbstick:{type:WL.Type.Object,default:null},_myBottomButton:{type:WL.Type.Object,default:null},_myTopButton:{type:WL.Type.Object,default:null},_myTextScaleMultiplier:{type:WL.Type.Float,default:1},_myTextOffsetMultiplier:{type:WL.Type.Float,default:1},_myLineLengthMultiplier:{type:WL.Type.Float,default:1},_myLineThicknessMultiplier:{type:WL.Type.Float,default:1},_myDistanceFromButtonsMultiplier:{type:WL.Type.Float,default:1},_myTextMaterial:{type:WL.Type.Material},_myLineMaterial:{type:WL.Type.Material}},{init:function(){},start:function(){this._myTextMaterialFinal=this._myTextMaterial!=null?this._myTextMaterial:PP.myDefaultResources.myMaterials.myText.clone(),this._myLineMaterialFinal=this._myLineMaterial!=null?this._myLineMaterial:PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),this._myHandednessType=PP.InputUtils.getHandednessByIndex(this._myHandedness),this._myControlSchemeDirection=this._myHandednessType==PP.Handedness.LEFT?1:-1,this._myVisible=!1,this._mySetVisibleNextUpdate=!1,this._createControlScheme(),this.setVisible(this._myShowOnStart),this._myVisibleBackup=this._myVisible},update:function(e){this._mySetVisibleNextUpdate&&(this._mySetVisibleNextUpdate=!1,this.setVisible(!1),this.setVisible(this._myVisibleBackup))},onActivate(){this._mySetVisibleNextUpdate=!0},onDeactivate(){this._myVisibleBackup=this._myVisible,this.setVisible(!1)},isVisible(){return this._myVisible},setVisible(e){this._myVisible=e,this._myRootObject!=null&&(this._myRootObject.pp_setActive(this._myVisible),this._myVisible&&this._hideEmptySchemes())},setSelectText(e){this._mySelectText=e,this._mySelectTextComponent.text=this._mySelectText,this.setVisible(this._myVisible)},setSqueezeText(e){this._mySqueezeText=e,this._mySqueezeTextComponent.text=this._mySqueezeText,this.setVisible(this._myVisible)},setThumbstickText(e){this._myThumbstickText=e,this._myThumbstickTextComponent.text=this._myThumbstickText,this.setVisible(this._myVisible)},setBottomButtonText(e){this._myBottomButtonText=e,this._myBottomButtonTextComponent.text=this._myBottomButtonText,this.setVisible(this._myVisible)},setTopButtonText(e){this._myTopButtonText=e,this._myTopButtonTextComponent.text=this._myTopButtonText,this.setVisible(this._myVisible)},_createControlScheme(){this._myRootObject=this.object.pp_addObject();let e=.02*this._myDistanceFromButtonsMultiplier,t=.0935*this._myLineLengthMultiplier,i=this._myThumbstick;this._mySelectObject=this._myRootObject.pp_addObject(),this._mySelectTextComponent=this._addScheme(this._mySelect,i,PP.vec3_create(0,0,e),PP.vec3_create(t*this._myControlSchemeDirection,0,0),this._mySelectObject),this._mySelectTextComponent.text=this._mySelectText,this._mySqueezeObject=this._myRootObject.pp_addObject(),this._mySqueezeTextComponent=this._addScheme(this._mySqueeze,i,PP.vec3_create(e*this._myControlSchemeDirection,0,0),PP.vec3_create(t*this._myControlSchemeDirection,0,0),this._mySqueezeObject),this._mySqueezeTextComponent.text=this._mySqueezeText,this._myThumbstickObject=this._myRootObject.pp_addObject(),this._myThumbstickTextComponent=this._addScheme(this._myThumbstick,i,PP.vec3_create(0,e,0),PP.vec3_create(-t*this._myControlSchemeDirection,0,0),this._myThumbstickObject),this._myThumbstickTextComponent.text=this._myThumbstickText;let s=this._myThumbstick.pp_getPositionLocal(),n=this._myThumbstick.pp_getUpLocal();{let l=this._myBottomButton.pp_getPositionLocal().vec3_sub(s).vec3_valueAlongAxis(n);this._myBottomButtonObject=this._myRootObject.pp_addObject(),this._myBottomButtonTextComponent=this._addScheme(this._myBottomButton,i,PP.vec3_create(0,e-l,0),PP.vec3_create(0,0,-t),this._myBottomButtonObject),this._myBottomButtonTextComponent.text=this._myBottomButtonText}{let l=this._myTopButton.pp_getPositionLocal().vec3_sub(s).vec3_valueAlongAxis(n);this._myTopButtonObject=this._myRootObject.pp_addObject(),this._myTopButtonTextComponent=this._addScheme(this._myTopButton,i,PP.vec3_create(0,e-l,0),PP.vec3_create(-t*this._myControlSchemeDirection,0,0).vec3_rotateAxis(-45*this._myControlSchemeDirection,PP.vec3_create(0,1,0)),this._myTopButtonObject),this._myTopButtonTextComponent.text=this._myTopButtonText}},_addScheme(e,t,i,s,n){let o=e.pp_getPositionLocal(),a=t.pp_getForwardLocal(),l=t.pp_getRightLocal(),u=t.pp_getUpLocal(),y=o.vec3_add(l.vec3_scale(i[0]));y.vec3_add(u.vec3_scale(i[1]),y),y.vec3_add(a.vec3_scale(i[2]),y);let r=y.vec3_add(l.vec3_scale(s[0]));r.vec3_add(u.vec3_scale(s[1]),r),r.vec3_add(a.vec3_scale(s[2]),r);let m=.01*this._myTextOffsetMultiplier,c=r.vec3_add(a.vec3_scale(-m));return this._addLine(y,r,n),this._addText(c,a,u,n)},_addLine(e,t,i){let s=t.vec3_sub(e),n=s.vec3_length();s.vec3_normalize(s),lineRootObject=i.pp_addObject(),lineObject=lineRootObject.pp_addObject();let o=lineObject.addComponent("mesh");o.mesh=PP.myDefaultResources.myMeshes.myCylinder,o.material=this._myLineMaterialFinal,lineRootObject.pp_setPositionLocal(e);let a=.001*this._myLineThicknessMultiplier;lineObject.pp_scaleObject(PP.vec3_create(a/2,n/2,a/2)),lineObject.pp_setUpLocal(s),lineObject.pp_translateObject(PP.vec3_create(0,n/2,0))},_addText(e,t,i,s){let n=s.pp_addObject();n.pp_setPositionLocal(e),n.pp_lookToLocal(i,t),n.pp_scaleObject(.0935*this._myTextScaleMultiplier);let o=n.pp_addComponent("text");return o.alignment=WL.Alignment.Center,o.justification=WL.Justification.Top,o.material=this._myTextMaterialFinal,o},_hideEmptySchemes(){this._mySelectText.length==0&&this._mySelectObject.pp_setActive(!1),this._mySqueezeText.length==0&&this._mySqueezeObject.pp_setActive(!1),this._myThumbstickText.length==0&&this._myThumbstickObject.pp_setActive(!1),this._myBottomButtonText.length==0&&this._myBottomButtonObject.pp_setActive(!1),this._myTopButtonText.length==0&&this._myTopButtonObject.pp_setActive(!1)}})});var Qs=f(()=>{PP.VirtualGamepad=class{constructor(t=new PP.VirtualGamepadParams){this._myParams=t,this._myVisible=!0,this._myVirtualGamepadContainer=null,this._myVirtualGamepadVirtualButtons=[],this._myVirtualGamepadVirtualButtons[PP.Handedness.LEFT]=[],this._myVirtualGamepadVirtualButtons[PP.Handedness.RIGHT]=[],this._myVirtualGamepadVirtualButtons[PP.Handedness.LEFT][PP.GamepadButtonID.SELECT]=null,this._myVirtualGamepadVirtualButtons[PP.Handedness.LEFT][PP.GamepadButtonID.SQUEEZE]=null,this._myVirtualGamepadVirtualButtons[PP.Handedness.LEFT][PP.GamepadButtonID.THUMBSTICK]=null,this._myVirtualGamepadVirtualButtons[PP.Handedness.LEFT][PP.GamepadButtonID.TOP_BUTTON]=null,this._myVirtualGamepadVirtualButtons[PP.Handedness.LEFT][PP.GamepadButtonID.BOTTOM_BUTTON]=null,this._myVirtualGamepadVirtualButtons[PP.Handedness.RIGHT][PP.GamepadButtonID.SELECT]=null,this._myVirtualGamepadVirtualButtons[PP.Handedness.RIGHT][PP.GamepadButtonID.SQUEEZE]=null,this._myVirtualGamepadVirtualButtons[PP.Handedness.RIGHT][PP.GamepadButtonID.THUMBSTICK]=null,this._myVirtualGamepadVirtualButtons[PP.Handedness.RIGHT][PP.GamepadButtonID.TOP_BUTTON]=null,this._myVirtualGamepadVirtualButtons[PP.Handedness.RIGHT][PP.GamepadButtonID.BOTTOM_BUTTON]=null,this._myButtonsAmount=this._myVirtualGamepadVirtualButtons[PP.Handedness.LEFT].length,this._myVirtualGamepadVirtualThumbsticks=[],this._myVirtualGamepadVirtualThumbsticks[PP.Handedness.LEFT]=null,this._myVirtualGamepadVirtualThumbsticks[PP.Handedness.RIGHT]=null}isVisible(){return this._myVisible}setVisible(t){if(this._myVisible!=t&&(this._myVisible=t,this._myVirtualGamepadContainer!=null)){this._myVisible?this._myVirtualGamepadContainer.style.display="block":this._myVirtualGamepadContainer.style.display="none";for(let i in this._myVirtualGamepadVirtualButtons)for(let s in this._myVirtualGamepadVirtualButtons[i]){let n=this._myVirtualGamepadVirtualButtons[i][s];n?.setActive(this._myVisible)}for(let i in this._myVirtualGamepadVirtualThumbsticks){let s=this._myVirtualGamepadVirtualThumbsticks[i];s?.setActive(this._myVisible)}}}isButtonPressed(t,i){if(!this._myVisible)return!1;let s=this._myVirtualGamepadVirtualButtons[t][i];return s!=null?s.isPressed():!1}getAxes(t,i=PP.vec2_create(0,0)){if(!this._myVisible)return i;let s=this._myVirtualGamepadVirtualThumbsticks[t];return s!=null&&i.vec2_copy(s.getAxes()),i}start(){this._buildVirtualGamepad();let t=this._myVisible;this._myVisible=!this._myVisible,this.setVisible(t)}update(t){if(this._myParams.myAutoUpdateVisibility&&(PP.XRUtils.isSessionActive()&&WL.vrSupported==1?this.setVisible(!1):this._myParams.myShowOnDesktop&&PP.BrowserUtils.isDesktop()&&WL.vrSupported==0?this.setVisible(!0):this._myParams.myShowOnHeadset&&PP.BrowserUtils.isDesktop()&&WL.vrSupported==1?this.setVisible(!0):this._myParams.myShowOnMobile&&PP.BrowserUtils.isMobile()?this.setVisible(!0):this.setVisible(!1)),this._myVisible){for(let i in this._myVirtualGamepadVirtualButtons)for(let s in this._myVirtualGamepadVirtualButtons[i]){let n=this._myVirtualGamepadVirtualButtons[i][s];n?.update(t)}for(let i in this._myVirtualGamepadVirtualThumbsticks){let s=this._myVirtualGamepadVirtualThumbsticks[i];s?.update(t)}this._setMouseHoverActive(!(this._myParams.myDisableMouseHoverWhenPressed&&this._isAnyElementPressed()))}}_buildVirtualGamepad(){this._documentBodySetup(),this._myVirtualGamepadContainer=document.createElement("div"),this._myVirtualGamepadContainer.style.display="block",this._myVirtualGamepadContainer.style.opacity=this._myParams.myOpacity.toString(),document.body.appendChild(this._myVirtualGamepadContainer);let t=document.createElement("div");this._myVirtualGamepadContainer.appendChild(t);let i=document.createElement("div");this._myVirtualGamepadContainer.appendChild(i);let s=this._myParams.myButtonsOrder[PP.Handedness.LEFT].length;for(let n=0;n<s;n++){if(this._myParams.myButtonsOrder[PP.Handedness.LEFT][n]!=null){let o=this._myParams.myButtonsOrder[PP.Handedness.LEFT][n][0],a=this._myParams.myButtonsOrder[PP.Handedness.LEFT][n][1];this._buildButton(t,PP.Handedness.LEFT,n,o,a)}if(this._myParams.myButtonsOrder[PP.Handedness.RIGHT][n]!=null){let o=this._myParams.myButtonsOrder[PP.Handedness.RIGHT][n][0],a=this._myParams.myButtonsOrder[PP.Handedness.RIGHT][n][1];this._buildButton(i,PP.Handedness.RIGHT,n,o,a)}}if(this._myParams.myThumbsticksOrder[PP.Handedness.LEFT]!=null){let n=this._myParams.myThumbsticksOrder[PP.Handedness.LEFT];this._buildThumbstick(t,PP.Handedness.LEFT,n)}if(this._myParams.myThumbsticksOrder[PP.Handedness.RIGHT]!=null){let n=this._myParams.myThumbsticksOrder[PP.Handedness.RIGHT];this._buildThumbstick(i,PP.Handedness.RIGHT,n)}}_documentBodySetup(){document.body.style.overflow="hidden",document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.body.style.webkitTapHighlightColor="transparent",document.body.style.touchAction="none",document.addEventListener("gesturestart",function(t){t.preventDefault()})}_buildButton(t,i,s,n,o){let a=new PP.VirtualGamepadVirtualButton(t,this._myParams,i,s,n,o);this._myVirtualGamepadVirtualButtons[n][o]=a}_buildThumbstick(t,i,s){let n=new PP.VirtualGamepadVirtualThumbstick(t,this._myParams,i,s);this._myVirtualGamepadVirtualThumbsticks[s]=n}_createSizeValue(t,i){return"min("+t.toFixed(3)+"vmax,"+(t*i).toFixed(3)+"vw)"}_isAnyElementPressed(){let t=!1;for(let i in this._myVirtualGamepadVirtualButtons)for(let s in this._myVirtualGamepadVirtualButtons[i]){let n=this._myVirtualGamepadVirtualButtons[i][s];if(n!=null&&n.isPressed()){t=!0;break}}if(!t)for(let i in this._myVirtualGamepadVirtualThumbsticks){let s=this._myVirtualGamepadVirtualThumbsticks[i];if(s!=null&&s.isPressed()){t=!0;break}}return t}_setMouseHoverActive(t){for(let i in this._myVirtualGamepadVirtualButtons)for(let s in this._myVirtualGamepadVirtualButtons[i]){let n=this._myVirtualGamepadVirtualButtons[i][s];n?.setMouseHoverActive(t)}for(let i in this._myVirtualGamepadVirtualThumbsticks){let s=this._myVirtualGamepadVirtualThumbsticks[i];s?.setMouseHoverActive(t)}}}});var Xs=f(()=>{WL.registerComponent("pp-virtual-gamepad",{_myShowOnDesktop:{type:WL.Type.Bool,default:!1},_myShowOnMobile:{type:WL.Type.Bool,default:!0},_myShowOnHeadset:{type:WL.Type.Bool,default:!1},_myReleaseOnPointerLeave:{type:WL.Type.Bool,default:!1},_myAddToUniversalGamepad:{type:WL.Type.Bool,default:!0},_myOpacity:{type:WL.Type.Float,default:.5},_myIconColor:{type:WL.Type.String,default:"#e0e0e0"},_myBackgroundColor:{type:WL.Type.String,default:"#616161"},_myInterfaceScale:{type:WL.Type.Float,default:1},_myMarginScale:{type:WL.Type.Float,default:1},ADVANCED_PARAMS_BELOW:{type:WL.Type.String,default:""},_myLabelFontSize:{type:WL.Type.Float,default:2},_myLabelFontFamily:{type:WL.Type.String,default:"sans-serif"},_myLabelFontWeight:{type:WL.Type.String,default:"bold"},_myImagePressedBrightness:{type:WL.Type.Float,default:.5},_myLeftSelectButtonVisible:{type:WL.Type.Bool,default:!0},_myLeftSelectButtonOrderIndex:{type:WL.Type.Int,default:1},_myLeftSelectButtonIconType:{type:WL.Type.Enum,values:["none","label","image","dot","circle","square","ring","frame"],default:"frame"},_myLeftSelectButtonIconLabelOrImageUrl:{type:WL.Type.String,default:""},_myLeftSqueezeButtonVisible:{type:WL.Type.Bool,default:!0},_myLeftSqueezeButtonOrderIndex:{type:WL.Type.Int,default:0},_myLeftSqueezeButtonIconType:{type:WL.Type.Enum,values:["none","label","image","dot","circle","square","ring","frame"],default:"square"},_myLeftSqueezeButtonIconLabelOrImageUrl:{type:WL.Type.String,default:""},_myLeftThumbstickButtonVisible:{type:WL.Type.Bool,default:!0},_myLeftThumbstickButtonOrderIndex:{type:WL.Type.Int,default:4},_myLeftThumbstickButtonIconType:{type:WL.Type.Enum,values:["none","label","image","dot","circle","square","ring","frame"],default:"dot"},_myLeftThumbstickButtonIconLabelOrImageUrl:{type:WL.Type.String,default:""},_myLeftTopButtonVisible:{type:WL.Type.Bool,default:!0},_myLeftTopButtonOrderIndex:{type:WL.Type.Int,default:2},_myLeftTopButtonIconType:{type:WL.Type.Enum,values:["none","label","image","dot","circle","square","ring","frame"],default:"circle"},_myLeftTopButtonIconLabelOrImageUrl:{type:WL.Type.String,default:""},_myLeftBottomButtonVisible:{type:WL.Type.Bool,default:!0},_myLeftBottomButtonOrderIndex:{type:WL.Type.Int,default:3},_myLeftBottomButtonIconType:{type:WL.Type.Enum,values:["none","label","image","dot","circle","square","ring","frame"],default:"ring"},_myLeftBottomButtonIconLabelOrImageUrl:{type:WL.Type.String,default:""},_myRightSelectButtonVisible:{type:WL.Type.Bool,default:!0},_myRightSelectButtonOrderIndex:{type:WL.Type.Int,default:1},_myRightSelectButtonIconType:{type:WL.Type.Enum,values:["none","label","image","dot","circle","square","ring","frame"],default:"frame"},_myRightSelectButtonIconLabelOrImageUrl:{type:WL.Type.String,default:""},_myRightSqueezeButtonVisible:{type:WL.Type.Bool,default:!0},_myRightSqueezeButtonOrderIndex:{type:WL.Type.Int,default:0},_myRightSqueezeButtonIconType:{type:WL.Type.Enum,values:["none","label","image","dot","circle","square","ring","frame"],default:"square"},_myRightSqueezeButtonIconLabelOrImageUrl:{type:WL.Type.String,default:""},_myRightThumbstickButtonVisible:{type:WL.Type.Bool,default:!0},_myRightThumbstickButtonOrderIndex:{type:WL.Type.Int,default:4},_myRightThumbstickButtonIconType:{type:WL.Type.Enum,values:["none","label","image","dot","circle","square","ring","frame"],default:"dot"},_myRightThumbstickButtonIconLabelOrImageUrl:{type:WL.Type.String,default:""},_myRightTopButtonVisible:{type:WL.Type.Bool,default:!0},_myRightTopButtonOrderIndex:{type:WL.Type.Int,default:2},_myRightTopButtonIconType:{type:WL.Type.Enum,values:["none","label","image","dot","circle","square","ring","frame"],default:"circle"},_myRightTopButtonIconLabelOrImageUrl:{type:WL.Type.String,default:""},_myRightBottomButtonVisible:{type:WL.Type.Bool,default:!0},_myRightBottomButtonOrderIndex:{type:WL.Type.Int,default:3},_myRightBottomButtonIconType:{type:WL.Type.Enum,values:["none","label","image","dot","circle","square","ring","frame"],default:"ring"},_myRightBottomButtonIconLabelOrImageUrl:{type:WL.Type.String,default:""}},{start(){let e=new PP.VirtualGamepadParams;e.defaultSetup();for(let t in e.myButtonParams)for(let i in e.myButtonParams[t]){let s=e.myButtonParams[t][i];s.myIconParams.myBackgroundColor=this._myBackgroundColor,s.myIconParams.myBackgroundPressedColor=this._myIconColor,s.myIconParams.myIconColor=this._myIconColor,s.myIconParams.myIconPressedColor=this._myBackgroundColor}for(let t in e.myThumbstickParams){let i=e.myThumbstickParams[t];i.myBackgroundColor=this._myBackgroundColor,i.myIconParams.myBackgroundColor=this._myIconColor,i.myIconParams.myBackgroundPressedColor=this._myIconColor,i.myIconParams.myIconColor=this._myBackgroundColor,i.myIconParams.myIconPressedColor=this._myBackgroundColor}e.myOpacity=this._myOpacity,e.myReleaseOnPointerLeave=this._myReleaseOnPointerLeave,e.myInterfaceScale=this._myInterfaceScale,e.myMarginScale=this._myMarginScale,e.myShowOnDesktop=this._myShowOnDesktop,e.myShowOnMobile=this._myShowOnMobile,e.myShowOnHeadset=this._myShowOnHeadset,e.myShowOnDesktop||e.myShowOnMobile||e.myShowOnHeadset?e.myAutoUpdateVisibility=!0:e.myAutoUpdateVisibility=!1,this._advancedSetup(e),this._myVirtualGamepad=new PP.VirtualGamepad(e),e.myAutoUpdateVisibility||this._myVirtualGamepad.setVisible(!1),this._myVirtualGamepad.start(),this._myFirstUpdate=!0},update(e){if(this._myFirstUpdate&&(this._myFirstUpdate=!1,this._myAddToUniversalGamepad)){let t=new PP.VirtualGamepadGamepadCore(this._myVirtualGamepad,PP.Handedness.LEFT,PP.myLeftGamepad.getGamepadCore("left_xr_gamepad").getHandPose()),i=new PP.VirtualGamepadGamepadCore(this._myVirtualGamepad,PP.Handedness.RIGHT,PP.myRightGamepad.getGamepadCore("right_xr_gamepad").getHandPose());PP.myLeftGamepad.addGamepadCore("left_virtual_gamepad",t),PP.myRightGamepad.addGamepadCore("right_virtual_gamepad",i)}this._myVirtualGamepad.update(e)},_advancedSetup(e){e.myButtonsOrder[PP.Handedness.LEFT]=[null,null,null,null,null],e.myButtonsOrder[PP.Handedness.RIGHT]=[null,null,null,null,null];{let t=e.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.SELECT];t.myIconParams.myIconType=this._myLeftSelectButtonIconType,t.myIconParams.myLabel=this._myLeftSelectIconLabelOrImageUrl,t.myIconParams.myImageURL=this._myLeftSelectIconLabelOrImageUrl,t.myIconParams.myLabelFontSize=this._myLabelFontSize,t.myIconParams.myLabelFontFamily=this._myLabelFontFamily,t.myIconParams.myLabelFontWeight=this._myLabelFontWeight,t.myIconParams.myImagePressedBrightness=this._myImagePressedBrightness,this._myLeftSelectButtonVisible&&(e.myButtonsOrder[PP.Handedness.LEFT][this._myLeftSelectButtonOrderIndex]=[PP.Handedness.LEFT,PP.GamepadButtonID.SELECT])}{let t=e.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.SQUEEZE];t.myIconParams.myIconType=this._myLeftSqueezeButtonIconType,t.myIconParams.myLabel=this._myLeftSqueezeIconLabelOrImageUrl,t.myIconParams.myImageURL=this._myLeftSqueezeIconLabelOrImageUrl,t.myIconParams.myLabelFontSize=this._myLabelFontSize,t.myIconParams.myLabelFontFamily=this._myLabelFontFamily,t.myIconParams.myLabelFontWeight=this._myLabelFontWeight,t.myIconParams.myImagePressedBrightness=this._myImagePressedBrightness,this._myLeftSqueezeButtonVisible&&(e.myButtonsOrder[PP.Handedness.LEFT][this._myLeftSqueezeButtonOrderIndex]=[PP.Handedness.LEFT,PP.GamepadButtonID.SQUEEZE])}{let t=e.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.THUMBSTICK];t.myIconParams.myIconType=this._myLeftThumbstickButtonIconType,t.myIconParams.myLabel=this._myLeftThumbstickButtonIconLabelOrImageUrl,t.myIconParams.myImageURL=this._myLeftThumbstickButtonIconLabelOrImageUrl,t.myIconParams.myLabelFontSize=this._myLabelFontSize,t.myIconParams.myLabelFontFamily=this._myLabelFontFamily,t.myIconParams.myLabelFontWeight=this._myLabelFontWeight,t.myIconParams.myImagePressedBrightness=this._myImagePressedBrightness,this._myLeftThumbstickButtonVisible&&(e.myButtonsOrder[PP.Handedness.LEFT][this._myLeftThumbstickButtonOrderIndex]=[PP.Handedness.LEFT,PP.GamepadButtonID.THUMBSTICK])}{let t=e.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.TOP_BUTTON];t.myIconParams.myIconType=this._myLeftTopButtonIconType,t.myIconParams.myLabel=this._myLeftTopButtonIconLabelOrImageUrl,t.myIconParams.myImageURL=this._myLeftTopButtonIconLabelOrImageUrl,t.myIconParams.myLabelFontSize=this._myLabelFontSize,t.myIconParams.myLabelFontFamily=this._myLabelFontFamily,t.myIconParams.myLabelFontWeight=this._myLabelFontWeight,t.myIconParams.myImagePressedBrightness=this._myImagePressedBrightness,this._myLeftTopButtonVisible&&(e.myButtonsOrder[PP.Handedness.LEFT][this._myLeftTopButtonOrderIndex]=[PP.Handedness.LEFT,PP.GamepadButtonID.TOP_BUTTON])}{let t=e.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.BOTTOM_BUTTON];t.myIconParams.myIconType=this._myLeftBottomButtonIconType,t.myIconParams.myLabel=this._myLeftBottomButtonIconLabelOrImageUrl,t.myIconParams.myImageURL=this._myLeftBottomButtonIconLabelOrImageUrl,t.myIconParams.myLabelFontSize=this._myLabelFontSize,t.myIconParams.myLabelFontFamily=this._myLabelFontFamily,t.myIconParams.myLabelFontWeight=this._myLabelFontWeight,t.myIconParams.myImagePressedBrightness=this._myImagePressedBrightness,this._myLeftBottomButtonVisible&&(e.myButtonsOrder[PP.Handedness.LEFT][this._myLeftBottomButtonOrderIndex]=[PP.Handedness.LEFT,PP.GamepadButtonID.BOTTOM_BUTTON])}{let t=e.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.SELECT];t.myIconParams.myIconType=this._myRightSelectButtonIconType,t.myIconParams.myLabel=this._myRightSelectIconLabelOrImageUrl,t.myIconParams.myImageURL=this._myRightSelectIconLabelOrImageUrl,t.myIconParams.myLabelFontSize=this._myLabelFontSize,t.myIconParams.myLabelFontFamily=this._myLabelFontFamily,t.myIconParams.myLabelFontWeight=this._myLabelFontWeight,t.myIconParams.myImagePressedBrightness=this._myImagePressedBrightness,this._myRightSelectButtonVisible&&(e.myButtonsOrder[PP.Handedness.RIGHT][this._myRightSelectButtonOrderIndex]=[PP.Handedness.RIGHT,PP.GamepadButtonID.SELECT])}{let t=e.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.SQUEEZE];t.myIconParams.myIconType=this._myRightSqueezeButtonIconType,t.myIconParams.myLabel=this._myRightSqueezeIconLabelOrImageUrl,t.myIconParams.myImageURL=this._myRightSqueezeIconLabelOrImageUrl,t.myIconParams.myLabelFontSize=this._myLabelFontSize,t.myIconParams.myLabelFontFamily=this._myLabelFontFamily,t.myIconParams.myLabelFontWeight=this._myLabelFontWeight,t.myIconParams.myImagePressedBrightness=this._myImagePressedBrightness,this._myRightSqueezeButtonVisible&&(e.myButtonsOrder[PP.Handedness.RIGHT][this._myRightSqueezeButtonOrderIndex]=[PP.Handedness.RIGHT,PP.GamepadButtonID.SQUEEZE])}{let t=e.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.THUMBSTICK];t.myIconParams.myIconType=this._myRightThumbstickButtonIconType,t.myIconParams.myLabel=this._myRightThumbstickButtonIconLabelOrImageUrl,t.myIconParams.myImageURL=this._myRightThumbstickButtonIconLabelOrImageUrl,t.myIconParams.myLabelFontSize=this._myLabelFontSize,t.myIconParams.myLabelFontFamily=this._myLabelFontFamily,t.myIconParams.myLabelFontWeight=this._myLabelFontWeight,t.myIconParams.myImagePressedBrightness=this._myImagePressedBrightness,this._myRightThumbstickButtonVisible&&(e.myButtonsOrder[PP.Handedness.RIGHT][this._myRightThumbstickButtonOrderIndex]=[PP.Handedness.RIGHT,PP.GamepadButtonID.THUMBSTICK])}{let t=e.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.TOP_BUTTON];t.myIconParams.myIconType=this._myRightTopButtonIconType,t.myIconParams.myLabel=this._myRightTopButtonIconLabelOrImageUrl,t.myIconParams.myImageURL=this._myRightTopButtonIconLabelOrImageUrl,t.myIconParams.myLabelFontSize=this._myLabelFontSize,t.myIconParams.myLabelFontFamily=this._myLabelFontFamily,t.myIconParams.myLabelFontWeight=this._myLabelFontWeight,t.myIconParams.myImagePressedBrightness=this._myImagePressedBrightness,this._myRightTopButtonVisible&&(e.myButtonsOrder[PP.Handedness.RIGHT][this._myRightTopButtonOrderIndex]=[PP.Handedness.RIGHT,PP.GamepadButtonID.TOP_BUTTON])}{let t=e.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.BOTTOM_BUTTON];t.myIconParams.myIconType=this._myRightBottomButtonIconType,t.myIconParams.myLabel=this._myRightBottomButtonIconLabelOrImageUrl,t.myIconParams.myImageURL=this._myRightBottomButtonIconLabelOrImageUrl,t.myIconParams.myLabelFontSize=this._myLabelFontSize,t.myIconParams.myLabelFontFamily=this._myLabelFontFamily,t.myIconParams.myLabelFontWeight=this._myLabelFontWeight,t.myIconParams.myImagePressedBrightness=this._myImagePressedBrightness,this._myRightBottomButtonVisible&&(e.myButtonsOrder[PP.Handedness.RIGHT][this._myRightBottomButtonOrderIndex]=[PP.Handedness.RIGHT,PP.GamepadButtonID.BOTTOM_BUTTON])}}})});var Ks=f(()=>{PP.VirtualGamepadButtonParams=class{constructor(){this.myIconParams=new PP.VirtualGamepadIconParams}};PP.VirtualGamepadThumbstickParams=class{constructor(){this.myBackgroundColor="",this.myMaxDistanceFromCenterMultiplier=1,this.myReleaseTransitionSeconds=.2,this.myMoveTransitionSeconds=0,this.myIncludeBackgroundToDetection=!1,this.myIconParams=new PP.VirtualGamepadIconParams}};PP.VirtualGamepadParams=class{constructor(){this.myShowOnDesktop=!1,this.myShowOnMobile=!1,this.myShowOnHeadset=!1,this.myAutoUpdateVisibility=!1,this.myOpacity=1,this.myInterfaceScale=1,this.myMarginScale=1,this.myReleaseOnPointerLeave=!1,this.myStopPropagatingMouseDownEvents=!0,this.myButtonParams=[],this.myButtonParams[PP.Handedness.LEFT]=[],this.myButtonParams[PP.Handedness.RIGHT]=[],this.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.SELECT]=new PP.VirtualGamepadButtonParams,this.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.SQUEEZE]=new PP.VirtualGamepadButtonParams,this.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.THUMBSTICK]=new PP.VirtualGamepadButtonParams,this.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.TOP_BUTTON]=new PP.VirtualGamepadButtonParams,this.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.BOTTOM_BUTTON]=new PP.VirtualGamepadButtonParams,this.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.SELECT]=new PP.VirtualGamepadButtonParams,this.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.SQUEEZE]=new PP.VirtualGamepadButtonParams,this.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.THUMBSTICK]=new PP.VirtualGamepadButtonParams,this.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.TOP_BUTTON]=new PP.VirtualGamepadButtonParams,this.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.BOTTOM_BUTTON]=new PP.VirtualGamepadButtonParams,this.myThumbstickParams=[],this.myThumbstickParams[PP.Handedness.LEFT]=new PP.VirtualGamepadThumbstickParams,this.myThumbstickParams[PP.Handedness.RIGHT]=new PP.VirtualGamepadThumbstickParams,this.myButtonsOrder=[],this.myButtonsOrder[PP.Handedness.LEFT]=[null,null,null,null,null],this.myButtonsOrder[PP.Handedness.RIGHT]=[null,null,null,null,null],this.myThumbsticksOrder=[],this.myThumbsticksOrder[PP.Handedness.LEFT]=null,this.myThumbsticksOrder[PP.Handedness.RIGHT]=null,this.myValidPointerButtons=[],this.myMarginLeft=0,this.myMarginRight=0,this.myMarginBottom=0,this.myThumbstickSize=0,this.myButtonSize=0,this.myButtonsRingRadius=0,this.myButtonsRingStartAngle=0,this.myButtonsRingEndAngle=0,this.myFontSize=0,this.myMinSizeMultiplier=0,this.myDisableMouseHoverWhenPressed=!1}defaultSetup(){this.myShowOnMobile=!0,this.myAutoUpdateVisibility=!0,this.myOpacity=.5;let t="#616161",i="#e0e0e0",s=.75,n=.75,o=!0;for(let a in this.myButtonParams)for(let l in this.myButtonParams[a]){let u=this.myButtonParams[a][l];u.myIconParams.myBackgroundColor=t,u.myIconParams.myBackgroundPressedColor=i,u.myIconParams.myIconColor=i,u.myIconParams.myIconPressedColor=t,u.myIconParams.myOverallHoveredBrightness=s}this.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.SQUEEZE].myIconParams.myIconType=PP.VirtualGamepadIconType.SQUARE,this.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.SQUEEZE].myIconParams.myIconType=PP.VirtualGamepadIconType.SQUARE,this.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.SELECT].myIconParams.myIconType=PP.VirtualGamepadIconType.FRAME,this.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.SELECT].myIconParams.myIconType=PP.VirtualGamepadIconType.FRAME,this.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.TOP_BUTTON].myIconParams.myIconType=PP.VirtualGamepadIconType.CIRCLE,this.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.TOP_BUTTON].myIconParams.myIconType=PP.VirtualGamepadIconType.CIRCLE,this.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.BOTTOM_BUTTON].myIconParams.myIconType=PP.VirtualGamepadIconType.RING,this.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.BOTTOM_BUTTON].myIconParams.myIconType=PP.VirtualGamepadIconType.RING,this.myButtonParams[PP.Handedness.LEFT][PP.GamepadButtonID.THUMBSTICK].myIconParams.myIconType=PP.VirtualGamepadIconType.DOT,this.myButtonParams[PP.Handedness.RIGHT][PP.GamepadButtonID.THUMBSTICK].myIconParams.myIconType=PP.VirtualGamepadIconType.DOT;for(let a in this.myThumbstickParams){let l=this.myThumbstickParams[a];l.myBackgroundColor=t,l.myIconParams.myBackgroundColor=i,l.myIconParams.myBackgroundPressedColor=i,l.myIconParams.myIconColor=t,l.myIconParams.myIconPressedColor=t,l.myIconParams.myOverallHoveredBrightness=n,l.myIncludeBackgroundToDetection=o}this.myButtonsOrder[PP.Handedness.LEFT][0]=[PP.Handedness.LEFT,PP.GamepadButtonID.SQUEEZE],this.myButtonsOrder[PP.Handedness.LEFT][1]=[PP.Handedness.LEFT,PP.GamepadButtonID.SELECT],this.myButtonsOrder[PP.Handedness.LEFT][2]=[PP.Handedness.LEFT,PP.GamepadButtonID.TOP_BUTTON],this.myButtonsOrder[PP.Handedness.LEFT][3]=[PP.Handedness.LEFT,PP.GamepadButtonID.BOTTOM_BUTTON],this.myButtonsOrder[PP.Handedness.LEFT][4]=[PP.Handedness.LEFT,PP.GamepadButtonID.THUMBSTICK],this.myButtonsOrder[PP.Handedness.RIGHT][0]=[PP.Handedness.RIGHT,PP.GamepadButtonID.SQUEEZE],this.myButtonsOrder[PP.Handedness.RIGHT][1]=[PP.Handedness.RIGHT,PP.GamepadButtonID.SELECT],this.myButtonsOrder[PP.Handedness.RIGHT][2]=[PP.Handedness.RIGHT,PP.GamepadButtonID.TOP_BUTTON],this.myButtonsOrder[PP.Handedness.RIGHT][3]=[PP.Handedness.RIGHT,PP.GamepadButtonID.BOTTOM_BUTTON],this.myButtonsOrder[PP.Handedness.RIGHT][4]=[PP.Handedness.RIGHT,PP.GamepadButtonID.THUMBSTICK],this.myThumbsticksOrder[PP.Handedness.LEFT]=PP.Handedness.LEFT,this.myThumbsticksOrder[PP.Handedness.RIGHT]=PP.Handedness.RIGHT,this.myMarginLeft=3,this.myMarginRight=3,this.myMarginBottom=3,this.myThumbstickSize=15,this.myButtonSize=5,this.myButtonsRingRadius=12,this.myButtonsRingStartAngle=385,this.myButtonsRingEndAngle=245,this.myMinSizeMultiplier=5/3,this.myDisableMouseHoverWhenPressed=!0,this.myValidPointerButtons=[0]}}});var Js=f(()=>{PP.VirtualGamepadVirtualButton=class{constructor(t,i,s,n,o,a){this._myButtonElement=null,this._myButtonIcon=null,this._myButtonDetectionElement=null,this._myIsActive=!0,this._myPointerID=null,this._myPointerButton=null,this._myIsPressed=!1,this._myVirtualGamepadParams=i,this._myParams=this._myVirtualGamepadParams.myButtonParams[o][a],this._build(t,s,n),this._myButtonDetectionElement.addEventListener("pointerdown",this._onPointerDown.bind(this,this._myVirtualGamepadParams.myStopPropagatingPointerDownEvents)),document.body.addEventListener("pointerup",this._onPointerUp.bind(this)),this._myVirtualGamepadParams.myReleaseOnPointerLeave&&document.body.addEventListener("pointerleave",this._onPointerLeave.bind(this)),this._myButtonDetectionElement.addEventListener("mouseenter",this._onButtonEnter.bind(this)),this._myButtonDetectionElement.addEventListener("mouseleave",this._onButtonLeave.bind(this))}isPressed(){return this._myIsActive&&this._myIsPressed}setActive(t){this._myIsActive!=t&&(this.reset(),this._myButtonIcon.reset()),this._myIsActive=t}setMouseHoverActive(t){this._myButtonIcon.setMouseHoverActive(t)}reset(){this._myButtonIcon.setPressed(!1),this._myIsPressed=!1,this._myPointerID=null,this._myPointerButton=null}update(t){this._myButtonIcon.update(t)}_onPointerDown(t,i){!this._myIsActive||this._myIsPressed||!this._myVirtualGamepadParams.myValidPointerButtons.pp_hasEqual(i.button)||(t&&i.stopPropagation(),i.preventDefault(),this._myButtonIcon.setPressed(!0),this._myPointerID=i.pointerId,this._myPointerButton=i.button,this._myIsPressed=!0)}_onPointerUp(t){!this._myIsActive||!this._myIsPressed||this._myPointerID==t.pointerId&&(this._myPointerButton!=null&&this._myPointerButton!=t.button||this.reset())}_onPointerLeave(t){!this._myIsActive||this._myPointerID==t.pointerId&&this.reset()}_onButtonEnter(t){!this._myIsActive||this._myButtonIcon.onMouseEnter(t)}_onButtonLeave(t){!this._myIsActive||this._myButtonIcon.onMouseLeave(t)}_build(t,i,s){let n=this._myVirtualGamepadParams.myButtonSize*this._myVirtualGamepadParams.myInterfaceScale,o=this._myVirtualGamepadParams.myButtonsRingRadius*this._myVirtualGamepadParams.myInterfaceScale,a=this._myVirtualGamepadParams.myThumbstickSize*this._myVirtualGamepadParams.myInterfaceScale,l=this._myVirtualGamepadParams.myMarginBottom*this._myVirtualGamepadParams.myInterfaceScale*this._myVirtualGamepadParams.myMarginScale,u=this._myVirtualGamepadParams.myMarginLeft*this._myVirtualGamepadParams.myInterfaceScale*this._myVirtualGamepadParams.myMarginScale,y=this._myVirtualGamepadParams.myMarginRight*this._myVirtualGamepadParams.myInterfaceScale*this._myVirtualGamepadParams.myMarginScale,r=this._myVirtualGamepadParams.myButtonsRingStartAngle,m=this._myVirtualGamepadParams.myButtonsRingEndAngle,c=Math.max(1,this._myVirtualGamepadParams.myMinSizeMultiplier/this._myVirtualGamepadParams.myInterfaceScale),h=this._myVirtualGamepadParams.myButtonsOrder[PP.Handedness.LEFT].length,_=(m-r)/(h-1),d=Math.pp_angleClamp(r+_*s);i==PP.Handedness.RIGHT&&(d=270+(270-d),d=Math.pp_angleClamp(d,!0));let p=360-d,P=document.createElement("div");P.style.position="absolute",P.style.width=this._createSizeValue(n,c),P.style.height=this._createSizeValue(n,c);let T=l+a/2-n/2;if(P.style.bottom=this._createSizeValue(T,c),i==PP.Handedness.LEFT){let v=u+a/2-n/2;P.style.left=this._createSizeValue(v,c)}else{let v=y+a/2-n/2;P.style.right=this._createSizeValue(v,c)}P.style.transform="rotate("+d+"deg) translateX("+this._createSizeValue(o,c)+")",t.appendChild(P),this._myButtonElement=document.createElement("div"),this._myButtonElement.style.position="absolute",this._myButtonElement.style.width="100%",this._myButtonElement.style.height="100%",this._myButtonElement.style.transform="rotate("+p+"deg)",P.appendChild(this._myButtonElement),this._myButtonIcon=new PP.VirtualGamepadIcon(this._myButtonElement,this._myParams.myIconParams,c,this._myVirtualGamepadParams.myInterfaceScale);let g=document.createElement("div");g.style.position="absolute",g.style.width="100%",g.style.height="100%",g.style.transform="rotate("+p+"deg)",P.appendChild(g);let b=document.createElementNS("http://www.w3.org/2000/svg","svg");b.style.position="absolute",b.style.width="100%",b.style.height="100%",g.appendChild(b);let S=document.createElementNS("http://www.w3.org/2000/svg","circle");S.setAttributeNS(null,"cx","50%"),S.setAttributeNS(null,"cy","50%"),S.setAttributeNS(null,"r","50%"),S.style.fill="#00000000",b.appendChild(S),this._myButtonDetectionElement=S}_createSizeValue(t,i){return"min("+t.toFixed(3)+"vmax,"+(t*i).toFixed(3)+"vw)"}}});var Ys=f(()=>{PP.VirtualGamepadVirtualThumbstick=class{constructor(t,i,s,n){this._myThumbstickElement=null,this._myThumbstickIcon=null,this._myThumbstickBackground=null,this._myThumbstickDetectionElement=null,this._myIsActive=!0,this._myPointerID=null,this._myPointerButton=null,this._myThumbstickDragStartPosition=PP.vec2_create(),this._myAxes=PP.vec2_create(),this._myIsPressed=!1,this._myVirtualGamepadParams=i,this._myParams=this._myVirtualGamepadParams.myThumbstickParams[n],this._build(t,s),this._myThumbstickDetectionElement.addEventListener("pointerdown",this._onPointerDown.bind(this,this._myVirtualGamepadParams.myStopPropagatingPointerDownEvents)),document.body.addEventListener("pointerup",this._onPointerUp.bind(this)),document.body.addEventListener("pointermove",this._onPointerMove.bind(this)),this._myVirtualGamepadParams.myReleaseOnPointerLeave&&document.body.addEventListener("pointerleave",this._onPointerLeave.bind(this)),this._myThumbstickDetectionElement.addEventListener("mouseenter",this._onThumbstickEnter.bind(this)),this._myThumbstickDetectionElement.addEventListener("mouseleave",this._onThumbstickLeave.bind(this))}isPressed(){return this._myIsActive&&this._myIsPressed}getAxes(){return this._myAxes}setActive(t){this._myIsActive!=t&&(this.reset(),this._myThumbstickIcon.reset()),this._myIsActive=t}setMouseHoverActive(t){this._myThumbstickIcon.setMouseHoverActive(t)}reset(){this._myThumbstickIcon.setPressed(!1),this._myAxes[0]=0,this._myAxes[1]=0,this._myIsPressed=!1,this._myPointerID=null,this._myPointerButton=null,this._myThumbstickElement.style.transition="all "+this._myParams.myReleaseTransitionSeconds+"s ease 0s",this._myThumbstickElement.style.transform="translate(0px, 0px)"}update(t){this._myThumbstickIcon.update(t)}_onPointerDown(t,i){!this._myIsActive||this._myIsPressed||!this._myVirtualGamepadParams.myValidPointerButtons.pp_hasEqual(i.button)||(t&&i.stopPropagation(),i.preventDefault(),this._myThumbstickIcon.setPressed(!0),this._myPointerID=i.pointerId,this._myPointerButton=i.button,this._myThumbstickDragStartPosition[0]=i.clientX,this._myThumbstickDragStartPosition[1]=i.clientY,this._myIsPressed=!0)}_onPointerUp(t){!this._myIsActive||!this._myIsPressed||this._myPointerID==t.pointerId&&(this._myPointerButton!=null&&this._myPointerButton!=t.button||this.reset())}_onPointerLeave(t){!this._myIsActive||this._myPointerID==t.pointerId&&this.reset()}_onThumbstickEnter(t){this._myThumbstickIcon.onMouseEnter(t)}_onThumbstickLeave(t){this._myThumbstickIcon.onMouseLeave(t)}_onPointerMove(t){if(!this._myIsActive||!this._myIsPressed||t.pointerId!=this._myPointerID)return;let i=t.clientX,s=t.clientY,o=this._myThumbstickBackground.getBoundingClientRect().width/2*this._myParams.myMaxDistanceFromCenterMultiplier,a=i-this._myThumbstickDragStartPosition[0],l=s-this._myThumbstickDragStartPosition[1],u=Math.atan2(l,a),y=Math.min(o,Math.hypot(a,l)),r=y*Math.cos(u),m=y*Math.sin(u);this._myThumbstickElement.style.transition="all "+this._myParams.myMoveTransitionSeconds+"s ease-out 0s",this._myThumbstickElement.style.transform="translate("+r+"px, "+m+"px)",this._myAxes[0]=r/o,this._myAxes[1]=-(m/o)}_build(t,i){let s=this._myVirtualGamepadParams.myThumbstickSize*this._myVirtualGamepadParams.myInterfaceScale,n=this._myVirtualGamepadParams.myMarginBottom*this._myVirtualGamepadParams.myInterfaceScale*this._myVirtualGamepadParams.myMarginScale,o=this._myVirtualGamepadParams.myMarginLeft*this._myVirtualGamepadParams.myInterfaceScale*this._myVirtualGamepadParams.myMarginScale,a=this._myVirtualGamepadParams.myMarginRight*this._myVirtualGamepadParams.myInterfaceScale*this._myVirtualGamepadParams.myMarginScale,l=Math.max(1,this._myVirtualGamepadParams.myMinSizeMultiplier/this._myVirtualGamepadParams.myInterfaceScale),u=document.createElement("div");u.style.position="absolute",u.style.width=this._createSizeValue(s,l),u.style.height=this._createSizeValue(s,l),u.style.bottom=this._createSizeValue(n,l),i==PP.Handedness.LEFT?u.style.left=this._createSizeValue(o,l):u.style.right=this._createSizeValue(a,l),t.appendChild(u);let y=document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.style.position="absolute",y.style.width="100%",y.style.height="100%",u.appendChild(y),this._myThumbstickBackground=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._myThumbstickBackground.setAttributeNS(null,"cx","50%"),this._myThumbstickBackground.setAttributeNS(null,"cy","50%"),this._myThumbstickBackground.setAttributeNS(null,"r","48%"),this._myThumbstickBackground.style.fill=this._myParams.myBackgroundColor,y.appendChild(this._myThumbstickBackground),this._myThumbstickElement=document.createElement("div"),this._myThumbstickElement.style.position="absolute",this._myThumbstickElement.style.width="34%",this._myThumbstickElement.style.height="34%",this._myThumbstickElement.style.top="33%",this._myThumbstickElement.style.left="33%",u.appendChild(this._myThumbstickElement),this._myThumbstickIcon=new PP.VirtualGamepadIcon(this._myThumbstickElement,this._myParams.myIconParams,l,this._myVirtualGamepadParams.myScale),this._myParams.myIncludeBackgroundToDetection){let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="absolute",r.style.width="100%",r.style.height="100%",u.appendChild(r);let m=document.createElementNS("http://www.w3.org/2000/svg","circle");m.setAttributeNS(null,"cx","50%"),m.setAttributeNS(null,"cy","50%"),m.setAttributeNS(null,"r","48%"),m.style.fill="#00000000",r.appendChild(m),this._myThumbstickDetectionElement=m}else{let r=document.createElement("div");r.style.position="absolute",r.style.width="34%",r.style.height="34%",r.style.top="33%",r.style.left="33%",u.appendChild(r);let m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.style.position="absolute",m.style.width="100%",m.style.height="100%",r.appendChild(m);let c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttributeNS(null,"cx","50%"),c.setAttributeNS(null,"cy","50%"),c.setAttributeNS(null,"r","50%"),c.style.fill="#00000000",m.appendChild(c),this._myThumbstickDetectionElement=c}}_createSizeValue(t,i){return"min("+t.toFixed(3)+"vmax,"+(t*i).toFixed(3)+"vw)"}}});var Zs=f(()=>{PP.VirtualGamepadIconType={NONE:0,LABEL:1,IMAGE:2,DOT:3,CIRCLE:4,SQUARE:5,RING:6,FRAME:7};PP.VirtualGamepadIconParams=class{constructor(){this.myBackgroundColor="",this.myBackgroundPressedColor="",this.myIconColor="",this.myIconPressedColor="",this.myIconType=PP.VirtualGamepadIconType.NONE,this.myOverallHoveredBrightness=1,this.myLabel="",this.myLabelFontSize=0,this.myLabelFontFamily="",this.myLabelFontWeight="",this.myImageURL="",this.myImagePressedBrightness=1}};PP.VirtualGamepadIcon=class{constructor(t,i,s,n){this._myParams=i,this._myIconContainerElement=null,this._myBackgroundElement=null,this._myIconElement=null,this._myPressed=!1,this._myIsMouseHover=!1,this._myIsMouseHoverActive=!0,this._build(t,s,n)}update(t){this._myPressed||!this._myIsMouseHover||!this._myIsMouseHoverActive?this._myIconContainerElement.style.filter="none":this._myIconContainerElement.style.filter="brightness("+this._myParams.myOverallHoveredBrightness+")"}reset(){this.setPressed(!1),this._myIsMouseHover=!1,this._myIconContainerElement.style.filter="none"}setPressed(t){this._myPressed!=t&&(this._myPressed=t,this._myPressed?(this._myBackgroundElement.style.fill=this._myParams.myBackgroundPressedColor,this._myIconElement!=null&&(this._myIconElement.style.strokeWidth.length>0?this._myIconElement.style.stroke=this._myParams.myIconPressedColor:this._myIconElement.style.fill=this._myParams.myIconPressedColor,this._myParams.myIconType==PP.VirtualGamepadIconType.IMAGE&&(this._myIconElement.style.filter="brightness("+this._myParams.myImagePressedBrightness+")"))):(this._myBackgroundElement.style.fill=this._myParams.myBackgroundColor,this._myIconElement!=null&&(this._myIconElement.style.strokeWidth.length>0?this._myIconElement.style.stroke=this._myParams.myIconColor:this._myIconElement.style.fill=this._myParams.myIconColor,this._myParams.myIconType==PP.VirtualGamepadIconType.IMAGE&&(this._myIconElement.style.filter="none"))))}onMouseEnter(){this._myIsMouseHover=!0}onMouseLeave(){this._myIsMouseHover=!1}setMouseHoverActive(t){this._myIsMouseHoverActive=t}_build(t,i,s){switch(this._myIconContainerElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._myIconContainerElement.style.position="absolute",this._myIconContainerElement.style.width="100%",this._myIconContainerElement.style.height="100%",t.appendChild(this._myIconContainerElement),this._myBackgroundElement=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._myBackgroundElement.setAttributeNS(null,"cx","50%"),this._myBackgroundElement.setAttributeNS(null,"cy","50%"),this._myBackgroundElement.setAttributeNS(null,"r","50%"),this._myBackgroundElement.style.fill=this._myParams.myBackgroundColor,this._myIconContainerElement.appendChild(this._myBackgroundElement),this._myParams.myIconType){case PP.VirtualGamepadIconType.NONE:break;case PP.VirtualGamepadIconType.LABEL:this._myIconElement=document.createElementNS("http://www.w3.org/2000/svg","text"),this._myIconElement.setAttributeNS(null,"x","50%"),this._myIconElement.setAttributeNS(null,"y","50%"),this._myIconElement.style.textAlign="center",this._myIconElement.style.textAnchor="middle",this._myIconElement.style.dominantBaseline="central",this._myIconElement.style.alignmentBaseline="central",this._myIconElement.style.fontFamily=this._myParams.myLabelFontFamily,this._myIconElement.style.fontWeight=this._myParams.myLabelFontWeight,this._myIconElement.style.fontSize=this._createSizeValue(this._myParams.myLabelFontSize*s,i),this._myIconElement.style.fill=this._myParams.myIconColor,this._myIconElement.textContent=this._myParams.myLabel,this._myIconContainerElement.appendChild(this._myIconElement);break;case PP.VirtualGamepadIconType.IMAGE:this._myIconElement=document.createElementNS("http://www.w3.org/2000/svg","image"),this._myIconElement.setAttributeNS(null,"x","0%"),this._myIconElement.setAttributeNS(null,"y","0%"),this._myIconElement.setAttribute("href",this._myParams.myImageURL),this._myIconElement.style.width="100%",this._myIconElement.style.height="100%",this._myIconElement.style.filter="none",this._myIconContainerElement.appendChild(this._myIconElement);break;case PP.VirtualGamepadIconType.DOT:this._myIconElement=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._myIconElement.setAttributeNS(null,"cx","50%"),this._myIconElement.setAttributeNS(null,"cy","50%"),this._myIconElement.setAttributeNS(null,"r","17.5%"),this._myIconElement.style.fill=this._myParams.myIconColor,this._myIconContainerElement.appendChild(this._myIconElement);break;case PP.VirtualGamepadIconType.CIRCLE:this._myIconElement=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._myIconElement.setAttributeNS(null,"cx","50%"),this._myIconElement.setAttributeNS(null,"cy","50%"),this._myIconElement.setAttributeNS(null,"r","24%"),this._myIconElement.style.fill=this._myParams.myIconColor,this._myIconContainerElement.appendChild(this._myIconElement);break;case PP.VirtualGamepadIconType.SQUARE:this._myIconElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._myIconElement.setAttributeNS(null,"x","28%"),this._myIconElement.setAttributeNS(null,"y","28%"),this._myIconElement.setAttributeNS(null,"rx","10%"),this._myIconElement.setAttributeNS(null,"ry","10%"),this._myIconElement.setAttributeNS(null,"width","44%"),this._myIconElement.setAttributeNS(null,"height","44%"),this._myIconElement.style.fill=this._myParams.myIconColor,this._myIconElement.style.transformOrigin="center",this._myIconContainerElement.appendChild(this._myIconElement);break;case PP.VirtualGamepadIconType.RING:this._myIconElement=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._myIconElement.setAttributeNS(null,"cx","50%"),this._myIconElement.setAttributeNS(null,"cy","50%"),this._myIconElement.setAttributeNS(null,"r","20%"),this._myIconElement.style.fill="#00000000",this._myIconElement.style.stroke=this._myParams.myIconColor,this._myIconElement.style.strokeWidth="10%",this._myIconContainerElement.appendChild(this._myIconElement);break;case PP.VirtualGamepadIconType.FRAME:this._myIconElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._myIconElement.setAttributeNS(null,"x","31.5%"),this._myIconElement.setAttributeNS(null,"y","31.5%"),this._myIconElement.setAttributeNS(null,"rx","10%"),this._myIconElement.setAttributeNS(null,"ry","10%"),this._myIconElement.setAttributeNS(null,"width","37%"),this._myIconElement.setAttributeNS(null,"height","37%"),this._myIconElement.style.fill="#00000000",this._myIconElement.style.stroke=this._myParams.myIconColor,this._myIconElement.style.strokeWidth="10%",this._myIconElement.style.transformOrigin="center",this._myIconContainerElement.appendChild(this._myIconElement);break}}_createSizeValue(t,i){return"min("+t.toFixed(3)+"vmax,"+(t*i).toFixed(3)+"vw)"}_invertColors(){this._myIconElement.style.strokeWidth.length>0?(this._myBackgroundElement.style.fill=this._myParams.myIconColor,this._myIconElement.style.fill=this._myParams.myIconColor,this._myIconElement.style.stroke=this._myParams.myBackgroundColor):(this._myBackgroundElement.style.fill=this._myParams.myIconColor,this._myIconElement.style.fill=this._myParams.myBackgroundColor)}}});var $s=f(()=>{PP.BasePoseParams=class{constructor(){this.myReferenceObject=null,this.myFixForward=!0,this.myForceEmulatedVelocities=!1,this.myUpdateOnViewReset=!1}};PP.BasePose=class{constructor(t=new PP.BasePoseParams){this._myFixForward=t.myFixForward,this._myForceEmulatedVelocities=t.myForceEmulatedVelocities,this._myUpdateOnViewReset=t.myUpdateOnViewReset,this._myReferenceSpace=null,this._myReferenceObject=t.myReferenceObject,this._myPosition=PP.vec3_create(),this._myRotationQuat=PP.quat_create(),this._myPrevPosition=PP.vec3_create(),this._myPrevRotationQuat=PP.quat_create(),this._myLinearVelocity=PP.vec3_create(),this._myAngularVelocityRadians=PP.vec3_create(),this._myIsValid=!1,this._myIsLinearVelocityEmulated=!0,this._myIsAngularVelocityEmulated=!0,this._myPoseUpdatedCallbacks=new Map}setReferenceObject(t){this._myReferenceObject=t}getReferenceObject(){return this._myReferenceObject}setFixForward(t){this._myFixForward=t}isFixForward(){return this._myFixForward}setForceEmulatedVelocities(t){this._myForceEmulatedVelocities=t}isForceEmulatedVelocities(){return this._myForceEmulatedVelocities}setUpdateOnViewReset(t){this._myUpdateOnViewReset=t}isUpdateOnViewReset(){return this._myUpdateOnViewReset}getReferenceSpace(){return this._myReferenceSpace}getInputSource(){return this._myInputSource}getPosition(){}getRotation(){return this.getRotationDegrees()}getRotationDegrees(){return this.getRotationQuat().quat_toDegrees()}getRotationRadians(){return this.getRotationQuat().quat_toRadians()}getRotationQuat(){}getTransform(){return this.getTransformMatrix()}getTransformMatrix(){}getTransformQuat(){}getLinearVelocity(){}getAngularVelocity(){return this.getAngularVelocityDegrees()}getAngularVelocityDegrees(){}getAngularVelocityRadians(){}isValid(){return this._myIsValid}isLinearVelocityEmulated(){return this._myIsLinearVelocityEmulated}isAngularVelocityEmulated(){return this._myIsAngularVelocityEmulated}registerPoseUpdatedEventListener(t,i){this._myPoseUpdatedCallbacks.set(t,i)}unregisterPoseUpdatedEventListener(t){this._myPoseUpdatedCallbacks.delete(t)}start(){WL.xrSession&&this._onXRSessionStart(!0,WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this,!1)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))}update(t){this._update(t,!0)}_isReadyToGetPose(){return!0}_getPose(t){return null}_updateHook(t,i,s){}_onXRSessionStartHook(t,i){}_onXRSessionEndHook(){}_onViewResetHook(){}_update(t,i){this._myPrevPosition.vec3_copy(this._myPosition),this._myPrevRotationQuat.quat_copy(this._myRotationQuat);let s=Module.webxr_frame;if(s&&this._isReadyToGetPose()){let n=null;try{n=this._getPose(s)}catch{}n?(this._myPosition[0]=n.transform.position.x,this._myPosition[1]=n.transform.position.y,this._myPosition[2]=n.transform.position.z,this._myRotationQuat[0]=n.transform.orientation.x,this._myRotationQuat[1]=n.transform.orientation.y,this._myRotationQuat[2]=n.transform.orientation.z,this._myRotationQuat[3]=n.transform.orientation.w,this._myRotationQuat.quat_normalize(this._myRotationQuat),i&&(n.linearVelocity&&!this._myForceEmulatedVelocities?(this._myLinearVelocity[0]=n.linearVelocity.x,this._myLinearVelocity[1]=n.linearVelocity.y,this._myLinearVelocity[2]=n.linearVelocity.z,this._myIsLinearVelocityEmulated=!1):(this._computeEmulatedLinearVelocity(t),this._myIsLinearVelocityEmulated=!0),n.angularVelocity&&!this._myForceEmulatedVelocities?(this._myAngularVelocityRadians[0]=n.angularVelocity.x,this._myAngularVelocityRadians[1]=n.angularVelocity.y,this._myAngularVelocityRadians[2]=n.angularVelocity.z,this._myIsAngularVelocityEmulated=!1):(this._computeEmulatedAngularVelocity(t),this._myIsAngularVelocityEmulated=!0)),this._myIsValid=!0):(i&&(this._myLinearVelocity[0]=0,this._myLinearVelocity[1]=0,this._myLinearVelocity[2]=0,this._myAngularVelocityRadians[0]=0,this._myAngularVelocityRadians[1]=0,this._myAngularVelocityRadians[2]=0),this._myIsValid=!1,this._myIsLinearVelocityEmulated=!0,this._myIsAngularVelocityEmulated=!0),this._updateHook(t,i,n)}else i&&(this._myLinearVelocity[0]=0,this._myLinearVelocity[1]=0,this._myLinearVelocity[2]=0,this._myAngularVelocityRadians[0]=0,this._myAngularVelocityRadians[1]=0,this._myAngularVelocityRadians[2]=0),this._myIsValid=!1,this._myIsLinearVelocityEmulated=!0,this._myIsAngularVelocityEmulated=!0,this._updateHook(t,i,null);this._myPoseUpdatedCallbacks.forEach(function(n){n(this)}.bind(this))}_computeEmulatedLinearVelocity(t){t>0?(this._myPosition.vec3_sub(this._myPrevPosition,this._myLinearVelocity),this._myLinearVelocity.vec3_scale(1/t,this._myLinearVelocity)):(this._myLinearVelocity[0]=0,this._myLinearVelocity[1]=0,this._myLinearVelocity[2]=0)}_onXRSessionStart(t,i){i.requestReferenceSpace(WebXR.refSpace).then(function(s){this._myReferenceSpace=s,s.addEventListener!=null&&s.addEventListener("reset",this._onViewReset.bind(this))}.bind(this)),this._onXRSessionStartHook(t,i)}_onXRSessionEnd(){this._onXRSessionEndHook(),this._myReferenceSpace=null}_onViewReset(){this._myUpdateOnViewReset&&this._update(0,!1),this._onViewResetHook()}};PP.BasePose.prototype.getPosition=function(){let e=PP.vec3_create(),t=PP.mat4_create();return function(){return this._myReferenceObject==null?this._myPosition:this._myPosition.vec3_convertPositionToWorld(this._myReferenceObject.pp_getTransform(t),e)}}();PP.BasePose.prototype.getRotationQuat=function(){let e=PP.quat_create(),t=PP.quat_create(),i=PP.vec3_create();return function(){return e.quat_copy(this._myRotationQuat),this._myFixForward&&e.quat_rotateAxisRadians(Math.PI,e.quat_getUp(i),e),this._myReferenceObject==null?e:e.quat_toWorld(this._myReferenceObject.pp_getRotationQuat(t),e)}}();PP.BasePose.prototype.getTransformMatrix=function(){let e=PP.mat4_create();return function(){return this.getTransformQuat().quat2_toMatrix(e)}}();PP.BasePose.prototype.getTransformQuat=function(){let e=PP.quat2_create(),t=PP.quat2_create();return function(){return e.quat2_setPositionRotationQuat(this._myPosition,this.getRotationQuat()),this._myReferenceObject==null?e:e.quat_toWorld(this._myReferenceObject.pp_getTransformQuat(t),e)}}();PP.BasePose.prototype.getLinearVelocity=function(){let e=PP.vec3_create(),t=PP.mat4_create();return function(){return this._myReferenceObject==null?this._myLinearVelocity:this._myLinearVelocity.vec3_convertDirectionToWorld(this._myReferenceObject.pp_getTransform(t),e)}}();PP.BasePose.prototype.getAngularVelocityDegrees=function(){let e=PP.vec3_create();return function(){this.getAngularVelocityRadians().vec3_toDegrees(e)}}();PP.BasePose.prototype.getAngularVelocityRadians=function(){let e=PP.vec3_create(),t=PP.mat4_create();return function(){return this._myReferenceObject==null?this._myAngularVelocityRadians:this._myAngularVelocityRadians.vec3_convertDirectionToWorld(this._myReferenceObject.pp_getTransform(t),e)}}();PP.BasePose.prototype._computeEmulatedAngularVelocity=function(){let e=PP.vec3_create(),t=PP.vec3_create();return function(s){s>0?(e=this._myRotationQuat.quat_toRadians(e),t=this._myPrevRotationQuat.quat_toRadians(t),e.vec3_sub(t,this._myAngularVelocityRadians),this._myAngularVelocityRadians.vec3_scale(1/s,this._myAngularVelocityRadians)):(this._myAngularVelocityRadians[0]=0,this._myAngularVelocityRadians[1]=0,this._myAngularVelocityRadians[2]=0)}}();Object.defineProperty(PP.BasePose.prototype,"getPosition",{enumerable:!1});Object.defineProperty(PP.BasePose.prototype,"getRotationQuat",{enumerable:!1});Object.defineProperty(PP.BasePose.prototype,"getTransformMatrix",{enumerable:!1});Object.defineProperty(PP.BasePose.prototype,"getTransformQuat",{enumerable:!1});Object.defineProperty(PP.BasePose.prototype,"getLinearVelocity",{enumerable:!1});Object.defineProperty(PP.BasePose.prototype,"getAngularVelocityDegrees",{enumerable:!1});Object.defineProperty(PP.BasePose.prototype,"getAngularVelocityRadians",{enumerable:!1});Object.defineProperty(PP.BasePose.prototype,"_computeEmulatedAngularVelocity",{enumerable:!1})});var tn=f(()=>{PP.HandPoseParams=class extends PP.BasePoseParams{constructor(){super(),this.myFixTrackedHandRotation=!0}};PP.HandPose=class extends PP.BasePose{constructor(t,i=new PP.HandPoseParams){super(i),this._myInputSource=null,this._myHandedness=t,this._myFixTrackedHandRotation=i.myFixTrackedHandRotation,this._myIsTrackedHand=!1}getInputSourceType(){return this._myInputSource==null?null:PP.InputUtils.getInputSourceType(this._myInputSource)}isFixTrackedHandRotation(){return this._myFixTrackedHandRotation}setFixTrackedHandRotation(t){this.myFixTrackedHandRotation=t}_isReadyToGetPose(){return this._myInputSource!=null}_getPose(t){return t.getPose(this._myInputSource.gripSpace,this._myReferenceSpace)}_onXRSessionStartHook(t,i){if(i.addEventListener("inputsourceschange",function(s){if(s.removed)for(let n of s.removed)n==this._myInputSource&&(this._myInputSource=null);if(s.added)for(let n of s.added)n.handedness==this._myHandedness&&(this._myInputSource=n,this._myIsTrackedHand=PP.InputUtils.getInputSourceType(this._myInputSource)==PP.InputSourceType.TRACKED_HAND)}.bind(this)),t&&this._myInputSource==null&&i.inputSources)for(let s of i.inputSources)s.handedness==this._myHandedness&&(this._myInputSource=s,this._myIsTrackedHand=PP.InputUtils.getInputSourceType(this._myInputSource)==PP.InputSourceType.TRACKED_HAND)}_onXRSessionEndHook(){this._myInputSource=null}};PP.HandPose.prototype.getRotationQuat=function(){let e=PP.quat_create(),t=PP.quat_create(),i=PP.vec3_create(),s=PP.vec3_create(),n=PP.vec3_create();return function(){if(e.quat_copy(this._myRotationQuat),this._myFixForward&&e.quat_rotateAxisRadians(Math.PI,e.quat_getUp(i),e),this._myFixTrackedHandRotation&&this._myIsTrackedHand){e.quat_rotateAxis(-60,e.quat_getRight(s),e);let a=20;a=this._myHandedness==PP.Handedness.LEFT?a:-a,e.quat_rotateAxis(a,e.quat_getForward(n),e)}return this._myReferenceObject==null?e:e.quat_toWorld(this._myReferenceObject.pp_getRotationQuat(t),e)}}();Object.defineProperty(PP.HandPose.prototype,"getRotationQuat",{enumerable:!1})});var en=f(()=>{PP.HeadPose=class extends PP.BasePose{_getPose(t){return t.getViewerPose(this._myReferenceSpace)}}});var sn=f(()=>{PP.TrackedHandJointPose=class extends PP.BasePose{constructor(t,i,s=new PP.BasePoseParams){super(s),this._myInputSource=null,this._myHandedness=t,this._myTrackedHandJointID=i,this._myJointRadius=0}getTrackedHandJointID(){return this._myTrackedHandJointID}setTrackedHandJointID(t){this._myTrackedHandJointID=t}getJointRadius(){return this._myJointRadius}_isReadyToGetPose(){return this._myInputSource!=null}_getPose(t){return t.getJointPose(this._myInputSource.hand.get(this._myTrackedHandJointID),this._myReferenceSpace)}_updateHook(t,i,s){s!=null&&(this._myJointRadius=s.radius)}_onXRSessionStartHook(t,i){if(i.addEventListener("inputsourceschange",function(s){if(s.removed)for(let n of s.removed)n==this._myInputSource&&(this._myInputSource=null);if(s.added)for(let n of s.added)n.handedness==this._myHandedness&&PP.InputUtils.getInputSourceType(n)==PP.InputSourceType.TRACKED_HAND&&(this._myInputSource=n)}.bind(this)),t&&this._myInputSource==null&&i.inputSources)for(let s of i.inputSources)s.handedness==this._myHandedness&&PP.InputUtils.getInputSourceType(s)==PP.InputSourceType.TRACKED_HAND&&(this._myInputSource=s)}_onXRSessionEndHook(){this._myInputSource=null}}});var nn=f(()=>{PP.TrackedHandPoseParams=class extends PP.BasePoseParams{constructor(t=!0){if(super(),this.myTrackedHandJointIDList=[],t)for(let i in PP.TrackedHandJointID)this.myTrackedHandJointIDList.push([PP.TrackedHandJointID[i]])}};PP.TrackedHandPose=class{constructor(t,i=new PP.TrackedHandPoseParams){this._myHandedness=t,this._myFixForward=i.myFixForward,this._myForceEmulatedVelocities=i.myForceEmulatedVelocities,this._myReferenceObject=i.myReferenceObject,this._myTrackedHandJointPoseParams=new PP.BasePoseParams,this._myTrackedHandJointPoseParams.myFixForward=this._myFixForward,this._myTrackedHandJointPoseParams.myForceEmulatedVelocities=this._myForceEmulatedVelocities,this._myTrackedHandJointPoseParams.myReferenceObject=this._myReferenceObject,this._myTrackedHandJointPoseList=[];for(let s of i.myTrackedHandJointIDList){let n=new PP.TrackedHandJointPose(this._myHandedness,s,this._myTrackedHandJointPoseParams);this._myTrackedHandJointPoseList[s]=n}}start(){for(let t in this._myTrackedHandJointPoseList)this._myTrackedHandJointPoseList[t].start()}update(t){for(let i in this._myTrackedHandJointPoseList)this._myTrackedHandJointPoseList[i].update(t)}getJointPoseList(){return this._myTrackedHandJointPoseList}getJointPose(t){return this._myTrackedHandJointPoseList[t]}getJointPoseByIndex(t){return this._myTrackedHandJointPoseList[PP.InputUtils.getJointIDByIndex(t)]}addTrackedHandJointID(t){if(!this._myTrackedHandJointPoseList.pp_has(i=>i.getTrackedHandJointID()==t)){let i=new PP.TrackedHandJointPose(this._myHandedness,t,this._myTrackedHandJointPoseParams);this._myTrackedHandJointPoseList.push(i)}}removeTrackedHandJointID(t){this._myTrackedHandJointPoseList.pp_remove(i=>i.getTrackedHandJointID()==t)}setReferenceObject(t){this._myReferenceObject=t,this._myTrackedHandJointPoseParams.myReferenceObject=this._myReferenceObject;for(let i in this._myTrackedHandJointPoseList)this._myTrackedHandJointPoseList[i].setReferenceObject(t)}getReferenceObject(){return this._myReferenceObject}setFixForward(t){this._myFixForward=t,this._myTrackedHandJointPoseParams.myFixForward=this._myFixForward;for(let i in this._myTrackedHandJointPoseList)this._myTrackedHandJointPoseList[i].setFixForward(t)}isFixForward(){return this._myFixForward}setForceEmulatedVelocities(t){this._myForceEmulatedVelocities=t,this._myTrackedHandJointPoseParams.myForceEmulatedVelocities=this._myForceEmulatedVelocities;for(let i in this._myTrackedHandJointPoseList)this._myTrackedHandJointPoseList[i].setForceEmulatedVelocities(t)}isForceEmulatedVelocities(){return this._myForceEmulatedVelocities}}});var on=f(()=>{WL.registerComponent("pp-set-player-height",{_myEyesHeight:{type:WL.Type.Float,default:1.65},_mySetOnlyOnStart:{type:WL.Type.Bool,default:!1}},{start(){let e=this.object.pp_getPositionLocal();this.object.pp_setPositionLocal(PP.vec3_create(e[0],this._myEyesHeight,e[2])),this._myHeightSetOnce=!1,WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))},_onXRSessionStart(){if(this.active&&(!this._mySetOnlyOnStart||!this._myHeightSetOnce)){let e=this.object.pp_getPositionLocal();PP.XRUtils.isReferenceSpaceLocalFloor()?this.object.pp_setPositionLocal(PP.vec3_create(e[0],0,e[2])):PP.XRUtils.isDeviceEmulated()?this.object.pp_setPositionLocal(PP.vec3_create(e[0],0,e[2])):this.object.pp_setPositionLocal(PP.vec3_create(e[0],this._myEyesHeight,e[2])),this._myHeightSetOnce=!0}},_onXRSessionEnd(){if(this.active&&!this._mySetOnlyOnStart){let e=this.object.pp_getPositionLocal();this.object.pp_setPositionLocal(PP.vec3_create(e[0],this._myEyesHeight,e[2]))}}})});var an=f(()=>{WL.registerComponent("pp-set-hand-local-transform",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myFixForward:{type:WL.Type.Bool,default:!0},_myUpdateOnViewReset:{type:WL.Type.Bool,default:!0}},{init:function(){this._myHandPose=new PP.HandPose(PP.InputUtils.getHandednessByIndex(this._myHandedness)),this._myHandPose.setFixForward(this._myFixForward),this._myHandPose.setUpdateOnViewReset(this._myUpdateOnViewReset),this._myHandPose.registerPoseUpdatedEventListener(this,this.onPoseUpdated.bind(this))},start:function(){this._myHandPose.start()},update:function(t){this._myHandPose.update(t)},onPoseUpdated:function(){let e=PP.quat2_create();return function(){this.object.pp_setTransformLocalQuat(this._myHandPose.getTransformQuat(e))}}()})});var rn=f(()=>{WL.registerComponent("pp-set-head-local-transform",{_myNonVRCamera:{type:WL.Type.Object},_myFixForward:{type:WL.Type.Bool,default:!0},_myUpdateOnViewReset:{type:WL.Type.Bool,default:!0}},{init:function(){this._myHeadPose=new PP.HeadPose,this._myHeadPose.setFixForward(this._myFixForward),this._myHeadPose.setUpdateOnViewReset(this._myUpdateOnViewReset),this._myHeadPose.registerPoseUpdatedEventListener(this,this.onPoseUpdated.bind(this))},start:function(){this._myHeadPose.start()},update:function(){let e=PP.quat_create(),t=PP.vec3_create(),i=PP.vec3_create();return function(n){PP.XRUtils.isSessionActive()?this._myHeadPose.update(n):(e=this._myNonVRCamera.pp_getRotationLocalQuat(e),this._myFixForward&&e.quat_rotateAxisRadians(Math.PI,e.quat_getUp(t),e),this.object.pp_setPositionLocal(this._myNonVRCamera.pp_getPositionLocal(i)),this.object.pp_setRotationLocalQuat(e))}}(),onPoseUpdated:function(){let e=PP.quat2_create();return function(){PP.XRUtils.isSessionActive()&&this.object.pp_setTransformLocalQuat(this._myHeadPose.getTransformQuat(e))}}()})});var ln=f(()=>{WL.registerComponent("pp-set-vr-head-local-transform",{_myFixForward:{type:WL.Type.Bool,default:!0},_myUpdateOnViewReset:{type:WL.Type.Bool,default:!0}},{init:function(){this._myHeadPose=new PP.HeadPose,this._myHeadPose.setFixForward(this._myFixForward),this._myHeadPose.setUpdateOnViewReset(this._myUpdateOnViewReset),this._myHeadPose.registerPoseUpdatedEventListener(this,this.onPoseUpdated.bind(this))},start:function(){this._myHeadPose.start()},update:function(t){this._myHeadPose.update(t)},onPoseUpdated:function(){let e=PP.quat2_create();return function(){this.object.pp_setTransformLocalQuat(this._myHeadPose.getTransformQuat(e))}}()})});var mn=f(()=>{WL.registerComponent("pp-set-non-vr-head-local-transform",{_myNonVRCamera:{type:WL.Type.Object},_myFixForward:{type:WL.Type.Bool,default:!0}},{init:function(){},start:function(){},update:function(e){let t=PP.quat_create(),i=PP.vec3_create(),s=PP.vec3_create();return function(o){t=this._myNonVRCamera.pp_getRotationLocalQuat(t),this._myFixForward&&t.quat_rotateAxisRadians(Math.PI,t.quat_getUp(i),t),this.object.pp_setPositionLocal(this._myNonVRCamera.pp_getPositionLocal(s)),this.object.pp_setRotationLocalQuat(t)}}()})});var un=f(()=>{WL.registerComponent("pp-set-tracked-hand-joint-local-transform",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myFixForward:{type:WL.Type.Bool,default:!0},_myUpdateOnViewReset:{type:WL.Type.Bool,default:!0},_mySetLocalScaleAsJointRadius:{type:WL.Type.Bool,default:!1},_myJointID:{type:WL.Type.Enum,values:["Wrist","Thumb Metacarpal","Thumb Phalanx Proximal","Thumb Phalanx Distal","Thumb Tip","Index Metacarpal","Index Phalanx Proximal","Index Phalanx Intermediate","Index Phalanx Distal","Index Tip","Middle Metacarpal","Middle Phalanx Proximal","Middle Phalanx Intermediate","Middle Phalanx Distal","Middle Tip","Ring Metacarpal","Ring Phalanx Proximal","Ring Phalanx Intermediate","Ring Phalanx Distal","Ring Tip","Pinky Metacarpal","Pinky Phalanx Proximal","Pinky Phalanx Intermediate","Pinky Phalanx Distal","Pinky Tip"],default:"Wrist"}},{init:function(){this._myHandednessInternal=PP.InputUtils.getHandednessByIndex(this._myHandedness),this._myJointIDInternal=PP.InputUtils.getJointIDByIndex(this._myJointID),this._myTrackedHandJointPose=new PP.TrackedHandJointPose(this._myHandednessInternal,this._myJointIDInternal),this._myTrackedHandJointPose.setFixForward(this._myFixForward),this._myTrackedHandJointPose.setUpdateOnViewReset(this._myUpdateOnViewReset),this._myTrackedHandJointPose.registerPoseUpdatedEventListener(this,this.onPoseUpdated.bind(this))},start:function(){this._myTrackedHandJointPose.start()},update:function(e){this._myTrackedHandJointPose.update(e)},onPoseUpdated:function(){let e=PP.quat2_create();return function(){this.object.pp_setTransformLocalQuat(this._myTrackedHandJointPose.getTransformQuat(e)),this._mySetLocalScaleAsJointRadius&&this.object.pp_setScaleLocal(this._myTrackedHandJointPose.getJointRadius())}}()})});var cn=f(()=>{WL.registerComponent("pp-copy-hand-transform",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"}},{init:function(){this._myHandednessType=this._myHandedness==0?PP.Handedness.LEFT:PP.Handedness.RIGHT},update:function(e){let t=PP.myPlayerObjects.myHands[this._myHandednessType];this.object.pp_setTransformQuat(t.pp_getTransformQuat()),this.object.pp_setScale(t.pp_getScale())}})});var yn=f(()=>{WL.registerComponent("pp-copy-head-transform",{},{update:function(e){let t=PP.myPlayerObjects.myHead;this.object.pp_setTransformQuat(t.pp_getTransformQuat()),this.object.pp_setScale(t.pp_getScale())}})});var hn=f(()=>{WL.registerComponent("pp-copy-player-transform",{},{update:function(e){let t=PP.myPlayerObjects.myPlayer;this.object.pp_setTransformQuat(t.pp_getTransformQuat()),this.object.pp_setScale(t.pp_getScale())}})});var pn=f(()=>{WL.registerComponent("pp-copy-player-pivot-transform",{},{update:function(e){let t=PP.myPlayerObjects.myPlayerPivot;this.object.pp_setTransformQuat(t.pp_getTransformQuat()),this.object.pp_setScale(t.pp_getScale())}})});var _n=f(()=>{PP.ToolHandedness={NONE:null,LEFT:"left",RIGHT:"right"};PP.ToolInputSourceType={NONE:null,GAMEPAD:0,TRACKED_HAND:1}});var dn=f(()=>{WL.registerComponent("pp-tool-cursor",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myFixForward:{type:WL.Type.Bool,default:!0},_myApplyDefaultCursorOffset:{type:WL.Type.Bool,default:!0},_myPulseOnHover:{type:WL.Type.Bool,default:!1},_myShowFingerCursor:{type:WL.Type.Bool,default:!1}},{init:function(){this._myHandednessString=["left","right"][this._myHandedness],this._myCursorPositionDefaultOffset=PP.vec3_create(0,-.035,-.05),this._myCursorRotationDefaultOffset=PP.vec3_create(-30,0,0),this._myCursorMeshScale=PP.vec3_create(.0025,.0025,.0025),this._myCursorColor=[255/255,255/255,255/255,1],this._myCursorTargetCollisionGroup=7},start:function(){this._myToolCursorObject=WL.scene.addObject(this.object),this._myFixForwardObject=WL.scene.addObject(this._myToolCursorObject),this._myFixForward&&this._myFixForwardObject.pp_rotateObject(PP.vec3_create(0,180,0)),this._myCursorObjectVR=WL.scene.addObject(this._myFixForwardObject),this._myApplyDefaultCursorOffset&&(this._myCursorObjectVR.pp_setPositionLocal(this._myCursorPositionDefaultOffset),this._myCursorObjectVR.pp_rotateObject(this._myCursorRotationDefaultOffset));{this._myCursorMeshobject=WL.scene.addObject(this._myCursorObjectVR),this._myCursorMeshobject.pp_setScale(this._myCursorMeshScale);let i=this._myCursorMeshobject.addComponent("mesh");i.mesh=PP.myDefaultResources.myMeshes.mySphere,i.material=PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),i.material.color=this._myCursorColor;let s=this._myCursorObjectVR.addComponent("cursor",{collisionGroup:this._myCursorTargetCollisionGroup,handedness:this._myHandedness+1,cursorObject:this._myCursorMeshobject});s.rayCastMode=0,this._myPulseOnHover&&s.globalTarget.addHoverFunction(this._pulseOnHover.bind(this))}this._myCursorObjectNonVR=WL.scene.addObject(this._myToolCursorObject);{let i=this._myCursorObjectNonVR.addComponent("cursor",{collisionGroup:this._myCursorTargetCollisionGroup,handedness:this._myHandedness+1});i.rayCastMode=0,this._myPulseOnHover&&i.globalTarget.addHoverFunction(this._pulseOnHover.bind(this)),i.setViewComponent(PP.myPlayerObjects.myNonVRCamera.getComponent("view"))}let e=null,t=.0125;if(this._myShowFingerCursor){e=this._myToolCursorObject.pp_addObject();let i=e.addComponent("mesh");i.mesh=PP.myDefaultResources.myMeshes.mySphere,i.material=PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),i.material.color=this._myCursorColor,e.pp_setScale(t)}this._myFingerCursorObject=WL.scene.addObject(this._myToolCursorObject),this._myFingerCursorComponent=this._myFingerCursorObject.addComponent("pp-finger-cursor",{_myHandedness:this._myHandedness,_myEnableMultipleClicks:!0,_myCollisionGroup:this._myCursorTargetCollisionGroup,_myCollisionSize:t,_myCursorObject:e}),this._myCursorObjectVR.pp_setActive(!1),this._myCursorObjectNonVR.pp_setActive(!1),this._myFingerCursorObject.pp_setActive(!1)},update:function(){let e=PP.quat2_create(),t=PP.mat4_create();return function(s){let n=this._isUsingHand();this._myFingerCursorObject.pp_setActive(n),n?(this._myCursorObjectNonVR.pp_setActive(!1),this._myCursorObjectVR.pp_setActive(!1)):PP.XRUtils.isSessionActive()?(this._myCursorObjectVR.pp_setActive(!n),this._myCursorObjectNonVR.pp_setActive(!1)):(this._myCursorObjectNonVR.pp_setActive(!n),this._myCursorObjectVR.pp_setActive(!1),this._myCursorObjectNonVR.pp_setTransformQuat(PP.myPlayerObjects.myNonVRCamera.pp_getTransformQuat(e)))}}(),_isUsingHand:function(){let e=!1;if(WL.xrSession&&WL.xrSession.inputSources)for(let t=0;t<WL.xrSession.inputSources.length;t++){let i=WL.xrSession.inputSources[t];if(i.hand&&i.handedness==this._myHandednessString){e=!0;break}}return e},_pulseOnHover:function(e){let t=e.getComponent("cursor-target");t&&!t.isSurface&&(this._myHandedness==0?PP.myLeftGamepad&&PP.myLeftGamepad.pulse(.4,0):PP.myRightGamepad&&PP.myRightGamepad.pulse(.4,0))}})});var Pn=f(()=>{PP.ConsoleVRWidgetSetup=class{constructor(){this._initializeBuildSetup(),this._initializeRuntimeSetup()}_initializeBuildSetup(){this.myBackgroundColor=[46/255,46/255,46/255,1],this.myCursorTargetCollisionCollider=2,this.myCursorTargetCollisionGroup=7,this.myCursorTargetCollisionThickness=.001,this.myDefaultTextColor=[255/255,255/255,255/255,1],this.myTextAlignment=2,this.myTextJustification=2,this.myTextColor=this.myDefaultTextColor,this.myMessageTypeColors=[],this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.LOG]=this.myDefaultTextColor,this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.ERROR]=[255/255,40/255,40/255,1],this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.WARN]=[250/255,220/255,40/255,1],this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.DEBUG]=[60/255,200/255,255/255,1],this.myMessagesPanelPosition=PP.vec3_create(0,.075,0),this.myMessagesBackgroundScale=PP.vec3_create(.34,.15,1);{let t=.03,i=t*this.myMessagesBackgroundScale[0]/this.myMessagesBackgroundScale[1]*.8,s=-this.myMessagesBackgroundScale[0]+this.myMessagesBackgroundScale[0]*t,n=this.myMessagesBackgroundScale[1]-this.myMessagesBackgroundScale[1]*i;this.myMessagesTextsPanelPosition=PP.vec3_create(s,n,.007)}this.myMessagesTextsPanelScale=PP.vec3_create(.1,.1,.1),this.myMessagesTextStartString=`.
`,this.myMessagesTextAlignment=1,this.myMessagesTextJustification=3,this.myMessagesTextPositions=[],this.myMessagesTextPositions[PP.ConsoleVRWidget.MessageType.LOG]=PP.vec3_create(0,0,1e-5),this.myMessagesTextPositions[PP.ConsoleVRWidget.MessageType.ERROR]=PP.vec3_create(0,0,0),this.myMessagesTextPositions[PP.ConsoleVRWidget.MessageType.WARN]=PP.vec3_create(0,0,0),this.myMessagesTextPositions[PP.ConsoleVRWidget.MessageType.DEBUG]=PP.vec3_create(0,0,0),this.myMessagesTextColors=[],this.myMessagesTextColors[PP.ConsoleVRWidget.MessageType.LOG]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.LOG],this.myMessagesTextColors[PP.ConsoleVRWidget.MessageType.ERROR]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.ERROR],this.myMessagesTextColors[PP.ConsoleVRWidget.MessageType.WARN]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.WARN],this.myMessagesTextColors[PP.ConsoleVRWidget.MessageType.DEBUG]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.DEBUG],this.myButtonsPanelPosition=PP.vec3_create(0,-.11,.015),this.myButtonBackgroundScale=PP.vec3_create(.04,.02,1),this.myButtonTextPosition=PP.vec3_create(0,0,.007),this.myButtonTextScale=PP.vec3_create(.18,.18,.18),this.myButtonCursorTargetPosition=PP.vec3_create(0,0,0),this.myButtonCursorTargetPosition[2]=this.myButtonTextPosition[2],this.myButtonsCollisionCollider=this.myCursorTargetCollisionCollider,this.myButtonsCollisionGroup=this.myCursorTargetCollisionGroup,this.myButtonsCollisionExtents=this.myButtonBackgroundScale.slice(0),this.myButtonsCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myClearButtonTextLabel="clear",this.myUpButtonTextLabel="up",this.myDownButtonTextLabel="down",this.myFilterButtonsTextColors=[],this.myFilterButtonsTextColors[PP.ConsoleVRWidget.MessageType.LOG]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.LOG],this.myFilterButtonsTextColors[PP.ConsoleVRWidget.MessageType.ERROR]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.ERROR],this.myFilterButtonsTextColors[PP.ConsoleVRWidget.MessageType.WARN]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.WARN],this.myFilterButtonsTextColors[PP.ConsoleVRWidget.MessageType.DEBUG]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.DEBUG],this.myFilterButtonsTextLabel=[],this.myFilterButtonsTextLabel[PP.ConsoleVRWidget.MessageType.LOG]="log",this.myFilterButtonsTextLabel[PP.ConsoleVRWidget.MessageType.ERROR]="error",this.myFilterButtonsTextLabel[PP.ConsoleVRWidget.MessageType.WARN]="warn",this.myFilterButtonsTextLabel[PP.ConsoleVRWidget.MessageType.DEBUG]="debug";{let t=7,i=Math.max(.68,this.myButtonBackgroundScale[0]*t),s=2+3+4+4+1+2,n=Math.max((i-t*this.myButtonBackgroundScale[0]*2)/s,0),o=this.myButtonBackgroundScale[0],a=-i/2;this.myFilterButtonsPositions=[],this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.LOG]=[a+n*2+o,0,0],this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.ERROR]=[this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.LOG][0]+o+n+o,0,0],this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.WARN]=[this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.ERROR][0]+o+n+o,0,0],this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.DEBUG]=[this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.WARN][0]+o+n+o,0,0],this.myClearButtonPosition=[this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.DEBUG][0]+o+n*4+o,0,0],this.myUpButtonPosition=[this.myClearButtonPosition[0]+o+n*4+o,0,0],this.myDownButtonPosition=[this.myUpButtonPosition[0]+o+n+o,0,0]}this.myNotifyIconBackgroundScale=PP.vec3_create(.01,.01,1),this.myNotifyIconPanelPositions=[],this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE]=PP.vec3_create(0,0,0),this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE][0]=-this.myMessagesBackgroundScale[0]+this.myNotifyIconBackgroundScale[0]+.01,this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE][1]=-this.myMessagesBackgroundScale[1]+this.myNotifyIconBackgroundScale[1]+.01,this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE][2]=this.myMessagesTextsPanelPosition[2]-1e-5,this.myNotifyIconPanelPositions[PP.ToolHandedness.LEFT]=this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE],this.myNotifyIconPanelPositions[PP.ToolHandedness.RIGHT]=this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE],this.myNotifyIconCursorTargetPosition=PP.vec3_create(0,0,0),this.myNotifyIconCursorTargetPosition[2]=this.myButtonsPanelPosition[2]+this.myButtonTextPosition[2]-this.myMessagesTextsPanelPosition[2],this.myNotifyIconCollisionExtents=this.myNotifyIconBackgroundScale.slice(0),this.myNotifyIconCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myNotifyIconColor=[210/255,210/255,210/255,1],this.myPointerCollisionCollider=this.myCursorTargetCollisionCollider,this.myPointerCollisionGroup=this.myCursorTargetCollisionGroup;{let t=Math.abs(this.myMessagesPanelPosition[1]-this.myMessagesBackgroundScale[1]-(this.myButtonsPanelPosition[1]+this.myButtonBackgroundScale[1])),i=this.myMessagesBackgroundScale[1]+this.myButtonBackgroundScale[1]+t/2;this.myPointerCollisionExtents=PP.vec3_create(this.myMessagesBackgroundScale[0],i,this.myCursorTargetCollisionThickness)}this.myPointerCursorTargetPosition=PP.vec3_create(0,0,0),this.myPointerCursorTargetPosition[1]=this.myMessagesPanelPosition[1]+this.myMessagesBackgroundScale[1]-this.myPointerCollisionExtents[1],this.myPointerCursorTargetPosition[2]=this.myButtonsPanelPosition[2]+this.myButtonTextPosition[2]-1e-4}_initializeRuntimeSetup(){this.myTabString="     ",this.myAssertStartString="Assertion failed:",this.myMaxCharactersPerLine=100,this.myMaxLineSplits=50,this.myMaxLines=22,this.myMaxMessages=2e3,this.myMaxMessagesDeletePad=2e3,this.myLinesBetweenMessages=1,this.myButtonHoverColor=[150/255,150/255,150/255,1],this.myButtonDisabledTextColor=this.myBackgroundColor,this.myButtonDisabledBackgroundColor=[110/255,110/255,110/255,1],this.myFilterButtonDisabledTextColor=this.myButtonDisabledTextColor,this.myFilterButtonDisabledBackgroundColor=this.myButtonDisabledBackgroundColor,this.myScrollDelay=.1,this.myScrollAmount=1,this.myScrollThumbstickHandedness=PP.ToolHandedness.RIGHT,this.myScrollThumbstickDelay=.1,this.myScrollThumbstickMinThreshold=.2,this.myScrollThumbstickAmount=3,this.myPulseDelay=5,this.myPulseIntensity=.3,this.myPulseDuration=.085,this.myClearBrowserConsoleWhenClearPressed=!0,this.myGamepadScrollOnlyOnHover=!0}}});var fn=f(()=>{PP.ConsoleVRWidgetUI=class{build(t,i,s){this._myParentObject=t,this._mySetup=i,this._myAdditionalSetup=s,this._myPlaneMesh=PP.MeshUtils.createPlaneMesh(),this._createSkeleton(),this._setTransforms(),this._addComponents(),this._setTransformForNonVR(),WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))}setVisible(t){this.myPivotObject.pp_setActiveHierarchy(t)}_createSkeleton(){this.myPivotObject=WL.scene.addObject(this._myParentObject),this._createMessagesSkeleton(),this._createButtonsSkeleton(),this._createPointerSkeleton()}_createMessagesSkeleton(){this.myMessagesPanel=WL.scene.addObject(this.myPivotObject),this.myMessagesBackground=WL.scene.addObject(this.myMessagesPanel),this.myMessagesTextsPanel=WL.scene.addObject(this.myMessagesPanel),this.myMessagesTexts=[];for(let t in PP.ConsoleVRWidget.MessageType)this.myMessagesTexts[PP.ConsoleVRWidget.MessageType[t]]=WL.scene.addObject(this.myMessagesTextsPanel);this.myNotifyIconPanel=WL.scene.addObject(this.myMessagesPanel),this.myNotifyIconBackground=WL.scene.addObject(this.myNotifyIconPanel),this.myNotifyIconCursorTarget=WL.scene.addObject(this.myNotifyIconPanel)}_createButtonsSkeleton(){this.myButtonsPanel=WL.scene.addObject(this.myPivotObject),this.myFilterButtonsPanels=[],this.myFilterButtonsBackgrounds=[],this.myFilterButtonsTexts=[],this.myFilterButtonsCursorTargets=[];for(let t in PP.ConsoleVRWidget.MessageType)this.myFilterButtonsPanels[PP.ConsoleVRWidget.MessageType[t]]=WL.scene.addObject(this.myButtonsPanel),this.myFilterButtonsBackgrounds[PP.ConsoleVRWidget.MessageType[t]]=WL.scene.addObject(this.myFilterButtonsPanels[PP.ConsoleVRWidget.MessageType[t]]),this.myFilterButtonsTexts[PP.ConsoleVRWidget.MessageType[t]]=WL.scene.addObject(this.myFilterButtonsPanels[PP.ConsoleVRWidget.MessageType[t]]),this.myFilterButtonsCursorTargets[PP.ConsoleVRWidget.MessageType[t]]=WL.scene.addObject(this.myFilterButtonsPanels[PP.ConsoleVRWidget.MessageType[t]]);this.myClearButtonPanel=WL.scene.addObject(this.myButtonsPanel),this.myClearButtonBackground=WL.scene.addObject(this.myClearButtonPanel),this.myClearButtonText=WL.scene.addObject(this.myClearButtonPanel),this.myClearButtonCursorTarget=WL.scene.addObject(this.myClearButtonPanel),this.myUpButtonPanel=WL.scene.addObject(this.myButtonsPanel),this.myUpButtonBackground=WL.scene.addObject(this.myUpButtonPanel),this.myUpButtonText=WL.scene.addObject(this.myUpButtonPanel),this.myUpButtonCursorTarget=WL.scene.addObject(this.myUpButtonPanel),this.myDownButtonPanel=WL.scene.addObject(this.myButtonsPanel),this.myDownButtonBackground=WL.scene.addObject(this.myDownButtonPanel),this.myDownButtonText=WL.scene.addObject(this.myDownButtonPanel),this.myDownButtonCursorTarget=WL.scene.addObject(this.myDownButtonPanel)}_createPointerSkeleton(){this.myPointerCursorTarget=WL.scene.addObject(this.myPivotObject)}_setTransforms(){this.myPivotObject.setDirty(),this._setMessagesTransforms(),this._setButtonsTransforms(),this._setPointerTransform()}_setMessagesTransforms(){this.myMessagesPanel.setTranslationLocal(this._mySetup.myMessagesPanelPosition),this.myMessagesBackground.scale(this._mySetup.myMessagesBackgroundScale),this.myMessagesTextsPanel.setTranslationLocal(this._mySetup.myMessagesTextsPanelPosition),this.myMessagesTextsPanel.scale(this._mySetup.myMessagesTextsPanelScale);for(let t in PP.ConsoleVRWidget.MessageType)this.myMessagesTexts[PP.ConsoleVRWidget.MessageType[t]].setTranslationLocal(this._mySetup.myMessagesTextPositions[PP.ConsoleVRWidget.MessageType[t]]);this.myNotifyIconPanel.setTranslationLocal(this._mySetup.myNotifyIconPanelPositions[this._myAdditionalSetup.myHandedness]),this.myNotifyIconBackground.scale(this._mySetup.myNotifyIconBackgroundScale),this.myNotifyIconCursorTarget.setTranslationLocal(this._mySetup.myNotifyIconCursorTargetPosition)}_setButtonsTransforms(){this.myButtonsPanel.setTranslationLocal(this._mySetup.myButtonsPanelPosition);for(let t in PP.ConsoleVRWidget.MessageType)this.myFilterButtonsPanels[PP.ConsoleVRWidget.MessageType[t]].setTranslationLocal(this._mySetup.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType[t]]),this.myFilterButtonsBackgrounds[PP.ConsoleVRWidget.MessageType[t]].scale(this._mySetup.myButtonBackgroundScale),this.myFilterButtonsTexts[PP.ConsoleVRWidget.MessageType[t]].setTranslationLocal(this._mySetup.myButtonTextPosition),this.myFilterButtonsTexts[PP.ConsoleVRWidget.MessageType[t]].scale(this._mySetup.myButtonTextScale),this.myFilterButtonsCursorTargets[PP.ConsoleVRWidget.MessageType[t]].setTranslationLocal(this._mySetup.myButtonCursorTargetPosition);this.myClearButtonPanel.setTranslationLocal(this._mySetup.myClearButtonPosition),this.myClearButtonBackground.scale(this._mySetup.myButtonBackgroundScale),this.myClearButtonText.setTranslationLocal(this._mySetup.myButtonTextPosition),this.myClearButtonText.scale(this._mySetup.myButtonTextScale),this.myClearButtonCursorTarget.setTranslationLocal(this._mySetup.myButtonCursorTargetPosition),this.myUpButtonPanel.setTranslationLocal(this._mySetup.myUpButtonPosition),this.myUpButtonBackground.scale(this._mySetup.myButtonBackgroundScale),this.myUpButtonText.setTranslationLocal(this._mySetup.myButtonTextPosition),this.myUpButtonText.scale(this._mySetup.myButtonTextScale),this.myUpButtonCursorTarget.setTranslationLocal(this._mySetup.myButtonCursorTargetPosition),this.myDownButtonPanel.setTranslationLocal(this._mySetup.myDownButtonPosition),this.myDownButtonBackground.scale(this._mySetup.myButtonBackgroundScale),this.myDownButtonText.setTranslationLocal(this._mySetup.myButtonTextPosition),this.myDownButtonText.scale(this._mySetup.myButtonTextScale),this.myDownButtonCursorTarget.setTranslationLocal(this._mySetup.myButtonCursorTargetPosition)}_setPointerTransform(){this.myPointerCursorTarget.setTranslationLocal(this._mySetup.myPointerCursorTargetPosition)}_addComponents(){this._addMessagesComponents(),this._addButtonsComponents(),this._addPointerComponents()}_addMessagesComponents(){let t=this.myMessagesBackground.addComponent("mesh");t.mesh=this._myPlaneMesh,t.material=this._myAdditionalSetup.myPlaneMaterial.clone(),t.material.color=this._mySetup.myBackgroundColor,this.myMessagesTextComponents=[];for(let i in PP.ConsoleVRWidget.MessageType){let s=this.myMessagesTexts[PP.ConsoleVRWidget.MessageType[i]].addComponent("text");s.alignment=this._mySetup.myMessagesTextAlignment,s.justification=this._mySetup.myMessagesTextJustification,s.material=this._myAdditionalSetup.myTextMaterial.clone(),s.material.color=this._mySetup.myMessagesTextColors[PP.ConsoleVRWidget.MessageType[i]],s.lineSpacing=1.2,s.text=this._mySetup.myMessagesTextStartString,this.myMessagesTextComponents[PP.ConsoleVRWidget.MessageType[i]]=s}this.myNotifyIconBackgroundComponent=this.myNotifyIconBackground.addComponent("mesh"),this.myNotifyIconBackgroundComponent.mesh=this._myPlaneMesh,this.myNotifyIconBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myNotifyIconBackgroundComponent.material.color=this._mySetup.myNotifyIconColor,this.myNotifyIconCursorTargetComponent=this.myNotifyIconCursorTarget.addComponent("cursor-target"),this.myNotifyIconCollisionComponent=this.myNotifyIconCursorTarget.addComponent("collision"),this.myNotifyIconCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myNotifyIconCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myNotifyIconCollisionComponent.extents=this._mySetup.myNotifyIconCollisionExtents}_addButtonsComponents(){this.myFilterButtonsBackgroundComponents=[],this.myFilterButtonsTextComponents=[],this.myFilterButtonsCursorTargetComponents=[],this.myFilterButtonsCollisionComponents=[];for(let t in PP.ConsoleVRWidget.MessageType){let i=this.myFilterButtonsBackgrounds[PP.ConsoleVRWidget.MessageType[t]].addComponent("mesh");i.mesh=this._myPlaneMesh,i.material=this._myAdditionalSetup.myPlaneMaterial.clone(),i.material.color=this._mySetup.myBackgroundColor;let s=this.myFilterButtonsTexts[PP.ConsoleVRWidget.MessageType[t]].addComponent("text");this._setupButtonTextComponent(s),s.material.color=this._mySetup.myFilterButtonsTextColors[PP.ConsoleVRWidget.MessageType[t]],s.text=this._mySetup.myFilterButtonsTextLabel[PP.ConsoleVRWidget.MessageType[t]];let n=this.myFilterButtonsCursorTargets[PP.ConsoleVRWidget.MessageType[t]].addComponent("cursor-target"),o=this.myFilterButtonsCursorTargets[PP.ConsoleVRWidget.MessageType[t]].addComponent("collision");o.collider=this._mySetup.myButtonsCollisionCollider,o.group=1<<this._mySetup.myButtonsCollisionGroup,o.extents=this._mySetup.myButtonsCollisionExtents,this.myFilterButtonsBackgroundComponents[PP.ConsoleVRWidget.MessageType[t]]=i,this.myFilterButtonsTextComponents[PP.ConsoleVRWidget.MessageType[t]]=s,this.myFilterButtonsCursorTargetComponents[PP.ConsoleVRWidget.MessageType[t]]=n,this.myFilterButtonsCollisionComponents[PP.ConsoleVRWidget.MessageType[t]]=o}{let t=this.myClearButtonBackground.addComponent("mesh");t.mesh=this._myPlaneMesh,t.material=this._myAdditionalSetup.myPlaneMaterial.clone(),t.material.color=this._mySetup.myBackgroundColor;let i=this.myClearButtonText.addComponent("text");this._setupButtonTextComponent(i),i.text=this._mySetup.myClearButtonTextLabel;let s=this.myClearButtonCursorTarget.addComponent("cursor-target"),n=this.myClearButtonCursorTarget.addComponent("collision");n.collider=this._mySetup.myButtonsCollisionCollider,n.group=1<<this._mySetup.myButtonsCollisionGroup,n.extents=this._mySetup.myButtonsCollisionExtents,this.myClearButtonBackgroundComponent=t,this.myClearButtonTextComponent=i,this.myClearButtonCursorTargetComponent=s,this.myClearButtonCollisionComponent=n}{let t=this.myUpButtonBackground.addComponent("mesh");t.mesh=this._myPlaneMesh,t.material=this._myAdditionalSetup.myPlaneMaterial.clone(),t.material.color=this._mySetup.myBackgroundColor;let i=this.myUpButtonText.addComponent("text");this._setupButtonTextComponent(i),i.text=this._mySetup.myUpButtonTextLabel;let s=this.myUpButtonCursorTarget.addComponent("cursor-target"),n=this.myUpButtonCursorTarget.addComponent("collision");n.collider=this._mySetup.myButtonsCollisionCollider,n.group=1<<this._mySetup.myButtonsCollisionGroup,n.extents=this._mySetup.myButtonsCollisionExtents,this.myUpButtonBackgroundComponent=t,this.myUpButtonTextComponent=i,this.myUpButtonCursorTargetComponent=s,this.myUpButtonCollisionComponent=n}{let t=this.myDownButtonBackground.addComponent("mesh");t.mesh=this._myPlaneMesh,t.material=this._myAdditionalSetup.myPlaneMaterial.clone(),t.material.color=this._mySetup.myBackgroundColor;let i=this.myDownButtonText.addComponent("text");this._setupButtonTextComponent(i),i.text=this._mySetup.myDownButtonTextLabel;let s=this.myDownButtonCursorTarget.addComponent("cursor-target"),n=this.myDownButtonCursorTarget.addComponent("collision");n.collider=this._mySetup.myButtonsCollisionCollider,n.group=1<<this._mySetup.myButtonsCollisionGroup,n.extents=this._mySetup.myButtonsCollisionExtents,this.myDownButtonBackgroundComponent=t,this.myDownButtonTextComponent=i,this.myDownButtonCursorTargetComponent=s,this.myDownButtonCollisionComponent=n}}_addPointerComponents(){this.myPointerCursorTargetComponent=this.myPointerCursorTarget.addComponent("cursor-target"),this.myPointerCursorTargetComponent.isSurface=!0;let t=this.myPointerCursorTarget.addComponent("collision");t.collider=this._mySetup.myPointerCollisionCollider,t.group=1<<this._mySetup.myPointerCollisionGroup,t.extents=this._mySetup.myPointerCollisionExtents,this.myPointerCollisionComponent=t}_setupButtonTextComponent(t){t.alignment=this._mySetup.myTextAlignment,t.justification=this._mySetup.myTextJustification,t.material=this._myAdditionalSetup.myTextMaterial.clone(),t.material.color=this._mySetup.myTextColor,t.text=""}_onXRSessionStart(){this._setTransformForVR()}_onXRSessionEnd(){this._setTransformForNonVR()}_setTransformForVR(){this.myNotifyIconPanel.setTranslationLocal(this._mySetup.myNotifyIconPanelPositions[this._myAdditionalSetup.myHandedness])}_setTransformForNonVR(){this.myNotifyIconPanel.setTranslationLocal(this._mySetup.myNotifyIconPanelPositions[PP.ToolHandedness.NONE])}}});var gn=f(()=>{PP.ConsoleVRWidget=class{constructor(){this._myWidgetFrame=new PP.WidgetFrame("C",0),this._myWidgetFrame.registerWidgetVisibleChangedEventListener(this,this._widgetVisibleChanged.bind(this)),this._mySetup=new PP.ConsoleVRWidgetSetup,this._myAdditionalSetup=null,this._myUI=new PP.ConsoleVRWidgetUI,this._myMessages=[],this._myOldBrowserConsole=[],this._myOldConsoleVR=[],this._myTypeFilters=[];for(let t in PP.ConsoleVRWidget.MessageType)this._myTypeFilters[PP.ConsoleVRWidget.MessageType[t]]=!1;this._myScrollUp=!1,this._myScrollDown=!1,this._myScrollOffset=0,this._myScrollTimer=0,this._myScrollThumbstickTimer=0,this._myPulseTimer=0,this._myGamepadScrollActive=!0,this._mySetup.myGamepadScrollOnlyOnHover&&(this._myGamepadScrollActive=!1)}setVisible(t){this._myWidgetFrame.setVisible(t)}isVisible(){return this._myWidgetFrame.isVisible()}start(t,i){this._myLeftGamepad=PP.myLeftGamepad,this._myRightGamepad=PP.myRightGamepad,this._myAdditionalSetup=i,this._myWidgetFrame.start(t,i),this._myUI.build(this._myWidgetFrame.getWidgetObject(),this._mySetup,i),this._myUI.setVisible(this._myWidgetFrame.myIsWidgetVisible),this._setNotifyIconActive(!1),this._addListeners(),this._overrideConsolesFunctions()}_overrideConsolesFunctions(){this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.LOG]=console.log,this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.ERROR]=console.error,this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.WARN]=console.warn,this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.INFO]=console.info,this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.DEBUG]=console.debug,this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.ASSERT]=console.assert,this._myOldBrowserConsoleClear=console.clear,this._myAdditionalSetup.myOverrideBrowserConsole&&(console.log=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.LOG,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.error=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.ERROR,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.warn=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.WARN,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.info=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.INFO,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.debug=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.DEBUG,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.assert=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.ASSERT,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.clear=this._clearConsole.bind(this,!0,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),window.addEventListener("error",function(t){t.error!=null?this._consolePrint(PP.ConsoleVRWidget.ConsoleFunction.ERROR,PP.ConsoleVRWidget.Sender.WINDOW,"Uncaught",t.error.stack):this._consolePrint(PP.ConsoleVRWidget.ConsoleFunction.ERROR,PP.ConsoleVRWidget.Sender.WINDOW,"Uncaught",t.message)}.bind(this)),window.addEventListener("unhandledrejection",function(t){this._consolePrint(PP.ConsoleVRWidget.ConsoleFunction.ERROR,PP.ConsoleVRWidget.Sender.WINDOW,"Uncaught (in promise)",t.reason)}.bind(this))),this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.LOG]=PP.ConsoleVR.log,this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.ERROR]=PP.ConsoleVR.error,this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.WARN]=PP.ConsoleVR.warn,this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.INFO]=PP.ConsoleVR.info,this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.DEBUG]=PP.ConsoleVR.debug,this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.ASSERT]=PP.ConsoleVR.assert,this._myOldConsoleVRClear=PP.ConsoleVR.clear,PP.ConsoleVR.log=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.LOG,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.error=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.ERROR,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.warn=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.WARN,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.info=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.INFO,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.debug=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.DEBUG,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.assert=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.ASSERT,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.clear=this._clearConsole.bind(this,!0,PP.ConsoleVRWidget.Sender.CONSOLE_VR)}update(t){this._myWidgetFrame.update(t),this._myWidgetFrame.myIsWidgetVisible&&this._updateScroll(t),this._updateGamepadsExtraActions(t)}_updateText(t){let i="";if(!this._myTypeFilters[t]){let s=0,n=this._myMessages.length-1,o=Math.round(this._myScrollOffset);for(;n>=0&&s<this._mySetup.myMaxLines;){let a=this._myMessages[n];if(this._myTypeFilters[a.myType]){n-=1;continue}let l=a.myLines.length,u=0;if(o>0){let r=0;n!=this._myMessages.length-1&&(r=this._mySetup.myLinesBetweenMessages),o>=l+r?(o-=l+r,u=l+r):(u=o,o=0)}if(n!=this._myMessages.length-1){let r=this._mySetup.myLinesBetweenMessages-Math.max(this._mySetup.myLinesBetweenMessages-u,0),m=this._mySetup.myLinesBetweenMessages-r;s+m>this._mySetup.myMaxLines&&(m=this._myMaxLines-s);for(let c=0;c<m;c++)i=`
`.concat(i);s+=m,u-=r}let y=l-u;if(s+y>this._mySetup.myMaxLines&&(y=this._mySetup.myMaxLines-s),y>0)if(a.myType==t)i=a.myLines.slice(l-y-u,l-u).join(`
`).concat(`
`).concat(i),s+=y;else{for(let r=0;r<y;r++)i=`
`.concat(i);s+=y}n-=1}}i=this._mySetup.myMessagesTextStartString.concat(i),this._myUI.myMessagesTextComponents[t].text=i}_consolePrint(t,i,...s){if(t!=PP.ConsoleVRWidget.ConsoleFunction.ASSERT||s.length>0&&!s[0]){let n=this._argsToMessage(t,...s);this._addMessage(n),this._myMessages.length>=this._mySetup.myMaxMessages+this._mySetup.myMaxMessagesDeletePad&&(this._myMessages=this._myMessages.slice(this._myMessages.length-this._mySetup.myMaxMessages),this._clampScrollOffset()),this._updateAllTexts(),this._pulseGamepad()}switch(i){case PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE:this._myOldBrowserConsole[t].apply(console,s);break;case PP.ConsoleVRWidget.Sender.CONSOLE_VR:this._myOldConsoleVR[t].apply(PP.ConsoleVR,s);break;default:this._myOldBrowserConsole[t].apply(console,s);break}}_argsToMessage(t,...i){t==PP.ConsoleVRWidget.ConsoleFunction.ASSERT&&(i=i.slice(1),i.splice(0,0,this._mySetup.myAssertStartString));let s=this._consoleFunctionToMessageType(t),n=this._formatArgs(...i),o=this._splitLongLines(n);return s==PP.ConsoleVRWidget.MessageType.INFO?s=PP.ConsoleVRWidget.MessageType.LOG:(s==PP.ConsoleVRWidget.MessageType.EXCEPTION||s==PP.ConsoleVRWidget.MessageType.ASSERT)&&(s=PP.ConsoleVRWidget.MessageType.ERROR),new PP.ConsoleVRWidget.Message(s,o)}_consoleFunctionToMessageType(t){let i=PP.ConsoleVRWidget.MessageType.LOG;return t<PP.ConsoleVRWidget.ConsoleFunction.INFO?i=t:t==PP.ConsoleVRWidget.ConsoleFunction.INFO?i=PP.ConsoleVRWidget.MessageType.LOG:i=PP.ConsoleVRWidget.MessageType.ERROR,i}_formatArgs(...t){let i=[];for(let n=0;n<t.length;n++)t[n]===void 0?i.push("undefined"):i.push(this._stringifyItem(t[n]));return i.join(" ")}_stringifyItem(t){if(typeof t=="object"){let i=null,s=2;try{i=JSON.stringify(t,this._jsonReplacer.bind(this),s)}catch{let o=new WeakSet;i=JSON.stringify(t,function(a,l){if(typeof l=="object"&&l!==null){if(o.has(l))return"<stringify error: object already stringified>";o.add(l)}return this._jsonReplacer(a,l)}.bind(this),s)}return i=i.replaceAll('"[',"["),i=i.replaceAll("'[","["),i=i.replaceAll(']"',"]"),i=i.replaceAll("]'","]"),i}return t}_splitLongLines(t){let i=t.split(`
`),s=[];for(let n=0;n<i.length;n++){let o=i[n];if(o.length>this._mySetup.myMaxCharactersPerLine){let a=this._getSpacesAtStart(o),l=this._mySetup.myTabString.concat(a),u=0;for(;o.length>this._mySetup.myMaxCharactersPerLine&&u<this._mySetup.myMaxLineSplits;){let y=o.substr(0,this._mySetup.myMaxCharactersPerLine-1),r=o.substr(this._mySetup.myMaxCharactersPerLine-1);r=l.concat(r),s.push(y),o=r,u++}s.push(o)}else s.push(o)}return s}_getSpacesAtStart(t){let i="",s=0;for(;s<t.length&&t[s]==" ";)i=i.concat(" "),s++;return i}_addMessage(t){let i=!1;if(this._myMessages.length>0){let s=this._myMessages[this._myMessages.length-1];s.hasSameInfo(t)&&(s.increaseCount(),i=!0)}i||this._myMessages.push(t),this._adjustScrollOffsetAfterMessageAdded(t,i),this._updateNotifyIcon(t)}_adjustScrollOffsetAfterMessageAdded(t,i){!i&&!this._myTypeFilters[t.myType]&&this._myScrollOffset>0&&(this._myScrollOffset+=t.myLines.length+this._mySetup.myLinesBetweenMessages)}_updateAllTexts(){if(this._myWidgetFrame.myIsWidgetVisible)for(let t in PP.ConsoleVRWidget.MessageType)this._updateText(PP.ConsoleVRWidget.MessageType[t])}_updateNotifyIcon(t){!this._myTypeFilters[t.myType]&&this._myScrollOffset>0&&this._setNotifyIconActive(!0)}_updateScroll(t){if(this._myScrollUp)for(this._myScrollTimer+=t;this._myScrollTimer>this._mySetup.myScrollDelay;)this._myScrollTimer-=this._mySetup.myScrollDelay,this._myScrollOffset+=this._mySetup.myScrollAmount;else if(this._myScrollDown)for(this._myScrollTimer+=t;this._myScrollTimer>this._mySetup.myScrollDelay;)this._myScrollTimer-=this._mySetup.myScrollDelay,this._myScrollOffset-=this._mySetup.myScrollAmount;this._clampScrollOffset(),(this._myScrollUp||this._myScrollDown)&&this._updateAllTexts(),this._myScrollOffset==0&&this._setNotifyIconActive(!1)}_clampScrollOffset(){let t=this._getMaxScrollOffset();this._myScrollOffset=Math.min(Math.max(this._myScrollOffset,0),t)}_getMaxScrollOffset(){return Math.max(this._getLinesCount()-this._mySetup.myMaxLines,0)}_getLinesCount(){let t=0;for(let i of this._myMessages)this._myTypeFilters[i.myType]||(t+=i.myLines.length+this._mySetup.myLinesBetweenMessages);return t-=this._mySetup.myLinesBetweenMessages,t=Math.max(t,0),t}_addListeners(){let t=this._myUI;for(let i in PP.ConsoleVRWidget.MessageType){let s=t.myFilterButtonsCursorTargetComponents[PP.ConsoleVRWidget.MessageType[i]],n=t.myFilterButtonsBackgroundComponents[PP.ConsoleVRWidget.MessageType[i]].material,o=t.myFilterButtonsTextComponents[PP.ConsoleVRWidget.MessageType[i]].material;s.addTripleClickFunction(this._resetFilters.bind(this,PP.ConsoleVRWidget.MessageType[i])),s.addDoubleClickFunction(this._filterAllButOne.bind(this,PP.ConsoleVRWidget.MessageType[i],o)),s.addClickFunction(this._toggleFilter.bind(this,PP.ConsoleVRWidget.MessageType[i],o)),s.addHoverFunction(this._filterHover.bind(this,PP.ConsoleVRWidget.MessageType[i],n)),s.addUnHoverFunction(this._filterUnHover.bind(this,PP.ConsoleVRWidget.MessageType[i],n))}{let i=t.myClearButtonCursorTargetComponent,s=t.myClearButtonBackgroundComponent.material;i.addClickFunction(this._clearConsole.bind(this,!1,null)),i.addHoverFunction(this._genericHover.bind(this,s)),i.addUnHoverFunction(this._genericUnHover.bind(this,s))}{let i=t.myUpButtonCursorTargetComponent,s=t.myUpButtonBackgroundComponent.material;i.addDoubleClickFunction(this._instantScrollUp.bind(this,!0)),i.addDownFunction(this._setScrollUp.bind(this,!0)),i.addUpFunction(this._setScrollUp.bind(this,!1)),i.addUnHoverFunction(this._setScrollUp.bind(this,!1)),i.addHoverFunction(this._genericHover.bind(this,s)),i.addUnHoverFunction(this._genericUnHover.bind(this,s))}{let i=t.myDownButtonCursorTargetComponent,s=t.myDownButtonBackgroundComponent.material;i.addDoubleClickFunction(this._instantScrollDown.bind(this)),i.addDownFunction(this._setScrollDown.bind(this,!0)),i.addUpFunction(this._setScrollDown.bind(this,!1)),i.addUnHoverFunction(this._setScrollDown.bind(this,!1)),i.addHoverFunction(this._genericHover.bind(this,s)),i.addUnHoverFunction(this._genericUnHover.bind(this,s))}{let i=t.myNotifyIconCursorTargetComponent,s=t.myNotifyIconBackgroundComponent.material;i.addClickFunction(this._instantScrollDown.bind(this)),i.addHoverFunction(this._genericHover.bind(this,s)),i.addUnHoverFunction(this._notifyIconUnHover.bind(this))}t.myPointerCursorTargetComponent.addHoverFunction(this._setGamepadScrollActive.bind(this,!0)),t.myPointerCursorTargetComponent.addUnHoverFunction(this._setGamepadScrollActive.bind(this,!1))}_resetFilters(t){if(this._myWidgetFrame.myIsWidgetVisible){for(let i in PP.ConsoleVRWidget.MessageType){let s=this._myUI.myFilterButtonsBackgroundComponents[PP.ConsoleVRWidget.MessageType[i]].material,n=this._myUI.myFilterButtonsTextComponents[PP.ConsoleVRWidget.MessageType[i]].material;this._myTypeFilters[PP.ConsoleVRWidget.MessageType[i]]=!1,n.color=this._mySetup.myMessageTypeColors[PP.ConsoleVRWidget.MessageType[i]],PP.ConsoleVRWidget.MessageType[i]!=t&&(s.color=this._mySetup.myBackgroundColor)}this._clampScrollOffset(),this._updateAllTexts()}}_filterAllButOne(t){if(this._myWidgetFrame.myIsWidgetVisible){for(let i in PP.ConsoleVRWidget.MessageType){let s=this._myUI.myFilterButtonsBackgroundComponents[PP.ConsoleVRWidget.MessageType[i]].material,n=this._myUI.myFilterButtonsTextComponents[PP.ConsoleVRWidget.MessageType[i]].material;PP.ConsoleVRWidget.MessageType[i]!=t?(this._myTypeFilters[PP.ConsoleVRWidget.MessageType[i]]=!0,s.color=this._mySetup.myFilterButtonDisabledBackgroundColor,n.color=this._mySetup.myFilterButtonDisabledTextColor):(this._myTypeFilters[PP.ConsoleVRWidget.MessageType[i]]=!1,n.color=this._mySetup.myMessageTypeColors[t])}this._clampScrollOffset(),this._updateAllTexts()}}_toggleFilter(t,i){this._myWidgetFrame.myIsWidgetVisible&&(this._myTypeFilters[t]=!this._myTypeFilters[t],this._myTypeFilters[t]?i.color=this._mySetup.myFilterButtonDisabledTextColor:i.color=this._mySetup.myMessageTypeColors[t],this._clampScrollOffset(),this._updateAllTexts())}_clearConsole(t=!1,i=null){if(this._myWidgetFrame.myIsWidgetVisible||t)if(this._myMessages=[],this._clampScrollOffset(),this._updateAllTexts(),t)switch(i){case PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE:this._myOldBrowserConsoleClear.apply(console);break;case PP.ConsoleVRWidget.Sender.CONSOLE_VR:this._myOldConsoleVRClear.apply(PP.ConsoleVR);break;default:break}else this._mySetup.myClearBrowserConsoleWhenClearPressed&&PP.ConsoleVR._myRealClear()}_setScrollUp(t){(this._myWidgetFrame.myIsWidgetVisible||!t)&&(t&&(this._myScrollTimer=0),this._myScrollUp=t)}_setScrollDown(t){(this._myWidgetFrame.myIsWidgetVisible||!t)&&(t&&(this._myScrollTimer=0),this._myScrollDown=t)}_instantScrollUp(){this._myWidgetFrame.myIsWidgetVisible&&(this._myScrollOffset=this._getMaxScrollOffset(),this._updateAllTexts())}_instantScrollDown(){this._myWidgetFrame.myIsWidgetVisible&&(this._myScrollOffset=0,this._setNotifyIconActive(!1),this._updateAllTexts())}_setNotifyIconActive(t){this._myUI.myNotifyIconPanel.pp_setActiveHierarchy(t&&this._myWidgetFrame.myIsWidgetVisible)}_notifyIconUnHover(){let t=this._myUI.myNotifyIconBackgroundComponent.material;t.color=this._mySetup.myNotifyIconColor}_filterHover(t,i){this._genericHover(i)}_filterUnHover(t,i){this._myTypeFilters[t]?i.color=this._mySetup.myFilterButtonDisabledBackgroundColor:i.color=this._mySetup.myBackgroundColor}_genericHover(t){t.color=this._mySetup.myButtonHoverColor}_genericUnHover(t){t.color=this._mySetup.myBackgroundColor}_updateGamepadsExtraActions(t){this._myLeftGamepad&&this._myRightGamepad&&((this._myLeftGamepad.getButtonInfo(PP.GamepadButtonID.THUMBSTICK).isPressStart()&&this._myRightGamepad.getButtonInfo(PP.GamepadButtonID.THUMBSTICK).myIsPressed||this._myRightGamepad.getButtonInfo(PP.GamepadButtonID.THUMBSTICK).isPressStart()&&this._myLeftGamepad.getButtonInfo(PP.GamepadButtonID.THUMBSTICK).myIsPressed)&&this._toggleVisibility(),this._myPulseTimer=Math.max(this._myPulseTimer-t,0),this._updateScrollWithThumbstick(t))}_toggleVisibility(){this._myWidgetFrame.toggleVisibility()}_widgetVisibleChanged(t){this._myUI.setVisible(t),t&&this._updateAllTexts()}_updateScrollWithThumbstick(t){if(this._myWidgetFrame.myIsWidgetVisible&&this._myGamepadScrollActive){let i=[0,0];if(this._mySetup.myScrollThumbstickHandedness==PP.ToolHandedness.LEFT?i=this._myLeftGamepad.getAxesInfo().myAxes:this._mySetup.myScrollThumbstickHandedness==PP.ToolHandedness.RIGHT&&(i=this._myRightGamepad.getAxesInfo().myAxes),Math.abs(i[1])>this._mySetup.myScrollThumbstickMinThreshold){for(this._myScrollThumbstickTimer+=t;this._myScrollThumbstickTimer>this._mySetup.myScrollThumbstickDelay;){this._myScrollThumbstickTimer-=this._mySetup.myScrollThumbstickDelay;let s=(Math.abs(i[1])-this._mySetup.myScrollThumbstickMinThreshold)/(1-this._mySetup.myScrollThumbstickMinThreshold);this._myScrollOffset+=Math.sign(i[1])*s*this._mySetup.myScrollThumbstickAmount}this._clampScrollOffset(),this._updateAllTexts()}else this._myScrollThumbstickTimer=0}}_pulseGamepad(){if(this._myLeftGamepad&&this._myRightGamepad){let t=this._myAdditionalSetup.myPulseOnNewMessage;(t==PP.ConsoleVRWidget.PulseOnNewMessage.ALWAYS||!this._myWidgetFrame.myIsWidgetVisible&&t==PP.ConsoleVRWidget.PulseOnNewMessage.WHEN_HIDDEN)&&this._myPulseTimer==0&&(this._myAdditionalSetup.myHandedness==PP.ToolHandedness.RIGHT?this._myRightGamepad.pulse(this._mySetup.myPulseIntensity,this._mySetup.myPulseDuration):this._myLeftGamepad.pulse(this._mySetup.myPulseIntensity,this._mySetup.myPulseDuration),this._myPulseTimer=this._mySetup.myPulseDelay)}}_isSimpleArray(t){if(this._isSpecialSimpleArray(t))return!0;if(Array.isArray(t)){let i=!0;for(let s of t)if(s instanceof Object){i=!1;break}return i}return!1}_isSpecialSimpleArray(t){return t&&t.constructor&&(t.constructor.name=="Uint32Array"||t.constructor.name=="Int32Array"||t.constructor.name=="Float32Array"||t.constructor.name=="Float64Array")}_setGamepadScrollActive(t){this._myGamepadScrollActive=t,this._mySetup.myGamepadScrollOnlyOnHover||(this._myGamepadScrollActive=!0)}_jsonReplacer(t,i){if(i instanceof Map)return Array.from(i.entries());if(this._isSimpleArray(i)){let s=i;if(this._isSpecialSimpleArray(s)){let o=[];for(let a=0;a<s.length;a++)o[a]=s[a];s=o}let n=JSON.stringify(s);return n=n.split(",").join(", "),n}else return i}};PP.ConsoleVRWidget.AdditionalSetup=class{constructor(){this.myHandedness=PP.ToolHandedness.NONE,this.myOverrideBrowserConsole=!1,this.myShowOnStart=!1,this.myShowVisibilityButton=!1,this.myPulseOnNewMessage=PP.ConsoleVRWidget.PulseOnNewMessage.NEVER,this.myPlaneMaterial=null,this.myTextMaterial=null}};PP.ConsoleVRWidget.ConsoleFunction={DEBUG:0,WARN:1,ERROR:2,LOG:3,INFO:4,ASSERT:5};PP.ConsoleVRWidget.Sender={BROWSER_CONSOLE:0,CONSOLE_VR:1,WINDOW:2};PP.ConsoleVRWidget.PulseOnNewMessage={NEVER:0,ALWAYS:1,WHEN_HIDDEN:2};PP.ConsoleVRWidget.MessageType={DEBUG:0,WARN:1,ERROR:2,LOG:3};PP.ConsoleVRWidget.Message=class{constructor(t,i){this.myType=t,this.myLines=i,this._myOriginalText=i.join(`
`),this._myMessagesCount=1}hasSameInfo(t){return this._myOriginalText==t._myOriginalText&&this.myType==t.myType}increaseCount(){this._myMessagesCount+=1;let t="(x".concat(this._myMessagesCount).concat(") "),i=this._myOriginalText.slice(0);i=t.concat(i),this.myLines=i.split(`
`)}}});var Tn=f(()=>{PP.ConsoleVR={_myRealLog:console.log,_myRealError:console.error,_myRealWarn:console.warn,_myRealInfo:console.info,_myRealDebug:console.debug,_myRealAssert:console.assert,_myRealClear:console.clear,_myForwardToBrowserConsole:!0,log:function(...e){this._myForwardToBrowserConsole&&this._myRealLog.apply(console,e)},error:function(...e){this._myForwardToBrowserConsole&&this._myRealError.apply(console,e)},warn:function(...e){this._myForwardToBrowserConsole&&this._myRealWarn.apply(console,e)},info:function(...e){this._myForwardToBrowserConsole&&this._myRealInfo.apply(console,e)},debug:function(...e){this._myForwardToBrowserConsole&&this._myRealDebug.apply(console,e)},assert:function(...e){this._myForwardToBrowserConsole&&this._myRealAssert.apply(console,e)},clear:function(){this._myForwardToBrowserConsole&&this._myRealClear.apply(console)},setForwardToBrowserConsole:function(e){this._myForwardToBrowserConsole=e},isForwardToBrowserConsole:function(){return this._myForwardToBrowserConsole}}});var bn=f(()=>{WL.registerComponent("pp-console-vr",{_myHandedness:{type:WL.Type.Enum,values:["none","left","right"],default:"none"},_myOverrideBrowserConsole:{type:WL.Type.Bool,default:!0},_myShowOnStart:{type:WL.Type.Bool,default:!1},_myShowVisibilityButton:{type:WL.Type.Bool,default:!1},_myPulseOnNewMessage:{type:WL.Type.Enum,values:["never","always","when hidden"],default:"never"}},{init:function(){this._myWidget=new PP.ConsoleVRWidget,this._myStarted=!1},start:function(){let e=new PP.ConsoleVRWidget.AdditionalSetup;e.myHandedness=[null,"left","right"][this._myHandedness],e.myOverrideBrowserConsole=this._myOverrideBrowserConsole,e.myShowOnStart=this._myShowOnStart,e.myShowVisibilityButton=this._myShowVisibilityButton,e.myPulseOnNewMessage=this._myPulseOnNewMessage,e.myPlaneMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),e.myTextMaterial=PP.myDefaultResources.myMaterials.myText.clone(),this._myWidget.start(this.object,e),this._myWidgetVisibleBackup=this._myWidget.isVisible(),this._mySetVisibleNextUpdate=!1,this._myStarted=!0},update:function(e){this._mySetVisibleNextUpdate&&(this._mySetVisibleNextUpdate=!1,this._myWidget.setVisible(!1),this._myWidget.setVisible(this._myWidgetVisibleBackup)),this._myWidget.update(e)},onActivate(){this._mySetVisibleNextUpdate=!0},onDeactivate(){this._myStarted&&(this._myWidgetVisibleBackup=this._myWidget.isVisible(),this._myWidget.setVisible(!1))}})});var Cn=f(()=>{PP.EasyObjectTuner=class{constructor(t,i,s,n){this._myObject=t,this._myUseTuneTarget=n,this._mySetAsDefault=s,this._myEasyObject=this._myObject,this._myUseTuneTarget&&(this._myEasyObject=PP.myEasyTuneTarget),this._myPrevEasyObject=null;let o=this._getVariableNamePrefix();i==""?this._myEasyTuneVariableName=o.concat(this._myObject.objectId):this._myEasyTuneVariableName=o.concat(i)}start(){let t=this._createEasyTuneVariable(this._myEasyTuneVariableName);PP.myEasyTuneVariables.add(t),this._mySetAsDefault&&PP.setEasyTuneWidgetActiveVariable(this._myEasyTuneVariableName)}update(t){if(PP.myEasyTuneVariables.isActive(this._myEasyTuneVariableName)){if(this._myUseTuneTarget&&(this._myEasyObject=PP.myEasyTuneTarget),this._myPrevEasyObject!=this._myEasyObject)if(this._myPrevEasyObject=this._myEasyObject,this._myEasyObject){let i=this._getObjectValue(this._myEasyObject);PP.myEasyTuneVariables.set(this._myEasyTuneVariableName,i,!0)}else{let i=this._getDefaultValue();PP.myEasyTuneVariables.set(this._myEasyTuneVariableName,i,!0)}this._myEasyObject&&this._updateObjectValue(this._myEasyObject,PP.myEasyTuneVariables.get(this._myEasyTuneVariableName))}}updateVariableValue(t){PP.myEasyTuneVariables.set(this._myEasyTuneVariableName,t)}}});var Sn=f(()=>{WL.registerComponent("pp-easy-light-attenuation",{_myVariableName:{type:WL.Type.String,default:""},_mySetAsDefault:{type:WL.Type.Bool,default:!1},_myUseTuneTarget:{type:WL.Type.Bool,default:!1}},{init:function(){this._myEasyObjectTuner=new PP.EasyLightAttenuation(this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)}});PP.EasyLightAttenuation=class extends PP.EasyObjectTuner{constructor(t,i,s,n){super(t,i,s,n)}_getVariableNamePrefix(){return"Light Attenuation "}_createEasyTuneVariable(t){return new PP.EasyTuneNumber(t,this._getDefaultValue(),.01,3,0,1)}_getObjectValue(t){return this._getLightAttenuation(t)}_getDefaultValue(){return 0}_updateObjectValue(t,i){let s=i,n=t.pp_getComponent("light");n&&(n.color[3]=s)}_getLightAttenuation(t){let i=this._getDefaultValue(),s=t.pp_getComponent("light");return s&&(i=s.color[3]),i}}});var vn=f(()=>{WL.registerComponent("pp-easy-light-color",{_myVariableName:{type:WL.Type.String,default:""},_mySetAsDefault:{type:WL.Type.Bool,default:!1},_myUseTuneTarget:{type:WL.Type.Bool,default:!1},_myColorModel:{type:WL.Type.Enum,values:["rgb","hsv"]}},{init:function(){this._myEasyObjectTuner=new PP.EasyLightColor(this._myColorModel,this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)}});PP.EasyLightColor=class extends PP.EasyObjectTuner{constructor(t,i,s,n,o){super(i,s,n,o),this._myColorModel=t}_getVariableNamePrefix(){let t=null;return this._myColorModel==0?t="Light RGB ":t="Light HSV ",t}_createEasyTuneVariable(t){return new PP.EasyTuneIntArray(t,this._getDefaultValue(),100,0,255)}_getObjectValue(t){let i=null,s=this._getLightColor(t);return s?this._myColorModel==0?i=PP.ColorUtils.rgbCodeToHuman(s):i=PP.ColorUtils.hsvCodeToHuman(PP.ColorUtils.rgbToHsv(s)):i=this._getDefaultValue(),i}_getDefaultValue(){return PP.vec3_create()}_updateObjectValue(t,i){let s=i;this._myColorModel==0?s=PP.ColorUtils.rgbHumanToCode(s):s=PP.ColorUtils.hsvToRgb(PP.ColorUtils.hsvHumanToCode(s));let n=t.pp_getComponent("light");if(n&&(n.color[0]=s[0],n.color[1]=s[1],n.color[2]=s[2],n.color[3]=n.color[3]),PP.myRightGamepad.getButtonInfo(PP.GamepadButtonID.TOP_BUTTON).isPressStart()&&PP.myLeftGamepad.getButtonInfo(PP.GamepadButtonID.TOP_BUTTON).myIsPressed||PP.myLeftGamepad.getButtonInfo(PP.GamepadButtonID.TOP_BUTTON).isPressStart()&&PP.myRightGamepad.getButtonInfo(PP.GamepadButtonID.TOP_BUTTON).myIsPressed){let o=PP.ColorUtils.color1To255(PP.ColorUtils.rgbToHsv(s)),a=PP.ColorUtils.color1To255(s);console.log("RGB:",a.vec_toString(0),"- HSV:",o.vec_toString(0))}}_getLightColor(t){let i=null,s=t.pp_getComponent("light");return s&&(i=s.color.slice(0,3)),i}}});var xn=f(()=>{WL.registerComponent("pp-easy-mesh-color",{_myVariableName:{type:WL.Type.String,default:""},_myUseTuneTarget:{type:WL.Type.Bool,default:!1},_mySetAsDefault:{type:WL.Type.Bool,default:!1},_myColorModel:{type:WL.Type.Enum,values:["rgb","hsv"],default:"hsv"},_myColorType:{type:WL.Type.Enum,values:["color","diffuse color","ambient color","specular color","emissive color","fog color","ambient factor"],default:"color"}},{init:function(){this._myEasyObjectTuner=new PP.EasyMeshColor(this._myColorModel,this._myColorType,this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)},pp_clone(e){return e.pp_addComponent(this.type,{_myVariableName:this._myVariableName,_mySetAsDefault:this._mySetAsDefault,_myUseTuneTarget:this._myUseTuneTarget,_myColorModel:this._myColorModel,_myColorType:this._myColorType})}});PP.EasyMeshColor=class extends PP.EasyObjectTuner{constructor(t,i,s,n,o,a){super(s,n,o,a),this._myColorModel=t,this._myColorType=i,this._myColorVariableNames=["color","diffuseColor","ambientColor","specularColor","emissiveColor","fogColor","ambientFactor"]}_getVariableNamePrefix(){let t=null;return this._myColorModel==0?t="Mesh RGB ":t="Mesh HSV ",t}_createEasyTuneVariable(t){return this._myColorType==6?new PP.EasyTuneNumberArray(t,this._getDefaultValue(),.1,3,0,1):new PP.EasyTuneIntArray(t,this._getDefaultValue(),100,0,255)}_getObjectValue(t){let i=null,s=this._getMeshMaterial(t);return s?this._myColorType!=6?(i=s[this._myColorVariableNames[this._myColorType]].pp_clone(),this._myColorModel==0?i=PP.ColorUtils.rgbCodeToHuman(i):i=PP.ColorUtils.hsvCodeToHuman(PP.ColorUtils.rgbToHsv(i))):i=[s[this._myColorVariableNames[this._myColorType]]]:i=this._getDefaultValue(),i}_getDefaultValue(){return this._myColorType==6?[0]:PP.vec4_create()}_updateObjectValue(t,i){let s=i;this._myColorType!=6&&(this._myColorModel==0?s=PP.ColorUtils.rgbHumanToCode(s):s=PP.ColorUtils.hsvToRgb(PP.ColorUtils.hsvHumanToCode(s)));let n=this._getMeshMaterial(t);if(n&&(n[this._myColorVariableNames[this._myColorType]]=s),this._myColorType!=6&&(PP.myRightGamepad.getButtonInfo(PP.GamepadButtonID.TOP_BUTTON).isPressStart()&&PP.myLeftGamepad.getButtonInfo(PP.GamepadButtonID.TOP_BUTTON).myIsPressed||PP.myLeftGamepad.getButtonInfo(PP.GamepadButtonID.TOP_BUTTON).isPressStart()&&PP.myRightGamepad.getButtonInfo(PP.GamepadButtonID.TOP_BUTTON).myIsPressed)){let o=PP.ColorUtils.color1To255(PP.ColorUtils.rgbToHsv(s)),a=PP.ColorUtils.color1To255(s);console.log("RGB:",a.vec_toString(0),"- HSV:",o.vec_toString(0))}}_getMeshMaterial(t){let i=null,s=t.pp_getComponentHierarchy("mesh");return s&&(i=s.material),i}}});var Bn=f(()=>{WL.registerComponent("pp-easy-scale",{_myVariableName:{type:WL.Type.String,default:""},_mySetAsDefault:{type:WL.Type.Bool,default:!1},_myUseTuneTarget:{type:WL.Type.Bool,default:!1},_myIsLocal:{type:WL.Type.Bool,default:!1},_myScaleAsOne:{type:WL.Type.Bool,default:!0}},{init:function(){this._myEasyObjectTuner=new PP.EasyScale(this._myIsLocal,this._myScaleAsOne,this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)}});PP.EasyScale=class extends PP.EasyObjectTuner{constructor(t,i,s,n,o,a){super(s,n,o,a),this._myIsLocal=t,this._myScaleAsOne=i}_getVariableNamePrefix(){return"Scale "}_createEasyTuneVariable(t){return new PP.EasyTuneNumberArray(t,this._getDefaultValue(),1,3,.001,null,this._myScaleAsOne)}_getObjectValue(t){return this._myIsLocal?t.pp_getScaleLocal():t.pp_getScaleWorld()}_getDefaultValue(){return PP.vec3_create(1,1,1)}_updateObjectValue(t,i){this._myIsLocal?t.pp_setScaleLocal(i):t.pp_setScaleWorld(i)}}});var Ln=f(()=>{WL.registerComponent("pp-easy-set-tune-target-child-number",{_myVariableName:{type:WL.Type.String,default:""},_mySetAsDefault:{type:WL.Type.Bool,default:!1}},{init:function(){},start:function(){this._myEasyTuneVariableName="Target Child ",this._myVariableName==""?this._myEasyTuneVariableName=this._myEasyTuneVariableName.concat(this.object.objectId):this._myEasyTuneVariableName=this._myEasyTuneVariableName.concat(this._myVariableName);let e=this.object.pp_getChildren().length,t=1,i=e;e==0&&(t=0,i=0),PP.myEasyTuneVariables.add(new PP.EasyTuneInt(this._myEasyTuneVariableName,0,10,t,i)),this._mySetAsDefault&&PP.setEasyTuneWidgetActiveVariable(this._myEasyTuneVariableName),this._myCurrentChildIndex=-1,this._myCurrentChildrenCount=e},update:function(){if(PP.myEasyTuneVariables.isActive(this._myEasyTuneVariableName)){let e=this.object.pp_getChildren().length;if(e!=this._myCurrentChildrenCount){this._myCurrentChildrenCount=e;let i=1,s=e;e==0&&(i=0,s=0);let n=PP.myEasyTuneVariables.getEasyTuneVariable(this._myEasyTuneVariableName);n.setMin(i),n.setMax(s)}let t=PP.myEasyTuneVariables.get(this._myEasyTuneVariableName);t!=this._myCurrentChildIndex&&(t==0&&this._myCurrentChildIndex!=-1?PP.myEasyTuneTarget=null:t>0&&(PP.myEasyTuneTarget=this.object.pp_getChildren()[t-1]),this._myCurrentChildIndex=t)}}})});var In=f(()=>{WL.registerComponent("pp-easy-set-tune-target-grab",{},{init:function(){},start:function(){this._myGrabber=this.object.pp_getComponent("pp-grabber-hand")},update:function(){},_onRelease:function(e,t){PP.myEasyTuneTarget=t.object},_onGrab:function(e,t){},onActivate(){this._myGrabber.registerGrabEventListener(this,this._onGrab.bind(this)),this._myGrabber.registerThrowEventListener(this,this._onRelease.bind(this))},onDeactivate(){this._myGrabber.unregisterGrabEventListener(this),this._myGrabber.unregisterThrowEventListener(this)}})});var An=f(()=>{WL.registerComponent("pp-easy-transform",{_myVariableName:{type:WL.Type.String,default:""},_mySetAsDefault:{type:WL.Type.Bool,default:!1},_myUseTuneTarget:{type:WL.Type.Bool,default:!1},_myIsLocal:{type:WL.Type.Bool,default:!1},_myScaleAsOne:{type:WL.Type.Bool,default:!0}},{init:function(){this._myEasyObjectTuner=new PP.EasyTransform(this._myIsLocal,this._myScaleAsOne,this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)},pp_clone(e){return e.pp_addComponent(this.type,{_myVariableName:this._myVariableName,_mySetAsDefault:this._mySetAsDefault,_myUseTuneTarget:this._myUseTuneTarget,_myIsLocal:this._myIsLocal,_myUseTuneTarget:this._myUseTuneTarget})}});PP.EasyTransform=class extends PP.EasyObjectTuner{constructor(t,i,s,n,o,a){super(s,n,o,a),this._myIsLocal=t,this._myScaleAsOne=i}_getVariableNamePrefix(){return"Transform "}_createEasyTuneVariable(t){return new PP.EasyTuneTransform(t,this._getDefaultValue(),this._myScaleAsOne)}_getObjectValue(t){return this._myIsLocal?t.pp_getTransformLocal():t.pp_getTransformWorld()}_getDefaultValue(){return PP.mat4_create()}_updateObjectValue(t,i){this._myIsLocal?t.pp_setTransformLocal(i):t.pp_setTransformWorld(i)}}});var Mn=f(()=>{WL.registerComponent("pp-easy-mesh-ambient-factor",{_myVariableName:{type:WL.Type.String,default:""},_myUseTuneTarget:{type:WL.Type.Bool,default:!1},_mySetAsDefault:{type:WL.Type.Bool,default:!1}},{init:function(){this._myEasyObjectTuner=new PP.EasyMeshAmbientFactor(this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)},pp_clone(e){return e.pp_addComponent(this.type,{_myVariableName:this._myVariableName,_mySetAsDefault:this._mySetAsDefault,_myUseTuneTarget:this._myUseTuneTarget})}});PP.EasyMeshAmbientFactor=class extends PP.EasyObjectTuner{constructor(t,i,s,n){super(t,i,s,n)}_getVariableNamePrefix(){let t=null;return this._myColorModel==0,t="Mesh AF ",t}_createEasyTuneVariable(t){return new PP.EasyTuneNumber(t,this._getDefaultValue(),.1,3,0,1)}_getObjectValue(t){let i=null,s=this._getMeshMaterial(t);return s?i=s.ambientFactor:i=this._getDefaultValue(),i}_getDefaultValue(){return 0}_updateObjectValue(t,i){let s=i,n=this._getMeshMaterial(t);n&&(n.ambientFactor=s)}_getMeshMaterial(t){let i=null,s=t.pp_getComponentHierarchy("mesh");return s&&(i=s.material),i}}});var Vn=f(()=>{PP.EasyTuneBaseWidgetParams=class{constructor(){this.myVariablesImportCallback=null,this.myVariablesExportCallback=null}};PP.EasyTuneBaseWidget=class{constructor(t){this._mySetup=null,this._myUI=null,this._myParams=t,this._myAdditionalSetup=null,this._myVariable=null,this._myIsVisible=!0,this._myScrollVariableRequestCallbacks=new Map,this._myAppendToVariableName="",this._myScrollVariableActive=!1,this._myScrollDirection=0,this._myScrollVariableTimer=0,this._myHasScrolled=!1,this._myResetImportLabelTimer=new PP.Timer(0,!1),this._myResetExportLabelTimer=new PP.Timer(0,!1)}setVisible(t){t&&this._refreshUI(),this._myUI.setVisible(t),this._myIsVisible=t}setEasyTuneVariable(t,i){this._myVariable=t,typeof i<"u"?this._myAppendToVariableName=i:this._myAppendToVariableName="",this._setEasyTuneVariableHook(),this._refreshUI()}isScrollVariableActive(){return this._myScrollVariableActive}getScrollVariableDirection(){return this._myScrollDirection}setScrollVariableActive(t,i){this._myScrollVariableActive=t,this._myScrollDirection=i,this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay,this._myHasScrolled=!1}getWidget(){return this}syncWidget(t){t!=null?(t._myResetImportLabelTimer.isRunning()?this._myResetImportLabelTimer.start(t._myResetImportLabelTimer.getTimeLeft()):this._myResetImportLabelTimer.reset(),t._myResetExportLabelTimer.isRunning()?this._myResetExportLabelTimer.start(t._myResetExportLabelTimer.getTimeLeft()):this._myResetExportLabelTimer.reset(),this._myUI.myImportButtonTextComponent.text=t._myUI.myImportButtonTextComponent.text,this._myUI.myExportButtonTextComponent.text=t._myUI.myExportButtonTextComponent.text,this.setScrollVariableActive(t.isScrollVariableActive(),t.getScrollVariableDirection())):(this._myResetImportLabelTimer.reset(),this._myUI.myImportButtonTextComponent.text=this._mySetup.myImportButtonText,this._myResetExportLabelTimer.reset(),this._myUI.myExportButtonTextComponent.text=this._mySetup.myExportButtonText)}onImportSuccess(){this._myUI.myImportButtonTextComponent.text=this._mySetup.myImportSuccessButtonText,this._myResetImportLabelTimer.start(this._mySetup.myImportExportResetLabelSeconds)}onImportFailure(){this._myUI.myImportButtonTextComponent.text=this._mySetup.myImportFailureButtonText,this._myResetImportLabelTimer.start(this._mySetup.myImportExportResetLabelSeconds)}onExportSuccess(){this._myUI.myExportButtonTextComponent.text=this._mySetup.myExportSuccessButtonText,this._myResetExportLabelTimer.start(this._mySetup.myImportExportResetLabelSeconds)}onExportFailure(){this._myUI.myExportButtonTextComponent.text=this._mySetup.myExportFailureButtonText,this._myResetExportLabelTimer.start(this._mySetup.myImportExportResetLabelSeconds)}registerScrollVariableRequestEventListener(t,i){this._myScrollVariableRequestCallbacks.set(t,i)}unregisterScrollVariableRequestEventListener(t){this._myScrollVariableRequestCallbacks.delete(t)}start(t,i){this._myAdditionalSetup=i,this._mySetup.build(),this._myResetImportLabelTimer.setDuration(this._mySetup.myImportExportResetLabelSeconds),this._myResetExportLabelTimer.setDuration(this._mySetup.myImportExportResetLabelSeconds),this._myUI.build(t,this._mySetup,i),this._myUI.setImportExportButtonsActive(this._myAdditionalSetup.myEnableVariablesImportExportButtons),this._startHook(t,i),this._addListeners()}update(t){this._isActive()&&(this._updateHook(t),this._updateScrollVariable(t),this._updateImportExportLabel(t))}_setEasyTuneVariableHook(){}_refreshUIHook(){}_startHook(t,i){}_addListenersHook(){}_updateHook(t){}_refreshUI(){if(this._myVariable){if(this._myVariable.myName!=null)this._myUI.myVariableLabelTextComponent.text=this._myVariable.myName.concat(this._myAppendToVariableName);else{let t="Unknown";this._myUI.myVariableLabelTextComponent.text=t.concat(this._myAppendToVariableName)}this._refreshUIHook()}}_updateScrollVariable(t){this._myScrollVariableActive&&(this._myScrollVariableTimer<=0?(this._scrollVariableRequest(this._myScrollDirection),this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay,this._myHasScrolled=!0):this._myScrollVariableTimer-=t)}_updateImportExportLabel(t){this._myResetImportLabelTimer.isRunning(t)&&(this._myResetImportLabelTimer.update(t),this._myResetImportLabelTimer.isDone()&&(this._myResetImportLabelTimer.reset(),this._myUI.myImportButtonTextComponent.text=this._mySetup.myImportButtonText)),this._myResetExportLabelTimer.isRunning(t)&&(this._myResetExportLabelTimer.update(t),this._myResetExportLabelTimer.isDone()&&(this._myResetExportLabelTimer.reset(),this._myUI.myExportButtonTextComponent.text=this._mySetup.myExportButtonText))}_isActive(){return this._myIsVisible&&this._myVariable}_addListeners(){let t=this._myUI;t.myNextButtonCursorTargetComponent.addDownFunction(this._setScrollVariableActive.bind(this,!0,1,!1)),t.myNextButtonCursorTargetComponent.addDownOnHoverFunction(this._setScrollVariableActive.bind(this,!0,1,!1)),t.myNextButtonCursorTargetComponent.addUpFunction(this._setScrollVariableActive.bind(this,!1,0,!1)),t.myNextButtonCursorTargetComponent.addUpWithNoDownFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myNextButtonCursorTargetComponent.addUnHoverFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myNextButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myNextButtonBackgroundComponent.material)),t.myNextButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myNextButtonBackgroundComponent.material)),t.myPreviousButtonCursorTargetComponent.addDownFunction(this._setScrollVariableActive.bind(this,!0,-1,!1)),t.myPreviousButtonCursorTargetComponent.addDownOnHoverFunction(this._setScrollVariableActive.bind(this,!0,-1,!1)),t.myPreviousButtonCursorTargetComponent.addUpFunction(this._setScrollVariableActive.bind(this,!1,0,!1)),t.myPreviousButtonCursorTargetComponent.addUpWithNoDownFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myPreviousButtonCursorTargetComponent.addUnHoverFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myPreviousButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPreviousButtonBackgroundComponent.material)),t.myPreviousButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myPreviousButtonBackgroundComponent.material)),t.myImportButtonCursorTargetComponent.addUpFunction(this._importVariables.bind(this)),t.myImportButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myImportButtonBackgroundComponent.material)),t.myImportButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myImportButtonBackgroundComponent.material)),t.myExportButtonCursorTargetComponent.addUpFunction(this._exportVariables.bind(this)),t.myExportButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myExportButtonBackgroundComponent.material)),t.myExportButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myExportButtonBackgroundComponent.material)),this._addListenersHook()}_setScrollVariableActive(t,i,s){if(this._isActive()||!t){let n=!t&&!this._myHasScrolled&&!s,o=this._myScrollDirection;this.setScrollVariableActive(t,i),n&&this._scrollVariableRequest(o)}}_scrollVariableRequest(t){if(this._isActive()&&t!=0)for(let i of this._myScrollVariableRequestCallbacks.values())i(t)}_genericHover(t){t.color=this._mySetup.myButtonHoverColor}_genericUnHover(t){t.color=this._mySetup.myBackgroundColor}_importVariables(){this._myUI.myImportButtonTextComponent.text==this._mySetup.myImportButtonText&&(this._myUI.myImportButtonTextComponent.text=this._mySetup.myImportingButtonText,this._myResetImportLabelTimer.reset(),this._myParams.myVariablesImportCallback())}_exportVariables(){this._myUI.myExportButtonTextComponent.text==this._mySetup.myExportButtonText&&(this._myUI.myExportButtonTextComponent.text=this._mySetup.myExportingButtonText,this._myResetExportLabelTimer.reset(),this._myParams.myVariablesExportCallback())}}});var Dn=f(()=>{PP.EasyTuneBaseWidgetUI=class{build(t,i,s){this._myParentObject=t,this._mySetup=i,this._myAdditionalSetup=s,this._myImportExportButtonsActive=!0,this._myPlaneMesh=PP.myDefaultResources.myMeshes.myPlane,this._buildHook(),this._createSkeleton(),this._setTransforms(),this._addComponents(),this._setTransformForNonVR(),WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))}setVisible(t){this.myPivotObject.pp_setActiveHierarchy(t),t&&this.setImportExportButtonsActive(this._myImportExportButtonsActive),this._setVisibleHook(t)}setImportExportButtonsActive(t){this._myImportExportButtonsActive=t,this.myImportExportPanel.pp_setActiveHierarchy(this._myImportExportButtonsActive)}_buildHook(){}_setVisibleHook(t){}_createSkeletonHook(){}_setTransformHook(){}_addComponentsHook(){}_createSkeleton(){this.myPivotObject=WL.scene.addObject(this._myParentObject),this.myBackPanel=WL.scene.addObject(this.myPivotObject),this.myBackBackground=WL.scene.addObject(this.myBackPanel),this.myDisplayPanel=WL.scene.addObject(this.myPivotObject),this.myVariableLabelPanel=WL.scene.addObject(this.myDisplayPanel),this.myVariableLabelText=WL.scene.addObject(this.myVariableLabelPanel),this.myVariableLabelCursorTarget=WL.scene.addObject(this.myVariableLabelPanel),this.myNextButtonPanel=WL.scene.addObject(this.myVariableLabelPanel),this.myNextButtonBackground=WL.scene.addObject(this.myNextButtonPanel),this.myNextButtonText=WL.scene.addObject(this.myNextButtonPanel),this.myNextButtonCursorTarget=WL.scene.addObject(this.myNextButtonPanel),this.myPreviousButtonPanel=WL.scene.addObject(this.myVariableLabelPanel),this.myPreviousButtonBackground=WL.scene.addObject(this.myPreviousButtonPanel),this.myPreviousButtonText=WL.scene.addObject(this.myPreviousButtonPanel),this.myPreviousButtonCursorTarget=WL.scene.addObject(this.myPreviousButtonPanel),this.myImportExportPanel=WL.scene.addObject(this.myPivotObject),this.myImportButtonPanel=WL.scene.addObject(this.myImportExportPanel),this.myImportButtonBackground=WL.scene.addObject(this.myImportButtonPanel),this.myImportButtonText=WL.scene.addObject(this.myImportButtonPanel),this.myImportButtonCursorTarget=WL.scene.addObject(this.myImportButtonPanel),this.myExportButtonPanel=WL.scene.addObject(this.myImportExportPanel),this.myExportButtonBackground=WL.scene.addObject(this.myExportButtonPanel),this.myExportButtonText=WL.scene.addObject(this.myExportButtonPanel),this.myExportButtonCursorTarget=WL.scene.addObject(this.myExportButtonPanel),this.myPointerCursorTarget=WL.scene.addObject(this.myPivotObject),this._createSkeletonHook()}_setTransforms(){this.myPivotObject.setTranslationLocal(this._mySetup.myPivotObjectPositions[this._myAdditionalSetup.myHandedness]),this.myBackPanel.setTranslationLocal(this._mySetup.myBackPanelPosition),this.myBackBackground.scale(this._mySetup.myBackBackgroundScale),this.myDisplayPanel.setTranslationLocal(this._mySetup.myDisplayPanelPosition),this.myVariableLabelPanel.setTranslationLocal(this._mySetup.myVariableLabelPanelPosition),this.myVariableLabelText.scale(this._mySetup.myVariableLabelTextScale),this.myVariableLabelCursorTarget.setTranslationLocal(this._mySetup.myVariableLabelCursorTargetPosition),this.myNextButtonPanel.setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myNextButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myNextButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myNextButtonText.scale(this._mySetup.mySideButtonTextScale),this.myNextButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myPreviousButtonPanel.setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myPreviousButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myPreviousButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPreviousButtonText.scale(this._mySetup.mySideButtonTextScale),this.myPreviousButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myImportExportPanel.setTranslationLocal(this._mySetup.myImportExportPanelPosition),this.myImportButtonPanel.setTranslationLocal(this._mySetup.myImportButtonPosition),this.myImportButtonBackground.scale(this._mySetup.myImportExportButtonBackgroundScale),this.myImportButtonText.setTranslationLocal(this._mySetup.myImportExportButtonTextPosition),this.myImportButtonText.scale(this._mySetup.myImportExportButtonTextScale),this.myImportButtonCursorTarget.setTranslationLocal(this._mySetup.myImportExportButtonCursorTargetPosition),this.myExportButtonPanel.setTranslationLocal(this._mySetup.myExportButtonPosition),this.myExportButtonBackground.scale(this._mySetup.myImportExportButtonBackgroundScale),this.myExportButtonText.setTranslationLocal(this._mySetup.myImportExportButtonTextPosition),this.myExportButtonText.scale(this._mySetup.myImportExportButtonTextScale),this.myExportButtonCursorTarget.setTranslationLocal(this._mySetup.myImportExportButtonCursorTargetPosition),this.myPointerCursorTarget.setTranslationLocal(this._mySetup.myPointerCursorTargetPosition),this._setTransformHook()}_addComponents(){this.myBackBackgroundComponent=this.myBackBackground.addComponent("mesh"),this.myBackBackgroundComponent.mesh=this._myPlaneMesh,this.myBackBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myBackBackgroundComponent.material.color=this._mySetup.myBackBackgroundColor,this.myVariableLabelTextComponent=this.myVariableLabelText.addComponent("text"),this._setupTextComponent(this.myVariableLabelTextComponent),this.myVariableLabelTextComponent.text=" ",this.myVariableLabelCursorTargetComponent=this.myVariableLabelCursorTarget.addComponent("cursor-target"),this.myVariableLabelCollisionComponent=this.myVariableLabelCursorTarget.addComponent("collision"),this.myVariableLabelCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myVariableLabelCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myVariableLabelCollisionComponent.extents=this._mySetup.myVariableLabelCollisionExtents,this.myNextButtonBackgroundComponent=this.myNextButtonBackground.addComponent("mesh"),this.myNextButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myNextButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myNextButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myNextButtonTextComponent=this.myNextButtonText.addComponent("text"),this._setupTextComponent(this.myNextButtonTextComponent),this.myNextButtonTextComponent.text=this._mySetup.myNextButtonText,this.myNextButtonCursorTargetComponent=this.myNextButtonCursorTarget.addComponent("cursor-target"),this.myNextButtonCollisionComponent=this.myNextButtonCursorTarget.addComponent("collision"),this.myNextButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myNextButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myNextButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myPreviousButtonBackgroundComponent=this.myPreviousButtonBackground.addComponent("mesh"),this.myPreviousButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPreviousButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPreviousButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPreviousButtonTextComponent=this.myPreviousButtonText.addComponent("text"),this._setupTextComponent(this.myPreviousButtonTextComponent),this.myPreviousButtonTextComponent.text=this._mySetup.myPreviousButtonText,this.myPreviousButtonCursorTargetComponent=this.myPreviousButtonCursorTarget.addComponent("cursor-target"),this.myPreviousButtonCollisionComponent=this.myPreviousButtonCursorTarget.addComponent("collision"),this.myPreviousButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPreviousButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPreviousButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myImportButtonBackgroundComponent=this.myImportButtonBackground.addComponent("mesh"),this.myImportButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myImportButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myImportButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myImportButtonTextComponent=this.myImportButtonText.addComponent("text"),this._setupTextComponent(this.myImportButtonTextComponent),this.myImportButtonTextComponent.text=this._mySetup.myImportButtonText,this.myImportButtonCursorTargetComponent=this.myImportButtonCursorTarget.addComponent("cursor-target"),this.myImportButtonCollisionComponent=this.myImportButtonCursorTarget.addComponent("collision"),this.myImportButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myImportButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myImportButtonCollisionComponent.extents=this._mySetup.myImportExportButtonCollisionExtents,this.myExportButtonBackgroundComponent=this.myExportButtonBackground.addComponent("mesh"),this.myExportButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myExportButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myExportButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myExportButtonTextComponent=this.myExportButtonText.addComponent("text"),this._setupTextComponent(this.myExportButtonTextComponent),this.myExportButtonTextComponent.text=this._mySetup.myExportButtonText,this.myExportButtonCursorTargetComponent=this.myExportButtonCursorTarget.addComponent("cursor-target"),this.myExportButtonCollisionComponent=this.myExportButtonCursorTarget.addComponent("collision"),this.myExportButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myExportButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myExportButtonCollisionComponent.extents=this._mySetup.myImportExportButtonCollisionExtents,this.myPointerCollisionComponent=this.myPointerCursorTarget.addComponent("collision"),this.myPointerCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPointerCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPointerCollisionComponent.extents=this._mySetup.myPointerCollisionExtents,this._addComponentsHook()}_setupTextComponent(t){t.alignment=this._mySetup.myTextAlignment,t.justification=this._mySetup.myTextJustification,t.material=this._myAdditionalSetup.myTextMaterial.clone(),t.material.color=this._mySetup.myTextColor,t.text=""}_onXRSessionStart(){this._setTransformForVR()}_onXRSessionEnd(){this._setTransformForNonVR()}_setTransformForVR(){this.myPivotObject.setTranslationLocal(this._mySetup.myPivotObjectPositions[this._myAdditionalSetup.myHandedness])}_setTransformForNonVR(){this.myPivotObject.setTranslationLocal(this._mySetup.myPivotObjectPositions[PP.ToolHandedness.NONE])}}});var Rn=f(()=>{PP.EasyTuneBaseWidgetSetup=class{constructor(){}build(){this._initializeBuildSetup(),this._initializeRuntimeSetup()}_getBackPanelMaxY(){return this.myDisplayPanelPosition[1]+this.myVariableLabelPanelPosition[1]+this.mySideButtonBackgroundScale[1]+this._mySideButtonDistanceFromBorder*1.25}_getBackPanelMinY(){return this.myDisplayPanelPosition[1]-this._mySideButtonDistanceFromBorder*1.25-this.mySideButtonBackgroundScale[1]}_getBackPanelMaxX(){return this._mySideButtonPanelHalfWidth}_getBackPanelMinX(){return-this._mySideButtonPanelHalfWidth}_getPivotZOffset(){return 0}_initializeBuildSetupHook(){}_initializeRuntimeSetupHook(){}_initializeBuildSetup(){this.myBackgroundColor=[46/255,46/255,46/255,1],this.myCursorTargetCollisionCollider=WL.Collider.Box,this.myCursorTargetCollisionGroup=7,this.myCursorTargetCollisionThickness=.001,this.myDefaultTextColor=[255/255,255/255,255/255,1],this.myTextAlignment=WL.Alignment.Center,this.myTextJustification=WL.Justification.Middle,this.myTextColor=this.myDefaultTextColor,this.myLabelTextScale=PP.vec3_create(.19,.19,.19),this.myButtonTextScale=PP.vec3_create(.18,.18,.18),this._myPanelZOffset=.01,this._myColliderZOffset=.017,this._mySideButtonDistanceFromBorder=.0125,this._mySideButtonPanelHalfWidth=.2,this.myPivotObjectPositions=[],this.myPivotObjectPositions[PP.ToolHandedness.NONE]=PP.vec3_create(0,0,this._getPivotZOffset()),this.myPivotObjectPositions[PP.ToolHandedness.LEFT]=PP.vec3_create(-.04,.02,this._getPivotZOffset()),this.myPivotObjectPositions[PP.ToolHandedness.RIGHT]=PP.vec3_create(-.08,.02,this._getPivotZOffset()),this.mySideButtonBackgroundScale=PP.vec3_create(.015,.015,1),this.mySideButtonTextScale=this.myButtonTextScale,this.mySideButtonTextPosition=PP.vec3_create(0,0,.007),this.mySideButtonCursorTargetPosition=PP.vec3_create(0,0,0),this.mySideButtonCursorTargetPosition[2]=this._myColliderZOffset-this._myPanelZOffset,this.mySideButtonCollisionExtents=this.mySideButtonBackgroundScale.slice(0),this.mySideButtonCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myLeftSideButtonPosition=PP.vec3_create(0,0,-1e-5),this.myLeftSideButtonPosition[0]=-this._mySideButtonPanelHalfWidth+this.mySideButtonBackgroundScale[0]+this._mySideButtonDistanceFromBorder,this.myRightSideButtonPosition=PP.vec3_create(0,0,-1e-5),this.myRightSideButtonPosition[0]=-this.myLeftSideButtonPosition[0],this.myDisplayPanelPosition=PP.vec3_create(0,.1,0),this.myVariableLabelPanelPosition=PP.vec3_create(0,.025,this._myPanelZOffset),this.myVariableLabelTextScale=this.myLabelTextScale,this.myVariableLabelCursorTargetPosition=PP.vec3_create(0,0,0),this.myVariableLabelCursorTargetPosition[2]=this._myColliderZOffset-this._myPanelZOffset,this.myVariableLabelCollisionExtents=PP.vec3_create(.065,.0175,1),this.myVariableLabelCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myNextButtonText=">",this.myPreviousButtonText="<",this._initializeBuildSetupHook();{let t=this._getBackPanelMaxX(),i=this._getBackPanelMinX(),s=this._getBackPanelMaxY(),n=this._getBackPanelMinY();this.myBackPanelPosition=[(t+i)/2,(s+n)/2,0],this.myBackBackgroundScale=[(t-i)/2,(s-n)/2,1],this.myBackBackgroundColor=[70/255,70/255,70/255,1]}this.myImportExportButtonBackgroundScale=PP.vec3_create(.04,.02,1),this.myImportExportButtonTextScale=this.myButtonTextScale,this.myImportExportButtonTextPosition=PP.vec3_create(0,0,.007),this.myImportExportPanelPosition=[0,this._getBackPanelMaxY()+this._mySideButtonDistanceFromBorder+this.myImportExportButtonBackgroundScale[1],this._myPanelZOffset],this.myImportExportButtonCursorTargetPosition=PP.vec3_create(0,0,0),this.myImportExportButtonCursorTargetPosition[2]=this._myColliderZOffset-this._myPanelZOffset,this.myImportExportButtonCollisionExtents=this.myImportExportButtonBackgroundScale.slice(0),this.myImportExportButtonCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myImportButtonText="Import",this.myExportButtonText="Export",this.myImportExportResetLabelSeconds=2,this.myImportingButtonText="...",this.myImportSuccessButtonText="Done",this.myImportFailureButtonText="Error",this.myExportingButtonText="...",this.myExportSuccessButtonText="Done",this.myExportFailureButtonText="Error",this.myImportButtonPosition=PP.vec3_create(0,0,-1e-5),this.myImportButtonPosition[0]=-this.myImportExportButtonBackgroundScale[0]-this._mySideButtonDistanceFromBorder/2,this.myExportButtonPosition=PP.vec3_create(0,0,-1e-5),this.myExportButtonPosition[0]=-this.myImportButtonPosition[0],this.myPointerCollisionExtents=this.myBackBackgroundScale.slice(0),this.myPointerCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myPointerCursorTargetPosition=this.myBackPanelPosition.slice(0),this.myPointerCursorTargetPosition[2]=this._myColliderZOffset-1e-4}_initializeRuntimeSetup(){this.myButtonHoverColor=[150/255,150/255,150/255,1],this.myScrollVariableDelay=.5,this._initializeRuntimeSetupHook()}}});var En=f(()=>{PP.EasyTuneBoolArrayWidget=class extends PP.EasyTuneBaseWidget{constructor(t,i,s){super(t),this._mySetup=new PP.EasyTuneBoolArrayWidgetSetup(i),this._myUI=new PP.EasyTuneBoolArrayWidgetUI,this._myGamepad=s,this._myValueEditIndex=0,this._myValueButtonEditIntensity=0,this._myValueButtonEditIntensityTimer=0,this._myValueEditActive=!1}_refreshUIHook(){for(let t=0;t<this._mySetup.myArraySize;t++)this._myUI.myValueTextComponents[t].text=this._myVariable.myValue[t]?"true":"false"}_startHook(t,i){this._myUI.setAdditionalButtonsActive(i.myEnableAdditionalButtons)}_updateHook(t){this._updateValue(t)}_updateValue(t){let i=0;this._myGamepad&&(i=this._myGamepad.getAxesInfo().myAxes[1]);let s=0;this._myValueEditActive?s=i:this._myValueButtonEditIntensity!=0&&(this._myValueButtonEditIntensityTimer<=0?s=this._myValueButtonEditIntensity:this._myValueButtonEditIntensityTimer-=t),Math.abs(s)>this._mySetup.myThumbstickToggleThreshold&&(this._myVariable.myValue[this._myValueEditIndex]=s>0,this._refreshUI())}_addListenersHook(){let t=this._myUI;t.myVariableLabelCursorTargetComponent.addClickFunction(this._resetAllValues.bind(this)),t.myVariableLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myVariableLabelText)),t.myVariableLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myVariableLabelText,this._mySetup.myVariableLabelTextScale));for(let i=0;i<this._mySetup.myArraySize;i++)t.myValueIncreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,i,1)),t.myValueIncreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,i,1)),t.myValueIncreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueIncreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueDecreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,i,-1)),t.myValueDecreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,i,-1)),t.myValueDecreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueDecreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueIncreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myValueIncreaseButtonBackgroundComponents[i].material)),t.myValueIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myValueIncreaseButtonBackgroundComponents[i].material)),t.myValueDecreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myValueDecreaseButtonBackgroundComponents[i].material)),t.myValueDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myValueDecreaseButtonBackgroundComponents[i].material)),t.myValueCursorTargetComponents[i].addClickFunction(this._resetValue.bind(this,i)),t.myValueCursorTargetComponents[i].addHoverFunction(this._setValueEditActive.bind(this,i,t.myValueTexts[i],!0)),t.myValueCursorTargetComponents[i].addUnHoverFunction(this._setValueEditActive.bind(this,i,t.myValueTexts[i],!1))}_setValueEditIntensity(t,i){(this._isActive()||i==0)&&(i!=0&&(this._myValueButtonEditIntensityTimer=this._mySetup.myButtonEditDelay,this._myValueEditIndex=t),this._myValueButtonEditIntensity=i)}_setValueEditActive(t,i,s){(this._isActive()||!s)&&(s?(this._myValueEditIndex=t,i.scale(this._mySetup.myTextHoverScaleMultiplier)):i.scalingWorld=this._mySetup.myValueTextScale,this._myValueEditActive=s)}_resetValue(t){this._isActive()&&(this._myVariable.myValue[t]=this._myVariable.myDefaultValue[t],this._myUI.myValueTextComponents[t].text=this._myVariable.myValue[t]?"true":"false")}_resetAllValues(){for(let t=0;t<this._mySetup.myArraySize;t++)this._resetValue(t)}_genericTextHover(t){t.scale(this._mySetup.myTextHoverScaleMultiplier)}_genericTextUnHover(t,i){t.scalingWorld=i}}});var On=f(()=>{PP.EasyTuneBoolArrayWidgetUI=class extends PP.EasyTuneBaseWidgetUI{setAdditionalButtonsActive(t){this._myAdditionalButtonsActive=t;for(let i=0;i<this._mySetup.myArraySize;i++)this.myValueIncreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myValueDecreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive)}_buildHook(){this._myAdditionalButtonsActive=!0}_createSkeletonHook(){this.myValuesPanel=WL.scene.addObject(this.myDisplayPanel),this.myValuePanels=[],this.myValueTexts=[],this.myValueCursorTargets=[],this.myValueIncreaseButtonPanels=[],this.myValueIncreaseButtonBackgrounds=[],this.myValueIncreaseButtonTexts=[],this.myValueIncreaseButtonCursorTargets=[],this.myValueDecreaseButtonPanels=[],this.myValueDecreaseButtonBackgrounds=[],this.myValueDecreaseButtonTexts=[],this.myValueDecreaseButtonCursorTargets=[];for(let t=0;t<this._mySetup.myArraySize;t++)this.myValuePanels[t]=WL.scene.addObject(this.myValuesPanel),this.myValueTexts[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueCursorTargets[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueIncreaseButtonPanels[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueIncreaseButtonBackgrounds[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueIncreaseButtonTexts[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueIncreaseButtonCursorTargets[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueDecreaseButtonPanels[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueDecreaseButtonBackgrounds[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t]),this.myValueDecreaseButtonTexts[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t]),this.myValueDecreaseButtonCursorTargets[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t])}_setTransformHook(){this.myValuesPanel.setTranslationLocal(this._mySetup.myValuesPanelPosition);for(let t=0;t<this._mySetup.myArraySize;t++)this.myValuePanels[t].setTranslationLocal(this._mySetup.myValuePanelsPositions[t]),this.myValueTexts[t].scale(this._mySetup.myValueTextScale),this.myValueCursorTargets[t].setTranslationLocal(this._mySetup.myValueCursorTargetPosition),this.myValueIncreaseButtonPanels[t].setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myValueIncreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myValueIncreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myValueIncreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myValueIncreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myValueDecreaseButtonPanels[t].setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myValueDecreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myValueDecreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myValueDecreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myValueDecreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition)}_addComponentsHook(){this.myValueTextComponents=[],this.myValueCursorTargetComponents=[],this.myValueCollisionComponents=[],this.myValueIncreaseButtonBackgroundComponents=[],this.myValueIncreaseButtonTextComponents=[],this.myValueIncreaseButtonCursorTargetComponents=[],this.myValueIncreaseButtonCollisionComponents=[],this.myValueDecreaseButtonBackgroundComponents=[],this.myValueDecreaseButtonTextComponents=[],this.myValueDecreaseButtonCursorTargetComponents=[],this.myValueDecreaseButtonCollisionComponents=[];for(let t=0;t<this._mySetup.myArraySize;t++)this.myValueTextComponents[t]=this.myValueTexts[t].addComponent("text"),this._setupTextComponent(this.myValueTextComponents[t]),this.myValueTextComponents[t].text=" ",this.myValueCursorTargetComponents[t]=this.myValueCursorTargets[t].addComponent("cursor-target"),this.myValueCollisionComponents[t]=this.myValueCursorTargets[t].addComponent("collision"),this.myValueCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueCollisionComponents[t].extents=this._mySetup.myValueCollisionExtents,this.myValueIncreaseButtonBackgroundComponents[t]=this.myValueIncreaseButtonBackgrounds[t].addComponent("mesh"),this.myValueIncreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myValueIncreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myValueIncreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myValueIncreaseButtonTextComponents[t]=this.myValueIncreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myValueIncreaseButtonTextComponents[t]),this.myValueIncreaseButtonTextComponents[t].text=this._mySetup.myIncreaseButtonText,this.myValueIncreaseButtonCursorTargetComponents[t]=this.myValueIncreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myValueIncreaseButtonCollisionComponents[t]=this.myValueIncreaseButtonCursorTargets[t].addComponent("collision"),this.myValueIncreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueIncreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueIncreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents,this.myValueDecreaseButtonBackgroundComponents[t]=this.myValueDecreaseButtonBackgrounds[t].addComponent("mesh"),this.myValueDecreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myValueDecreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myValueDecreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myValueDecreaseButtonTextComponents[t]=this.myValueDecreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myValueDecreaseButtonTextComponents[t]),this.myValueDecreaseButtonTextComponents[t].text=this._mySetup.myDecreaseButtonText,this.myValueDecreaseButtonCursorTargetComponents[t]=this.myValueDecreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myValueDecreaseButtonCollisionComponents[t]=this.myValueDecreaseButtonCursorTargets[t].addComponent("collision"),this.myValueDecreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueDecreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueDecreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents}_setVisibleHook(t){t&&this.setAdditionalButtonsActive(this._myAdditionalButtonsActive)}}});var Wn=f(()=>{PP.EasyTuneBoolArrayWidgetSetup=class extends PP.EasyTuneBaseWidgetSetup{constructor(t){super(),this.myArraySize=t}_getBackPanelMinY(){let t=this.myValuePanelsPositions[this.myArraySize-1]?this.myValuePanelsPositions[this.myArraySize-1][1]:0;return super._getBackPanelMinY()+this.myValuesPanelPosition[1]+t}_getPivotZOffset(){return .00802713}_initializeBuildSetupHook(){this.myIncreaseButtonText="+",this.myDecreaseButtonText="-",this._myValuePanelDistanceFromVariableLabelPanel=.055,this._myDistanceBetweenValues=this.mySideButtonBackgroundScale[1]*2+.015,this.myValuesPanelPosition=[0,this.myVariableLabelPanelPosition[1]-this._myValuePanelDistanceFromVariableLabelPanel,this._myPanelZOffset],this.myValueTextScale=PP.vec3_create(.4,.4,.4),this.myValueCursorTargetPosition=PP.vec3_create(0,0,0),this.myValueCursorTargetPosition[2]=this._myColliderZOffset-this._myPanelZOffset,this.myValueCollisionExtents=PP.vec3_create(.065,.02,1),this.myValueCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myValuePanelsPositions=[],this.myValuePanelsPositions[0]=PP.vec3_create(0,0,0);for(let t=1;t<this.myArraySize;t++)this.myValuePanelsPositions[t]=this.myValuePanelsPositions[t-1].slice(0),this.myValuePanelsPositions[t][1]-=this._myDistanceBetweenValues}_initializeRuntimeSetupHook(){this.myTextHoverScaleMultiplier=PP.vec3_create(1.25,1.25,1.25),this.myThumbstickToggleThreshold=.6,this.myButtonEditDelay=0}}});var wn=f(()=>{PP.EasyTuneBoolArrayWidgetSelector=class{constructor(t,i){this._myGamepad=i,this._myParentObject=null,this._myParams=t,this._myAdditionalSetup=null,this._myWidgets=new Map,this._myVariable=null,this._myIsVisible=!0,this._myAppendToVariableName=null,this._myScrollVariableRequestCallbacks=new Map,this._myCurrentArraySize=0}setEasyTuneVariable(t,i){this._myVariable=t,this._myCurrentArraySize=this._myVariable.myValue.length,this._myAppendToVariableName=i,this._myWidgets.has(this._myCurrentArraySize)||this._createWidget(this._myCurrentArraySize);let s=this._myWidgets.get(this._myCurrentArraySize);s&&s.setEasyTuneVariable(t,i),this.setVisible(this._myIsVisible)}setVisible(t){for(let i of this._myWidgets.values())i.setVisible(!1);if(this._myVariable){this._sizeChangedCheck();let i=this._myWidgets.get(this._myCurrentArraySize);i&&i.setVisible(t)}this._myIsVisible=t}isScrollVariableActive(){let t=this._myWidgets.get(this._myCurrentArraySize);return t?t.isScrollVariableActive():!1}getScrollVariableDirection(){let t=this._myWidgets.get(this._myCurrentArraySize);return t?t.getScrollVariableDirection():0}setScrollVariableActive(t,i){let s=this._myWidgets.get(this._myCurrentArraySize);s&&s.setScrollVariableActive(t,i)}getWidget(){return this._myWidgets.get(this._myCurrentArraySize)}registerScrollVariableRequestEventListener(t,i){this._myScrollVariableRequestCallbacks.set(t,i)}unregisterScrollVariableRequestEventListener(t){this._myScrollVariableRequestCallbacks.delete(t)}start(t,i){this._myParentObject=t,this._myAdditionalSetup=i,this._createWidget(1),this._myVariable&&this.setEasyTuneVariable(this._myVariable,this._myAppendToVariableName)}update(t){if(this._isActive()){this._sizeChangedCheck();let i=this._myWidgets.get(this._myCurrentArraySize);i&&i.update(t)}}onImportSuccess(){let t=this._myWidgets.get(this._myCurrentArraySize);t&&t.onImportSuccess()}onImportFailure(){let t=this._myWidgets.get(this._myCurrentArraySize);t&&t.onImportFailure()}onExportSuccess(){let t=this._myWidgets.get(this._myCurrentArraySize);t&&t.onExportSuccess()}onExportFailure(){let t=this._myWidgets.get(this._myCurrentArraySize);t&&t.onExportFailure()}_isActive(){return this._myIsVisible&&this._myVariable}_scrollVariableRequest(t){for(let i of this._myScrollVariableRequestCallbacks.values())i(t)}_createWidget(t){this._myWidgets.set(t,new PP.EasyTuneBoolArrayWidget(this._myParams,t,this._myGamepad)),this._myWidgets.get(t).start(this._myParentObject,this._myAdditionalSetup),this._myWidgets.get(t).setVisible(!1),this._myWidgets.get(t).registerScrollVariableRequestEventListener(this,this._scrollVariableRequest.bind(this))}_sizeChangedCheck(){this._myVariable.myValue.length!=this._myCurrentArraySize&&this.setEasyTuneVariable(this._myVariable,this._myAppendToVariableName)}}});var Fn=f(()=>{PP.EasyTuneNoneWidget=class extends PP.EasyTuneBaseWidget{constructor(t){super(t),this._mySetup=new PP.EasyTuneNoneWidgetSetup,this._myUI=new PP.EasyTuneNoneWidgetUI}}});var jn=f(()=>{PP.EasyTuneNoneWidgetUI=class extends PP.EasyTuneBaseWidgetUI{_createSkeletonHook(){this.myTypeNotSupportedPanel=WL.scene.addObject(this.myDisplayPanel),this.myTypeNotSupportedText=WL.scene.addObject(this.myTypeNotSupportedPanel),this.myTypeNotSupportedCursorTarget=WL.scene.addObject(this.myTypeNotSupportedPanel)}_setTransformHook(){this.myTypeNotSupportedPanel.setTranslationLocal(this._mySetup.myTypeNotSupportedPanelPosition),this.myTypeNotSupportedText.scale(this._mySetup.myTypeNotSupportedTextScale)}_addComponentsHook(){this.myTypeNotSupportedTextComponent=this.myTypeNotSupportedText.addComponent("text"),this._setupTextComponent(this.myTypeNotSupportedTextComponent),this.myTypeNotSupportedTextComponent.text=this._mySetup.myTypeNotSupportedText}}});var kn=f(()=>{PP.EasyTuneNoneWidgetSetup=class extends PP.EasyTuneBaseWidgetSetup{_getBackPanelMinY(){return super._getBackPanelMinY()+this.myTypeNotSupportedPanelPosition[1]}_getPivotZOffset(){return .00804713}_initializeBuildSetupHook(){this.myTypeNotSupportedPanelPosition=PP.vec3_create(0,-.03,this._myPanelZOffset),this.myTypeNotSupportedTextScale=PP.vec3_create(.275,.275,.275),this.myTypeNotSupportedText="Type Not Supported"}}});var Hn=f(()=>{PP.EasyTuneNumberArrayWidget=class extends PP.EasyTuneBaseWidget{constructor(t,i,s){super(t),this._myGamepad=s,this._mySetup=new PP.EasyTuneNumberArrayWidgetSetup(i),this._myUI=new PP.EasyTuneNumberArrayWidgetUI,this._myValueEditIndex=-1,this._myValueButtonEditIntensity=0,this._myValueButtonEditIntensityTimer=0,this._myStepButtonEditIntensity=0,this._myStepButtonEditIntensityTimer=0,this._myValueEditActive=!1,this._myStepEditActive=!1,this._myValueRealValue=0,this._myStepMultiplierValue=0,this._myStepFastEdit=!1}_setEasyTuneVariableHook(){this._myValueEditIndex>=0&&(this._myValueRealValue=this._myVariable.myValue[this._myValueEditIndex])}_refreshUIHook(){for(let t=0;t<this._mySetup.myArraySize;t++)this._myUI.myValueTextComponents[t].text=this._myVariable.myValue[t].toFixed(this._myVariable.myDecimalPlaces);this._myUI.myStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myStepPerSecond)}_startHook(t,i){this._myUI.setAdditionalButtonsActive(i.myEnableAdditionalButtons)}_updateHook(t){this._updateValue(t)}_updateValue(t){let i=0;if(this._myGamepad){let o=this._myGamepad.getAxesInfo().myAxes[1];if(Math.abs(o)>this._mySetup.myEditThumbstickMinThreshold){let a=(Math.abs(o)-this._mySetup.myEditThumbstickMinThreshold)/(1-this._mySetup.myEditThumbstickMinThreshold);i=Math.sign(o)*a}}let s=0;if(this._myValueEditActive?s=i:this._myValueButtonEditIntensity!=0&&(this._myValueButtonEditIntensityTimer<=0?s=this._myValueButtonEditIntensity:this._myValueButtonEditIntensityTimer-=t),s!=0){let o=s*this._myVariable.myStepPerSecond*t;this._myValueRealValue+=o,this._myVariable.myMin!=null&&this._myVariable.myMax!=null?this._myValueRealValue=Math.pp_clamp(this._myValueRealValue,this._myVariable.myMin,this._myVariable.myMax):this._myVariable.myMin!=null?this._myValueRealValue=Math.max(this._myValueRealValue,this._myVariable.myMin):this._myVariable.myMax!=null&&(this._myValueRealValue=Math.min(this._myValueRealValue,this._myVariable.myMax));let a=Math.pow(10,this._myVariable.myDecimalPlaces);if(this._myVariable.myEditAllValuesTogether){let u=Math.round(this._myValueRealValue*a+Number.EPSILON)/a-this._myVariable.myValue[this._myValueEditIndex];for(let y=0;y<this._mySetup.myArraySize;y++)this._myVariable.myValue[y]=Math.round((this._myVariable.myValue[y]+u)*a+Number.EPSILON)/a,this._myVariable.myMin!=null&&this._myVariable.myMax!=null?this._myVariable.myValue[y]=Math.pp_clamp(this._myVariable.myValue[y],this._myVariable.myMin,this._myVariable.myMax):this._myVariable.myMin!=null?this._myVariable.myValue[y]=Math.max(this._myVariable.myValue[y],this._myVariable.myMin):this._myVariable.myMax!=null&&(this._myVariable.myValue[y]=Math.min(this._myVariable.myValue[y],this._myVariable.myMax)),this._myUI.myValueTextComponents[y].text=this._myVariable.myValue[y].toFixed(this._myVariable.myDecimalPlaces)}else this._myVariable.myValue[this._myValueEditIndex]=Math.round(this._myValueRealValue*a+Number.EPSILON)/a,this._myVariable.myMin!=null&&this._myVariable.myMax!=null?this._myVariable.myValue[this._myValueEditIndex]=Math.pp_clamp(this._myVariable.myValue[this._myValueEditIndex],this._myVariable.myMin,this._myVariable.myMax):this._myVariable.myMin!=null?this._myVariable.myValue[this._myValueEditIndex]=Math.max(this._myVariable.myValue[this._myValueEditIndex],this._myVariable.myMin):this._myVariable.myMax!=null&&(this._myVariable.myValue[this._myValueEditIndex]=Math.min(this._myVariable.myValue[this._myValueEditIndex],this._myVariable.myMax)),this._myUI.myValueTextComponents[this._myValueEditIndex].text=this._myVariable.myValue[this._myValueEditIndex].toFixed(this._myVariable.myDecimalPlaces)}else this._myValueRealValue=this._myVariable.myValue[this._myValueEditIndex];let n=0;if(this._myStepEditActive?n=i:this._myStepButtonEditIntensity!=0&&(this._myStepButtonEditIntensityTimer<=0?n=this._myStepButtonEditIntensity:this._myStepButtonEditIntensityTimer-=t),n!=0){let o=0;this._myStepFastEdit?(o=Math.sign(n)*1,this._myStepFastEdit=!1):o=n*this._mySetup.myStepMultiplierStepPerSecond*t,this._myStepMultiplierValue+=o,Math.abs(this._myStepMultiplierValue)>=1&&(Math.sign(this._myStepMultiplierValue)>0?(this._myStepMultiplierValue-=1,this._changeStep(this._myVariable.myStepPerSecond*10)):(this._myStepMultiplierValue+=1,this._changeStep(this._myVariable.myStepPerSecond*.1)))}else this._myStepMultiplierValue=0,this._myStepFastEdit=!0}_addListenersHook(){let t=this._myUI;t.myVariableLabelCursorTargetComponent.addClickFunction(this._resetAllValues.bind(this)),t.myVariableLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myVariableLabelText)),t.myVariableLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myVariableLabelText,this._mySetup.myVariableLabelTextScale));for(let i=0;i<this._mySetup.myArraySize;i++)t.myValueIncreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,i,1)),t.myValueIncreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,i,1)),t.myValueIncreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueIncreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueDecreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,i,-1)),t.myValueDecreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,i,-1)),t.myValueDecreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueDecreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueIncreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myValueIncreaseButtonBackgroundComponents[i].material)),t.myValueIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myValueIncreaseButtonBackgroundComponents[i].material)),t.myValueDecreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myValueDecreaseButtonBackgroundComponents[i].material)),t.myValueDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myValueDecreaseButtonBackgroundComponents[i].material)),t.myValueCursorTargetComponents[i].addClickFunction(this._resetValue.bind(this,i)),t.myValueCursorTargetComponents[i].addHoverFunction(this._setValueEditActive.bind(this,i,t.myValueTexts[i],!0)),t.myValueCursorTargetComponents[i].addUnHoverFunction(this._setValueEditActive.bind(this,i,t.myValueTexts[i],!1));t.myStepCursorTargetComponent.addClickFunction(this._resetStep.bind(this)),t.myStepCursorTargetComponent.addHoverFunction(this._setStepEditActive.bind(this,t.myStepText,!0)),t.myStepCursorTargetComponent.addUnHoverFunction(this._setStepEditActive.bind(this,t.myStepText,!1)),t.myStepIncreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,1)),t.myStepIncreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,1)),t.myStepIncreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,0)),t.myStepIncreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,0)),t.myStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,0)),t.myStepDecreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,-1)),t.myStepDecreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,-1)),t.myStepDecreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,0)),t.myStepDecreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,0)),t.myStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,0)),t.myStepIncreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myStepIncreaseButtonBackgroundComponent.material)),t.myStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myStepIncreaseButtonBackgroundComponent.material)),t.myStepDecreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myStepDecreaseButtonBackgroundComponent.material)),t.myStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myStepDecreaseButtonBackgroundComponent.material))}_setValueEditIntensity(t,i){(this._isActive()||i==0)&&(i!=0&&(this._myValueButtonEditIntensityTimer=this._mySetup.myButtonEditDelay,this._myValueRealValue=this._myVariable.myValue[t],this._myValueEditIndex=t),this._myValueButtonEditIntensity=i)}_setStepEditIntensity(t){(this._isActive()||t==0)&&(t!=0&&(this._myStepButtonEditIntensityTimer=this._mySetup.myButtonEditDelay),this._myStepButtonEditIntensity=t)}_setValueEditActive(t,i,s){(this._isActive()||!s)&&(s?(this._myValueRealValue=this._myVariable.myValue[t],this._myValueEditIndex=t,i.scale(this._mySetup.myTextHoverScaleMultiplier)):i.scalingWorld=this._mySetup.myValueTextScale,this._myValueEditActive=s)}_setStepEditActive(t,i){(this._isActive()||!i)&&(i?t.scale(this._mySetup.myTextHoverScaleMultiplier):t.scalingWorld=this._mySetup.myStepTextScale,this._myStepEditActive=i)}_resetValue(t){this._isActive()&&(this._myVariable.myValue[t]=this._myVariable.myDefaultValue[t],this._myUI.myValueTextComponents[t].text=this._myVariable.myValue[t].toFixed(this._myVariable.myDecimalPlaces))}_resetAllValues(){for(let t=0;t<this._mySetup.myArraySize;t++)this._resetValue(t)}_resetStep(){this._isActive()&&this._changeStep(this._myVariable.myDefaultStepPerSecond)}_changeStep(t){t=Math.pp_roundDecimal(t,10),this._myVariable.myStepPerSecond=t,this._myUI.myStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myStepPerSecond)}_genericTextHover(t){t.scale(this._mySetup.myTextHoverScaleMultiplier)}_genericTextUnHover(t,i){t.scalingWorld=i}}});var Nn=f(()=>{PP.EasyTuneNumberArrayWidgetUI=class extends PP.EasyTuneBaseWidgetUI{setAdditionalButtonsActive(t){this._myAdditionalButtonsActive=t;for(let i=0;i<this._mySetup.myArraySize;i++)this.myValueIncreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myValueDecreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive);this.myStepIncreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myStepDecreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive)}_buildHook(){this._myAdditionalButtonsActive=!0}_createSkeletonHook(){this.myValuesPanel=WL.scene.addObject(this.myDisplayPanel),this.myValuePanels=[],this.myValueTexts=[],this.myValueCursorTargets=[],this.myValueIncreaseButtonPanels=[],this.myValueIncreaseButtonBackgrounds=[],this.myValueIncreaseButtonTexts=[],this.myValueIncreaseButtonCursorTargets=[],this.myValueDecreaseButtonPanels=[],this.myValueDecreaseButtonBackgrounds=[],this.myValueDecreaseButtonTexts=[],this.myValueDecreaseButtonCursorTargets=[];for(let t=0;t<this._mySetup.myArraySize;t++)this.myValuePanels[t]=WL.scene.addObject(this.myValuesPanel),this.myValueTexts[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueCursorTargets[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueIncreaseButtonPanels[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueIncreaseButtonBackgrounds[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueIncreaseButtonTexts[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueIncreaseButtonCursorTargets[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueDecreaseButtonPanels[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueDecreaseButtonBackgrounds[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t]),this.myValueDecreaseButtonTexts[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t]),this.myValueDecreaseButtonCursorTargets[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t]);this.myStepPanel=WL.scene.addObject(this.myPivotObject),this.myStepText=WL.scene.addObject(this.myStepPanel),this.myStepCursorTarget=WL.scene.addObject(this.myStepPanel),this.myStepIncreaseButtonPanel=WL.scene.addObject(this.myStepPanel),this.myStepIncreaseButtonBackground=WL.scene.addObject(this.myStepIncreaseButtonPanel),this.myStepIncreaseButtonText=WL.scene.addObject(this.myStepIncreaseButtonPanel),this.myStepIncreaseButtonCursorTarget=WL.scene.addObject(this.myStepIncreaseButtonPanel),this.myStepDecreaseButtonPanel=WL.scene.addObject(this.myStepPanel),this.myStepDecreaseButtonBackground=WL.scene.addObject(this.myStepDecreaseButtonPanel),this.myStepDecreaseButtonText=WL.scene.addObject(this.myStepDecreaseButtonPanel),this.myStepDecreaseButtonCursorTarget=WL.scene.addObject(this.myStepDecreaseButtonPanel)}_setTransformHook(){this.myValuesPanel.setTranslationLocal(this._mySetup.myValuesPanelPosition);for(let t=0;t<this._mySetup.myArraySize;t++)this.myValuePanels[t].setTranslationLocal(this._mySetup.myValuePanelsPositions[t]),this.myValueTexts[t].scale(this._mySetup.myValueTextScale),this.myValueCursorTargets[t].setTranslationLocal(this._mySetup.myValueCursorTargetPosition),this.myValueIncreaseButtonPanels[t].setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myValueIncreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myValueIncreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myValueIncreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myValueIncreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myValueDecreaseButtonPanels[t].setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myValueDecreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myValueDecreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myValueDecreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myValueDecreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition);this.myStepPanel.setTranslationLocal(this._mySetup.myStepPanelPosition),this.myStepText.scale(this._mySetup.myStepTextScale),this.myStepCursorTarget.setTranslationLocal(this._mySetup.myStepCursorTargetPosition),this.myStepIncreaseButtonPanel.setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myStepIncreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myStepIncreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myStepIncreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myStepIncreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myStepDecreaseButtonPanel.setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myStepDecreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myStepDecreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myStepDecreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myStepDecreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition)}_addComponentsHook(){this.myValueTextComponents=[],this.myValueCursorTargetComponents=[],this.myValueCollisionComponents=[],this.myValueIncreaseButtonBackgroundComponents=[],this.myValueIncreaseButtonTextComponents=[],this.myValueIncreaseButtonCursorTargetComponents=[],this.myValueIncreaseButtonCollisionComponents=[],this.myValueDecreaseButtonBackgroundComponents=[],this.myValueDecreaseButtonTextComponents=[],this.myValueDecreaseButtonCursorTargetComponents=[],this.myValueDecreaseButtonCollisionComponents=[];for(let t=0;t<this._mySetup.myArraySize;t++)this.myValueTextComponents[t]=this.myValueTexts[t].addComponent("text"),this._setupTextComponent(this.myValueTextComponents[t]),this.myValueTextComponents[t].text=" ",this.myValueCursorTargetComponents[t]=this.myValueCursorTargets[t].addComponent("cursor-target"),this.myValueCollisionComponents[t]=this.myValueCursorTargets[t].addComponent("collision"),this.myValueCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueCollisionComponents[t].extents=this._mySetup.myValueCollisionExtents,this.myValueIncreaseButtonBackgroundComponents[t]=this.myValueIncreaseButtonBackgrounds[t].addComponent("mesh"),this.myValueIncreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myValueIncreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myValueIncreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myValueIncreaseButtonTextComponents[t]=this.myValueIncreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myValueIncreaseButtonTextComponents[t]),this.myValueIncreaseButtonTextComponents[t].text=this._mySetup.myIncreaseButtonText,this.myValueIncreaseButtonCursorTargetComponents[t]=this.myValueIncreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myValueIncreaseButtonCollisionComponents[t]=this.myValueIncreaseButtonCursorTargets[t].addComponent("collision"),this.myValueIncreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueIncreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueIncreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents,this.myValueDecreaseButtonBackgroundComponents[t]=this.myValueDecreaseButtonBackgrounds[t].addComponent("mesh"),this.myValueDecreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myValueDecreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myValueDecreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myValueDecreaseButtonTextComponents[t]=this.myValueDecreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myValueDecreaseButtonTextComponents[t]),this.myValueDecreaseButtonTextComponents[t].text=this._mySetup.myDecreaseButtonText,this.myValueDecreaseButtonCursorTargetComponents[t]=this.myValueDecreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myValueDecreaseButtonCollisionComponents[t]=this.myValueDecreaseButtonCursorTargets[t].addComponent("collision"),this.myValueDecreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueDecreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueDecreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents;this.myStepTextComponent=this.myStepText.addComponent("text"),this._setupTextComponent(this.myStepTextComponent),this.myStepTextComponent.text=" ",this.myStepCursorTargetComponent=this.myStepCursorTarget.addComponent("cursor-target"),this.myStepCollisionComponent=this.myStepCursorTarget.addComponent("collision"),this.myStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myStepIncreaseButtonBackgroundComponent=this.myStepIncreaseButtonBackground.addComponent("mesh"),this.myStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myStepIncreaseButtonTextComponent=this.myStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myStepIncreaseButtonTextComponent),this.myStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myStepIncreaseButtonCursorTargetComponent=this.myStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myStepIncreaseButtonCollisionComponent=this.myStepIncreaseButtonCursorTarget.addComponent("collision"),this.myStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myStepDecreaseButtonBackgroundComponent=this.myStepDecreaseButtonBackground.addComponent("mesh"),this.myStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myStepDecreaseButtonTextComponent=this.myStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myStepDecreaseButtonTextComponent),this.myStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myStepDecreaseButtonCursorTargetComponent=this.myStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myStepDecreaseButtonCollisionComponent=this.myStepDecreaseButtonCursorTarget.addComponent("collision"),this.myStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents}_setVisibleHook(t){t&&this.setAdditionalButtonsActive(this._myAdditionalButtonsActive)}}});var Un=f(()=>{PP.EasyTuneNumberArrayWidgetSetup=class extends PP.EasyTuneBaseWidgetSetup{constructor(t){super(),this.myArraySize=t}_getBackPanelMinY(){return this.myStepPanelPosition[1]-this._mySideButtonDistanceFromBorder*1.25-this.mySideButtonBackgroundScale[1]}_getPivotZOffset(){return .00803713}_initializeBuildSetupHook(){this.myIncreaseButtonText="+",this.myDecreaseButtonText="-",this._myValuePanelDistanceFromVariableLabelPanel=.055,this._myDistanceBetweenValues=this.mySideButtonBackgroundScale[1]*2+.015,this.myValuesPanelPosition=[0,this.myVariableLabelPanelPosition[1]-this._myValuePanelDistanceFromVariableLabelPanel,this._myPanelZOffset],this.myValueTextScale=PP.vec3_create(.4,.4,.4),this.myValueCursorTargetPosition=PP.vec3_create(0,0,0),this.myValueCursorTargetPosition[2]=this._myColliderZOffset-this._myPanelZOffset,this.myValueCollisionExtents=PP.vec3_create(.065,.02,1),this.myValueCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myValuePanelsPositions=[],this.myValuePanelsPositions[0]=PP.vec3_create(0,0,0);for(let i=1;i<this.myArraySize;i++)this.myValuePanelsPositions[i]=this.myValuePanelsPositions[i-1].slice(0),this.myValuePanelsPositions[i][1]-=this._myDistanceBetweenValues;let t=this.myValuePanelsPositions[this.myArraySize-1]?this.myValuePanelsPositions[this.myArraySize-1][1]:0;this.myStepPanelPosition=[0,this.myDisplayPanelPosition[1]+this.myValuesPanelPosition[1]+t-this._myValuePanelDistanceFromVariableLabelPanel,this._myPanelZOffset],this.myStepTextScale=this.myLabelTextScale,this.myStepStartString="Step: ",this.myStepCursorTargetPosition=PP.vec3_create(0,0,0),this.myStepCursorTargetPosition[2]=this._myColliderZOffset-this.myStepPanelPosition[2],this.myStepCollisionExtents=PP.vec3_create(.065,.0175,1),this.myStepCollisionExtents[2]=this.myCursorTargetCollisionThickness}_initializeRuntimeSetupHook(){this.myTextHoverScaleMultiplier=PP.vec3_create(1.25,1.25,1.25),this.myEditThumbstickMinThreshold=.35,this.myStepMultiplierStepPerSecond=2.25,this.myButtonEditDelay=0}}});var qn=f(()=>{PP.EasyTuneNumberArrayWidgetSelector=class{constructor(t,i){this._myGamepad=i,this._myParentObject=null,this._myParams=t,this._myAdditionalSetup=null,this._myWidgets=new Map,this._myVariable=null,this._myIsVisible=!0,this._myAppendToVariableName=null,this._myScrollVariableRequestCallbacks=new Map,this._myCurrentArraySize=0}setEasyTuneVariable(t,i){this._myVariable=t,this._myCurrentArraySize=this._myVariable.myValue.length,this._myAppendToVariableName=i,this._myWidgets.has(this._myCurrentArraySize)||this._createWidget(this._myCurrentArraySize);let s=this._myWidgets.get(this._myCurrentArraySize);s&&s.setEasyTuneVariable(t,i),this.setVisible(this._myIsVisible)}setVisible(t){for(let i of this._myWidgets.values())i.setVisible(!1);if(this._myVariable){this._sizeChangedCheck();let i=this._myWidgets.get(this._myCurrentArraySize);i&&i.setVisible(t)}this._myIsVisible=t}isScrollVariableActive(){let t=this._myWidgets.get(this._myCurrentArraySize);return t?t.isScrollVariableActive():!1}getScrollVariableDirection(){let t=this._myWidgets.get(this._myCurrentArraySize);return t?t.getScrollVariableDirection():0}setScrollVariableActive(t,i){let s=this._myWidgets.get(this._myCurrentArraySize);s&&s.setScrollVariableActive(t,i)}getWidget(){return this._myWidgets.get(this._myCurrentArraySize)}registerScrollVariableRequestEventListener(t,i){this._myScrollVariableRequestCallbacks.set(t,i)}unregisterScrollVariableRequestEventListener(t){this._myScrollVariableRequestCallbacks.delete(t)}start(t,i){this._myParentObject=t,this._myAdditionalSetup=i,this._createWidget(1),this._myVariable&&this.setEasyTuneVariable(this._myVariable,this._myAppendToVariableName)}update(t){if(this._isActive()){this._sizeChangedCheck();let i=this._myWidgets.get(this._myCurrentArraySize);i&&i.update(t)}}onImportSuccess(){let t=this._myWidgets.get(this._myCurrentArraySize);t&&t.onImportSuccess()}onImportFailure(){let t=this._myWidgets.get(this._myCurrentArraySize);t&&t.onImportFailure()}onExportSuccess(){let t=this._myWidgets.get(this._myCurrentArraySize);t&&t.onExportSuccess()}onExportFailure(){let t=this._myWidgets.get(this._myCurrentArraySize);t&&t.onExportFailure()}_isActive(){return this._myIsVisible&&this._myVariable}_scrollVariableRequest(t){for(let i of this._myScrollVariableRequestCallbacks.values())i(t)}_createWidget(t){this._myWidgets.set(t,new PP.EasyTuneNumberArrayWidget(this._myParams,t,this._myGamepad)),this._myWidgets.get(t).start(this._myParentObject,this._myAdditionalSetup),this._myWidgets.get(t).setVisible(!1),this._myWidgets.get(t).registerScrollVariableRequestEventListener(this,this._scrollVariableRequest.bind(this))}_sizeChangedCheck(){this._myVariable.myValue.length!=this._myCurrentArraySize&&this.setEasyTuneVariable(this._myVariable,this._myAppendToVariableName)}}});var Gn=f(()=>{PP.EasyTuneTransformWidget=class extends PP.EasyTuneBaseWidget{constructor(t,i){super(t),this._myGamepad=i,this._mySetup=new PP.EasyTuneTransformWidgetSetup,this._myUI=new PP.EasyTuneTransformWidgetUI,this._myValueButtonEditIntensity=0,this._myValueButtonEditIntensityTimer=0,this._myStepButtonEditIntensity=0,this._myStepButtonEditIntensityTimer=0,this._myValueEditActive=!1,this._myStepEditActive=!1,this._myValueRealValue=0,this._myComponentStepValue=0,this._myStepMultiplierValue=0,this._myStepFastEdit=!1,this._myValueEditIndex=-1,this._myComponentIndex=0,this._myStepIndex=0}_setEasyTuneVariableHook(){if(this._myValueEditIndex>=0)switch(this._myComponentIndex){case 0:this._myValueRealValue=this._myVariable.myPosition[this._myValueEditIndex],this._myComponentStepValue=this._myVariable.myPositionStepPerSecond;break;case 1:this._myValueRealValue=this._myVariable.myRotation[this._myValueEditIndex],this._myComponentStepValue=this._myVariable.myRotationStepPerSecond;break;case 2:this._myValueRealValue=this._myVariable.myScale[this._myValueEditIndex],this._myComponentStepValue=this._myVariable.myScaleStepPerSecond;break}}_refreshUIHook(){for(let t=0;t<3;t++)this._myUI.myPositionTextComponents[t].text=this._myVariable.myPosition[t].toFixed(this._myVariable.myDecimalPlaces);this._myUI.myPositionStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myPositionStepPerSecond);for(let t=0;t<3;t++)this._myUI.myRotationTextComponents[t].text=this._myVariable.myRotation[t].toFixed(this._myVariable.myDecimalPlaces);this._myUI.myRotationStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myRotationStepPerSecond);for(let t=0;t<3;t++)this._myUI.myScaleTextComponents[t].text=this._myVariable.myScale[t].toFixed(this._myVariable.myDecimalPlaces);this._myUI.myScaleStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myScaleStepPerSecond)}_startHook(t,i){this._myUI.setAdditionalButtonsActive(i.myEnableAdditionalButtons)}_updateHook(t){this._updateValue(t)}_updateValue(t){let i=0;if(this._myGamepad){let o=this._myGamepad.getAxesInfo().myAxes[1];if(Math.abs(o)>this._mySetup.myEditThumbstickMinThreshold){let a=(Math.abs(o)-this._mySetup.myEditThumbstickMinThreshold)/(1-this._mySetup.myEditThumbstickMinThreshold);i=Math.sign(o)*a}}let s=0;if(this._myValueEditActive?s=i:this._myValueButtonEditIntensity!=0&&(this._myValueButtonEditIntensityTimer<=0?s=this._myValueButtonEditIntensity:this._myValueButtonEditIntensityTimer-=t),s!=0){let o=s*this._myComponentStepValue*t;this._myValueRealValue+=o;let a=Math.pow(10,this._myVariable.myDecimalPlaces);switch(this._myComponentIndex){case 0:this._myVariable.myPosition[this._myValueEditIndex]=Math.round(this._myValueRealValue*a+Number.EPSILON)/a,this._myUI.myPositionTextComponents[this._myValueEditIndex].text=this._myVariable.myPosition[this._myValueEditIndex].toFixed(this._myVariable.myDecimalPlaces);break;case 1:if(this._myValueRealValue>180){for(;this._myValueRealValue>180;)this._myValueRealValue-=180;this._myValueRealValue=-180+this._myValueRealValue}if(this._myValueRealValue<-180){for(;this._myValueRealValue<-180;)this._myValueRealValue+=180;this._myValueRealValue=180-this._myValueRealValue}this._myVariable.myRotation[this._myValueEditIndex]=Math.round(this._myValueRealValue*a+Number.EPSILON)/a,this._myUI.myRotationTextComponents[this._myValueEditIndex].text=this._myVariable.myRotation[this._myValueEditIndex].toFixed(this._myVariable.myDecimalPlaces);break;case 2:if(this._myValueRealValue<=0&&(this._myValueRealValue=1/a),this._myVariable.myScaleAsOne){let u=Math.round(this._myValueRealValue*a+Number.EPSILON)/a-this._myVariable.myScale[this._myValueEditIndex];for(let y=0;y<3;y++)this._myVariable.myScale[y]=Math.round((this._myVariable.myScale[y]+u)*a+Number.EPSILON)/a,this._myVariable.myScale[y]=Math.max(this._myVariable.myScale[y],1/a),this._myUI.myScaleTextComponents[y].text=this._myVariable.myScale[y].toFixed(this._myVariable.myDecimalPlaces)}else this._myVariable.myScale[this._myValueEditIndex]=Math.round(this._myValueRealValue*a+Number.EPSILON)/a,this._myVariable.myScale[this._myValueEditIndex]=Math.max(this._myVariable.myScale[this._myValueEditIndex],1/a),this._myUI.myScaleTextComponents[this._myValueEditIndex].text=this._myVariable.myScale[this._myValueEditIndex].toFixed(this._myVariable.myDecimalPlaces);break}}else switch(this._myComponentIndex){case 0:this._myValueRealValue=this._myVariable.myPosition[this._myValueEditIndex];break;case 1:this._myValueRealValue=this._myVariable.myRotation[this._myValueEditIndex];break;case 2:this._myValueRealValue=this._myVariable.myScale[this._myValueEditIndex];break}let n=0;if(this._myStepEditActive?n=i:this._myStepButtonEditIntensity!=0&&(this._myStepButtonEditIntensityTimer<=0?n=this._myStepButtonEditIntensity:this._myStepButtonEditIntensityTimer-=t),n!=0){let o=0;if(this._myStepFastEdit?(o=Math.sign(n)*1,this._myStepFastEdit=!1):o=n*this._mySetup.myStepMultiplierStepPerSecond*t,this._myStepMultiplierValue+=o,Math.abs(this._myStepMultiplierValue)>=1){let a=0;switch(this._myStepIndex){case 0:a=this._myVariable.myPositionStepPerSecond;break;case 1:a=this._myVariable.myRotationStepPerSecond;break;case 2:a=this._myVariable.myScaleStepPerSecond;break;default:a=0}Math.sign(this._myStepMultiplierValue)>0?(this._myStepMultiplierValue-=1,this._changeStep(this._myStepIndex,a*10)):(this._myStepMultiplierValue+=1,this._changeStep(this._myStepIndex,a*.1))}}else this._myStepMultiplierValue=0,this._myStepFastEdit=!0}_addListenersHook(){let t=this._myUI;t.myVariableLabelCursorTargetComponent.addClickFunction(this._resetAllValues.bind(this)),t.myVariableLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myVariableLabelText)),t.myVariableLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myVariableLabelText,this._mySetup.myVariableLabelTextScale)),t.myPositionLabelCursorTargetComponent.addClickFunction(this._resetComponentValues.bind(this,0)),t.myPositionLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myPositionLabelText)),t.myPositionLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myPositionLabelText,this._mySetup.myComponentLabelTextScale));for(let i=0;i<3;i++)t.myPositionIncreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,0,i,1)),t.myPositionIncreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,0,i,1)),t.myPositionIncreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionIncreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionDecreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,0,i,-1)),t.myPositionDecreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,0,i,-1)),t.myPositionDecreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionDecreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionIncreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myPositionIncreaseButtonBackgroundComponents[i].material)),t.myPositionIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myPositionIncreaseButtonBackgroundComponents[i].material)),t.myPositionDecreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myPositionDecreaseButtonBackgroundComponents[i].material)),t.myPositionDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myPositionDecreaseButtonBackgroundComponents[i].material)),t.myPositionCursorTargetComponents[i].addClickFunction(this._resetValue.bind(this,0,i)),t.myPositionCursorTargetComponents[i].addHoverFunction(this._setValueEditActive.bind(this,0,i,t.myPositionTexts[i],!0)),t.myPositionCursorTargetComponents[i].addUnHoverFunction(this._setValueEditActive.bind(this,0,i,t.myPositionTexts[i],!1));t.myRotationLabelCursorTargetComponent.addClickFunction(this._resetComponentValues.bind(this,1)),t.myRotationLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myRotationLabelText)),t.myRotationLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myRotationLabelText,this._mySetup.myComponentLabelTextScale));for(let i=0;i<3;i++)t.myRotationIncreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,1,i,1)),t.myRotationIncreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,1,i,1)),t.myRotationIncreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationIncreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationDecreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,1,i,-1)),t.myRotationDecreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,1,i,-1)),t.myRotationDecreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationDecreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationIncreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myRotationIncreaseButtonBackgroundComponents[i].material)),t.myRotationIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myRotationIncreaseButtonBackgroundComponents[i].material)),t.myRotationDecreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myRotationDecreaseButtonBackgroundComponents[i].material)),t.myRotationDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myRotationDecreaseButtonBackgroundComponents[i].material)),t.myRotationCursorTargetComponents[i].addClickFunction(this._resetValue.bind(this,1,i)),t.myRotationCursorTargetComponents[i].addHoverFunction(this._setValueEditActive.bind(this,1,i,t.myRotationTexts[i],!0)),t.myRotationCursorTargetComponents[i].addUnHoverFunction(this._setValueEditActive.bind(this,1,i,t.myRotationTexts[i],!1));t.myScaleLabelCursorTargetComponent.addClickFunction(this._resetComponentValues.bind(this,2)),t.myScaleLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myScaleLabelText)),t.myScaleLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myScaleLabelText,this._mySetup.myComponentLabelTextScale));for(let i=0;i<3;i++)t.myScaleIncreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,2,i,1)),t.myScaleIncreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,2,i,1)),t.myScaleIncreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleIncreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleDecreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,2,i,-1)),t.myScaleDecreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,2,i,-1)),t.myScaleDecreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleDecreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleIncreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myScaleIncreaseButtonBackgroundComponents[i].material)),t.myScaleIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myScaleIncreaseButtonBackgroundComponents[i].material)),t.myScaleDecreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myScaleDecreaseButtonBackgroundComponents[i].material)),t.myScaleDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myScaleDecreaseButtonBackgroundComponents[i].material)),t.myScaleCursorTargetComponents[i].addClickFunction(this._resetValue.bind(this,2,i)),t.myScaleCursorTargetComponents[i].addHoverFunction(this._setValueEditActive.bind(this,2,i,t.myScaleTexts[i],!0)),t.myScaleCursorTargetComponents[i].addUnHoverFunction(this._setValueEditActive.bind(this,2,i,t.myScaleTexts[i],!1));t.myPositionStepCursorTargetComponent.addClickFunction(this._resetStep.bind(this,0)),t.myPositionStepCursorTargetComponent.addHoverFunction(this._setStepEditActive.bind(this,0,t.myPositionStepText,!0)),t.myPositionStepCursorTargetComponent.addUnHoverFunction(this._setStepEditActive.bind(this,0,t.myPositionStepText,!1)),t.myPositionStepIncreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,0,1)),t.myPositionStepIncreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,0,1)),t.myPositionStepIncreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepIncreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepDecreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,0,-1)),t.myPositionStepDecreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,0,-1)),t.myPositionStepDecreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepDecreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepIncreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPositionStepIncreaseButtonBackgroundComponent.material)),t.myPositionStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myPositionStepIncreaseButtonBackgroundComponent.material)),t.myPositionStepDecreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPositionStepDecreaseButtonBackgroundComponent.material)),t.myPositionStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myPositionStepDecreaseButtonBackgroundComponent.material)),t.myRotationStepCursorTargetComponent.addClickFunction(this._resetStep.bind(this,1)),t.myRotationStepCursorTargetComponent.addHoverFunction(this._setStepEditActive.bind(this,1,t.myRotationStepText,!0)),t.myRotationStepCursorTargetComponent.addUnHoverFunction(this._setStepEditActive.bind(this,1,t.myRotationStepText,!1)),t.myRotationStepIncreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,1,1)),t.myRotationStepIncreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,1,1)),t.myRotationStepIncreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepIncreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepDecreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,1,-1)),t.myRotationStepDecreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,1,-1)),t.myRotationStepDecreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepDecreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepIncreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myRotationStepIncreaseButtonBackgroundComponent.material)),t.myRotationStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myRotationStepIncreaseButtonBackgroundComponent.material)),t.myRotationStepDecreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myRotationStepDecreaseButtonBackgroundComponent.material)),t.myRotationStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myRotationStepDecreaseButtonBackgroundComponent.material)),t.myScaleStepCursorTargetComponent.addClickFunction(this._resetStep.bind(this,2)),t.myScaleStepCursorTargetComponent.addHoverFunction(this._setStepEditActive.bind(this,2,t.myScaleStepText,!0)),t.myScaleStepCursorTargetComponent.addUnHoverFunction(this._setStepEditActive.bind(this,2,t.myScaleStepText,!1)),t.myScaleStepIncreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,2,1)),t.myScaleStepIncreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,2,1)),t.myScaleStepIncreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepIncreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepDecreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,2,-1)),t.myScaleStepDecreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,2,-1)),t.myScaleStepDecreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepDecreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepIncreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myScaleStepIncreaseButtonBackgroundComponent.material)),t.myScaleStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myScaleStepIncreaseButtonBackgroundComponent.material)),t.myScaleStepDecreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myScaleStepDecreaseButtonBackgroundComponent.material)),t.myScaleStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myScaleStepDecreaseButtonBackgroundComponent.material))}_setValueEditIntensity(t,i,s){if(this._isActive()||s==0){if(s!=0){switch(t){case 0:this._myValueRealValue=this._myVariable.myPosition[i],this._myComponentStepValue=this._myVariable.myPositionStepPerSecond;break;case 1:this._myValueRealValue=this._myVariable.myRotation[i],this._myComponentStepValue=this._myVariable.myRotationStepPerSecond;break;case 2:this._myValueRealValue=this._myVariable.myScale[i],this._myComponentStepValue=this._myVariable.myScaleStepPerSecond;break}this._myValueButtonEditIntensityTimer=this._mySetup.myButtonEditDelay,this._myValueEditIndex=i,this._myComponentIndex=t}this._myValueButtonEditIntensity=s}}_setStepEditIntensity(t,i){(this._isActive()||i==0)&&(i!=0&&(this._myStepButtonEditIntensityTimer=this._mySetup.myButtonEditDelay),this._myStepButtonEditIntensity=i,this._myStepIndex=t)}_setValueEditActive(t,i,s,n){if(this._isActive()||!n){if(n){switch(t){case 0:this._myValueRealValue=this._myVariable.myPosition[i],this._myComponentStepValue=this._myVariable.myPositionStepPerSecond;break;case 1:this._myValueRealValue=this._myVariable.myRotation[i],this._myComponentStepValue=this._myVariable.myRotationStepPerSecond;break;case 2:this._myValueRealValue=this._myVariable.myScale[i],this._myComponentStepValue=this._myVariable.myScaleStepPerSecond;break}this._myValueEditIndex=i,this._myComponentIndex=t,s.scale(this._mySetup.myTextHoverScaleMultiplier)}else s.scalingWorld=this._mySetup.myValueTextScale;this._myValueEditActive=n}}_setStepEditActive(t,i,s){(this._isActive()||!s)&&(s?i.scale(this._mySetup.myTextHoverScaleMultiplier):i.scalingWorld=this._mySetup.myStepTextScale,this._myStepEditActive=s,this._myStepIndex=t)}_resetValue(t,i){if(this._isActive())switch(t){case 0:this._myVariable.myPosition[i]=this._myVariable.myDefaultPosition[i],this._myUI.myPositionTextComponents[i].text=this._myVariable.myPosition[i].toFixed(this._myVariable.myDecimalPlaces);break;case 1:this._myVariable.myRotation[i]=this._myVariable.myDefaultRotation[i],this._myUI.myRotationTextComponents[i].text=this._myVariable.myRotation[i].toFixed(this._myVariable.myDecimalPlaces);break;case 2:this._myVariable.myScale[i]=this._myVariable.myDefaultScale[i],this._myUI.myScaleTextComponents[i].text=this._myVariable.myScale[i].toFixed(this._myVariable.myDecimalPlaces);break;default:defaultValue=0}}_resetAllValues(){for(let t=0;t<3;t++)this._resetComponentValues(t)}_resetComponentValues(t){for(let i=0;i<3;i++)this._resetValue(t,i)}_resetStep(t){if(this._isActive()){let i=0;switch(t){case 0:i=this._myVariable.myDefaultPositionStepPerSecond;break;case 1:i=this._myVariable.myDefaultRotationStepPerSecond;break;case 2:i=this._myVariable.myDefaultScaleStepPerSecond;break;default:i=0}this._changeStep(t,i)}}_changeStep(t,i){switch(i=Math.pp_roundDecimal(i,10),t){case 0:this._myVariable.myPositionStepPerSecond=i,this._myUI.myPositionStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myPositionStepPerSecond);break;case 1:this._myVariable.myRotationStepPerSecond=i,this._myUI.myRotationStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myRotationStepPerSecond);break;case 2:this._myVariable.myScaleStepPerSecond=i,this._myUI.myScaleStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myScaleStepPerSecond);break}}_genericTextHover(t){t.scale(this._mySetup.myTextHoverScaleMultiplier)}_genericTextUnHover(t,i){t.scalingWorld=i}}});var zn=f(()=>{PP.EasyTuneTransformWidgetUI=class extends PP.EasyTuneBaseWidgetUI{setAdditionalButtonsActive(t){this._myAdditionalButtonsActive=t;for(let i=0;i<3;i++)this.myPositionIncreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myPositionDecreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive);this.myPositionStepIncreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myPositionStepDecreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive);for(let i=0;i<3;i++)this.myRotationIncreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myRotationDecreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive);this.myRotationStepIncreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myRotationStepDecreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive);for(let i=0;i<3;i++)this.myScaleIncreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myScaleDecreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive);this.myScaleStepIncreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myScaleStepDecreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive)}_buildHook(){this._myAdditionalButtonsActive=!0}_createSkeletonHook(){this.myPositionPanel=WL.scene.addObject(this.myDisplayPanel),this.myPositionLabelText=WL.scene.addObject(this.myPositionPanel),this.myPositionLabelCursorTarget=WL.scene.addObject(this.myPositionPanel),this.myPositionPanels=[],this.myPositionTexts=[],this.myPositionCursorTargets=[],this.myPositionIncreaseButtonPanels=[],this.myPositionIncreaseButtonBackgrounds=[],this.myPositionIncreaseButtonTexts=[],this.myPositionIncreaseButtonCursorTargets=[],this.myPositionDecreaseButtonPanels=[],this.myPositionDecreaseButtonBackgrounds=[],this.myPositionDecreaseButtonTexts=[],this.myPositionDecreaseButtonCursorTargets=[];for(let t=0;t<3;t++)this.myPositionPanels[t]=WL.scene.addObject(this.myPositionPanel),this.myPositionTexts[t]=WL.scene.addObject(this.myPositionPanels[t]),this.myPositionCursorTargets[t]=WL.scene.addObject(this.myPositionPanels[t]),this.myPositionIncreaseButtonPanels[t]=WL.scene.addObject(this.myPositionPanels[t]),this.myPositionIncreaseButtonBackgrounds[t]=WL.scene.addObject(this.myPositionIncreaseButtonPanels[t]),this.myPositionIncreaseButtonTexts[t]=WL.scene.addObject(this.myPositionIncreaseButtonPanels[t]),this.myPositionIncreaseButtonCursorTargets[t]=WL.scene.addObject(this.myPositionIncreaseButtonPanels[t]),this.myPositionDecreaseButtonPanels[t]=WL.scene.addObject(this.myPositionPanels[t]),this.myPositionDecreaseButtonBackgrounds[t]=WL.scene.addObject(this.myPositionDecreaseButtonPanels[t]),this.myPositionDecreaseButtonTexts[t]=WL.scene.addObject(this.myPositionDecreaseButtonPanels[t]),this.myPositionDecreaseButtonCursorTargets[t]=WL.scene.addObject(this.myPositionDecreaseButtonPanels[t]);this.myRotationPanel=WL.scene.addObject(this.myDisplayPanel),this.myRotationLabelText=WL.scene.addObject(this.myRotationPanel),this.myRotationLabelCursorTarget=WL.scene.addObject(this.myRotationPanel),this.myRotationPanels=[],this.myRotationTexts=[],this.myRotationCursorTargets=[],this.myRotationIncreaseButtonPanels=[],this.myRotationIncreaseButtonBackgrounds=[],this.myRotationIncreaseButtonTexts=[],this.myRotationIncreaseButtonCursorTargets=[],this.myRotationDecreaseButtonPanels=[],this.myRotationDecreaseButtonBackgrounds=[],this.myRotationDecreaseButtonTexts=[],this.myRotationDecreaseButtonCursorTargets=[];for(let t=0;t<3;t++)this.myRotationPanels[t]=WL.scene.addObject(this.myRotationPanel),this.myRotationTexts[t]=WL.scene.addObject(this.myRotationPanels[t]),this.myRotationCursorTargets[t]=WL.scene.addObject(this.myRotationPanels[t]),this.myRotationIncreaseButtonPanels[t]=WL.scene.addObject(this.myRotationPanels[t]),this.myRotationIncreaseButtonBackgrounds[t]=WL.scene.addObject(this.myRotationIncreaseButtonPanels[t]),this.myRotationIncreaseButtonTexts[t]=WL.scene.addObject(this.myRotationIncreaseButtonPanels[t]),this.myRotationIncreaseButtonCursorTargets[t]=WL.scene.addObject(this.myRotationIncreaseButtonPanels[t]),this.myRotationDecreaseButtonPanels[t]=WL.scene.addObject(this.myRotationPanels[t]),this.myRotationDecreaseButtonBackgrounds[t]=WL.scene.addObject(this.myRotationDecreaseButtonPanels[t]),this.myRotationDecreaseButtonTexts[t]=WL.scene.addObject(this.myRotationDecreaseButtonPanels[t]),this.myRotationDecreaseButtonCursorTargets[t]=WL.scene.addObject(this.myRotationDecreaseButtonPanels[t]);this.myScalePanel=WL.scene.addObject(this.myDisplayPanel),this.myScaleLabelText=WL.scene.addObject(this.myScalePanel),this.myScaleLabelCursorTarget=WL.scene.addObject(this.myScalePanel),this.myScalePanels=[],this.myScaleTexts=[],this.myScaleCursorTargets=[],this.myScaleIncreaseButtonPanels=[],this.myScaleIncreaseButtonBackgrounds=[],this.myScaleIncreaseButtonTexts=[],this.myScaleIncreaseButtonCursorTargets=[],this.myScaleDecreaseButtonPanels=[],this.myScaleDecreaseButtonBackgrounds=[],this.myScaleDecreaseButtonTexts=[],this.myScaleDecreaseButtonCursorTargets=[];for(let t=0;t<3;t++)this.myScalePanels[t]=WL.scene.addObject(this.myScalePanel),this.myScaleTexts[t]=WL.scene.addObject(this.myScalePanels[t]),this.myScaleCursorTargets[t]=WL.scene.addObject(this.myScalePanels[t]),this.myScaleIncreaseButtonPanels[t]=WL.scene.addObject(this.myScalePanels[t]),this.myScaleIncreaseButtonBackgrounds[t]=WL.scene.addObject(this.myScaleIncreaseButtonPanels[t]),this.myScaleIncreaseButtonTexts[t]=WL.scene.addObject(this.myScaleIncreaseButtonPanels[t]),this.myScaleIncreaseButtonCursorTargets[t]=WL.scene.addObject(this.myScaleIncreaseButtonPanels[t]),this.myScaleDecreaseButtonPanels[t]=WL.scene.addObject(this.myScalePanels[t]),this.myScaleDecreaseButtonBackgrounds[t]=WL.scene.addObject(this.myScaleDecreaseButtonPanels[t]),this.myScaleDecreaseButtonTexts[t]=WL.scene.addObject(this.myScaleDecreaseButtonPanels[t]),this.myScaleDecreaseButtonCursorTargets[t]=WL.scene.addObject(this.myScaleDecreaseButtonPanels[t]);this.myPositionStepPanel=WL.scene.addObject(this.myPositionPanel),this.myPositionStepText=WL.scene.addObject(this.myPositionStepPanel),this.myPositionStepCursorTarget=WL.scene.addObject(this.myPositionStepPanel),this.myPositionStepIncreaseButtonPanel=WL.scene.addObject(this.myPositionStepPanel),this.myPositionStepIncreaseButtonBackground=WL.scene.addObject(this.myPositionStepIncreaseButtonPanel),this.myPositionStepIncreaseButtonText=WL.scene.addObject(this.myPositionStepIncreaseButtonPanel),this.myPositionStepIncreaseButtonCursorTarget=WL.scene.addObject(this.myPositionStepIncreaseButtonPanel),this.myPositionStepDecreaseButtonPanel=WL.scene.addObject(this.myPositionStepPanel),this.myPositionStepDecreaseButtonBackground=WL.scene.addObject(this.myPositionStepDecreaseButtonPanel),this.myPositionStepDecreaseButtonText=WL.scene.addObject(this.myPositionStepDecreaseButtonPanel),this.myPositionStepDecreaseButtonCursorTarget=WL.scene.addObject(this.myPositionStepDecreaseButtonPanel),this.myRotationStepPanel=WL.scene.addObject(this.myRotationPanel),this.myRotationStepText=WL.scene.addObject(this.myRotationStepPanel),this.myRotationStepCursorTarget=WL.scene.addObject(this.myRotationStepPanel),this.myRotationStepIncreaseButtonPanel=WL.scene.addObject(this.myRotationStepPanel),this.myRotationStepIncreaseButtonBackground=WL.scene.addObject(this.myRotationStepIncreaseButtonPanel),this.myRotationStepIncreaseButtonText=WL.scene.addObject(this.myRotationStepIncreaseButtonPanel),this.myRotationStepIncreaseButtonCursorTarget=WL.scene.addObject(this.myRotationStepIncreaseButtonPanel),this.myRotationStepDecreaseButtonPanel=WL.scene.addObject(this.myRotationStepPanel),this.myRotationStepDecreaseButtonBackground=WL.scene.addObject(this.myRotationStepDecreaseButtonPanel),this.myRotationStepDecreaseButtonText=WL.scene.addObject(this.myRotationStepDecreaseButtonPanel),this.myRotationStepDecreaseButtonCursorTarget=WL.scene.addObject(this.myRotationStepDecreaseButtonPanel),this.myScaleStepPanel=WL.scene.addObject(this.myScalePanel),this.myScaleStepText=WL.scene.addObject(this.myScaleStepPanel),this.myScaleStepCursorTarget=WL.scene.addObject(this.myScaleStepPanel),this.myScaleStepIncreaseButtonPanel=WL.scene.addObject(this.myScaleStepPanel),this.myScaleStepIncreaseButtonBackground=WL.scene.addObject(this.myScaleStepIncreaseButtonPanel),this.myScaleStepIncreaseButtonText=WL.scene.addObject(this.myScaleStepIncreaseButtonPanel),this.myScaleStepIncreaseButtonCursorTarget=WL.scene.addObject(this.myScaleStepIncreaseButtonPanel),this.myScaleStepDecreaseButtonPanel=WL.scene.addObject(this.myScaleStepPanel),this.myScaleStepDecreaseButtonBackground=WL.scene.addObject(this.myScaleStepDecreaseButtonPanel),this.myScaleStepDecreaseButtonText=WL.scene.addObject(this.myScaleStepDecreaseButtonPanel),this.myScaleStepDecreaseButtonCursorTarget=WL.scene.addObject(this.myScaleStepDecreaseButtonPanel)}_setTransformHook(){this.myPositionPanel.setTranslationLocal(this._mySetup.myPositionPanelPosition),this.myPositionLabelText.scale(this._mySetup.myComponentLabelTextScale),this.myPositionLabelCursorTarget.setTranslationLocal(this._mySetup.myComponentLabelCursorTargetPosition);for(let t=0;t<3;t++)this.myPositionPanels[t].setTranslationLocal(this._mySetup.myValuePanelsPositions[t]),this.myPositionTexts[t].scale(this._mySetup.myValueTextScale),this.myPositionCursorTargets[t].setTranslationLocal(this._mySetup.myValueCursorTargetPosition),this.myPositionIncreaseButtonPanels[t].setTranslationLocal(this._mySetup.myIncreaseButtonPosition),this.myPositionIncreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myPositionIncreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPositionIncreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myPositionIncreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myPositionDecreaseButtonPanels[t].setTranslationLocal(this._mySetup.myDecreaseButtonPosition),this.myPositionDecreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myPositionDecreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPositionDecreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myPositionDecreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition);this.myRotationPanel.setTranslationLocal(this._mySetup.myRotationPanelPosition),this.myRotationLabelText.scale(this._mySetup.myComponentLabelTextScale),this.myRotationLabelCursorTarget.setTranslationLocal(this._mySetup.myComponentLabelCursorTargetPosition);for(let t=0;t<3;t++)this.myRotationPanels[t].setTranslationLocal(this._mySetup.myValuePanelsPositions[t]),this.myRotationTexts[t].scale(this._mySetup.myValueTextScale),this.myRotationCursorTargets[t].setTranslationLocal(this._mySetup.myValueCursorTargetPosition),this.myRotationIncreaseButtonPanels[t].setTranslationLocal(this._mySetup.myIncreaseButtonPosition),this.myRotationIncreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myRotationIncreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myRotationIncreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myRotationIncreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myRotationDecreaseButtonPanels[t].setTranslationLocal(this._mySetup.myDecreaseButtonPosition),this.myRotationDecreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myRotationDecreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myRotationDecreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myRotationDecreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition);this.myScalePanel.setTranslationLocal(this._mySetup.myScalePanelPosition),this.myScaleLabelText.scale(this._mySetup.myComponentLabelTextScale),this.myScaleLabelCursorTarget.setTranslationLocal(this._mySetup.myComponentLabelCursorTargetPosition);for(let t=0;t<3;t++)this.myScalePanels[t].setTranslationLocal(this._mySetup.myValuePanelsPositions[t]),this.myScaleTexts[t].scale(this._mySetup.myValueTextScale),this.myScaleCursorTargets[t].setTranslationLocal(this._mySetup.myValueCursorTargetPosition),this.myScaleIncreaseButtonPanels[t].setTranslationLocal(this._mySetup.myIncreaseButtonPosition),this.myScaleIncreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myScaleIncreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myScaleIncreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myScaleIncreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myScaleDecreaseButtonPanels[t].setTranslationLocal(this._mySetup.myDecreaseButtonPosition),this.myScaleDecreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myScaleDecreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myScaleDecreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myScaleDecreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition);this.myPositionStepPanel.setTranslationLocal(this._mySetup.myStepPanelPosition),this.myPositionStepText.scale(this._mySetup.myStepTextScale),this.myPositionStepCursorTarget.setTranslationLocal(this._mySetup.myStepCursorTargetPosition),this.myPositionStepIncreaseButtonPanel.setTranslationLocal(this._mySetup.myIncreaseButtonPosition),this.myPositionStepIncreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myPositionStepIncreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPositionStepIncreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myPositionStepIncreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myPositionStepDecreaseButtonPanel.setTranslationLocal(this._mySetup.myDecreaseButtonPosition),this.myPositionStepDecreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myPositionStepDecreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPositionStepDecreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myPositionStepDecreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myRotationStepPanel.setTranslationLocal(this._mySetup.myStepPanelPosition),this.myRotationStepText.scale(this._mySetup.myStepTextScale),this.myRotationStepCursorTarget.setTranslationLocal(this._mySetup.myStepCursorTargetPosition),this.myRotationStepIncreaseButtonPanel.setTranslationLocal(this._mySetup.myIncreaseButtonPosition),this.myRotationStepIncreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myRotationStepIncreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myRotationStepIncreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myRotationStepIncreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myRotationStepDecreaseButtonPanel.setTranslationLocal(this._mySetup.myDecreaseButtonPosition),this.myRotationStepDecreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myRotationStepDecreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myRotationStepDecreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myRotationStepDecreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myScaleStepPanel.setTranslationLocal(this._mySetup.myStepPanelPosition),this.myScaleStepText.scale(this._mySetup.myStepTextScale),this.myScaleStepCursorTarget.setTranslationLocal(this._mySetup.myStepCursorTargetPosition),this.myScaleStepIncreaseButtonPanel.setTranslationLocal(this._mySetup.myIncreaseButtonPosition),this.myScaleStepIncreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myScaleStepIncreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myScaleStepIncreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myScaleStepIncreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myScaleStepDecreaseButtonPanel.setTranslationLocal(this._mySetup.myDecreaseButtonPosition),this.myScaleStepDecreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myScaleStepDecreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myScaleStepDecreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myScaleStepDecreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition)}_addComponentsHook(){this.myPositionLabelTextComponent=this.myPositionLabelText.addComponent("text"),this._setupTextComponent(this.myPositionLabelTextComponent),this.myPositionLabelTextComponent.text=this._mySetup.myPositionText,this.myPositionLabelCursorTargetComponent=this.myPositionLabelCursorTarget.addComponent("cursor-target"),this.myPositionLabelCollisionComponent=this.myPositionLabelCursorTarget.addComponent("collision"),this.myPositionLabelCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionLabelCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionLabelCollisionComponent.extents=this._mySetup.myComponentLabelCollisionExtents,this.myPositionTextComponents=[],this.myPositionCursorTargetComponents=[],this.myPositionCollisionComponents=[],this.myPositionIncreaseButtonBackgroundComponents=[],this.myPositionIncreaseButtonTextComponents=[],this.myPositionIncreaseButtonCursorTargetComponents=[],this.myPositionIncreaseButtonCollisionComponents=[],this.myPositionDecreaseButtonBackgroundComponents=[],this.myPositionDecreaseButtonTextComponents=[],this.myPositionDecreaseButtonCursorTargetComponents=[],this.myPositionDecreaseButtonCollisionComponents=[];for(let t=0;t<3;t++)this.myPositionTextComponents[t]=this.myPositionTexts[t].addComponent("text"),this._setupTextComponent(this.myPositionTextComponents[t]),this.myPositionTextComponents[t].text=" ",this.myPositionCursorTargetComponents[t]=this.myPositionCursorTargets[t].addComponent("cursor-target"),this.myPositionCollisionComponents[t]=this.myPositionCursorTargets[t].addComponent("collision"),this.myPositionCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionCollisionComponents[t].extents=this._mySetup.myValueCollisionExtents,this.myPositionIncreaseButtonBackgroundComponents[t]=this.myPositionIncreaseButtonBackgrounds[t].addComponent("mesh"),this.myPositionIncreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myPositionIncreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPositionIncreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myPositionIncreaseButtonTextComponents[t]=this.myPositionIncreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myPositionIncreaseButtonTextComponents[t]),this.myPositionIncreaseButtonTextComponents[t].text=this._mySetup.myIncreaseButtonText,this.myPositionIncreaseButtonCursorTargetComponents[t]=this.myPositionIncreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myPositionIncreaseButtonCollisionComponents[t]=this.myPositionIncreaseButtonCursorTargets[t].addComponent("collision"),this.myPositionIncreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionIncreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionIncreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents,this.myPositionDecreaseButtonBackgroundComponents[t]=this.myPositionDecreaseButtonBackgrounds[t].addComponent("mesh"),this.myPositionDecreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myPositionDecreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPositionDecreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myPositionDecreaseButtonTextComponents[t]=this.myPositionDecreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myPositionDecreaseButtonTextComponents[t]),this.myPositionDecreaseButtonTextComponents[t].text=this._mySetup.myDecreaseButtonText,this.myPositionDecreaseButtonCursorTargetComponents[t]=this.myPositionDecreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myPositionDecreaseButtonCollisionComponents[t]=this.myPositionDecreaseButtonCursorTargets[t].addComponent("collision"),this.myPositionDecreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionDecreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionDecreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents;this.myRotationLabelTextComponent=this.myRotationLabelText.addComponent("text"),this._setupTextComponent(this.myRotationLabelTextComponent),this.myRotationLabelTextComponent.text=this._mySetup.myRotationText,this.myRotationLabelCursorTargetComponent=this.myRotationLabelCursorTarget.addComponent("cursor-target"),this.myRotationLabelCollisionComponent=this.myRotationLabelCursorTarget.addComponent("collision"),this.myRotationLabelCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationLabelCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationLabelCollisionComponent.extents=this._mySetup.myComponentLabelCollisionExtents,this.myRotationTextComponents=[],this.myRotationCursorTargetComponents=[],this.myRotationCollisionComponents=[],this.myRotationIncreaseButtonBackgroundComponents=[],this.myRotationIncreaseButtonTextComponents=[],this.myRotationIncreaseButtonCursorTargetComponents=[],this.myRotationIncreaseButtonCollisionComponents=[],this.myRotationDecreaseButtonBackgroundComponents=[],this.myRotationDecreaseButtonTextComponents=[],this.myRotationDecreaseButtonCursorTargetComponents=[],this.myRotationDecreaseButtonCollisionComponents=[];for(let t=0;t<3;t++)this.myRotationTextComponents[t]=this.myRotationTexts[t].addComponent("text"),this._setupTextComponent(this.myRotationTextComponents[t]),this.myRotationTextComponents[t].text=" ",this.myRotationCursorTargetComponents[t]=this.myRotationCursorTargets[t].addComponent("cursor-target"),this.myRotationCollisionComponents[t]=this.myRotationCursorTargets[t].addComponent("collision"),this.myRotationCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationCollisionComponents[t].extents=this._mySetup.myValueCollisionExtents,this.myRotationIncreaseButtonBackgroundComponents[t]=this.myRotationIncreaseButtonBackgrounds[t].addComponent("mesh"),this.myRotationIncreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myRotationIncreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myRotationIncreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myRotationIncreaseButtonTextComponents[t]=this.myRotationIncreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myRotationIncreaseButtonTextComponents[t]),this.myRotationIncreaseButtonTextComponents[t].text=this._mySetup.myIncreaseButtonText,this.myRotationIncreaseButtonCursorTargetComponents[t]=this.myRotationIncreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myRotationIncreaseButtonCollisionComponents[t]=this.myRotationIncreaseButtonCursorTargets[t].addComponent("collision"),this.myRotationIncreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationIncreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationIncreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents,this.myRotationDecreaseButtonBackgroundComponents[t]=this.myRotationDecreaseButtonBackgrounds[t].addComponent("mesh"),this.myRotationDecreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myRotationDecreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myRotationDecreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myRotationDecreaseButtonTextComponents[t]=this.myRotationDecreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myRotationDecreaseButtonTextComponents[t]),this.myRotationDecreaseButtonTextComponents[t].text=this._mySetup.myDecreaseButtonText,this.myRotationDecreaseButtonCursorTargetComponents[t]=this.myRotationDecreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myRotationDecreaseButtonCollisionComponents[t]=this.myRotationDecreaseButtonCursorTargets[t].addComponent("collision"),this.myRotationDecreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationDecreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationDecreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents;this.myScaleLabelTextComponent=this.myScaleLabelText.addComponent("text"),this._setupTextComponent(this.myScaleLabelTextComponent),this.myScaleLabelTextComponent.text=this._mySetup.myScaleText,this.myScaleLabelCursorTargetComponent=this.myScaleLabelCursorTarget.addComponent("cursor-target"),this.myScaleLabelCollisionComponent=this.myScaleLabelCursorTarget.addComponent("collision"),this.myScaleLabelCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleLabelCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleLabelCollisionComponent.extents=this._mySetup.myComponentLabelCollisionExtents,this.myScaleTextComponents=[],this.myScaleCursorTargetComponents=[],this.myScaleCollisionComponents=[],this.myScaleIncreaseButtonBackgroundComponents=[],this.myScaleIncreaseButtonTextComponents=[],this.myScaleIncreaseButtonCursorTargetComponents=[],this.myScaleIncreaseButtonCollisionComponents=[],this.myScaleDecreaseButtonBackgroundComponents=[],this.myScaleDecreaseButtonTextComponents=[],this.myScaleDecreaseButtonCursorTargetComponents=[],this.myScaleDecreaseButtonCollisionComponents=[];for(let t=0;t<3;t++)this.myScaleTextComponents[t]=this.myScaleTexts[t].addComponent("text"),this._setupTextComponent(this.myScaleTextComponents[t]),this.myScaleTextComponents[t].text=" ",this.myScaleCursorTargetComponents[t]=this.myScaleCursorTargets[t].addComponent("cursor-target"),this.myScaleCollisionComponents[t]=this.myScaleCursorTargets[t].addComponent("collision"),this.myScaleCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleCollisionComponents[t].extents=this._mySetup.myValueCollisionExtents,this.myScaleIncreaseButtonBackgroundComponents[t]=this.myScaleIncreaseButtonBackgrounds[t].addComponent("mesh"),this.myScaleIncreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myScaleIncreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myScaleIncreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myScaleIncreaseButtonTextComponents[t]=this.myScaleIncreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myScaleIncreaseButtonTextComponents[t]),this.myScaleIncreaseButtonTextComponents[t].text=this._mySetup.myIncreaseButtonText,this.myScaleIncreaseButtonCursorTargetComponents[t]=this.myScaleIncreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myScaleIncreaseButtonCollisionComponents[t]=this.myScaleIncreaseButtonCursorTargets[t].addComponent("collision"),this.myScaleIncreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleIncreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleIncreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents,this.myScaleDecreaseButtonBackgroundComponents[t]=this.myScaleDecreaseButtonBackgrounds[t].addComponent("mesh"),this.myScaleDecreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myScaleDecreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myScaleDecreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myScaleDecreaseButtonTextComponents[t]=this.myScaleDecreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myScaleDecreaseButtonTextComponents[t]),this.myScaleDecreaseButtonTextComponents[t].text=this._mySetup.myDecreaseButtonText,this.myScaleDecreaseButtonCursorTargetComponents[t]=this.myScaleDecreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myScaleDecreaseButtonCollisionComponents[t]=this.myScaleDecreaseButtonCursorTargets[t].addComponent("collision"),this.myScaleDecreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleDecreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleDecreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents;this.myPositionStepTextComponent=this.myPositionStepText.addComponent("text"),this._setupTextComponent(this.myPositionStepTextComponent),this.myPositionStepTextComponent.text=" ",this.myPositionStepCursorTargetComponent=this.myPositionStepCursorTarget.addComponent("cursor-target"),this.myPositionStepCollisionComponent=this.myPositionStepCursorTarget.addComponent("collision"),this.myPositionStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myPositionStepIncreaseButtonBackgroundComponent=this.myPositionStepIncreaseButtonBackground.addComponent("mesh"),this.myPositionStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPositionStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPositionStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPositionStepIncreaseButtonTextComponent=this.myPositionStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myPositionStepIncreaseButtonTextComponent),this.myPositionStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myPositionStepIncreaseButtonCursorTargetComponent=this.myPositionStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myPositionStepIncreaseButtonCollisionComponent=this.myPositionStepIncreaseButtonCursorTarget.addComponent("collision"),this.myPositionStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myPositionStepDecreaseButtonBackgroundComponent=this.myPositionStepDecreaseButtonBackground.addComponent("mesh"),this.myPositionStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPositionStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPositionStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPositionStepDecreaseButtonTextComponent=this.myPositionStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myPositionStepDecreaseButtonTextComponent),this.myPositionStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myPositionStepDecreaseButtonCursorTargetComponent=this.myPositionStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myPositionStepDecreaseButtonCollisionComponent=this.myPositionStepDecreaseButtonCursorTarget.addComponent("collision"),this.myPositionStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myRotationStepTextComponent=this.myRotationStepText.addComponent("text"),this._setupTextComponent(this.myRotationStepTextComponent),this.myRotationStepTextComponent.text=" ",this.myRotationStepCursorTargetComponent=this.myRotationStepCursorTarget.addComponent("cursor-target"),this.myRotationStepCollisionComponent=this.myRotationStepCursorTarget.addComponent("collision"),this.myRotationStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myRotationStepIncreaseButtonBackgroundComponent=this.myRotationStepIncreaseButtonBackground.addComponent("mesh"),this.myRotationStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myRotationStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myRotationStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myRotationStepIncreaseButtonTextComponent=this.myRotationStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myRotationStepIncreaseButtonTextComponent),this.myRotationStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myRotationStepIncreaseButtonCursorTargetComponent=this.myRotationStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myRotationStepIncreaseButtonCollisionComponent=this.myRotationStepIncreaseButtonCursorTarget.addComponent("collision"),this.myRotationStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myRotationStepDecreaseButtonBackgroundComponent=this.myRotationStepDecreaseButtonBackground.addComponent("mesh"),this.myRotationStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myRotationStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myRotationStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myRotationStepDecreaseButtonTextComponent=this.myRotationStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myRotationStepDecreaseButtonTextComponent),this.myRotationStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myRotationStepDecreaseButtonCursorTargetComponent=this.myRotationStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myRotationStepDecreaseButtonCollisionComponent=this.myRotationStepDecreaseButtonCursorTarget.addComponent("collision"),this.myRotationStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myScaleStepTextComponent=this.myScaleStepText.addComponent("text"),this._setupTextComponent(this.myScaleStepTextComponent),this.myScaleStepTextComponent.text=" ",this.myScaleStepCursorTargetComponent=this.myScaleStepCursorTarget.addComponent("cursor-target"),this.myScaleStepCollisionComponent=this.myScaleStepCursorTarget.addComponent("collision"),this.myScaleStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myScaleStepIncreaseButtonBackgroundComponent=this.myScaleStepIncreaseButtonBackground.addComponent("mesh"),this.myScaleStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myScaleStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myScaleStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myScaleStepIncreaseButtonTextComponent=this.myScaleStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myScaleStepIncreaseButtonTextComponent),this.myScaleStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myScaleStepIncreaseButtonCursorTargetComponent=this.myScaleStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myScaleStepIncreaseButtonCollisionComponent=this.myScaleStepIncreaseButtonCursorTarget.addComponent("collision"),this.myScaleStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myScaleStepDecreaseButtonBackgroundComponent=this.myScaleStepDecreaseButtonBackground.addComponent("mesh"),this.myScaleStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myScaleStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myScaleStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myScaleStepDecreaseButtonTextComponent=this.myScaleStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myScaleStepDecreaseButtonTextComponent),this.myScaleStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myScaleStepDecreaseButtonCursorTargetComponent=this.myScaleStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myScaleStepDecreaseButtonCollisionComponent=this.myScaleStepDecreaseButtonCursorTarget.addComponent("collision"),this.myScaleStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents}_addStepComponents(){this.myPositionStepTextComponent=this.myPositionStepText.addComponent("text"),this._setupTextComponent(this.myPositionStepTextComponent),this.myPositionStepTextComponent.text=" ",this.myPositionStepCursorTargetComponent=this.myPositionStepCursorTarget.addComponent("cursor-target"),this.myPositionStepCollisionComponent=this.myPositionStepCursorTarget.addComponent("collision"),this.myPositionStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myPositionStepIncreaseButtonBackgroundComponent=this.myPositionStepIncreaseButtonBackground.addComponent("mesh"),this.myPositionStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPositionStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPositionStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPositionStepIncreaseButtonTextComponent=this.myPositionStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myPositionStepIncreaseButtonTextComponent),this.myPositionStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myPositionStepIncreaseButtonCursorTargetComponent=this.myPositionStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myPositionStepIncreaseButtonCollisionComponent=this.myPositionStepIncreaseButtonCursorTarget.addComponent("collision"),this.myPositionStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myPositionStepDecreaseButtonBackgroundComponent=this.myPositionStepDecreaseButtonBackground.addComponent("mesh"),this.myPositionStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPositionStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPositionStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPositionStepDecreaseButtonTextComponent=this.myPositionStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myPositionStepDecreaseButtonTextComponent),this.myPositionStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myPositionStepDecreaseButtonCursorTargetComponent=this.myPositionStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myPositionStepDecreaseButtonCollisionComponent=this.myPositionStepDecreaseButtonCursorTarget.addComponent("collision"),this.myPositionStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myRotationStepTextComponent=this.myRotationStepText.addComponent("text"),this._setupTextComponent(this.myRotationStepTextComponent),this.myRotationStepTextComponent.text=" ",this.myRotationStepCursorTargetComponent=this.myRotationStepCursorTarget.addComponent("cursor-target"),this.myRotationStepCollisionComponent=this.myRotationStepCursorTarget.addComponent("collision"),this.myRotationStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myRotationStepIncreaseButtonBackgroundComponent=this.myRotationStepIncreaseButtonBackground.addComponent("mesh"),this.myRotationStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myRotationStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myRotationStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myRotationStepIncreaseButtonTextComponent=this.myRotationStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myRotationStepIncreaseButtonTextComponent),this.myRotationStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myRotationStepIncreaseButtonCursorTargetComponent=this.myRotationStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myRotationStepIncreaseButtonCollisionComponent=this.myRotationStepIncreaseButtonCursorTarget.addComponent("collision"),this.myRotationStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myRotationStepDecreaseButtonBackgroundComponent=this.myRotationStepDecreaseButtonBackground.addComponent("mesh"),this.myRotationStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myRotationStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myRotationStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myRotationStepDecreaseButtonTextComponent=this.myRotationStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myRotationStepDecreaseButtonTextComponent),this.myRotationStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myRotationStepDecreaseButtonCursorTargetComponent=this.myRotationStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myRotationStepDecreaseButtonCollisionComponent=this.myRotationStepDecreaseButtonCursorTarget.addComponent("collision"),this.myRotationStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myScaleStepTextComponent=this.myScaleStepText.addComponent("text"),this._setupTextComponent(this.myScaleStepTextComponent),this.myScaleStepTextComponent.text=" ",this.myScaleStepCursorTargetComponent=this.myScaleStepCursorTarget.addComponent("cursor-target"),this.myScaleStepCollisionComponent=this.myScaleStepCursorTarget.addComponent("collision"),this.myScaleStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myScaleStepIncreaseButtonBackgroundComponent=this.myScaleStepIncreaseButtonBackground.addComponent("mesh"),this.myScaleStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myScaleStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myScaleStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myScaleStepIncreaseButtonTextComponent=this.myScaleStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myScaleStepIncreaseButtonTextComponent),this.myScaleStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myScaleStepIncreaseButtonCursorTargetComponent=this.myScaleStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myScaleStepIncreaseButtonCollisionComponent=this.myScaleStepIncreaseButtonCursorTarget.addComponent("collision"),this.myScaleStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myScaleStepDecreaseButtonBackgroundComponent=this.myScaleStepDecreaseButtonBackground.addComponent("mesh"),this.myScaleStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myScaleStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myScaleStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myScaleStepDecreaseButtonTextComponent=this.myScaleStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myScaleStepDecreaseButtonTextComponent),this.myScaleStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myScaleStepDecreaseButtonCursorTargetComponent=this.myScaleStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myScaleStepDecreaseButtonCollisionComponent=this.myScaleStepDecreaseButtonCursorTarget.addComponent("collision"),this.myScaleStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents}}});var Qn=f(()=>{PP.EasyTuneTransformWidgetSetup=class extends PP.EasyTuneBaseWidgetSetup{_getBackPanelMinY(){return super._getBackPanelMinY()+this.myPositionPanelPosition[1]+this.myStepPanelPosition[1]}_getBackPanelMaxX(){return this.myDisplayPanelPosition[0]+this.myRotationPanelPosition[0]+this.myIncreaseButtonPosition[0]+this.mySideButtonBackgroundScale[0]+this._mySideButtonDistanceFromBorder}_getBackPanelMinX(){return this.myDisplayPanelPosition[0]+this.myScalePanelPosition[0]+this.myDecreaseButtonPosition[0]-this.mySideButtonBackgroundScale[0]-this._mySideButtonDistanceFromBorder}_getPivotZOffset(){return .00805713}_initializeBuildSetupHook(){this.myIncreaseButtonText="+",this.myDecreaseButtonText="-",this.myDecreaseButtonPosition=PP.vec3_create(-.13,0,-1e-5),this.myIncreaseButtonPosition=PP.vec3_create(-this.myDecreaseButtonPosition[0],0,-1e-5);let t=Math.abs(this.myIncreaseButtonPosition[0])+Math.abs(this.myRightSideButtonPosition[0]),i=.045;this.myPositionPanelPosition=[0,this.myVariableLabelPanelPosition[1]-i,this._myPanelZOffset],this.myRotationPanelPosition=[this.myPositionPanelPosition[0]+t,this.myVariableLabelPanelPosition[1]-i,this._myPanelZOffset],this.myScalePanelPosition=[this.myPositionPanelPosition[0]-t,this.myVariableLabelPanelPosition[1]-i,this._myPanelZOffset],this.myPositionText="Position",this.myRotationText="Rotation",this.myScaleText="Scale",this.myComponentLabelTextScale=this.myLabelTextScale,this.myComponentLabelCursorTargetPosition=PP.vec3_create(0,0,0),this.myComponentLabelCursorTargetPosition[2]=this._myColliderZOffset-this._myPanelZOffset,this.myComponentLabelCollisionExtents=PP.vec3_create(.065,.0175,1),this.myComponentLabelCollisionExtents[2]=this.myCursorTargetCollisionThickness,this._myValuePanelDistanceFromVariableLabelPanel=.055,this._myDistanceBetweenValues=this.mySideButtonBackgroundScale[1]*2+.015,this.myValueTextScale=PP.vec3_create(.4,.4,.4),this.myValueCursorTargetPosition=PP.vec3_create(0,0,0),this.myValueCursorTargetPosition[2]=this._myColliderZOffset-this._myPanelZOffset,this.myValueCollisionExtents=PP.vec3_create(.065,.02,1),this.myValueCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myValuePanelsPositions=[],this.myValuePanelsPositions[0]=PP.vec3_create(0,-this._myValuePanelDistanceFromVariableLabelPanel,0);for(let n=1;n<3;n++)this.myValuePanelsPositions[n]=this.myValuePanelsPositions[n-1].slice(0),this.myValuePanelsPositions[n][1]-=this._myDistanceBetweenValues;let s=this.myValuePanelsPositions[2][1];this.myStepPanelPosition=[0,s-this._myValuePanelDistanceFromVariableLabelPanel,0],this.myStepTextScale=this.myLabelTextScale,this.myStepStartString="Step: ",this.myStepCursorTargetPosition=PP.vec3_create(0,0,0),this.myStepCursorTargetPosition[2]=this._myColliderZOffset-this.myStepPanelPosition[2],this.myStepCollisionExtents=PP.vec3_create(.065,.0175,1),this.myStepCollisionExtents[2]=this.myCursorTargetCollisionThickness}_initializeRuntimeSetupHook(){this.myTextHoverScaleMultiplier=PP.vec3_create(1.25,1.25,1.25),this.myEditThumbstickMinThreshold=.35,this.myStepMultiplierStepPerSecond=2.25,this.myButtonEditDelay=0}}});var Xn=f(()=>{PP.EasyTuneWidgetAdditionalSetup=class{constructor(){this.myHandedness=PP.ToolHandedness.NONE,this.myShowOnStart=!1,this.myShowVisibilityButton=!1,this.myEnableAdditionalButtons=!1,this.myEnableGamepadScrollVariable=!1,this.myPlaneMaterial=null,this.myTextMaterial=null,this.myEnableVariablesImportExportButtons=!1,this.myVariablesImportCallback=null,this.myVariablesExportCallback=null}};PP.EasyTuneWidget=class{constructor(){this._myIsStarted=!1,this._myStartVariable=null,this._myWidgetFrame=new PP.WidgetFrame("E",1),this._myWidgetFrame.registerWidgetVisibleChangedEventListener(this,this._widgetVisibleChanged.bind(this)),this._mySetup=new PP.EasyTuneWidgetSetup,this._myAdditionalSetup=null,this._myWidgets=[],this._myEasyTuneVariables=null,this._myEasyTuneLastSize=0,this._myVariableNames=null,this._myCurrentWidget=null,this._myCurrentVariable=null,this._myScrollVariableTimer=0,this._myGamepad=null,this._myRefreshVariablesTimer=0,this._myDirty=!1}setActiveVariable(t){this._myIsStarted?this._myEasyTuneVariables.has(t)?(this._myCurrentVariable=this._myEasyTuneVariables.getEasyTuneVariable(t),this._selectCurrentWidget()):console.log("Can't set easy tune active variable"):this._myStartVariable=t}refresh(){this._myWidgetFrame.myIsWidgetVisible&&(this._myDirty=!0)}setVisible(t){this._myWidgetFrame.setVisible(t)}isVisible(){return this._myWidgetFrame.isVisible()}start(t,i,s){this._myRightGamepad=PP.myRightGamepad,this._myLeftGamepad=PP.myLeftGamepad,this._mySetup.myGamepadHandedness==PP.ToolHandedness.RIGHT?this._myGamepad=this._myRightGamepad:this._mySetup.myGamepadHandedness==PP.ToolHandedness.LEFT&&(this._myGamepad=this._myLeftGamepad),this._myIsStarted=!0,this._myAdditionalSetup=i,this._myWidgetFrame.start(t,i),this._myEasyTuneVariables=s,this._myEasyTuneLastSize=this._myEasyTuneVariables.length(),this._myVariableNames=this._myEasyTuneVariables.getEasyTuneVariablesNames(),this._myEasyTuneVariables.length()>0&&(this._myCurrentVariable=this._myEasyTuneVariables.getEasyTuneVariable(this._myVariableNames[0])),this._myStartVariable&&(this._myEasyTuneVariables.has(this._myStartVariable)?this._myCurrentVariable=this._myEasyTuneVariables.getEasyTuneVariable(this._myStartVariable):console.log("Can't set easy tune active variable")),this._initializeWidgets()}update(t){this._myWidgetFrame.update(t),(this._myEasyTuneVariables.length()!=this._myEasyTuneLastSize||this._myDirty)&&this._refreshEasyTuneVariables(),this._myWidgetFrame.myIsWidgetVisible&&this._myEasyTuneVariables.length()>0&&(this._mySetup.myRefreshVariablesDelay!=null&&(this._myRefreshVariablesTimer+=t,this._myRefreshVariablesTimer>this._mySetup.myRefreshVariablesDelay&&(this._myRefreshVariablesTimer=0,this._refreshEasyTuneVariables())),this._myCurrentWidget&&this._myCurrentWidget.update(t),this._myAdditionalSetup.myEnableGamepadScrollVariable&&this._updateGamepadScrollVariable(t)),this._updateGamepadWidgetVisibility(),this._updateActiveVariable()}_initializeWidgets(){let t=new PP.EasyTuneBaseWidgetParams;t.myVariablesImportCallback=this._importVariables.bind(this),t.myVariablesExportCallback=this._exportVariables.bind(this),this._myWidgets[PP.EasyTuneVariableType.NONE]=new PP.EasyTuneNoneWidget(t),this._myWidgets[PP.EasyTuneVariableType.NUMBER]=new PP.EasyTuneNumberArrayWidgetSelector(t,this._myGamepad),this._myWidgets[PP.EasyTuneVariableType.BOOL]=new PP.EasyTuneBoolArrayWidgetSelector(t,this._myGamepad),this._myWidgets[PP.EasyTuneVariableType.TRANSFORM]=new PP.EasyTuneTransformWidget(t,this._myGamepad);for(let i of this._myWidgets)i!=null&&(i.start(this._myWidgetFrame.getWidgetObject(),this._myAdditionalSetup),i.setVisible(!1),i.registerScrollVariableRequestEventListener(this,this._scrollVariable.bind(this)));this._selectCurrentWidget()}_selectCurrentWidget(){if(this._myEasyTuneVariables.length()<=0)return;let t=null;this._myCurrentWidget!=null&&(t=this._myCurrentWidget.getWidget()),this._myCurrentVariable.myType in this._myWidgets?this._myCurrentWidget=this._myWidgets[this._myCurrentVariable.myType]:this._myCurrentWidget=this._myWidgets[PP.EasyTuneVariableType.NONE],this._myCurrentWidget.setEasyTuneVariable(this._myCurrentVariable,this._createIndexString()),this._myCurrentWidget.getWidget().syncWidget(t),t?.setVisible(!1),this._myCurrentWidget.setVisible(this._myWidgetFrame.myIsWidgetVisible)}_refreshEasyTuneVariables(){this._myVariableNames=this._myEasyTuneVariables.getEasyTuneVariablesNames(),this._myEasyTuneLastSize=this._myEasyTuneVariables.length(),this._myEasyTuneVariables.length()>0?(this._myCurrentVariable&&this._myEasyTuneVariables.has(this._myCurrentVariable.myName)?this._myCurrentVariable=this._myEasyTuneVariables.getEasyTuneVariable(this._myCurrentVariable.myName):this._myCurrentVariable=this._myEasyTuneVariables.getEasyTuneVariable(this._myVariableNames[0]),this._selectCurrentWidget()):(this._myCurrentVariable=null,this._myCurrentWidget&&(this._myCurrentWidget.setVisible(!1),this._myCurrentWidget=null)),this._myDirty=!1}_updateGamepadWidgetVisibility(){this._myGamepad&&(this._myGamepad.getButtonInfo(PP.GamepadButtonID.BOTTOM_BUTTON).isPressStart()&&this._myGamepad.getButtonInfo(PP.GamepadButtonID.TOP_BUTTON).myIsPressed||this._myGamepad.getButtonInfo(PP.GamepadButtonID.TOP_BUTTON).isPressStart()&&this._myGamepad.getButtonInfo(PP.GamepadButtonID.BOTTOM_BUTTON).myIsPressed)&&this._toggleVisibility()}_toggleVisibility(){this._myWidgetFrame.toggleVisibility()}_widgetVisibleChanged(t){for(let i of this._myWidgets)i?.setVisible(!1);this._myCurrentWidget&&(this._myEasyTuneVariables.length()>0?this._myCurrentWidget.setVisible(t):this._myCurrentWidget.setVisible(!1)),t&&this._refreshEasyTuneVariables()}_updateGamepadScrollVariable(t){if(this._myGamepad&&(!this._mySetup.myScrollVariableButtonID||this._myGamepad.getButtonInfo(this._mySetup.myScrollVariableButtonID).myIsPressed)){let i=this._myGamepad.getAxesInfo().myAxes[0],s=this._myGamepad.getAxesInfo().myAxes[1];if(Math.abs(i)>this._mySetup.myScrollVariableMinXThreshold&&Math.abs(s)<this._mySetup.myScrollVariableMaxYThreshold)for(this._myScrollVariableTimer+=t;this._myScrollVariableTimer>this._mySetup.myScrollVariableDelay;)this._myScrollVariableTimer-=this._mySetup.myScrollVariableDelay,this._scrollVariable(Math.sign(i));else this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay}else this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay}_scrollVariable(t){if(this._myEasyTuneVariables.length()<=0)return;let i=this._getVariableIndex(this._myCurrentVariable);if(i>=0){let s=((i+t)%this._myVariableNames.length+this._myVariableNames.length)%this._myVariableNames.length;this._myEasyTuneVariables.has(this._myVariableNames[s])?(this._myCurrentVariable=this._myEasyTuneVariables.getEasyTuneVariable(this._myVariableNames[s]),this._selectCurrentWidget()):this._refreshEasyTuneVariables()}else this._refreshEasyTuneVariables()}_createIndexString(){let t=" (",i=(this._getVariableIndex(this._myCurrentVariable)+1).toString(),s=this._myEasyTuneVariables.length().toString();for(;i.length<s.length;)i="0".concat(i);return t=t.concat(i).concat(" - ").concat(s).concat(")"),t}_getVariableIndex(t){return this._myVariableNames.indexOf(t.myName)}_updateActiveVariable(){this._myEasyTuneVariables.getEasyTuneVariables().forEach(function(t){t.myIsActive=!1}),this._myWidgetFrame.myIsWidgetVisible&&this._myCurrentVariable&&(this._myCurrentVariable.myIsActive=!0)}_importVariables(){this._myAdditionalSetup.myVariablesImportCallback(this._onImportSuccess.bind(this),this._onImportFailure.bind(this))}_exportVariables(){this._myAdditionalSetup.myVariablesExportCallback(this._onExportSuccess.bind(this),this._onExportFailure.bind(this))}_onImportSuccess(){this._myCurrentWidget&&this._myCurrentWidget.onImportSuccess()}_onImportFailure(){this._myCurrentWidget&&this._myCurrentWidget.onImportFailure()}_onExportSuccess(){this._myCurrentWidget&&this._myCurrentWidget.onExportSuccess()}_onExportFailure(){this._myCurrentWidget&&this._myCurrentWidget.onExportFailure()}}});var Kn=f(()=>{PP.EasyTuneWidgetSetup=class{constructor(){this._initializeRuntimeSetup()}_initializeRuntimeSetup(){this.myGamepadHandedness=PP.ToolHandedness.RIGHT,this.myScrollVariableDelay=.5,this.myScrollVariableMinXThreshold=.6,this.myScrollVariableMaxYThreshold=.25,this.myScrollVariableButtonID=null,this.myRefreshVariablesDelay=null}}});var Jn=f(()=>{PP.EasyTuneVariables=class{constructor(){this._myVariables=new Map}add(t){this._myVariables.set(t.myName,t)}remove(t){this._myVariables.delete(t)}get(t){let i=this._myVariables.get(t);return i?i.getValue():null}set(t,i,s=!1){let n=this._myVariables.get(t);n&&n.setValue(i,s)}has(t){return this._myVariables.has(t)}length(){return this._myVariables.size}isActive(t){let i=this._myVariables.get(t);return i?i.myIsActive:!1}getEasyTuneVariable(t){return this._myVariables.get(t)}getEasyTuneVariables(){return Array.from(this._myVariables.values())}getEasyTuneVariablesNames(){return Array.from(this._myVariables.keys())}fromJSON(t,i=!1){let s=JSON.parse(t);for(let n of this._myVariables.values()){let o=s[n.myName];o!==void 0&&n.fromJSON(o,i)}}toJSON(){let t={};for(let i of this._myVariables.values())t[i.myName]=i.toJSON();return JSON.stringify(t)}registerValueChangedEventListener(t,i,s){this._myVariables.get(t).registerValueChangedEventListener(i,s)}unregisterValueChangedEventListener(t,i,s){this._myVariables.get(t).unregisterValueChangedEventListener(i)}}});var Yn=f(()=>{PP.EasyTuneVariableType={NONE:0,NUMBER:1,BOOL:2,TRANSFORM:3};PP.EasyTuneVariable=class{constructor(t,i){this.myName=t.slice(0),this.myType=i,this.myValue=null,this.myDefaultValue=null,this.myIsActive=!1,this._myValueChangedCallbacks=new Map}getValue(){return this.myValue}setValue(t,i=!1){let s=this.myValue;this.myValue=t,i&&PP.EasyTuneVariable.prototype.setDefaultValue.call(this,t),PP.refreshEasyTuneWidget(),s!=t&&this._triggerValueChangedCallback()}setDefaultValue(t){this.myDefaultValue=t}fromJSON(t,i=!1){this.setValue(JSON.parse(t),i)}toJSON(){return JSON.stringify(this.getValue())}registerValueChangedEventListener(t,i){this._myValueChangedCallbacks.set(t,i)}unregisterValueChangedEventListener(t){this._myValueChangedCallbacks.delete(t)}_triggerValueChangedCallback(){this._myValueChangedCallbacks.size>0&&this._myValueChangedCallbacks.forEach(function(t){t(this.myName,this.getValue())}.bind(this))}};PP.EasyTuneVariableArray=class extends PP.EasyTuneVariable{constructor(t,i,s){super(t,i),PP.EasyTuneVariableArray.prototype.setValue.call(this,s,!0)}getValue(){return this.myValue.slice(0)}setValue(t,i=!1){let s=this.myValue;this.myValue=t.slice(0),i&&PP.EasyTuneVariableArray.prototype.setDefaultValue.call(this,t),PP.refreshEasyTuneWidget(),(s==null||!s.pp_equals(t))&&this._triggerValueChangedCallback()}setDefaultValue(t){this.myDefaultValue=t.slice(0)}};PP.EasyTuneNumberArray=class extends PP.EasyTuneVariableArray{constructor(t,i,s,n,o=null,a=null,l=!1){super(t,PP.EasyTuneVariableType.NUMBER,i),this.myDecimalPlaces=n,this.myStepPerSecond=s,this.myDefaultStepPerSecond=this.myStepPerSecond,this.myMin=o,this.myMax=a,this.myEditAllValuesTogether=l,this._clampValue(!0)}setMax(t){this.myMax=t,this._clampValue(!1)}setMin(t){this.myMin=t,this._clampValue(!1)}_clampValue(t){let i=this.myValue.vec_clamp(this.myMin,this.myMax);if(!t){let s=this.myDefaultValue.vec_clamp(this.myMin,this.myMax);!s.vec_equals(this.myDefaultValue,1e-5)&&PP.EasyTuneVariableArray.prototype.setDefaultValue.call(this,s)}PP.EasyTuneVariableArray.prototype.setValue.call(this,i,t)}};PP.EasyTuneNumber=class extends PP.EasyTuneNumberArray{constructor(t,i,s,n,o,a){super(t,[i],s,n,o,a)}getValue(){return this.myValue[0]}setValue(t,i=!1){super.setValue([t],i)}setDefaultValue(t){super.setValue([t])}};PP.EasyTuneInt=class extends PP.EasyTuneNumber{constructor(t,i,s,n,o){super(t,i,s,0,n,o)}};PP.EasyTuneIntArray=class extends PP.EasyTuneNumberArray{constructor(t,i,s,n,o,a){let l=i.slice(0);for(let u=0;u<i.length;u++)l[u]=Math.round(l[u]);super(t,l,s,0,n!=null?Math.round(n):null,o!=null?Math.round(o):o,a)}};PP.EasyTuneBoolArray=class extends PP.EasyTuneVariableArray{constructor(t,i){super(t,PP.EasyTuneVariableType.BOOL,i)}};PP.EasyTuneBool=class extends PP.EasyTuneBoolArray{constructor(t,i){super(t,[i])}getValue(){return this.myValue[0]}setValue(t,i=!1){super.setValue([t],i)}setDefaultValue(t){super.setValue([t])}};PP.EasyTuneTransform=class extends PP.EasyTuneVariable{constructor(t,i,s=!0,n=1,o=50,a=1){super(t,PP.EasyTuneVariableType.TRANSFORM),this.myDecimalPlaces=3,this.myPosition=i.mat4_getPosition(),this.myRotation=i.mat4_getRotationDegrees(),this.myScale=i.mat4_getScale();let l=Math.pow(10,this.myDecimalPlaces);for(let u=0;u<3;u++)this.myScale[u]=Math.max(this.myScale[u],1/l);this.myScaleAsOne=s,this.myPositionStepPerSecond=n,this.myRotationStepPerSecond=o,this.myScaleStepPerSecond=a,this.myDefaultPosition=this.myPosition.vec3_clone(),this.myDefaultRotation=this.myRotation.vec3_clone(),this.myDefaultScale=this.myScale.vec3_clone(),this.myDefaultPositionStepPerSecond=this.myPositionStepPerSecond,this.myDefaultRotationStepPerSecond=this.myRotationStepPerSecond,this.myDefaultScaleStepPerSecond=this.myScaleStepPerSecond,this.myTransform=PP.mat4_create(),this.myTransform.mat4_setPositionRotationDegreesScale(this.myPosition,this.myRotation,this.myScale),this.myTempTransform=PP.mat4_create()}getValue(){return this.myTransform.mat4_setPositionRotationDegreesScale(this.myPosition,this.myRotation,this.myScale),this.myTransform.slice(0)}setValue(t,i=!1){this.myTempTransform.mat4_setPositionRotationDegreesScale(this.myPosition,this.myRotation,this.myScale),t.mat4_getPosition(this.myPosition),t.mat4_getRotationDegrees(this.myRotation),t.mat4_getScale(this.myScale),this.myTransform.mat4_setPositionRotationDegreesScale(this.myPosition,this.myRotation,this.myScale),i&&PP.EasyTuneTransform.prototype.setDefaultValue.call(this,t),PP.refreshEasyTuneWidget(),this.myTempTransform.pp_equals(this.myTransform)||this._triggerValueChangedCallback()}setDefaultValue(t){this.myDefaultPosition=t.mat4_getPosition(),this.myDefaultRotation=t.mat4_getRotationDegrees(),this.myDefaultScale=t.mat4_getScale()}fromJSON(t,i=!1){this.setValue(JSON.parse(t),i)}toJSON(){return this.getValue().vec_toString()}}});var Zn=f(()=>{PP.myEasyTuneVariables=new PP.EasyTuneVariables;PP.myEasyTuneTarget=null;PP.importEasyTuneVariables=function(t=null,i=!1,s=null,n=null){if(t==null||t.length==0)navigator.clipboard&&navigator.clipboard.readText().then(function(o){PP.myEasyTuneVariables.fromJSON(o,i),PP.refreshEasyTuneWidget(),s?.(),console.log("Easy Tune Variables Imported from: clipboard"),console.log(o)},function(){n?.(),console.error("An error occurred while importing the easy tune variables from: clipboard")}).catch(function(o){n?.(),console.error("An error occurred while importing the easy tune variables from: clipboard"),console.error(o)});else{let o=PP._importExportEasyTuneVariablesReplaceFileURLParams(t);fetch(o).then(function(a){a.ok?a.text().then(function(l){PP.myEasyTuneVariables.fromJSON(l,i),PP.refreshEasyTuneWidget(),s?.(),console.log("Easy Tune Variables Imported from:",o),console.log(l)},function(l){n?.(),console.error("An error occurred while importing the easy tune variables from:",o),console.error(l)}):(n?.(),console.error("An error occurred while importing the easy tune variables from:",o),console.error(a))},function(a){n?.(),console.error("An error occurred while importing the easy tune variables from:",o),console.error(a)}).catch(function(a){n?.(),console.error("An error occurred while importing the easy tune variables from:",o),console.error(a)})}PP.refreshEasyTuneWidget()};PP.exportEasyTuneVariables=function(t=null,i=null,s=null){let n=PP.myEasyTuneVariables.toJSON();if(t==null||t.length==0)navigator.clipboard&&navigator.clipboard.writeText(n).then(function(){i?.(),console.log("Easy Tune Variables Exported to: clipboard"),console.log(n)},function(){s?.(),console.error("An error occurred while exporting the easy tune variables to: clipboard")}).catch(function(o){s?.(),console.error("An error occurred while exporting the easy tune variables to: clipboard"),console.error(o)});else{let o=PP._importExportEasyTuneVariablesReplaceFileURLParams(t);fetch(o,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:n}).then(function(a){a.ok?(i?.(),console.log("Easy Tune Variables Exported to:",o),console.log(n)):(s?.(),console.error("An error occurred while exporting the easy tune variables to:",o),console.error(a))},function(a){s?.(),console.error("An error occurred while exporting the easy tune variables to:",o),console.error(a)}).catch(function(a){s?.(),console.error("An error occurred while exporting the easy tune variables to:",o),console.error(a)})}};PP.mySetEasyTuneWidgetActiveVariableCallbacks=[];PP.setEasyTuneWidgetActiveVariable=function(t){for(let i of PP.mySetEasyTuneWidgetActiveVariableCallbacks)i(t)};PP.myRefreshEasyTuneWidgetCallbacks=[];PP.refreshEasyTuneWidget=function(){for(let t of PP.myRefreshEasyTuneWidgetCallbacks)t()};PP._importExportEasyTuneVariablesReplaceFileURLParams=function(t){let i=t.match(/\{.+?\}/g);if(i==null||i.length==0)return t;for(let o=0;o<i.length;o++)i[o]=i[o].replace("{",""),i[o]=i[o].replace("}","");let s=new URL(document.location).searchParams,n=t;for(let o of i){let a=s.get(o);a!=null&&(n=n.replace("{"+o+"}",a))}return n}});var $n=f(()=>{WL.registerComponent("pp-easy-tune",{_myHandedness:{type:WL.Type.Enum,values:["none","left","right"],default:"none"},_myShowOnStart:{type:WL.Type.Bool,default:!1},_myShowVisibilityButton:{type:WL.Type.Bool,default:!1},_myEnableGamepadScrollVariable:{type:WL.Type.Bool,default:!0},_myEnableVariablesImportExportButtons:{type:WL.Type.Bool,default:!1},_myVariablesImportURL:{type:WL.Type.String,default:""},_myVariablesExportURL:{type:WL.Type.String,default:""},_myImportVariablesOnStart:{type:WL.Type.Bool,default:!1},_myResetVariablesDefaultValueOnImport:{type:WL.Type.Bool,default:!1}},{init:function(){this._myWidget=new PP.EasyTuneWidget,PP.mySetEasyTuneWidgetActiveVariableCallbacks.push(function(e){this._myWidget.setActiveVariable(e)}.bind(this)),PP.myRefreshEasyTuneWidgetCallbacks.push(function(){this._myWidget.refresh()}.bind(this)),this._myStarted=!1},start:function(){let e=new PP.EasyTuneWidgetAdditionalSetup;e.myHandedness=[null,"left","right"][this._myHandedness],e.myShowOnStart=this._myShowOnStart,e.myShowVisibilityButton=this._myShowVisibilityButton,e.myEnableAdditionalButtons=!0,e.myEnableGamepadScrollVariable=this._myEnableGamepadScrollVariable,e.myPlaneMaterial=PP.myDefaultResources.myMaterials.myFlatOpaque.clone(),e.myTextMaterial=PP.myDefaultResources.myMaterials.myText.clone(),e.myEnableVariablesImportExportButtons=this._myEnableVariablesImportExportButtons,e.myVariablesImportCallback=function(t,i){PP.importEasyTuneVariables(this._myVariablesImportURL,this._myResetVariablesDefaultValueOnImport,t,i)}.bind(this),e.myVariablesExportCallback=function(t,i){PP.exportEasyTuneVariables(this._myVariablesExportURL,t,i)}.bind(this),this._myWidget.start(this.object,e,PP.myEasyTuneVariables),this._myWidgetVisibleBackup=this._myWidget.isVisible(),this._mySetVisibleNextUpdate=!1,this._myStarted=!0,this._myFirstUpdate=!0},update:function(e){this._myFirstUpdate&&(this._myFirstUpdate=!1,this._myImportVariablesOnStart&&PP.importEasyTuneVariables(this._myVariablesImportURL,this._myResetVariablesDefaultValueOnImport)),this._mySetVisibleNextUpdate&&(this._mySetVisibleNextUpdate=!1,this._myWidget.setVisible(!1),this._myWidget.setVisible(this._myWidgetVisibleBackup)),this._myWidget.update(e)},onActivate(){this._mySetVisibleNextUpdate=!0},onDeactivate(){this._myStarted&&(this._myWidgetVisibleBackup=this._myWidget.isVisible(),this._myWidget.setVisible(!1))}})});var to=f(()=>{WL.registerComponent("pp-easy-tune-import-variables",{_myVariablesImportURL:{type:WL.Type.String,default:""},_myResetVariablesDefaultValueOnImport:{type:WL.Type.Bool,default:!0}},{init:function(){},start:function(){this._myFirstUpdate=!0},update:function(e){this._myFirstUpdate&&(this._myFirstUpdate=!1,PP.importEasyTuneVariables(this._myVariablesImportURL,this._myResetVariablesDefaultValueOnImport))}})});var eo=f(()=>{PP.WidgetFrameSetup=class{constructor(t,i){this._initializeBuildSetup(t,i),this._initializeRuntimeSetup()}_initializeBuildSetup(t,i){this.myBackgroundColor=[46/255,46/255,46/255,1],this.myCursorTargetCollisionCollider=2,this.myCursorTargetCollisionGroup=7,this.myCursorTargetCollisionThickness=.001,this.myDefaultTextColor=[255/255,255/255,255/255,1],this.myTextAlignment=2,this.myTextJustification=2,this.myTextColor=this.myDefaultTextColor,this.myButtonTextScale=PP.vec3_create(.18,.18,.18),this.myVisibilityButtonBackgroundScale=PP.vec3_create(.015,.015,1),this.myVisibilityButtonTextPosition=PP.vec3_create(0,0,.007),this.myVisibilityButtonTextScale=this.myButtonTextScale;let s=.01,n=this.myVisibilityButtonBackgroundScale[0]*(2*i)+s*i;this.myVisibilityButtonPosition=[],this.myVisibilityButtonPosition[PP.ToolHandedness.NONE]={},this.myVisibilityButtonPosition[PP.ToolHandedness.NONE].myPosition=[-.3+n,-.205,.035],this.myVisibilityButtonPosition[PP.ToolHandedness.LEFT]={},this.myVisibilityButtonPosition[PP.ToolHandedness.LEFT].myPosition=[-.2+n,.025,.015],this.myVisibilityButtonPosition[PP.ToolHandedness.RIGHT]={},this.myVisibilityButtonPosition[PP.ToolHandedness.RIGHT].myPosition=[.2-n,.025,.015],this.myVisibilityButtonText=t,this.myVisibilityButtonCursorTargetPosition=PP.vec3_create(0,0,0),this.myVisibilityButtonCursorTargetPosition[2]=this.myVisibilityButtonTextPosition[2],this.myVisibilityButtonCollisionExtents=this.myVisibilityButtonBackgroundScale.slice(0),this.myVisibilityButtonCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myFlagButtonBackgroundScale=PP.vec3_create(.0125,.0125,1),this.myFlagButtonTextPosition=PP.vec3_create(0,0,.007),this.myFlagButtonTextScale=PP.vec3_create(.15,.15,.15);let o=.0075,a=0,l=this.myVisibilityButtonBackgroundScale[1]+this.myFlagButtonBackgroundScale[1]+o+this.myFlagButtonBackgroundScale[1]*(2*a)+o*a;this.myPinButtonPosition=[],this.myPinButtonPosition[PP.ToolHandedness.NONE]={},this.myPinButtonPosition[PP.ToolHandedness.NONE].myPosition=this.myVisibilityButtonPosition[PP.ToolHandedness.NONE].myPosition.slice(0),this.myPinButtonPosition[PP.ToolHandedness.NONE].myPosition[1]+=l,this.myPinButtonPosition[PP.ToolHandedness.LEFT]={},this.myPinButtonPosition[PP.ToolHandedness.LEFT].myPosition=this.myVisibilityButtonPosition[PP.ToolHandedness.LEFT].myPosition.slice(0),this.myPinButtonPosition[PP.ToolHandedness.LEFT].myPosition[1]+=l,this.myPinButtonPosition[PP.ToolHandedness.RIGHT]={},this.myPinButtonPosition[PP.ToolHandedness.RIGHT].myPosition=this.myVisibilityButtonPosition[PP.ToolHandedness.RIGHT].myPosition.slice(0),this.myPinButtonPosition[PP.ToolHandedness.RIGHT].myPosition[1]+=l,this.myPinButtonText="P",this.myPinButtonCursorTargetPosition=PP.vec3_create(0,0,0),this.myPinButtonCursorTargetPosition[2]=this.myFlagButtonTextPosition[2],this.myPinButtonCollisionExtents=this.myFlagButtonBackgroundScale.slice(0),this.myPinButtonCollisionExtents[2]=this.myCursorTargetCollisionThickness}_initializeRuntimeSetup(){this._initializeObjectsTransforms(),this.myButtonHoverColor=[150/255,150/255,150/255,1],this.myButtonDisabledTextColor=this.myBackgroundColor,this.myButtonDisabledBackgroundColor=[110/255,110/255,110/255,1]}_initializeObjectsTransforms(){this.myPivotObjectTransforms=this._createDefaultObjectTransforms(),this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.LEFT].myRotation=PP.quat_create(-.645,.425,.25,.584),this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.LEFT].myRotation.quat_normalize(this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.LEFT].myRotation),this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.RIGHT].myRotation=PP.quat_create(-.645,-.425,-.25,.584),this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.RIGHT].myRotation.quat_normalize(this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.RIGHT].myRotation),this.myPivotObjectTransforms[PP.ToolInputSourceType.TRACKED_HAND][PP.ToolHandedness.LEFT].myRotation=PP.quat_create(-.645,.425,.25,.584),this.myPivotObjectTransforms[PP.ToolInputSourceType.TRACKED_HAND][PP.ToolHandedness.LEFT].myRotation.quat_normalize(this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.LEFT].myRotation),this.myPivotObjectTransforms[PP.ToolInputSourceType.TRACKED_HAND][PP.ToolHandedness.RIGHT].myRotation=PP.quat_create(-.645,-.425,-.25,.584),this.myPivotObjectTransforms[PP.ToolInputSourceType.TRACKED_HAND][PP.ToolHandedness.RIGHT].myRotation.quat_normalize(this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.RIGHT].myRotation),this.myWidgetObjectTransforms=this._createDefaultObjectTransforms(),this.myWidgetObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.LEFT].myPosition=PP.vec3_create(.1,.23,-.02),this.myWidgetObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.RIGHT].myPosition=PP.vec3_create(.07,.23,-.02),this.myWidgetObjectTransforms[PP.ToolInputSourceType.TRACKED_HAND][PP.ToolHandedness.LEFT].myPosition=PP.vec3_create(.1,.23,-.02),this.myWidgetObjectTransforms[PP.ToolInputSourceType.TRACKED_HAND][PP.ToolHandedness.RIGHT].myPosition=PP.vec3_create(.07,.23,-.02),this._myPivotObjectDistanceFromNonVRHead=.6}_createDefaultObjectTransforms(){let t=[];for(let i in PP.ToolInputSourceType){let s=PP.ToolInputSourceType[i];t[s]=[];for(let n in PP.ToolHandedness){let o=PP.ToolHandedness[n];t[s][o]={},t[s][o].myPosition=PP.vec3_create(0,0,0),t[s][o].myRotation=PP.quat_create(0,0,0,1)}}return t}}});var io=f(()=>{PP.WidgetFrameUI=class{constructor(){this._myInputSourceType=null,this._myParentObject=null,this._myIsPinned=!1,this._myWidgetVisible=!0,this._myVisibilityButtonVisible=!0}build(t,i,s){this._myParentObject=t,this._mySetup=i,this._myAdditionalSetup=s,this._myPlaneMesh=PP.MeshUtils.createPlaneMesh(),this._createSkeleton(),this._setTransforms(),this._addComponents(),this._setTransformForNonVR(),WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))}setWidgetVisible(t){this._myWidgetVisible=t,this.myFlagsButtonPanel.pp_setActiveHierarchy(t),t&&this._updateObjectsTransforms(!0)}setVisibilityButtonVisible(t){this._myVisibilityButtonVisible=t,this.myVisibilityButtonPanel.pp_setActiveHierarchy(t)}setPinned(t){t!=this._myIsPinned&&(this._myIsPinned=t,this._myIsPinned?this.myPivotObject.pp_setParent(null):(this.myPivotObject.pp_setParent(this.myFixForwardObject),PP.XRUtils.isSessionActive()||this._setTransformForNonVR(),this._updateObjectsTransforms(!0)))}update(t){this._updateObjectsTransforms(!1)}_updateObjectsTransforms(t){if(PP.XRUtils.isSessionActive()){let i=PP.InputUtils.getInputSourceTypeByHandedness(this._myAdditionalSetup.myHandedness);(i!=this._myInputSourceType||t)&&(this._myInputSourceType=i,this._myIsPinned||(this.myPivotObject.setTranslationLocal(this._mySetup.myPivotObjectTransforms[this._myInputSourceType][this._myAdditionalSetup.myHandedness].myPosition),this.myPivotObject.resetRotation(),this.myPivotObject.rotateObject(this._mySetup.myPivotObjectTransforms[this._myInputSourceType][this._myAdditionalSetup.myHandedness].myRotation),this.myWidgetObject.setTranslationLocal(this._mySetup.myWidgetObjectTransforms[this._myInputSourceType][this._myAdditionalSetup.myHandedness].myPosition),this.myWidgetObject.resetRotation(),this.myWidgetObject.rotateObject(this._mySetup.myWidgetObjectTransforms[this._myInputSourceType][this._myAdditionalSetup.myHandedness].myRotation),this.myVisibilityButtonPanel.setTranslationLocal(this._mySetup.myVisibilityButtonPosition[this._myAdditionalSetup.myHandedness].myPosition),this.myPinButtonPanel.setTranslationLocal(this._mySetup.myPinButtonPosition[this._myAdditionalSetup.myHandedness].myPosition)))}else this.myVisibilityButtonPanel.pp_setActiveHierarchy(this._myWidgetVisible||this._myVisibilityButtonVisible)}_createSkeleton(){this.myFixForwardObject=WL.scene.addObject(this._myParentObject),this.myFixForwardObject.pp_rotateObject(PP.vec3_create(0,180,0)),this.myPivotObject=WL.scene.addObject(this.myFixForwardObject),this.myWidgetObject=WL.scene.addObject(this.myPivotObject),this.myVisibilityButtonPanel=WL.scene.addObject(this.myPivotObject),this.myVisibilityButtonBackground=WL.scene.addObject(this.myVisibilityButtonPanel),this.myVisibilityButtonText=WL.scene.addObject(this.myVisibilityButtonPanel),this.myVisibilityButtonCursorTarget=WL.scene.addObject(this.myVisibilityButtonPanel),this.myFlagsButtonPanel=WL.scene.addObject(this.myPivotObject),this.myPinButtonPanel=WL.scene.addObject(this.myFlagsButtonPanel),this.myPinButtonBackground=WL.scene.addObject(this.myPinButtonPanel),this.myPinButtonText=WL.scene.addObject(this.myPinButtonPanel),this.myPinButtonCursorTarget=WL.scene.addObject(this.myPinButtonPanel),this.myNonVRParentObject=WL.scene.addObject(PP.myPlayerObjects.myNonVRCamera),this.myNonVRParentObject.pp_translateLocal(PP.vec3_create(0,0,-this._mySetup._myPivotObjectDistanceFromNonVRHead)),this.myNonVRParentObject.pp_lookToLocal(PP.vec3_create(0,0,1),PP.vec3_create(0,1,0))}_setTransforms(){this.myPivotObject.setDirty(),this.myVisibilityButtonPanel.setTranslationLocal(this._mySetup.myVisibilityButtonPosition[this._myAdditionalSetup.myHandedness].myPosition),this.myVisibilityButtonBackground.scale(this._mySetup.myVisibilityButtonBackgroundScale),this.myVisibilityButtonText.setTranslationLocal(this._mySetup.myVisibilityButtonTextPosition),this.myVisibilityButtonText.scale(this._mySetup.myVisibilityButtonTextScale),this.myVisibilityButtonCursorTarget.setTranslationLocal(this._mySetup.myVisibilityButtonCursorTargetPosition),this.myPinButtonPanel.setTranslationLocal(this._mySetup.myPinButtonPosition[this._myAdditionalSetup.myHandedness].myPosition),this.myPinButtonBackground.scale(this._mySetup.myFlagButtonBackgroundScale),this.myPinButtonText.setTranslationLocal(this._mySetup.myFlagButtonTextPosition),this.myPinButtonText.scale(this._mySetup.myFlagButtonTextScale),this.myPinButtonCursorTarget.setTranslationLocal(this._mySetup.myPinButtonCursorTargetPosition)}_addComponents(){this.myVisibilityButtonBackgroundComponent=this.myVisibilityButtonBackground.addComponent("mesh"),this.myVisibilityButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myVisibilityButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myVisibilityButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myVisibilityButtonTextComponent=this.myVisibilityButtonText.addComponent("text"),this._setupButtonTextComponent(this.myVisibilityButtonTextComponent),this.myVisibilityButtonTextComponent.text=this._mySetup.myVisibilityButtonText,this.myVisibilityButtonCursorTargetComponent=this.myVisibilityButtonCursorTarget.addComponent("cursor-target"),this.myVisibilityButtonCollisionComponent=this.myVisibilityButtonCursorTarget.addComponent("collision"),this.myVisibilityButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myVisibilityButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myVisibilityButtonCollisionComponent.extents=this._mySetup.myVisibilityButtonCollisionExtents,this.myPinButtonBackgroundComponent=this.myPinButtonBackground.addComponent("mesh"),this.myPinButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPinButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPinButtonBackgroundComponent.material.color=this._mySetup.myButtonDisabledBackgroundColor,this.myPinButtonTextComponent=this.myPinButtonText.addComponent("text"),this._setupButtonTextComponent(this.myPinButtonTextComponent),this.myPinButtonTextComponent.material.color=this._mySetup.myButtonDisabledTextColor,this.myPinButtonTextComponent.text=this._mySetup.myPinButtonText,this.myPinButtonCursorTargetComponent=this.myPinButtonCursorTarget.addComponent("cursor-target"),this.myPinButtonCollisionComponent=this.myPinButtonCursorTarget.addComponent("collision"),this.myPinButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPinButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPinButtonCollisionComponent.extents=this._mySetup.myPinButtonCollisionExtents}_setupButtonTextComponent(t){t.alignment=this._mySetup.myTextAlignment,t.justification=this._mySetup.myTextJustification,t.material=this._myAdditionalSetup.myTextMaterial.clone(),t.material.color=this._mySetup.myTextColor,t.text=""}_onXRSessionStart(){this.myVisibilityButtonPanel.pp_setActiveHierarchy(this._myVisibilityButtonVisible),this._setTransformForVR()}_onXRSessionEnd(){this._setTransformForNonVR()}_setTransformForVR(){this.myFixForwardObject.pp_setParent(this._myParentObject),this.myFixForwardObject.pp_resetTransformLocal(),this.myFixForwardObject.pp_rotateObject(PP.vec3_create(0,180,0)),this._updateObjectsTransforms(!0)}_setTransformForNonVR(){this._myIsPinned||(this.myFixForwardObject.pp_setParent(this.myNonVRParentObject),this.myFixForwardObject.pp_resetTransformLocal(),this.myPivotObject.setTranslationLocal(this._mySetup.myPivotObjectTransforms[PP.ToolInputSourceType.NONE][PP.ToolHandedness.NONE].myPosition),this.myPivotObject.resetRotation(),this.myPivotObject.rotateObject(this._mySetup.myPivotObjectTransforms[PP.ToolInputSourceType.NONE][PP.ToolHandedness.NONE].myRotation),this.myWidgetObject.setTranslationLocal(this._mySetup.myWidgetObjectTransforms[PP.ToolInputSourceType.NONE][PP.ToolHandedness.NONE].myPosition),this.myWidgetObject.resetRotation(),this.myWidgetObject.rotateObject(this._mySetup.myWidgetObjectTransforms[PP.ToolInputSourceType.NONE][PP.ToolHandedness.NONE].myRotation),this.myVisibilityButtonPanel.setTranslationLocal(this._mySetup.myVisibilityButtonPosition[PP.ToolHandedness.NONE].myPosition),this.myPinButtonPanel.setTranslationLocal(this._mySetup.myPinButtonPosition[PP.ToolHandedness.NONE].myPosition))}}});var so=f(()=>{PP.WidgetFrame=class{constructor(t,i){this.myIsWidgetVisible=!0,this.myIsPinned=!1,this._mySetup=new PP.WidgetFrameSetup(t,i),this._myAdditionalSetup=null,this._myUI=new PP.WidgetFrameUI,this._myShowVisibilityButton=!1,this._myWidgetVisibleChangedCallbacks=new Map,this._myPinChangedCallbacks=new Map}getWidgetObject(){return this._myUI.myWidgetObject}setVisible(t){this.myIsWidgetVisible=!t,this._toggleVisibility(!1,!0)}isVisible(){return this.myIsWidgetVisible}toggleVisibility(){this._toggleVisibility(!1,!0)}togglePin(){this._togglePin(!1)}registerWidgetVisibleChangedEventListener(t,i){this._myWidgetVisibleChangedCallbacks.set(t,i)}unregisterWidgetVisibleChangedEventListener(t){this._myWidgetVisibleChangedCallbacks.delete(t)}registerPinChangedEventListener(t,i){this._myPinChangedCallbacks.set(t,i)}unregisterPinChangedEventListener(t){this._myPinChangedCallbacks.delete(t)}start(t,i){this._myAdditionalSetup=i,this._myUI.build(t,this._mySetup,i),this._myUI.setVisibilityButtonVisible(i.myShowVisibilityButton),this._myShowVisibilityButton=i.myShowVisibilityButton,i.myShowOnStart||this._toggleVisibility(!1,!1),this._addListeners()}update(t){this._myUI.update(t)}_addListeners(){let t=this._myUI;t.myPinButtonCursorTargetComponent.addClickFunction(this._togglePin.bind(this,!0)),t.myPinButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPinButtonBackgroundComponent.material)),t.myPinButtonCursorTargetComponent.addUnHoverFunction(this._pinUnHover.bind(this,t.myPinButtonBackgroundComponent.material)),t.myVisibilityButtonCursorTargetComponent.addClickFunction(this._toggleVisibility.bind(this,!0,!0)),t.myVisibilityButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myVisibilityButtonBackgroundComponent.material)),t.myVisibilityButtonCursorTargetComponent.addUnHoverFunction(this._visibilityUnHover.bind(this,t.myVisibilityButtonBackgroundComponent.material))}_toggleVisibility(t,i){this.myIsWidgetVisible=!this.myIsWidgetVisible,this._myUI.setWidgetVisible(this.myIsWidgetVisible);let s=this._myUI.myVisibilityButtonTextComponent.material,n=this._myUI.myVisibilityButtonBackgroundComponent.material;if(this.myIsWidgetVisible?(s.color=this._mySetup.myDefaultTextColor,t||(n.color=this._mySetup.myBackgroundColor)):(s.color=this._mySetup.myButtonDisabledTextColor,t||(n.color=this._mySetup.myButtonDisabledBackgroundColor)),i)for(let o of this._myWidgetVisibleChangedCallbacks.values())o(this.myIsWidgetVisible);this._myUI.setVisibilityButtonVisible(this._myShowVisibilityButton)}_togglePin(t){if(this.myIsWidgetVisible){this.myIsPinned=!this.myIsPinned,this._myUI.setPinned(this.myIsPinned);let i=this._myUI.myPinButtonTextComponent.material,s=this._myUI.myPinButtonBackgroundComponent.material;this.myIsPinned?(i.color=this._mySetup.myDefaultTextColor,t||(s.color=this._mySetup.myBackgroundColor)):(i.color=this._mySetup.myButtonDisabledTextColor,t||(s.color=this._mySetup.myButtonDisabledBackgroundColor));for(let n of this._myPinChangedCallbacks.values())n(this.myIsPinned)}}_genericHover(t){t.color=this._mySetup.myButtonHoverColor}_visibilityUnHover(t){this.myIsWidgetVisible?t.color=this._mySetup.myBackgroundColor:t.color=this._mySetup.myButtonDisabledBackgroundColor}_pinUnHover(t){this.myIsPinned?t.color=this._mySetup.myBackgroundColor:t.color=this._mySetup.myButtonDisabledBackgroundColor}}});ne();Xe();Ke();Je();Ye();Ze();$e();ti();ei();ii();di();Pi();gi();Ti();Ci();Si();vi();xi();Bi();Li();Ii();Ai();Mi();Vi();Di();Ri();Ei();Oi();Wi();wi();Fi();ji();ki();Hi();Ni();Ui();qi();Gi();zi();Qi();Xi();Ki();Ji();Yi();Zi();$i();ts();es();is();ss();ns();os();as();rs();ls();ms();us();cs();ys();hs();ps();_s();ds();Ps();fs();gs();Ts();bs();Cs();Ss();vs();xs();Bs();Ls();Is();As();Ms();Vs();Ds();Rs();Es();Os();Ws();ws();Fs();js();ks();Hs();Ns();Us();qs();Gs();zs();Qs();Xs();Ks();Js();Ys();Zs();$s();tn();en();sn();nn();on();an();rn();ln();mn();un();cn();yn();hn();pn();_n();dn();Pn();fn();gn();Tn();bn();Cn();Sn();vn();xn();Bn();Ln();In();An();Mn();Vn();Dn();Rn();En();On();Wn();wn();Fn();jn();kn();Hn();Nn();Un();qn();Gn();zn();Qn();Xn();Kn();Jn();Yn();Zn();$n();to();eo();io();so();})();
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
//# sourceMappingURL=wle_pp_bundle.js.map
